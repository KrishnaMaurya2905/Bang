var NO=Object.defineProperty;var CO=(n,e,t)=>e in n?NO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fo=(n,e,t)=>(CO(n,typeof e!="symbol"?e+"":e,t),t);function bO(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function yC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xC={exports:{}},qg={},SC={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf=Symbol.for("react.element"),RO=Symbol.for("react.portal"),PO=Symbol.for("react.fragment"),LO=Symbol.for("react.strict_mode"),IO=Symbol.for("react.profiler"),DO=Symbol.for("react.provider"),OO=Symbol.for("react.context"),UO=Symbol.for("react.forward_ref"),FO=Symbol.for("react.suspense"),VO=Symbol.for("react.memo"),kO=Symbol.for("react.lazy"),WT=Symbol.iterator;function zO(n){return n===null||typeof n!="object"?null:(n=WT&&n[WT]||n["@@iterator"],typeof n=="function"?n:null)}var TC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MC=Object.assign,wC={};function mh(n,e,t){this.props=n,this.context=e,this.refs=wC,this.updater=t||TC}mh.prototype.isReactComponent={};mh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};mh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function EC(){}EC.prototype=mh.prototype;function mS(n,e,t){this.props=n,this.context=e,this.refs=wC,this.updater=t||TC}var gS=mS.prototype=new EC;gS.constructor=mS;MC(gS,mh.prototype);gS.isPureReactComponent=!0;var jT=Array.isArray,AC=Object.prototype.hasOwnProperty,vS={current:null},NC={key:!0,ref:!0,__self:!0,__source:!0};function CC(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)AC.call(e,i)&&!NC.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Nf,type:n,key:r,ref:o,props:s,_owner:vS.current}}function BO(n,e){return{$$typeof:Nf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function _S(n){return typeof n=="object"&&n!==null&&n.$$typeof===Nf}function HO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var XT=/\/+/g;function K0(n,e){return typeof n=="object"&&n!==null&&n.key!=null?HO(""+n.key):e.toString(36)}function om(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Nf:case RO:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+K0(o,0):i,jT(s)?(t="",n!=null&&(t=n.replace(XT,"$&/")+"/"),om(s,e,t,"",function(c){return c})):s!=null&&(_S(s)&&(s=BO(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(XT,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",jT(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+K0(r,a);o+=om(r,e,t,l,s)}else if(l=zO(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+K0(r,a++),o+=om(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jf(n,e,t){if(n==null)return n;var i=[],s=0;return om(n,i,"","",function(r){return e.call(t,r,s++)}),i}function GO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ns={current:null},am={transition:null},WO={ReactCurrentDispatcher:ns,ReactCurrentBatchConfig:am,ReactCurrentOwner:vS};function bC(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:Jf,forEach:function(n,e,t){Jf(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Jf(n,function(){e++}),e},toArray:function(n){return Jf(n,function(e){return e})||[]},only:function(n){if(!_S(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};wt.Component=mh;wt.Fragment=PO;wt.Profiler=IO;wt.PureComponent=mS;wt.StrictMode=LO;wt.Suspense=FO;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WO;wt.act=bC;wt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=MC({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=vS.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)AC.call(e,l)&&!NC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Nf,type:n.type,key:s,ref:r,props:i,_owner:o}};wt.createContext=function(n){return n={$$typeof:OO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:DO,_context:n},n.Consumer=n};wt.createElement=CC;wt.createFactory=function(n){var e=CC.bind(null,n);return e.type=n,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(n){return{$$typeof:UO,render:n}};wt.isValidElement=_S;wt.lazy=function(n){return{$$typeof:kO,_payload:{_status:-1,_result:n},_init:GO}};wt.memo=function(n,e){return{$$typeof:VO,type:n,compare:e===void 0?null:e}};wt.startTransition=function(n){var e=am.transition;am.transition={};try{n()}finally{am.transition=e}};wt.unstable_act=bC;wt.useCallback=function(n,e){return ns.current.useCallback(n,e)};wt.useContext=function(n){return ns.current.useContext(n)};wt.useDebugValue=function(){};wt.useDeferredValue=function(n){return ns.current.useDeferredValue(n)};wt.useEffect=function(n,e){return ns.current.useEffect(n,e)};wt.useId=function(){return ns.current.useId()};wt.useImperativeHandle=function(n,e,t){return ns.current.useImperativeHandle(n,e,t)};wt.useInsertionEffect=function(n,e){return ns.current.useInsertionEffect(n,e)};wt.useLayoutEffect=function(n,e){return ns.current.useLayoutEffect(n,e)};wt.useMemo=function(n,e){return ns.current.useMemo(n,e)};wt.useReducer=function(n,e,t){return ns.current.useReducer(n,e,t)};wt.useRef=function(n){return ns.current.useRef(n)};wt.useState=function(n){return ns.current.useState(n)};wt.useSyncExternalStore=function(n,e,t){return ns.current.useSyncExternalStore(n,e,t)};wt.useTransition=function(){return ns.current.useTransition()};wt.version="18.3.1";SC.exports=wt;var z=SC.exports;const us=yC(z),jO=bO({__proto__:null,default:us},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XO=z,$O=Symbol.for("react.element"),qO=Symbol.for("react.fragment"),YO=Object.prototype.hasOwnProperty,KO=XO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZO={key:!0,ref:!0,__self:!0,__source:!0};function RC(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)YO.call(e,i)&&!ZO.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:$O,type:n,key:r,ref:o,props:s,_owner:KO.current}}qg.Fragment=qO;qg.jsx=RC;qg.jsxs=RC;xC.exports=qg;var b=xC.exports,J_={},PC={exports:{}},Hs={},LC={exports:{}},IC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,ie){var R=D.length;D.push(ie);e:for(;0<R;){var ce=R-1>>>1,Pe=D[ce];if(0<s(Pe,ie))D[ce]=ie,D[R]=Pe,R=ce;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var ie=D[0],R=D.pop();if(R!==ie){D[0]=R;e:for(var ce=0,Pe=D.length,ut=Pe>>>1;ce<ut;){var te=2*(ce+1)-1,he=D[te],Te=te+1,ge=D[Te];if(0>s(he,R))Te<Pe&&0>s(ge,he)?(D[ce]=ge,D[Te]=R,ce=Te):(D[ce]=he,D[te]=R,ce=te);else if(Te<Pe&&0>s(ge,R))D[ce]=ge,D[Te]=R,ce=Te;else break e}}return ie}function s(D,ie){var R=D.sortIndex-ie.sortIndex;return R!==0?R:D.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var ie=t(c);ie!==null;){if(ie.callback===null)i(c);else if(ie.startTime<=D)i(c),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(c)}}function x(D){if(m=!1,_(D),!g)if(t(l)!==null)g=!0,j(E);else{var ie=t(c);ie!==null&&Z(x,ie.startTime-D)}}function E(D,ie){g=!1,m&&(m=!1,p(A),A=-1),f=!0;var R=d;try{for(_(ie),h=t(l);h!==null&&(!(h.expirationTime>ie)||D&&!P());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,d=h.priorityLevel;var Pe=ce(h.expirationTime<=ie);ie=n.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===t(l)&&i(l),_(ie)}else i(l);h=t(l)}if(h!==null)var ut=!0;else{var te=t(c);te!==null&&Z(x,te.startTime-ie),ut=!1}return ut}finally{h=null,d=R,f=!1}}var w=!1,T=null,A=-1,M=5,S=-1;function P(){return!(n.unstable_now()-S<M)}function F(){if(T!==null){var D=n.unstable_now();S=D;var ie=!0;try{ie=T(!0,D)}finally{ie?H():(w=!1,T=null)}}else w=!1}var H;if(typeof y=="function")H=function(){y(F)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,K=ee.port2;ee.port1.onmessage=F,H=function(){K.postMessage(null)}}else H=function(){v(F,0)};function j(D){T=D,w||(w=!0,H())}function Z(D,ie){A=v(function(){D(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){g||f||(g=!0,j(E))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(d){case 1:case 2:case 3:var ie=3;break;default:ie=d}var R=d;d=ie;try{return D()}finally{d=R}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,ie){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var R=d;d=D;try{return ie()}finally{d=R}},n.unstable_scheduleCallback=function(D,ie,R){var ce=n.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?ce+R:ce):R=ce,D){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=R+Pe,D={id:u++,callback:ie,priorityLevel:D,startTime:R,expirationTime:Pe,sortIndex:-1},R>ce?(D.sortIndex=R,e(c,D),t(l)===null&&D===t(c)&&(m?(p(A),A=-1):m=!0,Z(x,R-ce))):(D.sortIndex=Pe,e(l,D),g||f||(g=!0,j(E))),D},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(D){var ie=d;return function(){var R=d;d=ie;try{return D.apply(this,arguments)}finally{d=R}}}})(IC);LC.exports=IC;var QO=LC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JO=z,Vs=QO;function xe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DC=new Set,Bd={};function mc(n,e){Bu(n,e),Bu(n+"Capture",e)}function Bu(n,e){for(Bd[n]=e,n=0;n<e.length;n++)DC.add(e[n])}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ey=Object.prototype.hasOwnProperty,eU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$T={},qT={};function tU(n){return ey.call(qT,n)?!0:ey.call($T,n)?!1:eU.test(n)?qT[n]=!0:($T[n]=!0,!1)}function nU(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function iU(n,e,t,i){if(e===null||typeof e>"u"||nU(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function is(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ti[n]=new is(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ti[e]=new is(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ti[n]=new is(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ti[n]=new is(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ti[n]=new is(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ti[n]=new is(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ti[n]=new is(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ti[n]=new is(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ti[n]=new is(n,5,!1,n.toLowerCase(),null,!1,!1)});var yS=/[\-:]([a-z])/g;function xS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yS,xS);Ti[e]=new is(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yS,xS);Ti[e]=new is(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yS,xS);Ti[e]=new is(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ti[n]=new is(n,1,!1,n.toLowerCase(),null,!1,!1)});Ti.xlinkHref=new is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ti[n]=new is(n,1,!1,n.toLowerCase(),null,!0,!0)});function SS(n,e,t,i){var s=Ti.hasOwnProperty(e)?Ti[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iU(e,t,s,i)&&(t=null),i||s===null?tU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Yo=JO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ep=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),TS=Symbol.for("react.strict_mode"),ty=Symbol.for("react.profiler"),OC=Symbol.for("react.provider"),UC=Symbol.for("react.context"),MS=Symbol.for("react.forward_ref"),ny=Symbol.for("react.suspense"),iy=Symbol.for("react.suspense_list"),wS=Symbol.for("react.memo"),aa=Symbol.for("react.lazy"),FC=Symbol.for("react.offscreen"),YT=Symbol.iterator;function Ph(n){return n===null||typeof n!="object"?null:(n=YT&&n[YT]||n["@@iterator"],typeof n=="function"?n:null)}var An=Object.assign,Z0;function Qh(n){if(Z0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Z0=e&&e[1]||""}return`
`+Z0+n}var Q0=!1;function J0(n,e){if(!n||Q0)return"";Q0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Q0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Qh(n):""}function sU(n){switch(n.tag){case 5:return Qh(n.type);case 16:return Qh("Lazy");case 13:return Qh("Suspense");case 19:return Qh("SuspenseList");case 0:case 2:case 15:return n=J0(n.type,!1),n;case 11:return n=J0(n.type.render,!1),n;case 1:return n=J0(n.type,!0),n;default:return""}}function sy(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kc:return"Fragment";case Yc:return"Portal";case ty:return"Profiler";case TS:return"StrictMode";case ny:return"Suspense";case iy:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case UC:return(n.displayName||"Context")+".Consumer";case OC:return(n._context.displayName||"Context")+".Provider";case MS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wS:return e=n.displayName||null,e!==null?e:sy(n.type)||"Memo";case aa:e=n._payload,n=n._init;try{return sy(n(e))}catch{}}return null}function rU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sy(e);case 8:return e===TS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ha(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function VC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oU(n){var e=VC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function tp(n){n._valueTracker||(n._valueTracker=oU(n))}function kC(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=VC(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Um(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ry(n,e){var t=e.checked;return An({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function KT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ha(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zC(n,e){e=e.checked,e!=null&&SS(n,"checked",e,!1)}function oy(n,e){zC(n,e);var t=Ha(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ay(n,e.type,t):e.hasOwnProperty("defaultValue")&&ay(n,e.type,Ha(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function ZT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ay(n,e,t){(e!=="number"||Um(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Jh=Array.isArray;function yu(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ha(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function ly(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return An({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function QT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(xe(92));if(Jh(t)){if(1<t.length)throw Error(xe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ha(t)}}function BC(n,e){var t=Ha(e.value),i=Ha(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function JT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function HC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cy(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?HC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var np,GC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(np=np||document.createElement("div"),np.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=np.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Hd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var hd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aU=["Webkit","ms","Moz","O"];Object.keys(hd).forEach(function(n){aU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),hd[e]=hd[n]})});function WC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||hd.hasOwnProperty(n)&&hd[n]?(""+e).trim():e+"px"}function jC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=WC(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var lU=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uy(n,e){if(e){if(lU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function hy(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dy=null;function ES(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fy=null,xu=null,Su=null;function eM(n){if(n=Rf(n)){if(typeof fy!="function")throw Error(xe(280));var e=n.stateNode;e&&(e=Jg(e),fy(n.stateNode,n.type,e))}}function XC(n){xu?Su?Su.push(n):Su=[n]:xu=n}function $C(){if(xu){var n=xu,e=Su;if(Su=xu=null,eM(n),e)for(n=0;n<e.length;n++)eM(e[n])}}function qC(n,e){return n(e)}function YC(){}var ev=!1;function KC(n,e,t){if(ev)return n(e,t);ev=!0;try{return qC(n,e,t)}finally{ev=!1,(xu!==null||Su!==null)&&(YC(),$C())}}function Gd(n,e){var t=n.stateNode;if(t===null)return null;var i=Jg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(xe(231,e,typeof t));return t}var py=!1;if(Bo)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){py=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{py=!1}function cU(n,e,t,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var dd=!1,Fm=null,Vm=!1,my=null,uU={onError:function(n){dd=!0,Fm=n}};function hU(n,e,t,i,s,r,o,a,l){dd=!1,Fm=null,cU.apply(uU,arguments)}function dU(n,e,t,i,s,r,o,a,l){if(hU.apply(this,arguments),dd){if(dd){var c=Fm;dd=!1,Fm=null}else throw Error(xe(198));Vm||(Vm=!0,my=c)}}function gc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ZC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function tM(n){if(gc(n)!==n)throw Error(xe(188))}function fU(n){var e=n.alternate;if(!e){if(e=gc(n),e===null)throw Error(xe(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return tM(s),n;if(r===i)return tM(s),e;r=r.sibling}throw Error(xe(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(xe(189))}}if(t.alternate!==i)throw Error(xe(190))}if(t.tag!==3)throw Error(xe(188));return t.stateNode.current===t?n:e}function QC(n){return n=fU(n),n!==null?JC(n):null}function JC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=JC(n);if(e!==null)return e;n=n.sibling}return null}var eb=Vs.unstable_scheduleCallback,nM=Vs.unstable_cancelCallback,pU=Vs.unstable_shouldYield,mU=Vs.unstable_requestPaint,On=Vs.unstable_now,gU=Vs.unstable_getCurrentPriorityLevel,AS=Vs.unstable_ImmediatePriority,tb=Vs.unstable_UserBlockingPriority,km=Vs.unstable_NormalPriority,vU=Vs.unstable_LowPriority,nb=Vs.unstable_IdlePriority,Yg=null,eo=null;function _U(n){if(eo&&typeof eo.onCommitFiberRoot=="function")try{eo.onCommitFiberRoot(Yg,n,void 0,(n.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:SU,yU=Math.log,xU=Math.LN2;function SU(n){return n>>>=0,n===0?32:31-(yU(n)/xU|0)|0}var ip=64,sp=4194304;function ed(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=ed(a):(r&=o,r!==0&&(i=ed(r)))}else o=t&~s,o!==0?i=ed(o):r!==0&&(i=ed(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Cr(e),s=1<<t,i|=n[t],e&=~s;return i}function TU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MU(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Cr(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=TU(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function gy(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ib(){var n=ip;return ip<<=1,!(ip&4194240)&&(ip=64),n}function tv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Cf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Cr(e),n[e]=t}function wU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Cr(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function NS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Cr(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Wt=0;function sb(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var rb,CS,ob,ab,lb,vy=!1,rp=[],Aa=null,Na=null,Ca=null,Wd=new Map,jd=new Map,da=[],EU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iM(n,e){switch(n){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":Wd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jd.delete(e.pointerId)}}function Ih(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Rf(e),e!==null&&CS(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function AU(n,e,t,i,s){switch(e){case"focusin":return Aa=Ih(Aa,n,e,t,i,s),!0;case"dragenter":return Na=Ih(Na,n,e,t,i,s),!0;case"mouseover":return Ca=Ih(Ca,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Wd.set(r,Ih(Wd.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,jd.set(r,Ih(jd.get(r)||null,n,e,t,i,s)),!0}return!1}function cb(n){var e=Fl(n.target);if(e!==null){var t=gc(e);if(t!==null){if(e=t.tag,e===13){if(e=ZC(t),e!==null){n.blockedOn=e,lb(n.priority,function(){ob(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=_y(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);dy=i,t.target.dispatchEvent(i),dy=null}else return e=Rf(t),e!==null&&CS(e),n.blockedOn=t,!1;e.shift()}return!0}function sM(n,e,t){lm(n)&&t.delete(e)}function NU(){vy=!1,Aa!==null&&lm(Aa)&&(Aa=null),Na!==null&&lm(Na)&&(Na=null),Ca!==null&&lm(Ca)&&(Ca=null),Wd.forEach(sM),jd.forEach(sM)}function Dh(n,e){n.blockedOn===e&&(n.blockedOn=null,vy||(vy=!0,Vs.unstable_scheduleCallback(Vs.unstable_NormalPriority,NU)))}function Xd(n){function e(s){return Dh(s,n)}if(0<rp.length){Dh(rp[0],n);for(var t=1;t<rp.length;t++){var i=rp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Aa!==null&&Dh(Aa,n),Na!==null&&Dh(Na,n),Ca!==null&&Dh(Ca,n),Wd.forEach(e),jd.forEach(e),t=0;t<da.length;t++)i=da[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<da.length&&(t=da[0],t.blockedOn===null);)cb(t),t.blockedOn===null&&da.shift()}var Tu=Yo.ReactCurrentBatchConfig,Bm=!0;function CU(n,e,t,i){var s=Wt,r=Tu.transition;Tu.transition=null;try{Wt=1,bS(n,e,t,i)}finally{Wt=s,Tu.transition=r}}function bU(n,e,t,i){var s=Wt,r=Tu.transition;Tu.transition=null;try{Wt=4,bS(n,e,t,i)}finally{Wt=s,Tu.transition=r}}function bS(n,e,t,i){if(Bm){var s=_y(n,e,t,i);if(s===null)hv(n,e,i,Hm,t),iM(n,i);else if(AU(s,n,e,t,i))i.stopPropagation();else if(iM(n,i),e&4&&-1<EU.indexOf(n)){for(;s!==null;){var r=Rf(s);if(r!==null&&rb(r),r=_y(n,e,t,i),r===null&&hv(n,e,i,Hm,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else hv(n,e,i,null,t)}}var Hm=null;function _y(n,e,t,i){if(Hm=null,n=ES(i),n=Fl(n),n!==null)if(e=gc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ZC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Hm=n,null}function ub(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gU()){case AS:return 1;case tb:return 4;case km:case vU:return 16;case nb:return 536870912;default:return 16}default:return 16}}var ma=null,RS=null,cm=null;function hb(){if(cm)return cm;var n,e=RS,t=e.length,i,s="value"in ma?ma.value:ma.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return cm=s.slice(n,1<i?1-i:void 0)}function um(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function op(){return!0}function rM(){return!1}function Gs(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?op:rM,this.isPropagationStopped=rM,this}return An(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=op)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=op)},persist:function(){},isPersistent:op}),e}var gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PS=Gs(gh),bf=An({},gh,{view:0,detail:0}),RU=Gs(bf),nv,iv,Oh,Kg=An({},bf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oh&&(Oh&&n.type==="mousemove"?(nv=n.screenX-Oh.screenX,iv=n.screenY-Oh.screenY):iv=nv=0,Oh=n),nv)},movementY:function(n){return"movementY"in n?n.movementY:iv}}),oM=Gs(Kg),PU=An({},Kg,{dataTransfer:0}),LU=Gs(PU),IU=An({},bf,{relatedTarget:0}),sv=Gs(IU),DU=An({},gh,{animationName:0,elapsedTime:0,pseudoElement:0}),OU=Gs(DU),UU=An({},gh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),FU=Gs(UU),VU=An({},gh,{data:0}),aM=Gs(VU),kU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=BU[n])?!!e[n]:!1}function LS(){return HU}var GU=An({},bf,{key:function(n){if(n.key){var e=kU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=um(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LS,charCode:function(n){return n.type==="keypress"?um(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?um(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),WU=Gs(GU),jU=An({},Kg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lM=Gs(jU),XU=An({},bf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LS}),$U=Gs(XU),qU=An({},gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),YU=Gs(qU),KU=An({},Kg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ZU=Gs(KU),QU=[9,13,27,32],IS=Bo&&"CompositionEvent"in window,fd=null;Bo&&"documentMode"in document&&(fd=document.documentMode);var JU=Bo&&"TextEvent"in window&&!fd,db=Bo&&(!IS||fd&&8<fd&&11>=fd),cM=" ",uM=!1;function fb(n,e){switch(n){case"keyup":return QU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pb(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zc=!1;function eF(n,e){switch(n){case"compositionend":return pb(e);case"keypress":return e.which!==32?null:(uM=!0,cM);case"textInput":return n=e.data,n===cM&&uM?null:n;default:return null}}function tF(n,e){if(Zc)return n==="compositionend"||!IS&&fb(n,e)?(n=hb(),cm=RS=ma=null,Zc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return db&&e.locale!=="ko"?null:e.data;default:return null}}var nF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!nF[n.type]:e==="textarea"}function mb(n,e,t,i){XC(i),e=Gm(e,"onChange"),0<e.length&&(t=new PS("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var pd=null,$d=null;function iF(n){Ab(n,0)}function Zg(n){var e=eu(n);if(kC(e))return n}function sF(n,e){if(n==="change")return e}var gb=!1;if(Bo){var rv;if(Bo){var ov="oninput"in document;if(!ov){var dM=document.createElement("div");dM.setAttribute("oninput","return;"),ov=typeof dM.oninput=="function"}rv=ov}else rv=!1;gb=rv&&(!document.documentMode||9<document.documentMode)}function fM(){pd&&(pd.detachEvent("onpropertychange",vb),$d=pd=null)}function vb(n){if(n.propertyName==="value"&&Zg($d)){var e=[];mb(e,$d,n,ES(n)),KC(iF,e)}}function rF(n,e,t){n==="focusin"?(fM(),pd=e,$d=t,pd.attachEvent("onpropertychange",vb)):n==="focusout"&&fM()}function oF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zg($d)}function aF(n,e){if(n==="click")return Zg(e)}function lF(n,e){if(n==="input"||n==="change")return Zg(e)}function cF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Lr=typeof Object.is=="function"?Object.is:cF;function qd(n,e){if(Lr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!ey.call(e,s)||!Lr(n[s],e[s]))return!1}return!0}function pM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mM(n,e){var t=pM(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=pM(t)}}function _b(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?_b(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function yb(){for(var n=window,e=Um();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Um(n.document)}return e}function DS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uF(n){var e=yb(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&_b(t.ownerDocument.documentElement,t)){if(i!==null&&DS(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=mM(t,r);var o=mM(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hF=Bo&&"documentMode"in document&&11>=document.documentMode,Qc=null,yy=null,md=null,xy=!1;function gM(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;xy||Qc==null||Qc!==Um(i)||(i=Qc,"selectionStart"in i&&DS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),md&&qd(md,i)||(md=i,i=Gm(yy,"onSelect"),0<i.length&&(e=new PS("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Qc)))}function ap(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Jc={animationend:ap("Animation","AnimationEnd"),animationiteration:ap("Animation","AnimationIteration"),animationstart:ap("Animation","AnimationStart"),transitionend:ap("Transition","TransitionEnd")},av={},xb={};Bo&&(xb=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function Qg(n){if(av[n])return av[n];if(!Jc[n])return n;var e=Jc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xb)return av[n]=e[t];return n}var Sb=Qg("animationend"),Tb=Qg("animationiteration"),Mb=Qg("animationstart"),wb=Qg("transitionend"),Eb=new Map,vM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nl(n,e){Eb.set(n,e),mc(e,[n])}for(var lv=0;lv<vM.length;lv++){var cv=vM[lv],dF=cv.toLowerCase(),fF=cv[0].toUpperCase()+cv.slice(1);nl(dF,"on"+fF)}nl(Sb,"onAnimationEnd");nl(Tb,"onAnimationIteration");nl(Mb,"onAnimationStart");nl("dblclick","onDoubleClick");nl("focusin","onFocus");nl("focusout","onBlur");nl(wb,"onTransitionEnd");Bu("onMouseEnter",["mouseout","mouseover"]);Bu("onMouseLeave",["mouseout","mouseover"]);Bu("onPointerEnter",["pointerout","pointerover"]);Bu("onPointerLeave",["pointerout","pointerover"]);mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pF=new Set("cancel close invalid load scroll toggle".split(" ").concat(td));function _M(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,dU(i,e,void 0,n),n.currentTarget=null}function Ab(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;_M(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;_M(s,a,c),r=l}}}if(Vm)throw n=my,Vm=!1,my=null,n}function on(n,e){var t=e[Ey];t===void 0&&(t=e[Ey]=new Set);var i=n+"__bubble";t.has(i)||(Nb(e,n,2,!1),t.add(i))}function uv(n,e,t){var i=0;e&&(i|=4),Nb(t,n,i,e)}var lp="_reactListening"+Math.random().toString(36).slice(2);function Yd(n){if(!n[lp]){n[lp]=!0,DC.forEach(function(t){t!=="selectionchange"&&(pF.has(t)||uv(t,!1,n),uv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[lp]||(e[lp]=!0,uv("selectionchange",!1,e))}}function Nb(n,e,t,i){switch(ub(e)){case 1:var s=CU;break;case 4:s=bU;break;default:s=bS}t=s.bind(null,e,t,n),s=void 0,!py||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function hv(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fl(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}KC(function(){var c=r,u=ES(t),h=[];e:{var d=Eb.get(n);if(d!==void 0){var f=PS,g=n;switch(n){case"keypress":if(um(t)===0)break e;case"keydown":case"keyup":f=WU;break;case"focusin":g="focus",f=sv;break;case"focusout":g="blur",f=sv;break;case"beforeblur":case"afterblur":f=sv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=oM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=LU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=$U;break;case Sb:case Tb:case Mb:f=OU;break;case wb:f=YU;break;case"scroll":f=RU;break;case"wheel":f=ZU;break;case"copy":case"cut":case"paste":f=FU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=lM}var m=(e&4)!==0,v=!m&&n==="scroll",p=m?d!==null?d+"Capture":null:d;m=[];for(var y=c,_;y!==null;){_=y;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,p!==null&&(x=Gd(y,p),x!=null&&m.push(Kd(y,x,_)))),v)break;y=y.return}0<m.length&&(d=new f(d,g,null,t,u),h.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==dy&&(g=t.relatedTarget||t.fromElement)&&(Fl(g)||g[Ho]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?Fl(g):null,g!==null&&(v=gc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(m=oM,x="onMouseLeave",p="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(m=lM,x="onPointerLeave",p="onPointerEnter",y="pointer"),v=f==null?d:eu(f),_=g==null?d:eu(g),d=new m(x,y+"leave",f,t,u),d.target=v,d.relatedTarget=_,x=null,Fl(u)===c&&(m=new m(p,y+"enter",g,t,u),m.target=_,m.relatedTarget=v,x=m),v=x,f&&g)t:{for(m=f,p=g,y=0,_=m;_;_=Ac(_))y++;for(_=0,x=p;x;x=Ac(x))_++;for(;0<y-_;)m=Ac(m),y--;for(;0<_-y;)p=Ac(p),_--;for(;y--;){if(m===p||p!==null&&m===p.alternate)break t;m=Ac(m),p=Ac(p)}m=null}else m=null;f!==null&&yM(h,d,f,m,!1),g!==null&&v!==null&&yM(h,v,g,m,!0)}}e:{if(d=c?eu(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=sF;else if(hM(d))if(gb)E=lF;else{E=oF;var w=rF}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=aF);if(E&&(E=E(n,c))){mb(h,E,t,u);break e}w&&w(n,d,c),n==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&ay(d,"number",d.value)}switch(w=c?eu(c):window,n){case"focusin":(hM(w)||w.contentEditable==="true")&&(Qc=w,yy=c,md=null);break;case"focusout":md=yy=Qc=null;break;case"mousedown":xy=!0;break;case"contextmenu":case"mouseup":case"dragend":xy=!1,gM(h,t,u);break;case"selectionchange":if(hF)break;case"keydown":case"keyup":gM(h,t,u)}var T;if(IS)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Zc?fb(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(db&&t.locale!=="ko"&&(Zc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Zc&&(T=hb()):(ma=u,RS="value"in ma?ma.value:ma.textContent,Zc=!0)),w=Gm(c,A),0<w.length&&(A=new aM(A,n,null,t,u),h.push({event:A,listeners:w}),T?A.data=T:(T=pb(t),T!==null&&(A.data=T)))),(T=JU?eF(n,t):tF(n,t))&&(c=Gm(c,"onBeforeInput"),0<c.length&&(u=new aM("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=T))}Ab(h,e)})}function Kd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Gm(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Gd(n,t),r!=null&&i.unshift(Kd(n,r,s)),r=Gd(n,e),r!=null&&i.push(Kd(n,r,s))),n=n.return}return i}function Ac(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function yM(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Gd(t,r),l!=null&&o.unshift(Kd(t,l,a))):s||(l=Gd(t,r),l!=null&&o.push(Kd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var mF=/\r\n?/g,gF=/\u0000|\uFFFD/g;function xM(n){return(typeof n=="string"?n:""+n).replace(mF,`
`).replace(gF,"")}function cp(n,e,t){if(e=xM(e),xM(n)!==e&&t)throw Error(xe(425))}function Wm(){}var Sy=null,Ty=null;function My(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wy=typeof setTimeout=="function"?setTimeout:void 0,vF=typeof clearTimeout=="function"?clearTimeout:void 0,SM=typeof Promise=="function"?Promise:void 0,_F=typeof queueMicrotask=="function"?queueMicrotask:typeof SM<"u"?function(n){return SM.resolve(null).then(n).catch(yF)}:wy;function yF(n){setTimeout(function(){throw n})}function dv(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),Xd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);Xd(e)}function ba(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function TM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var vh=Math.random().toString(36).slice(2),Xr="__reactFiber$"+vh,Zd="__reactProps$"+vh,Ho="__reactContainer$"+vh,Ey="__reactEvents$"+vh,xF="__reactListeners$"+vh,SF="__reactHandles$"+vh;function Fl(n){var e=n[Xr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ho]||t[Xr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=TM(n);n!==null;){if(t=n[Xr])return t;n=TM(n)}return e}n=t,t=n.parentNode}return null}function Rf(n){return n=n[Xr]||n[Ho],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(xe(33))}function Jg(n){return n[Zd]||null}var Ay=[],tu=-1;function il(n){return{current:n}}function cn(n){0>tu||(n.current=Ay[tu],Ay[tu]=null,tu--)}function nn(n,e){tu++,Ay[tu]=n.current,n.current=e}var Ga={},ki=il(Ga),hs=il(!1),tc=Ga;function Hu(n,e){var t=n.type.contextTypes;if(!t)return Ga;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function ds(n){return n=n.childContextTypes,n!=null}function jm(){cn(hs),cn(ki)}function MM(n,e,t){if(ki.current!==Ga)throw Error(xe(168));nn(ki,e),nn(hs,t)}function Cb(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(xe(108,rU(n)||"Unknown",s));return An({},t,i)}function Xm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ga,tc=ki.current,nn(ki,n),nn(hs,hs.current),!0}function wM(n,e,t){var i=n.stateNode;if(!i)throw Error(xe(169));t?(n=Cb(n,e,tc),i.__reactInternalMemoizedMergedChildContext=n,cn(hs),cn(ki),nn(ki,n)):cn(hs),nn(hs,t)}var To=null,e0=!1,fv=!1;function bb(n){To===null?To=[n]:To.push(n)}function TF(n){e0=!0,bb(n)}function sl(){if(!fv&&To!==null){fv=!0;var n=0,e=Wt;try{var t=To;for(Wt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}To=null,e0=!1}catch(s){throw To!==null&&(To=To.slice(n+1)),eb(AS,sl),s}finally{Wt=e,fv=!1}}return null}var nu=[],iu=0,$m=null,qm=0,Zs=[],Qs=0,nc=null,No=1,Co="";function Ml(n,e){nu[iu++]=qm,nu[iu++]=$m,$m=n,qm=e}function Rb(n,e,t){Zs[Qs++]=No,Zs[Qs++]=Co,Zs[Qs++]=nc,nc=n;var i=No;n=Co;var s=32-Cr(i)-1;i&=~(1<<s),t+=1;var r=32-Cr(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,No=1<<32-Cr(e)+s|t<<s|i,Co=r+n}else No=1<<r|t<<s|i,Co=n}function OS(n){n.return!==null&&(Ml(n,1),Rb(n,1,0))}function US(n){for(;n===$m;)$m=nu[--iu],nu[iu]=null,qm=nu[--iu],nu[iu]=null;for(;n===nc;)nc=Zs[--Qs],Zs[Qs]=null,Co=Zs[--Qs],Zs[Qs]=null,No=Zs[--Qs],Zs[Qs]=null}var Ds=null,Rs=null,mn=!1,Sr=null;function Pb(n,e){var t=tr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function EM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ds=n,Rs=ba(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ds=n,Rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=nc!==null?{id:No,overflow:Co}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=tr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ds=n,Rs=null,!0):!1;default:return!1}}function Ny(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Cy(n){if(mn){var e=Rs;if(e){var t=e;if(!EM(n,e)){if(Ny(n))throw Error(xe(418));e=ba(t.nextSibling);var i=Ds;e&&EM(n,e)?Pb(i,t):(n.flags=n.flags&-4097|2,mn=!1,Ds=n)}}else{if(Ny(n))throw Error(xe(418));n.flags=n.flags&-4097|2,mn=!1,Ds=n}}}function AM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ds=n}function up(n){if(n!==Ds)return!1;if(!mn)return AM(n),mn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!My(n.type,n.memoizedProps)),e&&(e=Rs)){if(Ny(n))throw Lb(),Error(xe(418));for(;e;)Pb(n,e),e=ba(e.nextSibling)}if(AM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(xe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Rs=ba(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Rs=null}}else Rs=Ds?ba(n.stateNode.nextSibling):null;return!0}function Lb(){for(var n=Rs;n;)n=ba(n.nextSibling)}function Gu(){Rs=Ds=null,mn=!1}function FS(n){Sr===null?Sr=[n]:Sr.push(n)}var MF=Yo.ReactCurrentBatchConfig;function Uh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(xe(309));var i=t.stateNode}if(!i)throw Error(xe(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(xe(284));if(!t._owner)throw Error(xe(290,n))}return n}function hp(n,e){throw n=Object.prototype.toString.call(e),Error(xe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function NM(n){var e=n._init;return e(n._payload)}function Ib(n){function e(p,y){if(n){var _=p.deletions;_===null?(p.deletions=[y],p.flags|=16):_.push(y)}}function t(p,y){if(!n)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function i(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function s(p,y){return p=Ia(p,y),p.index=0,p.sibling=null,p}function r(p,y,_){return p.index=_,n?(_=p.alternate,_!==null?(_=_.index,_<y?(p.flags|=2,y):_):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,y,_,x){return y===null||y.tag!==6?(y=xv(_,p.mode,x),y.return=p,y):(y=s(y,_),y.return=p,y)}function l(p,y,_,x){var E=_.type;return E===Kc?u(p,y,_.props.children,x,_.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===aa&&NM(E)===y.type)?(x=s(y,_.props),x.ref=Uh(p,y,_),x.return=p,x):(x=vm(_.type,_.key,_.props,null,p.mode,x),x.ref=Uh(p,y,_),x.return=p,x)}function c(p,y,_,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Sv(_,p.mode,x),y.return=p,y):(y=s(y,_.children||[]),y.return=p,y)}function u(p,y,_,x,E){return y===null||y.tag!==7?(y=Xl(_,p.mode,x,E),y.return=p,y):(y=s(y,_),y.return=p,y)}function h(p,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xv(""+y,p.mode,_),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ep:return _=vm(y.type,y.key,y.props,null,p.mode,_),_.ref=Uh(p,null,y),_.return=p,_;case Yc:return y=Sv(y,p.mode,_),y.return=p,y;case aa:var x=y._init;return h(p,x(y._payload),_)}if(Jh(y)||Ph(y))return y=Xl(y,p.mode,_,null),y.return=p,y;hp(p,y)}return null}function d(p,y,_,x){var E=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(p,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ep:return _.key===E?l(p,y,_,x):null;case Yc:return _.key===E?c(p,y,_,x):null;case aa:return E=_._init,d(p,y,E(_._payload),x)}if(Jh(_)||Ph(_))return E!==null?null:u(p,y,_,x,null);hp(p,_)}return null}function f(p,y,_,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(_)||null,a(y,p,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ep:return p=p.get(x.key===null?_:x.key)||null,l(y,p,x,E);case Yc:return p=p.get(x.key===null?_:x.key)||null,c(y,p,x,E);case aa:var w=x._init;return f(p,y,_,w(x._payload),E)}if(Jh(x)||Ph(x))return p=p.get(_)||null,u(y,p,x,E,null);hp(y,x)}return null}function g(p,y,_,x){for(var E=null,w=null,T=y,A=y=0,M=null;T!==null&&A<_.length;A++){T.index>A?(M=T,T=null):M=T.sibling;var S=d(p,T,_[A],x);if(S===null){T===null&&(T=M);break}n&&T&&S.alternate===null&&e(p,T),y=r(S,y,A),w===null?E=S:w.sibling=S,w=S,T=M}if(A===_.length)return t(p,T),mn&&Ml(p,A),E;if(T===null){for(;A<_.length;A++)T=h(p,_[A],x),T!==null&&(y=r(T,y,A),w===null?E=T:w.sibling=T,w=T);return mn&&Ml(p,A),E}for(T=i(p,T);A<_.length;A++)M=f(T,p,A,_[A],x),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?A:M.key),y=r(M,y,A),w===null?E=M:w.sibling=M,w=M);return n&&T.forEach(function(P){return e(p,P)}),mn&&Ml(p,A),E}function m(p,y,_,x){var E=Ph(_);if(typeof E!="function")throw Error(xe(150));if(_=E.call(_),_==null)throw Error(xe(151));for(var w=E=null,T=y,A=y=0,M=null,S=_.next();T!==null&&!S.done;A++,S=_.next()){T.index>A?(M=T,T=null):M=T.sibling;var P=d(p,T,S.value,x);if(P===null){T===null&&(T=M);break}n&&T&&P.alternate===null&&e(p,T),y=r(P,y,A),w===null?E=P:w.sibling=P,w=P,T=M}if(S.done)return t(p,T),mn&&Ml(p,A),E;if(T===null){for(;!S.done;A++,S=_.next())S=h(p,S.value,x),S!==null&&(y=r(S,y,A),w===null?E=S:w.sibling=S,w=S);return mn&&Ml(p,A),E}for(T=i(p,T);!S.done;A++,S=_.next())S=f(T,p,A,S.value,x),S!==null&&(n&&S.alternate!==null&&T.delete(S.key===null?A:S.key),y=r(S,y,A),w===null?E=S:w.sibling=S,w=S);return n&&T.forEach(function(F){return e(p,F)}),mn&&Ml(p,A),E}function v(p,y,_,x){if(typeof _=="object"&&_!==null&&_.type===Kc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ep:e:{for(var E=_.key,w=y;w!==null;){if(w.key===E){if(E=_.type,E===Kc){if(w.tag===7){t(p,w.sibling),y=s(w,_.props.children),y.return=p,p=y;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===aa&&NM(E)===w.type){t(p,w.sibling),y=s(w,_.props),y.ref=Uh(p,w,_),y.return=p,p=y;break e}t(p,w);break}else e(p,w);w=w.sibling}_.type===Kc?(y=Xl(_.props.children,p.mode,x,_.key),y.return=p,p=y):(x=vm(_.type,_.key,_.props,null,p.mode,x),x.ref=Uh(p,y,_),x.return=p,p=x)}return o(p);case Yc:e:{for(w=_.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){t(p,y.sibling),y=s(y,_.children||[]),y.return=p,p=y;break e}else{t(p,y);break}else e(p,y);y=y.sibling}y=Sv(_,p.mode,x),y.return=p,p=y}return o(p);case aa:return w=_._init,v(p,y,w(_._payload),x)}if(Jh(_))return g(p,y,_,x);if(Ph(_))return m(p,y,_,x);hp(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(t(p,y.sibling),y=s(y,_),y.return=p,p=y):(t(p,y),y=xv(_,p.mode,x),y.return=p,p=y),o(p)):t(p,y)}return v}var Wu=Ib(!0),Db=Ib(!1),Ym=il(null),Km=null,su=null,VS=null;function kS(){VS=su=Km=null}function zS(n){var e=Ym.current;cn(Ym),n._currentValue=e}function by(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Mu(n,e){Km=n,VS=su=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ls=!0),n.firstContext=null)}function ar(n){var e=n._currentValue;if(VS!==n)if(n={context:n,memoizedValue:e,next:null},su===null){if(Km===null)throw Error(xe(308));su=n,Km.dependencies={lanes:0,firstContext:n}}else su=su.next=n;return e}var Vl=null;function BS(n){Vl===null?Vl=[n]:Vl.push(n)}function Ob(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,BS(e)):(t.next=s.next,s.next=t),e.interleaved=t,Go(n,i)}function Go(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var la=!1;function HS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ub(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Io(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,It&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Go(n,t)}return s=i.interleaved,s===null?(e.next=e,BS(i)):(e.next=s.next,s.next=e),i.interleaved=e,Go(n,t)}function hm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,NS(n,t)}}function CM(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Zm(n,e,t,i){var s=n.updateQueue;la=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,m=a;switch(d=e,f=t,m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=An({},h,d);break e;case 2:la=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);sc|=o,n.lanes=o,n.memoizedState=h}}function bM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(xe(191,s));s.call(i)}}}var Pf={},to=il(Pf),Qd=il(Pf),Jd=il(Pf);function kl(n){if(n===Pf)throw Error(xe(174));return n}function GS(n,e){switch(nn(Jd,e),nn(Qd,n),nn(to,Pf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cy(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=cy(e,n)}cn(to),nn(to,e)}function ju(){cn(to),cn(Qd),cn(Jd)}function Fb(n){kl(Jd.current);var e=kl(to.current),t=cy(e,n.type);e!==t&&(nn(Qd,n),nn(to,t))}function WS(n){Qd.current===n&&(cn(to),cn(Qd))}var yn=il(0);function Qm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pv=[];function jS(){for(var n=0;n<pv.length;n++)pv[n]._workInProgressVersionPrimary=null;pv.length=0}var dm=Yo.ReactCurrentDispatcher,mv=Yo.ReactCurrentBatchConfig,ic=0,En=null,$n=null,oi=null,Jm=!1,gd=!1,ef=0,wF=0;function wi(){throw Error(xe(321))}function XS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Lr(n[t],e[t]))return!1;return!0}function $S(n,e,t,i,s,r){if(ic=r,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dm.current=n===null||n.memoizedState===null?CF:bF,n=t(i,s),gd){r=0;do{if(gd=!1,ef=0,25<=r)throw Error(xe(301));r+=1,oi=$n=null,e.updateQueue=null,dm.current=RF,n=t(i,s)}while(gd)}if(dm.current=eg,e=$n!==null&&$n.next!==null,ic=0,oi=$n=En=null,Jm=!1,e)throw Error(xe(300));return n}function qS(){var n=ef!==0;return ef=0,n}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?En.memoizedState=oi=n:oi=oi.next=n,oi}function lr(){if($n===null){var n=En.alternate;n=n!==null?n.memoizedState:null}else n=$n.next;var e=oi===null?En.memoizedState:oi.next;if(e!==null)oi=e,$n=n;else{if(n===null)throw Error(xe(310));$n=n,n={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},oi===null?En.memoizedState=oi=n:oi=oi.next=n}return oi}function tf(n,e){return typeof e=="function"?e(n):e}function gv(n){var e=lr(),t=e.queue;if(t===null)throw Error(xe(311));t.lastRenderedReducer=n;var i=$n,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((ic&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,En.lanes|=u,sc|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Lr(i,e.memoizedState)||(ls=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,En.lanes|=r,sc|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vv(n){var e=lr(),t=e.queue;if(t===null)throw Error(xe(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Lr(r,e.memoizedState)||(ls=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function Vb(){}function kb(n,e){var t=En,i=lr(),s=e(),r=!Lr(i.memoizedState,s);if(r&&(i.memoizedState=s,ls=!0),i=i.queue,YS(Hb.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||oi!==null&&oi.memoizedState.tag&1){if(t.flags|=2048,nf(9,Bb.bind(null,t,i,s,e),void 0,null),ui===null)throw Error(xe(349));ic&30||zb(t,e,s)}return s}function zb(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Bb(n,e,t,i){e.value=t,e.getSnapshot=i,Gb(e)&&Wb(n)}function Hb(n,e,t){return t(function(){Gb(e)&&Wb(n)})}function Gb(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Lr(n,t)}catch{return!0}}function Wb(n){var e=Go(n,1);e!==null&&br(e,n,1,-1)}function RM(n){var e=kr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:n},e.queue=n,n=n.dispatch=NF.bind(null,En,n),[e.memoizedState,n]}function nf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function jb(){return lr().memoizedState}function fm(n,e,t,i){var s=kr();En.flags|=n,s.memoizedState=nf(1|e,t,void 0,i===void 0?null:i)}function t0(n,e,t,i){var s=lr();i=i===void 0?null:i;var r=void 0;if($n!==null){var o=$n.memoizedState;if(r=o.destroy,i!==null&&XS(i,o.deps)){s.memoizedState=nf(e,t,r,i);return}}En.flags|=n,s.memoizedState=nf(1|e,t,r,i)}function PM(n,e){return fm(8390656,8,n,e)}function YS(n,e){return t0(2048,8,n,e)}function Xb(n,e){return t0(4,2,n,e)}function $b(n,e){return t0(4,4,n,e)}function qb(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Yb(n,e,t){return t=t!=null?t.concat([n]):null,t0(4,4,qb.bind(null,e,n),t)}function KS(){}function Kb(n,e){var t=lr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&XS(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Zb(n,e){var t=lr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&XS(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Qb(n,e,t){return ic&21?(Lr(t,e)||(t=ib(),En.lanes|=t,sc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ls=!0),n.memoizedState=t)}function EF(n,e){var t=Wt;Wt=t!==0&&4>t?t:4,n(!0);var i=mv.transition;mv.transition={};try{n(!1),e()}finally{Wt=t,mv.transition=i}}function Jb(){return lr().memoizedState}function AF(n,e,t){var i=La(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},eR(n))tR(e,t);else if(t=Ob(n,e,t,i),t!==null){var s=es();br(t,n,i,s),nR(t,e,i)}}function NF(n,e,t){var i=La(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(eR(n))tR(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Lr(a,o)){var l=e.interleaved;l===null?(s.next=s,BS(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Ob(n,e,s,i),t!==null&&(s=es(),br(t,n,i,s),nR(t,e,i))}}function eR(n){var e=n.alternate;return n===En||e!==null&&e===En}function tR(n,e){gd=Jm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function nR(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,NS(n,t)}}var eg={readContext:ar,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},CF={readContext:ar,useCallback:function(n,e){return kr().memoizedState=[n,e===void 0?null:e],n},useContext:ar,useEffect:PM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,fm(4194308,4,qb.bind(null,e,n),t)},useLayoutEffect:function(n,e){return fm(4194308,4,n,e)},useInsertionEffect:function(n,e){return fm(4,2,n,e)},useMemo:function(n,e){var t=kr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=kr();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=AF.bind(null,En,n),[i.memoizedState,n]},useRef:function(n){var e=kr();return n={current:n},e.memoizedState=n},useState:RM,useDebugValue:KS,useDeferredValue:function(n){return kr().memoizedState=n},useTransition:function(){var n=RM(!1),e=n[0];return n=EF.bind(null,n[1]),kr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=En,s=kr();if(mn){if(t===void 0)throw Error(xe(407));t=t()}else{if(t=e(),ui===null)throw Error(xe(349));ic&30||zb(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,PM(Hb.bind(null,i,r,n),[n]),i.flags|=2048,nf(9,Bb.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=kr(),e=ui.identifierPrefix;if(mn){var t=Co,i=No;t=(i&~(1<<32-Cr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=ef++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=wF++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},bF={readContext:ar,useCallback:Kb,useContext:ar,useEffect:YS,useImperativeHandle:Yb,useInsertionEffect:Xb,useLayoutEffect:$b,useMemo:Zb,useReducer:gv,useRef:jb,useState:function(){return gv(tf)},useDebugValue:KS,useDeferredValue:function(n){var e=lr();return Qb(e,$n.memoizedState,n)},useTransition:function(){var n=gv(tf)[0],e=lr().memoizedState;return[n,e]},useMutableSource:Vb,useSyncExternalStore:kb,useId:Jb,unstable_isNewReconciler:!1},RF={readContext:ar,useCallback:Kb,useContext:ar,useEffect:YS,useImperativeHandle:Yb,useInsertionEffect:Xb,useLayoutEffect:$b,useMemo:Zb,useReducer:vv,useRef:jb,useState:function(){return vv(tf)},useDebugValue:KS,useDeferredValue:function(n){var e=lr();return $n===null?e.memoizedState=n:Qb(e,$n.memoizedState,n)},useTransition:function(){var n=vv(tf)[0],e=lr().memoizedState;return[n,e]},useMutableSource:Vb,useSyncExternalStore:kb,useId:Jb,unstable_isNewReconciler:!1};function vr(n,e){if(n&&n.defaultProps){e=An({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Ry(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:An({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var n0={isMounted:function(n){return(n=n._reactInternals)?gc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=es(),s=La(n),r=Io(i,s);r.payload=e,t!=null&&(r.callback=t),e=Ra(n,r,s),e!==null&&(br(e,n,s,i),hm(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=es(),s=La(n),r=Io(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Ra(n,r,s),e!==null&&(br(e,n,s,i),hm(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=es(),i=La(n),s=Io(t,i);s.tag=2,e!=null&&(s.callback=e),e=Ra(n,s,i),e!==null&&(br(e,n,i,t),hm(e,n,i))}};function LM(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!qd(t,i)||!qd(s,r):!0}function iR(n,e,t){var i=!1,s=Ga,r=e.contextType;return typeof r=="object"&&r!==null?r=ar(r):(s=ds(e)?tc:ki.current,i=e.contextTypes,r=(i=i!=null)?Hu(n,s):Ga),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=n0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function IM(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&n0.enqueueReplaceState(e,e.state,null)}function Py(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},HS(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=ar(r):(r=ds(e)?tc:ki.current,s.context=Hu(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Ry(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&n0.enqueueReplaceState(s,s.state,null),Zm(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Xu(n,e){try{var t="",i=e;do t+=sU(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function _v(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Ly(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var PF=typeof WeakMap=="function"?WeakMap:Map;function sR(n,e,t){t=Io(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){ng||(ng=!0,Hy=i),Ly(n,e)},t}function rR(n,e,t){t=Io(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){Ly(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Ly(n,e),typeof i!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function DM(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new PF;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=jF.bind(null,n,e,t),e.then(n,n))}function OM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function UM(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Io(-1,1),e.tag=2,Ra(t,e,1))),t.lanes|=1),n)}var LF=Yo.ReactCurrentOwner,ls=!1;function qi(n,e,t,i){e.child=n===null?Db(e,null,t,i):Wu(e,n.child,t,i)}function FM(n,e,t,i,s){t=t.render;var r=e.ref;return Mu(e,s),i=$S(n,e,t,i,r,s),t=qS(),n!==null&&!ls?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Wo(n,e,s)):(mn&&t&&OS(e),e.flags|=1,qi(n,e,i,s),e.child)}function VM(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!s1(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,oR(n,e,r,i,s)):(n=vm(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:qd,t(o,i)&&n.ref===e.ref)return Wo(n,e,s)}return e.flags|=1,n=Ia(r,i),n.ref=e.ref,n.return=e,e.child=n}function oR(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(qd(r,i)&&n.ref===e.ref)if(ls=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(ls=!0);else return e.lanes=n.lanes,Wo(n,e,s)}return Iy(n,e,t,i,s)}function aR(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(ou,Es),Es|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,nn(ou,Es),Es|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,nn(ou,Es),Es|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,nn(ou,Es),Es|=i;return qi(n,e,s,t),e.child}function lR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Iy(n,e,t,i,s){var r=ds(t)?tc:ki.current;return r=Hu(e,r),Mu(e,s),t=$S(n,e,t,i,r,s),i=qS(),n!==null&&!ls?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Wo(n,e,s)):(mn&&i&&OS(e),e.flags|=1,qi(n,e,t,s),e.child)}function kM(n,e,t,i,s){if(ds(t)){var r=!0;Xm(e)}else r=!1;if(Mu(e,s),e.stateNode===null)pm(n,e),iR(e,t,i),Py(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ar(c):(c=ds(t)?tc:ki.current,c=Hu(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&IM(e,o,i,c),la=!1;var d=e.memoizedState;o.state=d,Zm(e,i,o,s),l=e.memoizedState,a!==i||d!==l||hs.current||la?(typeof u=="function"&&(Ry(e,t,u,i),l=e.memoizedState),(a=la||LM(e,t,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ub(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:vr(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=ds(t)?tc:ki.current,l=Hu(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&IM(e,o,i,l),la=!1,d=e.memoizedState,o.state=d,Zm(e,i,o,s);var g=e.memoizedState;a!==h||d!==g||hs.current||la?(typeof f=="function"&&(Ry(e,t,f,i),g=e.memoizedState),(c=la||LM(e,t,c,i,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return Dy(n,e,t,i,r,s)}function Dy(n,e,t,i,s,r){lR(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&wM(e,t,!1),Wo(n,e,r);i=e.stateNode,LF.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Wu(e,n.child,null,r),e.child=Wu(e,null,a,r)):qi(n,e,a,r),e.memoizedState=i.state,s&&wM(e,t,!0),e.child}function cR(n){var e=n.stateNode;e.pendingContext?MM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&MM(n,e.context,!1),GS(n,e.containerInfo)}function zM(n,e,t,i,s){return Gu(),FS(s),e.flags|=256,qi(n,e,t,i),e.child}var Oy={dehydrated:null,treeContext:null,retryLane:0};function Uy(n){return{baseLanes:n,cachePool:null,transitions:null}}function uR(n,e,t){var i=e.pendingProps,s=yn.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),nn(yn,s&1),n===null)return Cy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=r0(o,i,0,null),n=Xl(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=Uy(t),e.memoizedState=Oy,n):ZS(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return IF(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ia(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Ia(a,r):(r=Xl(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?Uy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=Oy,i}return r=n.child,n=r.sibling,i=Ia(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function ZS(n,e){return e=r0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function dp(n,e,t,i){return i!==null&&FS(i),Wu(e,n.child,null,t),n=ZS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function IF(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=_v(Error(xe(422))),dp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=r0({mode:"visible",children:i.children},s,0,null),r=Xl(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Wu(e,n.child,null,o),e.child.memoizedState=Uy(o),e.memoizedState=Oy,r);if(!(e.mode&1))return dp(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(xe(419)),i=_v(r,i,void 0),dp(n,e,o,i)}if(a=(o&n.childLanes)!==0,ls||a){if(i=ui,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Go(n,s),br(i,n,s,-1))}return i1(),i=_v(Error(xe(421))),dp(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=XF.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,Rs=ba(s.nextSibling),Ds=e,mn=!0,Sr=null,n!==null&&(Zs[Qs++]=No,Zs[Qs++]=Co,Zs[Qs++]=nc,No=n.id,Co=n.overflow,nc=e),e=ZS(e,i.children),e.flags|=4096,e)}function BM(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),by(n.return,e,t)}function yv(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function hR(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(qi(n,e,i.children,t),i=yn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&BM(n,t,e);else if(n.tag===19)BM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(nn(yn,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Qm(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),yv(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Qm(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}yv(e,!0,t,null,r);break;case"together":yv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Wo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),sc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(xe(153));if(e.child!==null){for(n=e.child,t=Ia(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ia(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function DF(n,e,t){switch(e.tag){case 3:cR(e),Gu();break;case 5:Fb(e);break;case 1:ds(e.type)&&Xm(e);break;case 4:GS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;nn(Ym,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nn(yn,yn.current&1),e.flags|=128,null):t&e.child.childLanes?uR(n,e,t):(nn(yn,yn.current&1),n=Wo(n,e,t),n!==null?n.sibling:null);nn(yn,yn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return hR(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nn(yn,yn.current),i)break;return null;case 22:case 23:return e.lanes=0,aR(n,e,t)}return Wo(n,e,t)}var dR,Fy,fR,pR;dR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Fy=function(){};fR=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,kl(to.current);var r=null;switch(t){case"input":s=ry(n,s),i=ry(n,i),r=[];break;case"select":s=An({},s,{value:void 0}),i=An({},i,{value:void 0}),r=[];break;case"textarea":s=ly(n,s),i=ly(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Wm)}uy(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bd.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&on("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};pR=function(n,e,t,i){t!==i&&(e.flags|=4)};function Fh(n,e){if(!mn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ei(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function OF(n,e,t){var i=e.pendingProps;switch(US(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei(e),null;case 1:return ds(e.type)&&jm(),Ei(e),null;case 3:return i=e.stateNode,ju(),cn(hs),cn(ki),jS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(up(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sr!==null&&(jy(Sr),Sr=null))),Fy(n,e),Ei(e),null;case 5:WS(e);var s=kl(Jd.current);if(t=e.type,n!==null&&e.stateNode!=null)fR(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(xe(166));return Ei(e),null}if(n=kl(to.current),up(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Xr]=e,i[Zd]=r,n=(e.mode&1)!==0,t){case"dialog":on("cancel",i),on("close",i);break;case"iframe":case"object":case"embed":on("load",i);break;case"video":case"audio":for(s=0;s<td.length;s++)on(td[s],i);break;case"source":on("error",i);break;case"img":case"image":case"link":on("error",i),on("load",i);break;case"details":on("toggle",i);break;case"input":KT(i,r),on("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},on("invalid",i);break;case"textarea":QT(i,r),on("invalid",i)}uy(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&cp(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&cp(i.textContent,a,n),s=["children",""+a]):Bd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&on("scroll",i)}switch(t){case"input":tp(i),ZT(i,r,!0);break;case"textarea":tp(i),JT(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Wm)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=HC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Xr]=e,n[Zd]=i,dR(n,e,!1,!1),e.stateNode=n;e:{switch(o=hy(t,i),t){case"dialog":on("cancel",n),on("close",n),s=i;break;case"iframe":case"object":case"embed":on("load",n),s=i;break;case"video":case"audio":for(s=0;s<td.length;s++)on(td[s],n);s=i;break;case"source":on("error",n),s=i;break;case"img":case"image":case"link":on("error",n),on("load",n),s=i;break;case"details":on("toggle",n),s=i;break;case"input":KT(n,i),s=ry(n,i),on("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=An({},i,{value:void 0}),on("invalid",n);break;case"textarea":QT(n,i),s=ly(n,i),on("invalid",n);break;default:s=i}uy(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?jC(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GC(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Hd(n,l):typeof l=="number"&&Hd(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Bd.hasOwnProperty(r)?l!=null&&r==="onScroll"&&on("scroll",n):l!=null&&SS(n,r,l,o))}switch(t){case"input":tp(n),ZT(n,i,!1);break;case"textarea":tp(n),JT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ha(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?yu(n,!!i.multiple,r,!1):i.defaultValue!=null&&yu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Wm)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ei(e),null;case 6:if(n&&e.stateNode!=null)pR(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(xe(166));if(t=kl(Jd.current),kl(to.current),up(e)){if(i=e.stateNode,t=e.memoizedProps,i[Xr]=e,(r=i.nodeValue!==t)&&(n=Ds,n!==null))switch(n.tag){case 3:cp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cp(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Xr]=e,e.stateNode=i}return Ei(e),null;case 13:if(cn(yn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(mn&&Rs!==null&&e.mode&1&&!(e.flags&128))Lb(),Gu(),e.flags|=98560,r=!1;else if(r=up(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(xe(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(xe(317));r[Xr]=e}else Gu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ei(e),r=!1}else Sr!==null&&(jy(Sr),Sr=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||yn.current&1?Kn===0&&(Kn=3):i1())),e.updateQueue!==null&&(e.flags|=4),Ei(e),null);case 4:return ju(),Fy(n,e),n===null&&Yd(e.stateNode.containerInfo),Ei(e),null;case 10:return zS(e.type._context),Ei(e),null;case 17:return ds(e.type)&&jm(),Ei(e),null;case 19:if(cn(yn),r=e.memoizedState,r===null)return Ei(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)Fh(r,!1);else{if(Kn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Qm(n),o!==null){for(e.flags|=128,Fh(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return nn(yn,yn.current&1|2),e.child}n=n.sibling}r.tail!==null&&On()>$u&&(e.flags|=128,i=!0,Fh(r,!1),e.lanes=4194304)}else{if(!i)if(n=Qm(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fh(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!mn)return Ei(e),null}else 2*On()-r.renderingStartTime>$u&&t!==1073741824&&(e.flags|=128,i=!0,Fh(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=On(),e.sibling=null,t=yn.current,nn(yn,i?t&1|2:t&1),e):(Ei(e),null);case 22:case 23:return n1(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Es&1073741824&&(Ei(e),e.subtreeFlags&6&&(e.flags|=8192)):Ei(e),null;case 24:return null;case 25:return null}throw Error(xe(156,e.tag))}function UF(n,e){switch(US(e),e.tag){case 1:return ds(e.type)&&jm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ju(),cn(hs),cn(ki),jS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return WS(e),null;case 13:if(cn(yn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));Gu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return cn(yn),null;case 4:return ju(),null;case 10:return zS(e.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var fp=!1,Pi=!1,FF=typeof WeakSet=="function"?WeakSet:Set,De=null;function ru(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Nn(n,e,i)}else t.current=null}function Vy(n,e,t){try{t()}catch(i){Nn(n,e,i)}}var HM=!1;function VF(n,e){if(Sy=Bm,n=yb(),DS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Ty={focusedElem:n,selectionRange:t},Bm=!1,De=e;De!==null;)if(e=De,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,De=n;else for(;De!==null;){e=De;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?m:vr(e.type,m),v);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(x){Nn(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,De=n;break}De=e.return}return g=HM,HM=!1,g}function vd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&Vy(e,t,r)}s=s.next}while(s!==i)}}function i0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function ky(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function mR(n){var e=n.alternate;e!==null&&(n.alternate=null,mR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Xr],delete e[Zd],delete e[Ey],delete e[xF],delete e[SF])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gR(n){return n.tag===5||n.tag===3||n.tag===4}function GM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zy(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Wm));else if(i!==4&&(n=n.child,n!==null))for(zy(n,e,t),n=n.sibling;n!==null;)zy(n,e,t),n=n.sibling}function By(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(By(n,e,t),n=n.sibling;n!==null;)By(n,e,t),n=n.sibling}var fi=null,_r=!1;function Zo(n,e,t){for(t=t.child;t!==null;)vR(n,e,t),t=t.sibling}function vR(n,e,t){if(eo&&typeof eo.onCommitFiberUnmount=="function")try{eo.onCommitFiberUnmount(Yg,t)}catch{}switch(t.tag){case 5:Pi||ru(t,e);case 6:var i=fi,s=_r;fi=null,Zo(n,e,t),fi=i,_r=s,fi!==null&&(_r?(n=fi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):fi.removeChild(t.stateNode));break;case 18:fi!==null&&(_r?(n=fi,t=t.stateNode,n.nodeType===8?dv(n.parentNode,t):n.nodeType===1&&dv(n,t),Xd(n)):dv(fi,t.stateNode));break;case 4:i=fi,s=_r,fi=t.stateNode.containerInfo,_r=!0,Zo(n,e,t),fi=i,_r=s;break;case 0:case 11:case 14:case 15:if(!Pi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Vy(t,e,o),s=s.next}while(s!==i)}Zo(n,e,t);break;case 1:if(!Pi&&(ru(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Nn(t,e,a)}Zo(n,e,t);break;case 21:Zo(n,e,t);break;case 22:t.mode&1?(Pi=(i=Pi)||t.memoizedState!==null,Zo(n,e,t),Pi=i):Zo(n,e,t);break;default:Zo(n,e,t)}}function WM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new FF),e.forEach(function(i){var s=$F.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function dr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:fi=a.stateNode,_r=!1;break e;case 3:fi=a.stateNode.containerInfo,_r=!0;break e;case 4:fi=a.stateNode.containerInfo,_r=!0;break e}a=a.return}if(fi===null)throw Error(xe(160));vR(r,o,s),fi=null,_r=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Nn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_R(e,n),e=e.sibling}function _R(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(dr(e,n),Vr(n),i&4){try{vd(3,n,n.return),i0(3,n)}catch(m){Nn(n,n.return,m)}try{vd(5,n,n.return)}catch(m){Nn(n,n.return,m)}}break;case 1:dr(e,n),Vr(n),i&512&&t!==null&&ru(t,t.return);break;case 5:if(dr(e,n),Vr(n),i&512&&t!==null&&ru(t,t.return),n.flags&32){var s=n.stateNode;try{Hd(s,"")}catch(m){Nn(n,n.return,m)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&zC(s,r),hy(a,o);var c=hy(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?jC(s,h):u==="dangerouslySetInnerHTML"?GC(s,h):u==="children"?Hd(s,h):SS(s,u,h,c)}switch(a){case"input":oy(s,r);break;case"textarea":BC(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?yu(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?yu(s,!!r.multiple,r.defaultValue,!0):yu(s,!!r.multiple,r.multiple?[]:"",!1))}s[Zd]=r}catch(m){Nn(n,n.return,m)}}break;case 6:if(dr(e,n),Vr(n),i&4){if(n.stateNode===null)throw Error(xe(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(m){Nn(n,n.return,m)}}break;case 3:if(dr(e,n),Vr(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Xd(e.containerInfo)}catch(m){Nn(n,n.return,m)}break;case 4:dr(e,n),Vr(n);break;case 13:dr(e,n),Vr(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(e1=On())),i&4&&WM(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Pi=(c=Pi)||u,dr(e,n),Pi=c):dr(e,n),Vr(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(De=n,u=n.child;u!==null;){for(h=De=u;De!==null;){switch(d=De,f=d.child,d.tag){case 0:case 11:case 14:case 15:vd(4,d,d.return);break;case 1:ru(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Nn(i,t,m)}}break;case 5:ru(d,d.return);break;case 22:if(d.memoizedState!==null){XM(h);continue}}f!==null?(f.return=d,De=f):XM(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WC("display",o))}catch(m){Nn(n,n.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Nn(n,n.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dr(e,n),Vr(n),i&4&&WM(n);break;case 21:break;default:dr(e,n),Vr(n)}}function Vr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(gR(t)){var i=t;break e}t=t.return}throw Error(xe(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Hd(s,""),i.flags&=-33);var r=GM(n);By(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=GM(n);zy(n,a,o);break;default:throw Error(xe(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kF(n,e,t){De=n,yR(n)}function yR(n,e,t){for(var i=(n.mode&1)!==0;De!==null;){var s=De,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||fp;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Pi;a=fp;var c=Pi;if(fp=o,(Pi=l)&&!c)for(De=s;De!==null;)o=De,l=o.child,o.tag===22&&o.memoizedState!==null?$M(s):l!==null?(l.return=o,De=l):$M(s);for(;r!==null;)De=r,yR(r),r=r.sibling;De=s,fp=a,Pi=c}jM(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,De=r):jM(n)}}function jM(n){for(;De!==null;){var e=De;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pi||i0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Pi)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:vr(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&bM(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Xd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}Pi||e.flags&512&&ky(e)}catch(d){Nn(e,e.return,d)}}if(e===n){De=null;break}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}}function XM(n){for(;De!==null;){var e=De;if(e===n){De=null;break}var t=e.sibling;if(t!==null){t.return=e.return,De=t;break}De=e.return}}function $M(n){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{i0(4,e)}catch(l){Nn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Nn(e,s,l)}}var r=e.return;try{ky(e)}catch(l){Nn(e,r,l)}break;case 5:var o=e.return;try{ky(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){De=null;break}var a=e.sibling;if(a!==null){a.return=e.return,De=a;break}De=e.return}}var zF=Math.ceil,tg=Yo.ReactCurrentDispatcher,QS=Yo.ReactCurrentOwner,sr=Yo.ReactCurrentBatchConfig,It=0,ui=null,Gn=null,_i=0,Es=0,ou=il(0),Kn=0,sf=null,sc=0,s0=0,JS=0,_d=null,os=null,e1=0,$u=1/0,xo=null,ng=!1,Hy=null,Pa=null,pp=!1,ga=null,ig=0,yd=0,Gy=null,mm=-1,gm=0;function es(){return It&6?On():mm!==-1?mm:mm=On()}function La(n){return n.mode&1?It&2&&_i!==0?_i&-_i:MF.transition!==null?(gm===0&&(gm=ib()),gm):(n=Wt,n!==0||(n=window.event,n=n===void 0?16:ub(n.type)),n):1}function br(n,e,t,i){if(50<yd)throw yd=0,Gy=null,Error(xe(185));Cf(n,t,i),(!(It&2)||n!==ui)&&(n===ui&&(!(It&2)&&(s0|=t),Kn===4&&fa(n,_i)),fs(n,i),t===1&&It===0&&!(e.mode&1)&&($u=On()+500,e0&&sl()))}function fs(n,e){var t=n.callbackNode;MU(n,e);var i=zm(n,n===ui?_i:0);if(i===0)t!==null&&nM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&nM(t),e===1)n.tag===0?TF(qM.bind(null,n)):bb(qM.bind(null,n)),_F(function(){!(It&6)&&sl()}),t=null;else{switch(sb(i)){case 1:t=AS;break;case 4:t=tb;break;case 16:t=km;break;case 536870912:t=nb;break;default:t=km}t=NR(t,xR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function xR(n,e){if(mm=-1,gm=0,It&6)throw Error(xe(327));var t=n.callbackNode;if(wu()&&n.callbackNode!==t)return null;var i=zm(n,n===ui?_i:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=sg(n,i);else{e=i;var s=It;It|=2;var r=TR();(ui!==n||_i!==e)&&(xo=null,$u=On()+500,jl(n,e));do try{GF();break}catch(a){SR(n,a)}while(!0);kS(),tg.current=r,It=s,Gn!==null?e=0:(ui=null,_i=0,e=Kn)}if(e!==0){if(e===2&&(s=gy(n),s!==0&&(i=s,e=Wy(n,s))),e===1)throw t=sf,jl(n,0),fa(n,i),fs(n,On()),t;if(e===6)fa(n,i);else{if(s=n.current.alternate,!(i&30)&&!BF(s)&&(e=sg(n,i),e===2&&(r=gy(n),r!==0&&(i=r,e=Wy(n,r))),e===1))throw t=sf,jl(n,0),fa(n,i),fs(n,On()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(xe(345));case 2:wl(n,os,xo);break;case 3:if(fa(n,i),(i&130023424)===i&&(e=e1+500-On(),10<e)){if(zm(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){es(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=wy(wl.bind(null,n,os,xo),e);break}wl(n,os,xo);break;case 4:if(fa(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-Cr(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=On()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zF(i/1960))-i,10<i){n.timeoutHandle=wy(wl.bind(null,n,os,xo),i);break}wl(n,os,xo);break;case 5:wl(n,os,xo);break;default:throw Error(xe(329))}}}return fs(n,On()),n.callbackNode===t?xR.bind(null,n):null}function Wy(n,e){var t=_d;return n.current.memoizedState.isDehydrated&&(jl(n,e).flags|=256),n=sg(n,e),n!==2&&(e=os,os=t,e!==null&&jy(e)),n}function jy(n){os===null?os=n:os.push.apply(os,n)}function BF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Lr(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fa(n,e){for(e&=~JS,e&=~s0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Cr(e),i=1<<t;n[t]=-1,e&=~i}}function qM(n){if(It&6)throw Error(xe(327));wu();var e=zm(n,0);if(!(e&1))return fs(n,On()),null;var t=sg(n,e);if(n.tag!==0&&t===2){var i=gy(n);i!==0&&(e=i,t=Wy(n,i))}if(t===1)throw t=sf,jl(n,0),fa(n,e),fs(n,On()),t;if(t===6)throw Error(xe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,wl(n,os,xo),fs(n,On()),null}function t1(n,e){var t=It;It|=1;try{return n(e)}finally{It=t,It===0&&($u=On()+500,e0&&sl())}}function rc(n){ga!==null&&ga.tag===0&&!(It&6)&&wu();var e=It;It|=1;var t=sr.transition,i=Wt;try{if(sr.transition=null,Wt=1,n)return n()}finally{Wt=i,sr.transition=t,It=e,!(It&6)&&sl()}}function n1(){Es=ou.current,cn(ou)}function jl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,vF(t)),Gn!==null)for(t=Gn.return;t!==null;){var i=t;switch(US(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&jm();break;case 3:ju(),cn(hs),cn(ki),jS();break;case 5:WS(i);break;case 4:ju();break;case 13:cn(yn);break;case 19:cn(yn);break;case 10:zS(i.type._context);break;case 22:case 23:n1()}t=t.return}if(ui=n,Gn=n=Ia(n.current,null),_i=Es=e,Kn=0,sf=null,JS=s0=sc=0,os=_d=null,Vl!==null){for(e=0;e<Vl.length;e++)if(t=Vl[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Vl=null}return n}function SR(n,e){do{var t=Gn;try{if(kS(),dm.current=eg,Jm){for(var i=En.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Jm=!1}if(ic=0,oi=$n=En=null,gd=!1,ef=0,QS.current=null,t===null||t.return===null){Kn=1,sf=e,Gn=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=_i,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=OM(o);if(f!==null){f.flags&=-257,UM(f,o,a,r,e),f.mode&1&&DM(r,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){DM(r,c,e),i1();break e}l=Error(xe(426))}}else if(mn&&a.mode&1){var v=OM(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),UM(v,o,a,r,e),FS(Xu(l,a));break e}}r=l=Xu(l,a),Kn!==4&&(Kn=2),_d===null?_d=[r]:_d.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var p=sR(r,l,e);CM(r,p);break e;case 1:a=l;var y=r.type,_=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pa===null||!Pa.has(_)))){r.flags|=65536,e&=-e,r.lanes|=e;var x=rR(r,a,e);CM(r,x);break e}}r=r.return}while(r!==null)}wR(t)}catch(E){e=E,Gn===t&&t!==null&&(Gn=t=t.return);continue}break}while(!0)}function TR(){var n=tg.current;return tg.current=eg,n===null?eg:n}function i1(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),ui===null||!(sc&268435455)&&!(s0&268435455)||fa(ui,_i)}function sg(n,e){var t=It;It|=2;var i=TR();(ui!==n||_i!==e)&&(xo=null,jl(n,e));do try{HF();break}catch(s){SR(n,s)}while(!0);if(kS(),It=t,tg.current=i,Gn!==null)throw Error(xe(261));return ui=null,_i=0,Kn}function HF(){for(;Gn!==null;)MR(Gn)}function GF(){for(;Gn!==null&&!pU();)MR(Gn)}function MR(n){var e=AR(n.alternate,n,Es);n.memoizedProps=n.pendingProps,e===null?wR(n):Gn=e,QS.current=null}function wR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=UF(t,e),t!==null){t.flags&=32767,Gn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Kn=6,Gn=null;return}}else if(t=OF(t,e,Es),t!==null){Gn=t;return}if(e=e.sibling,e!==null){Gn=e;return}Gn=e=n}while(e!==null);Kn===0&&(Kn=5)}function wl(n,e,t){var i=Wt,s=sr.transition;try{sr.transition=null,Wt=1,WF(n,e,t,i)}finally{sr.transition=s,Wt=i}return null}function WF(n,e,t,i){do wu();while(ga!==null);if(It&6)throw Error(xe(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(xe(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(wU(n,r),n===ui&&(Gn=ui=null,_i=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||pp||(pp=!0,NR(km,function(){return wu(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=sr.transition,sr.transition=null;var o=Wt;Wt=1;var a=It;It|=4,QS.current=null,VF(n,t),_R(t,n),uF(Ty),Bm=!!Sy,Ty=Sy=null,n.current=t,kF(t),mU(),It=a,Wt=o,sr.transition=r}else n.current=t;if(pp&&(pp=!1,ga=n,ig=s),r=n.pendingLanes,r===0&&(Pa=null),_U(t.stateNode),fs(n,On()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(ng)throw ng=!1,n=Hy,Hy=null,n;return ig&1&&n.tag!==0&&wu(),r=n.pendingLanes,r&1?n===Gy?yd++:(yd=0,Gy=n):yd=0,sl(),null}function wu(){if(ga!==null){var n=sb(ig),e=sr.transition,t=Wt;try{if(sr.transition=null,Wt=16>n?16:n,ga===null)var i=!1;else{if(n=ga,ga=null,ig=0,It&6)throw Error(xe(331));var s=It;for(It|=4,De=n.current;De!==null;){var r=De,o=r.child;if(De.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(De=c;De!==null;){var u=De;switch(u.tag){case 0:case 11:case 15:vd(8,u,r)}var h=u.child;if(h!==null)h.return=u,De=h;else for(;De!==null;){u=De;var d=u.sibling,f=u.return;if(mR(u),u===c){De=null;break}if(d!==null){d.return=f,De=d;break}De=f}}}var g=r.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}De=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,De=o;else e:for(;De!==null;){if(r=De,r.flags&2048)switch(r.tag){case 0:case 11:case 15:vd(9,r,r.return)}var p=r.sibling;if(p!==null){p.return=r.return,De=p;break e}De=r.return}}var y=n.current;for(De=y;De!==null;){o=De;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,De=_;else e:for(o=y;De!==null;){if(a=De,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:i0(9,a)}}catch(E){Nn(a,a.return,E)}if(a===o){De=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,De=x;break e}De=a.return}}if(It=s,sl(),eo&&typeof eo.onPostCommitFiberRoot=="function")try{eo.onPostCommitFiberRoot(Yg,n)}catch{}i=!0}return i}finally{Wt=t,sr.transition=e}}return!1}function YM(n,e,t){e=Xu(t,e),e=sR(n,e,1),n=Ra(n,e,1),e=es(),n!==null&&(Cf(n,1,e),fs(n,e))}function Nn(n,e,t){if(n.tag===3)YM(n,n,t);else for(;e!==null;){if(e.tag===3){YM(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pa===null||!Pa.has(i))){n=Xu(t,n),n=rR(e,n,1),e=Ra(e,n,1),n=es(),e!==null&&(Cf(e,1,n),fs(e,n));break}}e=e.return}}function jF(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=es(),n.pingedLanes|=n.suspendedLanes&t,ui===n&&(_i&t)===t&&(Kn===4||Kn===3&&(_i&130023424)===_i&&500>On()-e1?jl(n,0):JS|=t),fs(n,e)}function ER(n,e){e===0&&(n.mode&1?(e=sp,sp<<=1,!(sp&130023424)&&(sp=4194304)):e=1);var t=es();n=Go(n,e),n!==null&&(Cf(n,e,t),fs(n,t))}function XF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ER(n,t)}function $F(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(xe(314))}i!==null&&i.delete(e),ER(n,t)}var AR;AR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||hs.current)ls=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ls=!1,DF(n,e,t);ls=!!(n.flags&131072)}else ls=!1,mn&&e.flags&1048576&&Rb(e,qm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;pm(n,e),n=e.pendingProps;var s=Hu(e,ki.current);Mu(e,t),s=$S(null,e,i,n,s,t);var r=qS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(i)?(r=!0,Xm(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,HS(e),s.updater=n0,e.stateNode=s,s._reactInternals=e,Py(e,i,n,t),e=Dy(null,e,i,!0,r,t)):(e.tag=0,mn&&r&&OS(e),qi(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(pm(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=YF(i),n=vr(i,n),s){case 0:e=Iy(null,e,i,n,t);break e;case 1:e=kM(null,e,i,n,t);break e;case 11:e=FM(null,e,i,n,t);break e;case 14:e=VM(null,e,i,vr(i.type,n),t);break e}throw Error(xe(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vr(i,s),Iy(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vr(i,s),kM(n,e,i,s,t);case 3:e:{if(cR(e),n===null)throw Error(xe(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Ub(n,e),Zm(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Xu(Error(xe(423)),e),e=zM(n,e,i,t,s);break e}else if(i!==s){s=Xu(Error(xe(424)),e),e=zM(n,e,i,t,s);break e}else for(Rs=ba(e.stateNode.containerInfo.firstChild),Ds=e,mn=!0,Sr=null,t=Db(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Gu(),i===s){e=Wo(n,e,t);break e}qi(n,e,i,t)}e=e.child}return e;case 5:return Fb(e),n===null&&Cy(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,My(i,s)?o=null:r!==null&&My(i,r)&&(e.flags|=32),lR(n,e),qi(n,e,o,t),e.child;case 6:return n===null&&Cy(e),null;case 13:return uR(n,e,t);case 4:return GS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Wu(e,null,i,t):qi(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vr(i,s),FM(n,e,i,s,t);case 7:return qi(n,e,e.pendingProps,t),e.child;case 8:return qi(n,e,e.pendingProps.children,t),e.child;case 12:return qi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,nn(Ym,i._currentValue),i._currentValue=o,r!==null)if(Lr(r.value,o)){if(r.children===s.children&&!hs.current){e=Wo(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Io(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),by(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(xe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),by(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}qi(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Mu(e,t),s=ar(s),i=i(s),e.flags|=1,qi(n,e,i,t),e.child;case 14:return i=e.type,s=vr(i,e.pendingProps),s=vr(i.type,s),VM(n,e,i,s,t);case 15:return oR(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vr(i,s),pm(n,e),e.tag=1,ds(i)?(n=!0,Xm(e)):n=!1,Mu(e,t),iR(e,i,s),Py(e,i,s,t),Dy(null,e,i,!0,n,t);case 19:return hR(n,e,t);case 22:return aR(n,e,t)}throw Error(xe(156,e.tag))};function NR(n,e){return eb(n,e)}function qF(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(n,e,t,i){return new qF(n,e,t,i)}function s1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YF(n){if(typeof n=="function")return s1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===MS)return 11;if(n===wS)return 14}return 2}function Ia(n,e){var t=n.alternate;return t===null?(t=tr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function vm(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")s1(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Kc:return Xl(t.children,s,r,e);case TS:o=8,s|=8;break;case ty:return n=tr(12,t,e,s|2),n.elementType=ty,n.lanes=r,n;case ny:return n=tr(13,t,e,s),n.elementType=ny,n.lanes=r,n;case iy:return n=tr(19,t,e,s),n.elementType=iy,n.lanes=r,n;case FC:return r0(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case OC:o=10;break e;case UC:o=9;break e;case MS:o=11;break e;case wS:o=14;break e;case aa:o=16,i=null;break e}throw Error(xe(130,n==null?n:typeof n,""))}return e=tr(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Xl(n,e,t,i){return n=tr(7,n,i,e),n.lanes=t,n}function r0(n,e,t,i){return n=tr(22,n,i,e),n.elementType=FC,n.lanes=t,n.stateNode={isHidden:!1},n}function xv(n,e,t){return n=tr(6,n,null,e),n.lanes=t,n}function Sv(n,e,t){return e=tr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KF(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tv(0),this.expirationTimes=tv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tv(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function r1(n,e,t,i,s,r,o,a,l){return n=new KF(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=tr(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},HS(r),n}function ZF(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function CR(n){if(!n)return Ga;n=n._reactInternals;e:{if(gc(n)!==n||n.tag!==1)throw Error(xe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xe(171))}if(n.tag===1){var t=n.type;if(ds(t))return Cb(n,t,e)}return e}function bR(n,e,t,i,s,r,o,a,l){return n=r1(t,i,!0,n,s,r,o,a,l),n.context=CR(null),t=n.current,i=es(),s=La(t),r=Io(i,s),r.callback=e??null,Ra(t,r,s),n.current.lanes=s,Cf(n,s,i),fs(n,i),n}function o0(n,e,t,i){var s=e.current,r=es(),o=La(s);return t=CR(t),e.context===null?e.context=t:e.pendingContext=t,e=Io(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ra(s,e,o),n!==null&&(br(n,s,o,r),hm(n,s,o)),o}function rg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function KM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function o1(n,e){KM(n,e),(n=n.alternate)&&KM(n,e)}function QF(){return null}var RR=typeof reportError=="function"?reportError:function(n){console.error(n)};function a1(n){this._internalRoot=n}a0.prototype.render=a1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(xe(409));o0(n,e,null,null)};a0.prototype.unmount=a1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;rc(function(){o0(null,n,null,null)}),e[Ho]=null}};function a0(n){this._internalRoot=n}a0.prototype.unstable_scheduleHydration=function(n){if(n){var e=ab();n={blockedOn:null,target:n,priority:e};for(var t=0;t<da.length&&e!==0&&e<da[t].priority;t++);da.splice(t,0,n),t===0&&cb(n)}};function l1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ZM(){}function JF(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=rg(o);r.call(c)}}var o=bR(e,i,n,0,null,!1,!1,"",ZM);return n._reactRootContainer=o,n[Ho]=o.current,Yd(n.nodeType===8?n.parentNode:n),rc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=rg(l);a.call(c)}}var l=r1(n,0,!1,null,null,!1,!1,"",ZM);return n._reactRootContainer=l,n[Ho]=l.current,Yd(n.nodeType===8?n.parentNode:n),rc(function(){o0(e,l,t,i)}),l}function c0(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=rg(o);a.call(l)}}o0(e,o,n,s)}else o=JF(t,e,n,s,i);return rg(o)}rb=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ed(e.pendingLanes);t!==0&&(NS(e,t|1),fs(e,On()),!(It&6)&&($u=On()+500,sl()))}break;case 13:rc(function(){var i=Go(n,1);if(i!==null){var s=es();br(i,n,1,s)}}),o1(n,1)}};CS=function(n){if(n.tag===13){var e=Go(n,134217728);if(e!==null){var t=es();br(e,n,134217728,t)}o1(n,134217728)}};ob=function(n){if(n.tag===13){var e=La(n),t=Go(n,e);if(t!==null){var i=es();br(t,n,e,i)}o1(n,e)}};ab=function(){return Wt};lb=function(n,e){var t=Wt;try{return Wt=n,e()}finally{Wt=t}};fy=function(n,e,t){switch(e){case"input":if(oy(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=Jg(i);if(!s)throw Error(xe(90));kC(i),oy(i,s)}}}break;case"textarea":BC(n,t);break;case"select":e=t.value,e!=null&&yu(n,!!t.multiple,e,!1)}};qC=t1;YC=rc;var eV={usingClientEntryPoint:!1,Events:[Rf,eu,Jg,XC,$C,t1]},Vh={findFiberByHostInstance:Fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tV={bundleType:Vh.bundleType,version:Vh.version,rendererPackageName:Vh.rendererPackageName,rendererConfig:Vh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=QC(n),n===null?null:n.stateNode},findFiberByHostInstance:Vh.findFiberByHostInstance||QF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{Yg=mp.inject(tV),eo=mp}catch{}}Hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eV;Hs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l1(e))throw Error(xe(200));return ZF(n,e,null,t)};Hs.createRoot=function(n,e){if(!l1(n))throw Error(xe(299));var t=!1,i="",s=RR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=r1(n,1,!1,null,null,t,!1,i,s),n[Ho]=e.current,Yd(n.nodeType===8?n.parentNode:n),new a1(e)};Hs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(xe(188)):(n=Object.keys(n).join(","),Error(xe(268,n)));return n=QC(e),n=n===null?null:n.stateNode,n};Hs.flushSync=function(n){return rc(n)};Hs.hydrate=function(n,e,t){if(!l0(e))throw Error(xe(200));return c0(null,n,e,!0,t)};Hs.hydrateRoot=function(n,e,t){if(!l1(n))throw Error(xe(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=RR;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=bR(e,null,n,1,t??null,s,!1,r,o),n[Ho]=e.current,Yd(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new a0(e)};Hs.render=function(n,e,t){if(!l0(e))throw Error(xe(200));return c0(null,n,e,!1,t)};Hs.unmountComponentAtNode=function(n){if(!l0(n))throw Error(xe(40));return n._reactRootContainer?(rc(function(){c0(null,null,n,!1,function(){n._reactRootContainer=null,n[Ho]=null})}),!0):!1};Hs.unstable_batchedUpdates=t1;Hs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!l0(t))throw Error(xe(200));if(n==null||n._reactInternals===void 0)throw Error(xe(38));return c0(n,e,t,!1,i)};Hs.version="18.3.1-next-f1338f8080-20240426";function PR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PR)}catch(n){console.error(n)}}PR(),PC.exports=Hs;var nV=PC.exports,QM=nV;J_.createRoot=QM.createRoot,J_.hydrateRoot=QM.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},rf.apply(this,arguments)}var va;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(va||(va={}));const JM="popstate";function iV(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return Xy("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:og(s)}return rV(e,t,null,n)}function Rn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function LR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sV(){return Math.random().toString(36).substr(2,8)}function ew(n,e){return{usr:n.state,key:n.key,idx:e}}function Xy(n,e,t,i){return t===void 0&&(t=null),rf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?_h(e):e,{state:t,key:e&&e.key||i||sV()})}function og(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function _h(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function rV(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=va.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(rf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=va.Pop;let v=u(),p=v==null?null:v-c;c=v,l&&l({action:a,location:m.location,delta:p})}function d(v,p){a=va.Push;let y=Xy(m.location,v,p);c=u()+1;let _=ew(y,c),x=m.createHref(y);try{o.pushState(_,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(x)}r&&l&&l({action:a,location:m.location,delta:1})}function f(v,p){a=va.Replace;let y=Xy(m.location,v,p);c=u();let _=ew(y,c),x=m.createHref(y);o.replaceState(_,"",x),r&&l&&l({action:a,location:m.location,delta:0})}function g(v){let p=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:og(v);return y=y.replace(/ $/,"%20"),Rn(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let m={get action(){return a},get location(){return n(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(JM,h),l=v,()=>{s.removeEventListener(JM,h),l=null}},createHref(v){return e(s,v)},createURL:g,encodeLocation(v){let p=g(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(v){return o.go(v)}};return m}var tw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(tw||(tw={}));function oV(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?_h(e):e,s=qu(i.pathname||"/",t);if(s==null)return null;let r=IR(n);aV(r);let o=null;for(let a=0;o==null&&a<r.length;++a){let l=_V(s);o=gV(r[a],l)}return o}function IR(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(Rn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Da([i,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(Rn(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),IR(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:pV(c,r.index),routesMeta:u})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of DR(r.path))s(r,o,l)}),e}function DR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=DR(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function aV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const lV=/^:[\w-]+$/,cV=3,uV=2,hV=1,dV=10,fV=-2,nw=n=>n==="*";function pV(n,e){let t=n.split("/"),i=t.length;return t.some(nw)&&(i+=fV),e&&(i+=uV),t.filter(s=>!nw(s)).reduce((s,r)=>s+(lV.test(r)?cV:r===""?hV:dV),i)}function mV(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function gV(n,e){let{routesMeta:t}=n,i={},s="/",r=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=s==="/"?e:e.slice(s.length)||"/",u=$y({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let h=a.route;r.push({params:i,pathname:Da([s,u.pathname]),pathnameBase:TV(Da([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=Da([s,u.pathnameBase]))}return r}function $y(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=vV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let m=a[h]||"";o=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[h];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function vV(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),LR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function _V(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return LR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function qu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function yV(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?_h(n):n;return{pathname:t?t.startsWith("/")?t:xV(t,e):e,search:MV(i),hash:wV(s)}}function xV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Tv(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function OR(n,e){let t=SV(n);return e?t.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function UR(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=_h(n):(s=rf({},n),Rn(!s.pathname||!s.pathname.includes("?"),Tv("?","pathname","search",s)),Rn(!s.pathname||!s.pathname.includes("#"),Tv("#","pathname","hash",s)),Rn(!s.search||!s.search.includes("#"),Tv("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=yV(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Da=n=>n.join("/").replace(/\/\/+/g,"/"),TV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),MV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function EV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const FR=["post","put","patch","delete"];new Set(FR);const AV=["get",...FR];new Set(AV);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},of.apply(this,arguments)}const u0=z.createContext(null),VR=z.createContext(null),rl=z.createContext(null),h0=z.createContext(null),vc=z.createContext({outlet:null,matches:[],isDataRoute:!1}),kR=z.createContext(null);function NV(n,e){let{relative:t}=e===void 0?{}:e;Lf()||Rn(!1);let{basename:i,navigator:s}=z.useContext(rl),{hash:r,pathname:o,search:a}=d0(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Da([i,o])),s.createHref({pathname:l,search:a,hash:r})}function Lf(){return z.useContext(h0)!=null}function yh(){return Lf()||Rn(!1),z.useContext(h0).location}function zR(n){z.useContext(rl).static||z.useLayoutEffect(n)}function CV(){let{isDataRoute:n}=z.useContext(vc);return n?BV():bV()}function bV(){Lf()||Rn(!1);let n=z.useContext(u0),{basename:e,future:t,navigator:i}=z.useContext(rl),{matches:s}=z.useContext(vc),{pathname:r}=yh(),o=JSON.stringify(OR(s,t.v7_relativeSplatPath)),a=z.useRef(!1);return zR(()=>{a.current=!0}),z.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=UR(c,JSON.parse(o),r,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Da([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,r,n])}function d0(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=z.useContext(rl),{matches:s}=z.useContext(vc),{pathname:r}=yh(),o=JSON.stringify(OR(s,i.v7_relativeSplatPath));return z.useMemo(()=>UR(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function RV(n,e){return PV(n,e)}function PV(n,e,t,i){Lf()||Rn(!1);let{navigator:s}=z.useContext(rl),{matches:r}=z.useContext(vc),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=yh(),u;if(e){var h;let v=typeof e=="string"?_h(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Rn(!1),u=v}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=oV(n,{pathname:f}),m=UV(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Da([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Da([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,t,i);return e&&m?z.createElement(h0.Provider,{value:{location:of({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:va.Pop}},m):m}function LV(){let n=zV(),e=EV(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:s},t):null,null)}const IV=z.createElement(LV,null);class DV extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(vc.Provider,{value:this.props.routeContext},z.createElement(kR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OV(n){let{routeContext:e,match:t,children:i}=n,s=z.useContext(u0);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(vc.Provider,{value:e},i)}function UV(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if((r=t)!=null&&r.errors)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Rn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=t,g=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,g=!1,m=null,v=null;t&&(f=a&&h.route.id?a[h.route.id]:void 0,m=h.route.errorElement||IV,l&&(c<0&&d===0?(g=!0,v=null):c===d&&(g=!0,v=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,d+1)),y=()=>{let _;return f?_=m:g?_=v:h.route.Component?_=z.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=u,z.createElement(OV,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:t!=null},children:_})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?z.createElement(DV,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var BR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(BR||{}),ag=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ag||{});function FV(n){let e=z.useContext(u0);return e||Rn(!1),e}function VV(n){let e=z.useContext(VR);return e||Rn(!1),e}function kV(n){let e=z.useContext(vc);return e||Rn(!1),e}function HR(n){let e=kV(),t=e.matches[e.matches.length-1];return t.route.id||Rn(!1),t.route.id}function zV(){var n;let e=z.useContext(kR),t=VV(ag.UseRouteError),i=HR(ag.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function BV(){let{router:n}=FV(BR.UseNavigateStable),e=HR(ag.UseNavigateStable),t=z.useRef(!1);return zR(()=>{t.current=!0}),z.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,of({fromRouteId:e},r)))},[n,e])}function El(n){Rn(!1)}function HV(n){let{basename:e="/",children:t=null,location:i,navigationType:s=va.Pop,navigator:r,static:o=!1,future:a}=n;Lf()&&Rn(!1);let l=e.replace(/^\/*/,"/"),c=z.useMemo(()=>({basename:l,navigator:r,static:o,future:of({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=_h(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:g="default"}=i,m=z.useMemo(()=>{let v=qu(u,l);return v==null?null:{location:{pathname:v,search:h,hash:d,state:f,key:g},navigationType:s}},[l,u,h,d,f,g,s]);return m==null?null:z.createElement(rl.Provider,{value:c},z.createElement(h0.Provider,{children:t,value:m}))}function GV(n){let{children:e,location:t}=n;return RV(qy(e),t)}new Promise(()=>{});function qy(n,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(n,(i,s)=>{if(!z.isValidElement(i))return;let r=[...e,s];if(i.type===z.Fragment){t.push.apply(t,qy(i.props.children,r));return}i.type!==El&&Rn(!1),!i.props.index||!i.props.children||Rn(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=qy(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lg(){return lg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lg.apply(this,arguments)}function GR(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function WV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function jV(n,e){return n.button===0&&(!e||e==="_self")&&!WV(n)}const XV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],$V=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],qV="6";try{window.__reactRouterVersion=qV}catch{}const YV=z.createContext({isTransitioning:!1}),KV="startTransition",iw=jO[KV];function ZV(n){let{basename:e,children:t,future:i,window:s}=n,r=z.useRef();r.current==null&&(r.current=iV({window:s,v5Compat:!0}));let o=r.current,[a,l]=z.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=z.useCallback(h=>{c&&iw?iw(()=>l(h)):l(h)},[l,c]);return z.useLayoutEffect(()=>o.listen(u),[o,u]),z.createElement(HV,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const QV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cg=z.forwardRef(function(e,t){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:h}=e,d=GR(e,XV),{basename:f}=z.useContext(rl),g,m=!1;if(typeof c=="string"&&JV.test(c)&&(g=c,QV))try{let _=new URL(window.location.href),x=c.startsWith("//")?new URL(_.protocol+c):new URL(c),E=qu(x.pathname,f);x.origin===_.origin&&E!=null?c=E+x.search+x.hash:m=!0}catch{}let v=NV(c,{relative:s}),p=tk(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,unstable_viewTransition:h});function y(_){i&&i(_),_.defaultPrevented||p(_)}return z.createElement("a",lg({},d,{href:g||v,onClick:m||r?i:y,ref:t,target:l}))}),sw=z.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:u}=e,h=GR(e,$V),d=d0(l,{relative:h.relative}),f=yh(),g=z.useContext(VR),{navigator:m,basename:v}=z.useContext(rl),p=g!=null&&nk(d)&&c===!0,y=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,_=f.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(_=_.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&v&&(x=qu(x,v)||x);const E=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let w=_===y||!o&&_.startsWith(y)&&_.charAt(E)==="/",T=x!=null&&(x===y||!o&&x.startsWith(y)&&x.charAt(y.length)==="/"),A={isActive:w,isPending:T,isTransitioning:p},M=w?i:void 0,S;typeof r=="function"?S=r(A):S=[r,w?"active":null,T?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(A):a;return z.createElement(cg,lg({},h,{"aria-current":M,className:S,ref:t,style:P,to:l,unstable_viewTransition:c}),typeof u=="function"?u(A):u)});var Yy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Yy||(Yy={}));var rw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(rw||(rw={}));function ek(n){let e=z.useContext(u0);return e||Rn(!1),e}function tk(n,e){let{target:t,replace:i,state:s,preventScrollReset:r,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=CV(),c=yh(),u=d0(n,{relative:o});return z.useCallback(h=>{if(jV(h,t)){h.preventDefault();let d=i!==void 0?i:og(c)===og(u);l(n,{replace:d,state:s,preventScrollReset:r,relative:o,unstable_viewTransition:a})}},[c,l,u,i,s,t,n,r,o,a])}function nk(n,e){e===void 0&&(e={});let t=z.useContext(YV);t==null&&Rn(!1);let{basename:i}=ek(Yy.useViewTransitionState),s=d0(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=qu(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=qu(t.nextLocation.pathname,i)||t.nextLocation.pathname;return $y(s.pathname,o)!=null||$y(s.pathname,r)!=null}const f0=z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),p0=z.createContext({}),m0=z.createContext(null),c1=typeof document<"u",If=c1?z.useLayoutEffect:z.useEffect,WR=z.createContext({strict:!1}),u1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ik="framerAppearId",jR="data-"+u1(ik),sk={skipAnimations:!1,useManualTiming:!1};class ow{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function rk(n){let e=new ow,t=new ow,i=0,s=!1,r=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const h=u&&s,d=h?e:t;return c&&o.add(l),d.add(l)&&h&&s&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(s){r=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const u=e.order[c];o.has(u)&&(a.schedule(u),n()),u(l)}s=!1,r&&(r=!1,a.process(l))}};return a}const gp=["read","resolveKeyframes","update","preRender","render","postRender"],ok=40;function XR(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=gp.reduce((h,d)=>(h[d]=rk(()=>t=!0),h),{}),o=h=>{r[h].process(s)},a=()=>{const h=performance.now();t=!1,s.delta=i?1e3/60:Math.max(Math.min(h-s.timestamp,ok),1),s.timestamp=h,s.isProcessing=!0,gp.forEach(o),s.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,s.isProcessing||n(a)};return{schedule:gp.reduce((h,d)=>{const f=r[d];return h[d]=(g,m=!1,v=!1)=>(t||l(),f.schedule(g,m,v)),h},{}),cancel:h=>gp.forEach(d=>r[d].cancel(h)),state:s,steps:r}}const{schedule:h1,cancel:uJ}=XR(queueMicrotask,!1);function ak(n,e,t,i){const{visualElement:s}=z.useContext(p0),r=z.useContext(WR),o=z.useContext(m0),a=z.useContext(f0).reducedMotion,l=z.useRef();i=i||r.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;z.useInsertionEffect(()=>{c&&c.update(t,o)});const u=z.useRef(!!(t[jR]&&!window.HandoffComplete));return If(()=>{c&&(h1.render(c.render),u.current&&c.animationState&&c.animationState.animateChanges())}),z.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function au(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function lk(n,e,t){return z.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):au(t)&&(t.current=i))},[e])}function af(n){return typeof n=="string"||Array.isArray(n)}function g0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const d1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],f1=["initial",...d1];function v0(n){return g0(n.animate)||f1.some(e=>af(n[e]))}function $R(n){return!!(v0(n)||n.variants)}function ck(n,e){if(v0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||af(t)?t:void 0,animate:af(i)?i:void 0}}return n.inherit!==!1?e:{}}function uk(n){const{initial:e,animate:t}=ck(n,z.useContext(p0));return z.useMemo(()=>({initial:e,animate:t}),[aw(e),aw(t)])}function aw(n){return Array.isArray(n)?n.join(" "):n}const lw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lf={};for(const n in lw)lf[n]={isEnabled:e=>lw[n].some(t=>!!e[t])};function hk(n){for(const e in n)lf[e]={...lf[e],...n[e]}}const p1=z.createContext({}),qR=z.createContext({}),dk=Symbol.for("motionComponentSymbol");function fk({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:s}){n&&hk(n);function r(a,l){let c;const u={...z.useContext(f0),...a,layoutId:pk(a)},{isStatic:h}=u,d=uk(a),f=i(a,h);if(!h&&c1){d.visualElement=ak(s,f,u,e);const g=z.useContext(qR),m=z.useContext(WR).strict;d.visualElement&&(c=d.visualElement.loadFeatures(u,m,n,g))}return b.jsxs(p0.Provider,{value:d,children:[c&&d.visualElement?b.jsx(c,{visualElement:d.visualElement,...u}):null,t(s,a,lk(f,d.visualElement,l),f,h,d.visualElement)]})}const o=z.forwardRef(r);return o[dk]=s,o}function pk({layoutId:n}){const e=z.useContext(p1).id;return e&&n!==void 0?e+"-"+n:n}function mk(n){function e(i,s={}){return fk(n(i,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const gk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function m1(n){return typeof n!="string"||n.includes("-")?!1:!!(gk.indexOf(n)>-1||/[A-Z]/u.test(n))}const ug={};function vk(n){Object.assign(ug,n)}const Df=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_c=new Set(Df);function YR(n,{layout:e,layoutId:t}){return _c.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!ug[n]||n==="opacity")}const Di=n=>!!(n&&n.getVelocity),_k={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yk=Df.length;function xk(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,s){let r="";for(let o=0;o<yk;o++){const a=Df[o];if(n[a]!==void 0){const l=_k[a]||a;r+=`${l}(${n[a]}) `}}return e&&!n.z&&(r+="translateZ(0)"),r=r.trim(),s?r=s(n,i?"":r):t&&i&&(r="none"),r}const KR=n=>e=>typeof e=="string"&&e.startsWith(n),ZR=KR("--"),Sk=KR("var(--"),g1=n=>Sk(n)?Tk.test(n.split("/*")[0].trim()):!1,Tk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mk=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Wa=(n,e,t)=>t>e?e:t<n?n:t,xh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},xd={...xh,transform:n=>Wa(0,1,n)},vp={...xh,default:1},Sd=n=>Math.round(n*1e5)/1e5,v1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,wk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Ek=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Of(n){return typeof n=="string"}const Uf=n=>({test:e=>Of(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),sa=Uf("deg"),no=Uf("%"),it=Uf("px"),Ak=Uf("vh"),Nk=Uf("vw"),cw={...no,parse:n=>no.parse(n)/100,transform:n=>no.transform(n*100)},uw={...xh,transform:Math.round},QR={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,size:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,rotate:sa,rotateX:sa,rotateY:sa,rotateZ:sa,scale:vp,scaleX:vp,scaleY:vp,scaleZ:vp,skew:sa,skewX:sa,skewY:sa,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:xd,originX:cw,originY:cw,originZ:it,zIndex:uw,backgroundPositionX:it,backgroundPositionY:it,fillOpacity:xd,strokeOpacity:xd,numOctaves:uw};function _1(n,e,t,i){const{style:s,vars:r,transform:o,transformOrigin:a}=n;let l=!1,c=!1,u=!0;for(const h in e){const d=e[h];if(ZR(h)){r[h]=d;continue}const f=QR[h],g=Mk(d,f);if(_c.has(h)){if(l=!0,o[h]=g,!u)continue;d!==(f.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=g):s[h]=g}if(e.transform||(l||i?s.transform=xk(n.transform,t,u,i):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:f=0}=a;s.transformOrigin=`${h} ${d} ${f}`}}const y1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JR(n,e,t){for(const i in e)!Di(e[i])&&!YR(i,t)&&(n[i]=e[i])}function Ck({transformTemplate:n},e,t){return z.useMemo(()=>{const i=y1();return _1(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function bk(n,e,t){const i=n.style||{},s={};return JR(s,i,n),Object.assign(s,Ck(n,e,t)),s}function Rk(n,e,t){const i={},s=bk(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=s,i}const Pk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Pk.has(n)}let eP=n=>!hg(n);function Lk(n){n&&(eP=e=>e.startsWith("on")?!hg(e):n(e))}try{Lk(require("@emotion/is-prop-valid").default)}catch{}function Ik(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(eP(s)||t===!0&&hg(s)||!e&&!hg(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function hw(n,e,t){return typeof n=="string"?n:it.transform(e+t*n)}function Dk(n,e,t){const i=hw(e,n.x,n.width),s=hw(t,n.y,n.height);return`${i} ${s}`}const Ok={offset:"stroke-dashoffset",array:"stroke-dasharray"},Uk={offset:"strokeDashoffset",array:"strokeDasharray"};function Fk(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?Ok:Uk;n[r.offset]=it.transform(-i);const o=it.transform(e),a=it.transform(t);n[r.array]=`${o} ${a}`}function x1(n,{attrX:e,attrY:t,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h,d){if(_1(n,c,u,d),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:g,dimensions:m}=n;f.transform&&(m&&(g.transform=f.transform),delete f.transform),m&&(s!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=Dk(m,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),i!==void 0&&(f.scale=i),o!==void 0&&Fk(f,o,a,l,!1)}const tP=()=>({...y1(),attrs:{}}),S1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Vk(n,e,t,i){const s=z.useMemo(()=>{const r=tP();return x1(r,e,{enableHardwareAcceleration:!1},S1(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};JR(r,n.style,n),s.style={...r,...s.style}}return s}function kk(n=!1){return(t,i,s,{latestValues:r},o)=>{const l=(m1(t)?Vk:Rk)(i,r,o,t),c=Ik(i,typeof t=="string",n),u=t!==z.Fragment?{...c,...l,ref:s}:{},{children:h}=i,d=z.useMemo(()=>Di(h)?h.get():h,[h]);return z.createElement(t,{...u,children:d})}}function nP(n,{style:e,vars:t},i,s){Object.assign(n.style,e,s&&s.getProjectionStyles(i));for(const r in t)n.style.setProperty(r,t[r])}const iP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sP(n,e,t,i){nP(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(iP.has(s)?s:u1(s),e.attrs[s])}function T1(n,e,t){var i;const{style:s}=n,r={};for(const o in s)(Di(s[o])||e.style&&Di(e.style[o])||YR(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[o]=s[o]);return r}function rP(n,e,t){const i=T1(n,e,t);for(const s in n)if(Di(n[s])||Di(e[s])){const r=Df.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}function dw(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function M1(n,e,t,i){if(typeof e=="function"){const[s,r]=dw(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=dw(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function Ff(n){const e=z.useRef(null);return e.current===null&&(e.current=n()),e.current}const Ky=n=>Array.isArray(n),zk=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Bk=n=>Ky(n)?n[n.length-1]||0:n;function _m(n){const e=Di(n)?n.get():n;return zk(e)?e.toValue():e}function Hk({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,s,r){const o={latestValues:Gk(i,s,r,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const oP=n=>(e,t)=>{const i=z.useContext(p0),s=z.useContext(m0),r=()=>Hk(n,e,i,s);return t?r():Ff(r)};function Gk(n,e,t,i){const s={},r=i(n,{});for(const d in r)s[d]=_m(r[d]);let{initial:o,animate:a}=n;const l=v0(n),c=$R(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const h=u?a:o;return h&&typeof h!="boolean"&&!g0(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const g=M1(n,f);if(!g)return;const{transitionEnd:m,transition:v,...p}=g;for(const y in p){let _=p[y];if(Array.isArray(_)){const x=u?_.length-1:0;_=_[x]}_!==null&&(s[y]=_)}for(const y in m)s[y]=m[y]}),s}const yi=n=>n,{schedule:Pt,cancel:Ir,state:ri,steps:Mv}=XR(typeof requestAnimationFrame<"u"?requestAnimationFrame:yi,!0),Wk={useVisualState:oP({scrapeMotionValuesFromProps:rP,createRenderState:tP,onMount:(n,e,{renderState:t,latestValues:i})=>{Pt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Pt.render(()=>{x1(t,i,{enableHardwareAcceleration:!1},S1(e.tagName),n.transformTemplate),sP(e,t)})}})},jk={useVisualState:oP({scrapeMotionValuesFromProps:T1,createRenderState:y1})};function Xk(n,{forwardMotionProps:e=!1},t,i){return{...m1(n)?Wk:jk,preloadedFeatures:t,useRender:kk(e),createVisualElement:i,Component:n}}function bo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const aP=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function _0(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const $k=n=>e=>aP(e)&&n(e,_0(e));function Do(n,e,t,i){return bo(n,e,$k(t),i)}const qk=(n,e)=>t=>e(n(t)),Oo=(...n)=>n.reduce(qk);function lP(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const fw=lP("dragHorizontal"),pw=lP("dragVertical");function cP(n){let e=!1;if(n==="y")e=pw();else if(n==="x")e=fw();else{const t=fw(),i=pw();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function uP(){const n=cP(!0);return n?(n(),!1):!0}class ol{constructor(e){this.isMounted=!1,this.node=e}update(){}}function mw(n,e){const t=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",s=(r,o)=>{if(r.pointerType==="touch"||uP())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e);const l=a[i];l&&Pt.postRender(()=>l(r,o))};return Do(n.current,t,s,{passive:!n.getProps()[i]})}class Yk extends ol{mount(){this.unmount=Oo(mw(this.node,!0),mw(this.node,!1))}unmount(){}}class Kk extends ol{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oo(bo(this.node.current,"focus",()=>this.onFocus()),bo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const hP=(n,e)=>e?n===e?!0:hP(n,e.parentElement):!1;function wv(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,_0(t))}class Zk extends ol{constructor(){super(...arguments),this.removeStartListeners=yi,this.removeEndListeners=yi,this.removeAccessibleListeners=yi,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),r=Do(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps(),d=!h&&!hP(this.node.current,a.target)?u:c;d&&Pt.update(()=>d(a,l))},{passive:!(i.onTap||i.onPointerUp)}),o=Do(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Oo(r,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||wv("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Pt.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=bo(this.node.current,"keyup",o),wv("down",(a,l)=>{this.startPress(a,l)})},t=bo(this.node.current,"keydown",e),i=()=>{this.isPressing&&wv("cancel",(r,o)=>this.cancelPress(r,o))},s=bo(this.node.current,"blur",i);this.removeAccessibleListeners=Oo(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Pt.postRender(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!uP()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Pt.postRender(()=>i(e,t))}mount(){const e=this.node.getProps(),t=Do(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=bo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Oo(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Zy=new WeakMap,Ev=new WeakMap,Qk=n=>{const e=Zy.get(n.target);e&&e(n)},Jk=n=>{n.forEach(Qk)};function ez({root:n,...e}){const t=n||document;Ev.has(t)||Ev.set(t,{});const i=Ev.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(Jk,{root:n,...e})),i[s]}function tz(n,e,t){const i=ez(e);return Zy.set(n,t),i.observe(n),()=>{Zy.delete(n),i.unobserve(n)}}const nz={some:0,all:1};class iz extends ol{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:nz[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return tz(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(sz(e,t))&&this.startObserver()}unmount(){}}function sz({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const rz={inView:{Feature:iz},tap:{Feature:Zk},focus:{Feature:Kk},hover:{Feature:Yk}};function dP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function y0(n,e,t){const i=n.getProps();return M1(i,e,t!==void 0?t:i.custom,n)}const Oa=n=>n*1e3,Uo=n=>n/1e3,oz={type:"spring",stiffness:500,damping:25,restSpeed:10},az=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),lz={type:"keyframes",duration:.8},cz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uz=(n,{keyframes:e})=>e.length>2?lz:_c.has(n)?n.startsWith("scale")?az(e[1]):oz:cz;function hz({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function w1(n,e){return n[e]||n.default||n}const dz=n=>n!==null;function x0(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(dz),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}let ym;function fz(){ym=void 0}const Ua={now:()=>(ym===void 0&&Ua.set(ri.isProcessing||sk.useManualTiming?ri.timestamp:performance.now()),ym),set:n=>{ym=n,queueMicrotask(fz)}},fP=n=>/^0[^.\s]+$/u.test(n);function pz(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||fP(n):!0}let mz=yi,Qy=yi;const pP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),gz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vz(n){const e=gz.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function mP(n,e,t=1){const[i,s]=vz(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const o=r.trim();return pP(o)?parseFloat(o):o}return g1(s)?mP(s,e,t+1):s}const _z=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),gw=n=>n===xh||n===it,vw=(n,e)=>parseFloat(n.split(", ")[e]),_w=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return vw(s[1],e);{const r=i.match(/^matrix\((.+)\)$/u);return r?vw(r[1],n):0}},yz=new Set(["x","y","z"]),xz=Df.filter(n=>!yz.has(n));function Sz(n){const e=[];return xz.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Yu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:_w(4,13),y:_w(5,14)};Yu.translateX=Yu.x;Yu.translateY=Yu.y;const gP=n=>e=>e.test(n),Tz={test:n=>n==="auto",parse:n=>n},vP=[xh,it,no,sa,Nk,Ak,Tz],yw=n=>vP.find(gP(n)),$l=new Set;let Jy=!1,ex=!1;function _P(){if(ex){const n=Array.from($l).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=Sz(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}ex=!1,Jy=!1,$l.forEach(n=>n.complete()),$l.clear()}function yP(){$l.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ex=!0)})}function Mz(){yP(),_P()}class E1{constructor(e,t,i,s,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?($l.add(this),Jy||(Jy=!0,Pt.read(yP),Pt.resolveKeyframes(_P))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$l.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$l.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const A1=(n,e)=>t=>!!(Of(t)&&Ek.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),xP=(n,e,t)=>i=>{if(!Of(i))return i;const[s,r,o,a]=i.match(v1);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},wz=n=>Wa(0,255,n),Av={...xh,transform:n=>Math.round(wz(n))},zl={test:A1("rgb","red"),parse:xP("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Av.transform(n)+", "+Av.transform(e)+", "+Av.transform(t)+", "+Sd(xd.transform(i))+")"};function Ez(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const tx={test:A1("#"),parse:Ez,transform:zl.transform},lu={test:A1("hsl","hue"),parse:xP("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+no.transform(Sd(e))+", "+no.transform(Sd(t))+", "+Sd(xd.transform(i))+")"},bi={test:n=>zl.test(n)||tx.test(n)||lu.test(n),parse:n=>zl.test(n)?zl.parse(n):lu.test(n)?lu.parse(n):tx.parse(n),transform:n=>Of(n)?n:n.hasOwnProperty("red")?zl.transform(n):lu.transform(n)};function Az(n){var e,t;return isNaN(n)&&Of(n)&&(((e=n.match(v1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(wk))===null||t===void 0?void 0:t.length)||0)>0}const SP="number",TP="color",Nz="var",Cz="var(",xw="${}",bz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cf(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=e.replace(bz,l=>(bi.test(l)?(i.color.push(r),s.push(TP),t.push(bi.parse(l))):l.startsWith(Cz)?(i.var.push(r),s.push(Nz),t.push(l)):(i.number.push(r),s.push(SP),t.push(parseFloat(l))),++r,xw)).split(xw);return{values:t,split:a,indexes:i,types:s}}function MP(n){return cf(n).values}function wP(n){const{split:e,types:t}=cf(n),i=e.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=e[o],s[o]!==void 0){const a=t[o];a===SP?r+=Sd(s[o]):a===TP?r+=bi.transform(s[o]):r+=s[o]}return r}}const Rz=n=>typeof n=="number"?0:n;function Pz(n){const e=MP(n);return wP(n)(e.map(Rz))}const ja={test:Az,parse:MP,createTransformer:wP,getAnimatableNone:Pz},Lz=new Set(["brightness","contrast","saturate","opacity"]);function Iz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(v1)||[];if(!i)return n;const s=t.replace(i,"");let r=Lz.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const Dz=/\b([a-z-]*)\(.*?\)/gu,nx={...ja,getAnimatableNone:n=>{const e=n.match(Dz);return e?e.map(Iz).join(" "):n}},Oz={...QR,color:bi,backgroundColor:bi,outlineColor:bi,fill:bi,stroke:bi,borderColor:bi,borderTopColor:bi,borderRightColor:bi,borderBottomColor:bi,borderLeftColor:bi,filter:nx,WebkitFilter:nx},N1=n=>Oz[n];function EP(n,e){let t=N1(n);return t!==nx&&(t=ja),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Uz=new Set(["auto","none","0"]);function Fz(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!Uz.has(r)&&cf(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=EP(t,s)}class AP extends E1{constructor(e,t,i,s){super(e,t,i,s,s==null?void 0:s.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),g1(c))){const u=mP(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!_z.has(i)||e.length!==2)return;const[s,r]=e,o=yw(s),a=yw(r);if(o!==a)if(gw(o)&&gw(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)pz(e[s])&&i.push(s);i.length&&Fz(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:s}=this;if(!t.current)return;const r=t.getValue(i);r&&r.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Yu[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function NP(n){let e;return()=>(e===void 0&&(e=n()),e)}const Sw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ja.test(n)||n==="0")&&!n.startsWith("url("));function Vz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function kz(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],o=Sw(s,e),a=Sw(r,e);return!o||!a?!1:Vz(n)||t==="spring"&&i}class CP{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Mz(),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!kz(e,i,s,r))if(o)this.options.duration=0;else{l==null||l(x0(e,this.options,t)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function C1(n,e){return e?n*(1e3/e):0}const zz=5;function bP(n,e,t){const i=Math.max(e-zz,0);return C1(t-n(i),e-i)}const Nv=.001,Bz=.01,Hz=10,Gz=.05,Wz=1;function jz({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let s,r,o=1-e;o=Wa(Gz,Wz,o),n=Wa(Bz,Hz,Uo(n)),o<1?(s=c=>{const u=c*o,h=u*n,d=u-t,f=ix(c,o),g=Math.exp(-h);return Nv-d/f*g},r=c=>{const h=c*o*n,d=h*t+t,f=Math.pow(o,2)*Math.pow(c,2)*n,g=Math.exp(-h),m=ix(Math.pow(c,2),o);return(-s(c)+Nv>0?-1:1)*((d-f)*g)/m}):(s=c=>{const u=Math.exp(-c*n),h=(c-t)*n+1;return-Nv+u*h},r=c=>{const u=Math.exp(-c*n),h=(t-c)*(n*n);return u*h});const a=5/n,l=$z(s,r,a);if(n=Oa(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const Xz=12;function $z(n,e,t){let i=t;for(let s=1;s<Xz;s++)i=i-n(i)/e(i);return i}function ix(n,e){return n*Math.sqrt(1-e*e)}const qz=["duration","bounce"],Yz=["stiffness","damping","mass"];function Tw(n,e){return e.some(t=>n[t]!==void 0)}function Kz(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Tw(n,Yz)&&Tw(n,qz)){const t=jz(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function RP({keyframes:n,restDelta:e,restSpeed:t,...i}){const s=n[0],r=n[n.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:d}=Kz({...i,velocity:-Uo(i.velocity||0)}),f=h||0,g=l/(2*Math.sqrt(a*c)),m=r-s,v=Uo(Math.sqrt(a/c)),p=Math.abs(m)<5;t||(t=p?.01:2),e||(e=p?.005:.5);let y;if(g<1){const _=ix(v,g);y=x=>{const E=Math.exp(-g*v*x);return r-E*((f+g*v*m)/_*Math.sin(_*x)+m*Math.cos(_*x))}}else if(g===1)y=_=>r-Math.exp(-v*_)*(m+(f+v*m)*_);else{const _=v*Math.sqrt(g*g-1);y=x=>{const E=Math.exp(-g*v*x),w=Math.min(_*x,300);return r-E*((f+g*v*m)*Math.sinh(w)+_*m*Math.cosh(w))/_}}return{calculatedDuration:d&&u||null,next:_=>{const x=y(_);if(d)o.done=_>=u;else{let E=f;_!==0&&(g<1?E=bP(y,_,x):E=0);const w=Math.abs(E)<=t,T=Math.abs(r-x)<=e;o.done=w&&T}return o.value=o.done?r:x,o}}}function Mw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=n[0],d={done:!1,value:h},f=A=>a!==void 0&&A<a||l!==void 0&&A>l,g=A=>a===void 0?l:l===void 0||Math.abs(a-A)<Math.abs(l-A)?a:l;let m=t*e;const v=h+m,p=o===void 0?v:o(v);p!==v&&(m=p-h);const y=A=>-m*Math.exp(-A/i),_=A=>p+y(A),x=A=>{const M=y(A),S=_(A);d.done=Math.abs(M)<=c,d.value=d.done?p:S};let E,w;const T=A=>{f(d.value)&&(E=A,w=RP({keyframes:[d.value,g(d.value)],velocity:bP(_,A,d.value),damping:s,stiffness:r,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:A=>{let M=!1;return!w&&E===void 0&&(M=!0,x(A),T(A)),E!==void 0&&A>=E?w.next(A-E):(!M&&x(A),d)}}}const PP=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Zz=1e-7,Qz=12;function Jz(n,e,t,i,s){let r,o,a=0;do o=e+(t-e)/2,r=PP(o,i,s)-n,r>0?t=o:e=o;while(Math.abs(r)>Zz&&++a<Qz);return o}function Vf(n,e,t,i){if(n===e&&t===i)return yi;const s=r=>Jz(r,0,1,n,t);return r=>r===0||r===1?r:PP(s(r),e,i)}const eB=Vf(.42,0,1,1),tB=Vf(0,0,.58,1),LP=Vf(.42,0,.58,1),nB=n=>Array.isArray(n)&&typeof n[0]!="number",IP=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,DP=n=>e=>1-n(1-e),b1=n=>1-Math.sin(Math.acos(n)),OP=DP(b1),iB=IP(b1),UP=Vf(.33,1.53,.69,.99),R1=DP(UP),sB=IP(R1),rB=n=>(n*=2)<1?.5*R1(n):.5*(2-Math.pow(2,-10*(n-1))),ww={linear:yi,easeIn:eB,easeInOut:LP,easeOut:tB,circIn:b1,circInOut:iB,circOut:OP,backIn:R1,backInOut:sB,backOut:UP,anticipate:rB},Ew=n=>{if(Array.isArray(n)){Qy(n.length===4);const[e,t,i,s]=n;return Vf(e,t,i,s)}else if(typeof n=="string")return Qy(ww[n]!==void 0),ww[n];return n},Ku=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Mn=(n,e,t)=>n+(e-n)*t;function Cv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function oB({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,o=0;if(!e)s=r=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;s=Cv(l,a,n+1/3),r=Cv(l,a,n),o=Cv(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}const bv=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},aB=[tx,zl,lu],lB=n=>aB.find(e=>e.test(n));function Aw(n){const e=lB(n);let t=e.parse(n);return e===lu&&(t=oB(t)),t}const Nw=(n,e)=>{const t=Aw(n),i=Aw(e),s={...t};return r=>(s.red=bv(t.red,i.red,r),s.green=bv(t.green,i.green,r),s.blue=bv(t.blue,i.blue,r),s.alpha=Mn(t.alpha,i.alpha,r),zl.transform(s))},sx=new Set(["none","hidden"]);function cB(n,e){return sx.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function rx(n,e){return t=>t>0?e:n}function uB(n,e){return t=>Mn(n,e,t)}function P1(n){return typeof n=="number"?uB:typeof n=="string"?g1(n)?rx:bi.test(n)?Nw:fB:Array.isArray(n)?FP:typeof n=="object"?bi.test(n)?Nw:hB:rx}function FP(n,e){const t=[...n],i=t.length,s=n.map((r,o)=>P1(r)(r,e[o]));return r=>{for(let o=0;o<i;o++)t[o]=s[o](r);return t}}function hB(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=P1(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function dB(n,e){var t;const i=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],a=n.indexes[o][s[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[r]=l,s[o]++}return i}const fB=(n,e)=>{const t=ja.createTransformer(e),i=cf(n),s=cf(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?sx.has(n)&&!s.values.length||sx.has(e)&&!i.values.length?cB(n,e):Oo(FP(dB(i,s),s.values),t):rx(n,e)};function VP(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Mn(n,e,t):P1(n)(n,e)}function pB(n,e,t){const i=[],s=t||VP,r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||yi:e;a=Oo(l,a)}i.push(a)}return i}function L1(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(Qy(r===e.length),r===1)return()=>e[0];if(r===2&&n[0]===n[1])return()=>e[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=pB(e,i,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const h=Ku(n[u],n[u+1],c);return o[u](h)};return t?c=>l(Wa(n[0],n[r-1],c)):l}function mB(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Ku(0,e,i);n.push(Mn(t,1,s))}}function kP(n){const e=[0];return mB(e,n.length-1),e}function gB(n,e){return n.map(t=>t*e)}function vB(n,e){return n.map(()=>e||LP).splice(0,n.length-1)}function dg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=nB(i)?i.map(Ew):Ew(i),r={done:!1,value:e[0]},o=gB(t&&t.length===e.length?t:kP(e),n),a=L1(o,e,{ease:Array.isArray(s)?s:vB(e,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}const Cw=2e4;function _B(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Cw;)e+=t,i=n.next(e);return e>=Cw?1/0:e}const yB=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Pt.update(e,!0),stop:()=>Ir(e),now:()=>ri.isProcessing?ri.timestamp:Ua.now()}},xB={decay:Mw,inertia:Mw,tween:dg,keyframes:dg,spring:RP},SB=n=>n/100;class I1 extends CP{constructor({KeyframeResolver:e=E1,...t}){super(t),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:i,motionValue:s,keyframes:r}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);i&&s&&s.owner?this.resolver=s.owner.resolveKeyframes(r,o,i,s):this.resolver=new e(r,o,i,s),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=this.options,a=xB[t]||dg;let l,c;a!==dg&&typeof e[0]!="number"&&(l=Oo(SB,VP(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});r==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=_B(u));const{calculatedDuration:h}=u,d=h+s,f=d*(i+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=i;if(this.startTime===null)return r.next(0);const{delay:d,repeat:f,repeatType:g,repeatDelay:m,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,x=r;if(f){const A=Math.min(this.currentTime,u)/h;let M=Math.floor(A),S=A%1;!S&&A>=1&&(S=1),S===1&&M--,M=Math.min(M,f+1),!!(M%2)&&(g==="reverse"?(S=1-S,m&&(S-=m/h)):g==="mirror"&&(x=o)),_=Wa(0,1,S)*h}const E=y?{done:!1,value:l[0]}:x.next(_);a&&(E.value=a(E.value));let{done:w}=E;!y&&c!==null&&(w=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return T&&s!==void 0&&(E.value=x0(l,this.options,s)),v&&v(E.value),T&&this.finish(),E}get duration(){const{resolved:e}=this;return e?Uo(e.calculatedDuration):0}get time(){return Uo(this.currentTime)}set time(e){e=Oa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Uo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=yB,onPlay:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=i),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const zP=n=>Array.isArray(n)&&typeof n[0]=="number";function BP(n){return!!(!n||typeof n=="string"&&n in D1||zP(n)||Array.isArray(n)&&n.every(BP))}const nd=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,D1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nd([0,.65,.55,1]),circOut:nd([.55,0,1,.45]),backIn:nd([.31,.01,.66,-.59]),backOut:nd([.33,1.53,.69,.99])};function TB(n){return HP(n)||D1.easeOut}function HP(n){if(n)return zP(n)?nd(n):Array.isArray(n)?n.map(TB):D1[n]}function MB(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=HP(a);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const wB=NP(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),EB=new Set(["opacity","clipPath","filter","transform"]),fg=10,AB=2e4;function NB(n){return n.type==="spring"||n.name==="backgroundColor"||!BP(n.ease)}function CB(n,e){const t=new I1({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const s=[];let r=0;for(;!i.done&&r<AB;)i=t.sample(r),s.push(i.value),r+=fg;return{times:void 0,keyframes:s,duration:r-fg,ease:"linear"}}class bw extends CP{constructor(e){super(e);const{name:t,motionValue:i,keyframes:s}=this.options;this.resolver=new AP(s,(r,o)=>this.onKeyframesResolved(r,o),t,i),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:s=300,times:r,ease:o,type:a,motionValue:l,name:c}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(NB(this.options)){const{onComplete:h,onUpdate:d,motionValue:f,...g}=this.options,m=CB(e,g);e=m.keyframes,e.length===1&&(e[1]=e[0]),s=m.duration,r=m.times,o=m.ease,a="keyframes"}const u=MB(l.owner.current,c,e,{...this.options,duration:s,times:r,ease:o});return u.startTime=Ua.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;l.set(x0(e,this.options,t)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:s,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Uo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Uo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Oa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return yi;const{animation:i}=t;i.timeline=e,i.onfinish=null}return yi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:s,type:r,ease:o,times:a}=e;if(!(t.playState==="idle"||t.playState==="finished")){if(this.time){const{motionValue:l,onUpdate:c,onComplete:u,...h}=this.options,d=new I1({...h,keyframes:i,duration:s,type:r,ease:o,times:a,isGenerator:!0}),f=Oa(this.time);l.setWithVelocity(d.sample(f-fg).value,d.sample(f).value,fg)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:s,repeatType:r,damping:o,type:a}=e;return wB()&&i&&EB.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!s&&r!=="mirror"&&o!==0&&a!=="inertia"}}function bB(n,e){let t;const i=()=>{const{currentTime:s}=e,o=(s===null?0:s.value)/100;t!==o&&n(o),t=o};return Pt.update(i,!0),()=>Ir(i)}const RB=NP(()=>window.ScrollTimeline!==void 0);class PB{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e){const t=this.animations.map(i=>{if(RB()&&i.attachTimeline)i.attachTimeline(e);else return i.pause(),bB(s=>{i.time=i.duration*s},e)});return()=>{t.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const O1=(n,e,t,i={},s,r)=>o=>{const a=w1(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Oa(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:r?void 0:s};hz(a)||(u={...u,...uz(n,u)}),u.duration&&(u.duration=Oa(u.duration)),u.repeatDelay&&(u.repeatDelay=Oa(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!r&&e.get()!==void 0){const d=x0(u.keyframes,a);if(d!==void 0)return Pt.update(()=>{u.onUpdate(d),u.onComplete()}),new PB([])}return!r&&bw.supports(u)?new bw(u):new I1(u)};function pg(n){return!!(Di(n)&&n.add)}function U1(n,e){n.indexOf(e)===-1&&n.push(e)}function F1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class V1{constructor(){this.subscriptions=[]}add(e){return U1(this.subscriptions,e),()=>F1(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rw=30,LB=n=>!isNaN(parseFloat(n)),Td={current:void 0};class IB{constructor(e,t={}){this.version="11.2.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Ua.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ua.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=LB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new V1);const i=this.events[e].add(t);return e==="change"?()=>{i(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Td.current&&Td.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ua.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Rw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Rw);return C1(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yr(n,e){return new IB(n,e)}function DB(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Yr(t))}function OB(n,e){const t=y0(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const o in r){const a=Bk(r[o]);DB(n,o,a)}}function GP(n){return n.getProps()[jR]}function UB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function WP(n,e,{delay:t=0,transitionOverride:i,type:s}={}){var r;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;const c=n.getValue("willChange");i&&(o=i);const u=[],h=s&&n.animationState&&n.animationState.getState()[s];for(const d in l){const f=n.getValue(d,(r=n.latestValues[d])!==null&&r!==void 0?r:null),g=l[d];if(g===void 0||h&&UB(h,d))continue;const m={delay:t,elapsed:0,...w1(o||{},d)};let v=!1;if(window.HandoffAppearAnimations){const y=GP(n);if(y){const _=window.HandoffAppearAnimations(y,d,f,Pt);_!==null&&(m.elapsed=_,v=!0)}}f.start(O1(d,f,g,n.shouldReduceMotion&&_c.has(d)?{type:!1}:m,n,v));const p=f.animation;p&&(pg(c)&&(c.add(d),p.then(()=>c.remove(d))),u.push(p))}return a&&Promise.all(u).then(()=>{Pt.update(()=>{a&&OB(n,a)})}),u}function ox(n,e,t={}){var i;const s=y0(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const o=s?()=>Promise.all(WP(n,s,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=r;return FB(n,e,u+c,h,d,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function FB(n,e,t=0,i=0,s=1,r){const o=[],a=(n.variantChildren.size-1)*i,l=s===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(VB).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(ox(c,e,{...r,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function VB(n,e){return n.sortNodePosition(e)}function kB(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>ox(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=ox(n,e,t);else{const s=typeof e=="function"?y0(n,e,t.custom):e;i=Promise.all(WP(n,s,t))}return i.then(()=>{Pt.postRender(()=>{n.notify("AnimationComplete",e)})})}const zB=[...d1].reverse(),BB=d1.length;function HB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>kB(n,t,i)))}function GB(n){let e=HB(n);const t=jB();let i=!0;const s=l=>(c,u)=>{var h;const d=y0(n,u,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:g,...m}=d;c={...c,...m,...g}}return c};function r(l){e=l(n)}function o(l){const c=n.getProps(),u=n.getVariantContext(!0)||{},h=[],d=new Set;let f={},g=1/0;for(let v=0;v<BB;v++){const p=zB[v],y=t[p],_=c[p]!==void 0?c[p]:u[p],x=af(_),E=p===l?y.isActive:null;E===!1&&(g=v);let w=_===u[p]&&_!==c[p]&&x;if(w&&i&&n.manuallyAnimateOnMount&&(w=!1),y.protectedKeys={...f},!y.isActive&&E===null||!_&&!y.prevProp||g0(_)||typeof _=="boolean")continue;let A=WB(y.prevProp,_)||p===l&&y.isActive&&!w&&x||v>g&&x,M=!1;const S=Array.isArray(_)?_:[_];let P=S.reduce(s(p),{});E===!1&&(P={});const{prevResolvedValues:F={}}=y,H={...F,...P},ee=K=>{A=!0,d.has(K)&&(M=!0,d.delete(K)),y.needsAnimating[K]=!0;const j=n.getValue(K);j&&(j.liveStyle=!1)};for(const K in H){const j=P[K],Z=F[K];if(f.hasOwnProperty(K))continue;let D=!1;Ky(j)&&Ky(Z)?D=!dP(j,Z):D=j!==Z,D?j!=null?ee(K):d.add(K):j!==void 0&&d.has(K)?ee(K):y.protectedKeys[K]=!0}y.prevProp=_,y.prevResolvedValues=P,y.isActive&&(f={...f,...P}),i&&n.blockInitialAnimation&&(A=!1),A&&(!w||M)&&h.push(...S.map(K=>({animation:K,options:{type:p}})))}if(d.size){const v={};d.forEach(p=>{const y=n.getBaseTarget(p),_=n.getValue(p);_&&(_.liveStyle=!0),v[p]=y??null}),h.push({animation:v})}let m=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(m=!1),i=!1,m?e(h):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),t[l].isActive=c;const h=o(l);for(const d in t)t[d].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>t}}function WB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!dP(e,n):!1}function hl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jB(){return{animate:hl(!0),whileInView:hl(),whileHover:hl(),whileTap:hl(),whileDrag:hl(),whileFocus:hl(),exit:hl()}}class XB extends ol{constructor(e){super(e),e.animationState||(e.animationState=GB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),g0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let $B=0;class qB extends ol{constructor(){super(...arguments),this.id=$B++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const YB={animation:{Feature:XB},exit:{Feature:qB}},Pw=(n,e)=>Math.abs(n-e);function KB(n,e){const t=Pw(n.x,e.x),i=Pw(n.y,e.y);return Math.sqrt(t**2+i**2)}class jP{constructor(e,t,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Pv(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=KB(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:g}=h,{timestamp:m}=ri;this.history.push({...g,timestamp:m});const{onStart:v,onMove:p}=this.handlers;d||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Rv(d,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Pv(h.type==="pointercancel"?this.lastMoveEventInfo:Rv(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,v),g&&g(h,v)},!aP(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.contextWindow=s||window;const o=_0(e),a=Rv(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ri;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,Pv(a,this.history)),this.removeListeners=Oo(Do(this.contextWindow,"pointermove",this.handlePointerMove),Do(this.contextWindow,"pointerup",this.handlePointerUp),Do(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ir(this.updatePoint)}}function Rv(n,e){return e?{point:e(n.point)}:n}function Lw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Pv({point:n},e){return{point:n,delta:Lw(n,XP(e)),offset:Lw(n,ZB(e)),velocity:QB(e,.1)}}function ZB(n){return n[0]}function XP(n){return n[n.length-1]}function QB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=XP(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>Oa(e)));)t--;if(!i)return{x:0,y:0};const r=Uo(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ks(n){return n.max-n.min}function ax(n,e=0,t=.01){return Math.abs(n-e)<=t}function Iw(n,e,t,i=.5){n.origin=i,n.originPoint=Mn(e.min,e.max,n.origin),n.scale=ks(t)/ks(e),(ax(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Mn(t.min,t.max,n.origin)-n.originPoint,(ax(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Md(n,e,t,i){Iw(n.x,e.x,t.x,i?i.originX:void 0),Iw(n.y,e.y,t.y,i?i.originY:void 0)}function Dw(n,e,t){n.min=t.min+e.min,n.max=n.min+ks(e)}function JB(n,e,t){Dw(n.x,e.x,t.x),Dw(n.y,e.y,t.y)}function Ow(n,e,t){n.min=e.min-t.min,n.max=n.min+ks(e)}function wd(n,e,t){Ow(n.x,e.x,t.x),Ow(n.y,e.y,t.y)}function e4(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Mn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Mn(t,n,i.max):Math.min(n,t)),n}function Uw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function t4(n,{top:e,left:t,bottom:i,right:s}){return{x:Uw(n.x,t,s),y:Uw(n.y,e,i)}}function Fw(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function n4(n,e){return{x:Fw(n.x,e.x),y:Fw(n.y,e.y)}}function i4(n,e){let t=.5;const i=ks(n),s=ks(e);return s>i?t=Ku(e.min,e.max-i,n.min):i>s&&(t=Ku(n.min,n.max-s,e.min)),Wa(0,1,t)}function s4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const lx=.35;function r4(n=lx){return n===!1?n=0:n===!0&&(n=lx),{x:Vw(n,"left","right"),y:Vw(n,"top","bottom")}}function Vw(n,e,t){return{min:kw(n,e),max:kw(n,t)}}function kw(n,e){return typeof n=="number"?n:n[e]||0}const zw=()=>({translate:0,scale:1,origin:0,originPoint:0}),cu=()=>({x:zw(),y:zw()}),Bw=()=>({min:0,max:0}),In=()=>({x:Bw(),y:Bw()});function $s(n){return[n("x"),n("y")]}function $P({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function o4({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function a4(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Lv(n){return n===void 0||n===1}function cx({scale:n,scaleX:e,scaleY:t}){return!Lv(n)||!Lv(e)||!Lv(t)}function Al(n){return cx(n)||qP(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function qP(n){return Hw(n.x)||Hw(n.y)}function Hw(n){return n&&n!=="0%"}function mg(n,e,t){const i=n-t,s=e*i;return t+s}function Gw(n,e,t,i,s){return s!==void 0&&(n=mg(n,s,i)),mg(n,t,i)+e}function ux(n,e=0,t=1,i,s){n.min=Gw(n.min,e,t,i,s),n.max=Gw(n.max,e,t,i,s)}function YP(n,{x:e,y:t}){ux(n.x,e.translate,e.scale,e.originPoint),ux(n.y,t.translate,t.scale,t.originPoint)}function l4(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,o;for(let a=0;a<s;a++){r=t[a],o=r.projectionDelta;const l=r.instance;l&&l.style&&l.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&uu(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YP(n,o)),i&&Al(r.latestValues)&&uu(n,r.latestValues))}e.x=Ww(e.x),e.y=Ww(e.y)}function Ww(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function ca(n,e){n.min=n.min+e,n.max=n.max+e}function jw(n,e,[t,i,s]){const r=e[s]!==void 0?e[s]:.5,o=Mn(n.min,n.max,r);ux(n,e[t],e[i],o,e.scale)}const c4=["x","scaleX","originX"],u4=["y","scaleY","originY"];function uu(n,e){jw(n.x,e,c4),jw(n.y,e,u4)}function KP(n,e){return $P(a4(n.getBoundingClientRect(),e))}function h4(n,e,t){const i=KP(n,t),{scroll:s}=e;return s&&(ca(i.x,s.offset.x),ca(i.y,s.offset.y)),i}const ZP=({current:n})=>n?n.ownerDocument.defaultView:null,d4=new WeakMap;class f4{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(_0(u,"page").point)},r=(u,h)=>{const{drag:d,dragPropagation:f,onDragStart:g}=this.getProps();if(d&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=cP(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$s(v=>{let p=this.getAxisMotionValue(v).get()||0;if(no.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const _=y.layout.layoutBox[v];_&&(p=ks(_)*(parseFloat(p)/100))}}this.originPoint[v]=p}),g&&Pt.postRender(()=>g(u,h));const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:g,onDrag:m}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:v}=h;if(f&&this.currentDirection===null){this.currentDirection=p4(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),m&&m(u,h)},a=(u,h)=>this.stop(u,h),l=()=>$s(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jP(e,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ZP(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&Pt.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!_p(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=e4(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;t&&au(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=t4(s.layoutBox,t):this.constraints=!1,this.elastic=r4(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&$s(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=s4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!au(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=h4(i,s.root,this.visualElement.getTransformPagePoint());let o=n4(s.layout.layoutBox,r);if(t){const a=t(o4(o));this.hasMutatedConstraints=!!a,a&&(o=$P(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=$s(u=>{if(!_p(u,t,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(O1(e,i,0,t,this.visualElement))}stopAnimation(){$s(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$s(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){$s(t=>{const{drag:i}=this.getProps();if(!_p(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[t];r.set(e[t]-Mn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!au(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};$s(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=i4({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$s(o=>{if(!_p(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Mn(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;d4.set(this.visualElement,this);const e=this.visualElement.current,t=Do(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();au(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),i();const o=bo(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&($s(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=lx,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function _p(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function p4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class m4 extends ol{constructor(e){super(e),this.removeGroupControls=yi,this.removeListeners=yi,this.controls=new f4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yi}unmount(){this.removeGroupControls(),this.removeListeners()}}const Xw=n=>(e,t)=>{n&&Pt.postRender(()=>n(e,t))};class g4 extends ol{constructor(){super(...arguments),this.removePointerDownListener=yi}onPointerDown(e){this.session=new jP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:Xw(e),onStart:Xw(t),onMove:i,onEnd:(r,o)=>{delete this.session,s&&Pt.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=Do(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function v4(){const n=z.useContext(m0);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,s=z.useId();return z.useEffect(()=>i(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const xm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $w(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const kh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(it.test(n))n=parseFloat(n);else return n;const t=$w(n,e.target.x),i=$w(n,e.target.y);return`${t}% ${i}%`}},_4={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=ja.parse(n);if(s.length>5)return i;const r=ja.createTransformer(n),o=typeof s[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Mn(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),r(s)}};class y4 extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;vk(x4),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),xm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||Pt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),h1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function QP(n){const[e,t]=v4(),i=z.useContext(p1);return b.jsx(y4,{...n,layoutGroup:i,switchLayoutGroup:z.useContext(qR),isPresent:e,safeToRemove:t})}const x4={borderRadius:{...kh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kh,borderTopRightRadius:kh,borderBottomLeftRadius:kh,borderBottomRightRadius:kh,boxShadow:_4},JP=["TopLeft","TopRight","BottomLeft","BottomRight"],S4=JP.length,qw=n=>typeof n=="string"?parseFloat(n):n,Yw=n=>typeof n=="number"||it.test(n);function T4(n,e,t,i,s,r){s?(n.opacity=Mn(0,t.opacity!==void 0?t.opacity:1,M4(i)),n.opacityExit=Mn(e.opacity!==void 0?e.opacity:1,0,w4(i))):r&&(n.opacity=Mn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<S4;o++){const a=`border${JP[o]}Radius`;let l=Kw(e,a),c=Kw(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Yw(l)===Yw(c)?(n[a]=Math.max(Mn(qw(l),qw(c),i),0),(no.test(c)||no.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Mn(e.rotate||0,t.rotate||0,i))}function Kw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const M4=e2(0,.5,OP),w4=e2(.5,.95,yi);function e2(n,e,t){return i=>i<n?0:i>e?1:t(Ku(n,e,i))}function Zw(n,e){n.min=e.min,n.max=e.max}function js(n,e){Zw(n.x,e.x),Zw(n.y,e.y)}function Qw(n,e,t,i,s){return n-=e,n=mg(n,1/t,i),s!==void 0&&(n=mg(n,1/s,i)),n}function E4(n,e=0,t=1,i=.5,s,r=n,o=n){if(no.test(e)&&(e=parseFloat(e),e=Mn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Mn(r.min,r.max,i);n===r&&(a-=e),n.min=Qw(n.min,e,t,a,s),n.max=Qw(n.max,e,t,a,s)}function Jw(n,e,[t,i,s],r,o){E4(n,e[t],e[i],e[s],e.scale,r,o)}const A4=["x","scaleX","originX"],N4=["y","scaleY","originY"];function eE(n,e,t,i){Jw(n.x,e,A4,t?t.x:void 0,i?i.x:void 0),Jw(n.y,e,N4,t?t.y:void 0,i?i.y:void 0)}function tE(n){return n.translate===0&&n.scale===1}function t2(n){return tE(n.x)&&tE(n.y)}function C4(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function n2(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function nE(n){return ks(n.x)/ks(n.y)}class b4{constructor(){this.members=[]}add(e){U1(this.members,e),e.scheduleRender()}remove(e){if(F1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iE(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:g}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const R4=(n,e)=>n.depth-e.depth;class P4{constructor(){this.children=[],this.isDirty=!1}add(e){U1(this.children,e),this.isDirty=!0}remove(e){F1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(R4),this.isDirty=!1,this.children.forEach(e)}}function L4(n,e){const t=Ua.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(Ir(i),n(r-e))};return Pt.read(i,!0),()=>Ir(i)}function I4(n){window.MotionDebug&&window.MotionDebug.record(n)}function D4(n){return n instanceof SVGElement&&n.tagName!=="svg"}function O4(n,e,t){const i=Di(n)?n:Yr(n);return i.start(O1("",i,e,t)),i.animation}const Iv=["","X","Y","Z"],U4={visibility:"hidden"},sE=1e3;let F4=0;const Nl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Dv(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function i2(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return!1;const{visualElement:e}=n.options;return e?GP(e)?!0:n.parent&&!n.parent.hasCheckedOptimisedAppear?i2(n.parent):!1:!1}function s2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=F4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Nl.totalNodes=Nl.resolvedTargetDeltas=Nl.recalculatedProjection=0,this.nodes.forEach(z4),this.nodes.forEach(j4),this.nodes.forEach(X4),this.nodes.forEach(B4),I4(Nl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new P4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new V1),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=D4(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let h;const d=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=L4(d,250),xm.hasAnimatedSinceResize&&(xm.hasAnimatedSinceResize=!1,this.nodes.forEach(oE))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Z4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:p}=u.getProps(),y=!this.targetLayout||!n2(this.targetLayout,g)||f,_=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const x={...w1(m,"layout"),onPlay:v,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||oE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&i2(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rE);return}this.isUpdating||this.nodes.forEach(G4),this.isUpdating=!1,this.nodes.forEach(W4),this.nodes.forEach(V4),this.nodes.forEach(k4),this.clearAllSnapshots();const a=Ua.now();ri.delta=Wa(0,1e3/60,a-ri.timestamp),ri.timestamp=a,ri.isProcessing=!0,Mv.update.process(ri),Mv.preRender.process(ri),Mv.render.process(ri),ri.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,h1.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(H4),this.sharedNodes.forEach(q4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!t2(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Al(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Q4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return In();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ca(a.x,l.offset.x),ca(a.y,l.offset.y)),a}removeElementScroll(o){const a=In();js(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){js(a,o);const{scroll:d}=this.root;d&&(ca(a.x,-d.offset.x),ca(a.y,-d.offset.y))}ca(a.x,u.offset.x),ca(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=In();js(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&uu(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Al(u.latestValues)&&uu(l,u.latestValues)}return Al(this.latestValues)&&uu(l,this.latestValues),l}removeTransform(o){const a=In();js(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Al(c.latestValues))continue;cx(c.latestValues)&&c.updateSnapshot();const u=In(),h=c.measurePageBox();js(u,h),eE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Al(this.latestValues)&&eE(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ri.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=ri.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),wd(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):js(this.target,this.layout.layoutBox),YP(this.target,this.targetDelta)):js(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),wd(this.relativeTargetOrigin,this.target,f.target),js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Nl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cx(this.parent.latestValues)||qP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ri.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;js(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;l4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=In());const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=cu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=cu(),this.projectionDeltaWithTransform=cu());const m=this.projectionTransform;Md(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=iE(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==d||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Nl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=cu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=In(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=f!==g,v=this.getStack(),p=!v||v.members.length<=1,y=!!(m&&!p&&this.options.crossfade===!0&&!this.path.some(K4));this.animationProgress=0;let _;this.mixTargetDelta=x=>{const E=x/1e3;aE(h.x,o.x,E),aE(h.y,o.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wd(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Y4(this.relativeTarget,this.relativeTargetOrigin,d,E),_&&C4(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=In()),js(_,this.relativeTarget)),m&&(this.animationValues=u,T4(u,c,this.latestValues,E,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{xm.hasAnimatedSinceResize=!0,this.currentAnimation=O4(0,sE,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&r2(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||In();const h=ks(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=ks(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}js(a,l),uu(a,u),Md(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new b4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Dv("z",o,c,this.animationValues);for(let u=0;u<Iv.length;u++)Dv(`rotate${Iv[u]}`,o,c,this.animationValues),Dv(`skew${Iv[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return U4;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=_m(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=_m(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Al(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=iE(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:f,y:g}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in ug){if(d[m]===void 0)continue;const{correct:v,applyTo:p}=ug[m],y=c.transform==="none"?d[m]:v(d[m],h);if(p){const _=p.length;for(let x=0;x<_;x++)c[p[x]]=y}else c[m]=y}return this.options.layoutId&&(c.pointerEvents=h===this?_m(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(rE),this.root.sharedNodes.clear()}}}function V4(n){n.updateLayout()}function k4(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?$s(h=>{const d=o?t.measuredBox[h]:t.layoutBox[h],f=ks(d);d.min=i[h].min,d.max=d.min+f}):r2(r,t.layoutBox,i)&&$s(h=>{const d=o?t.measuredBox[h]:t.layoutBox[h],f=ks(i[h]);d.max=d.min+f,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+f)});const a=cu();Md(a,i,t.layoutBox);const l=cu();o?Md(l,n.applyTransform(s,!0),t.measuredBox):Md(l,i,t.layoutBox);const c=!t2(a);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const g=In();wd(g,t.layoutBox,d.layoutBox);const m=In();wd(m,i,f.layoutBox),n2(g,m)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=m,n.relativeTargetOrigin=g,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function z4(n){Nl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function B4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function H4(n){n.clearSnapshot()}function rE(n){n.clearMeasurements()}function G4(n){n.isLayoutDirty=!1}function W4(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function oE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function j4(n){n.resolveTargetDelta()}function X4(n){n.calcProjection()}function $4(n){n.resetSkewAndRotation()}function q4(n){n.removeLeadSnapshot()}function aE(n,e,t){n.translate=Mn(e.translate,0,t),n.scale=Mn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function lE(n,e,t,i){n.min=Mn(e.min,t.min,i),n.max=Mn(e.max,t.max,i)}function Y4(n,e,t,i){lE(n.x,e.x,t.x,i),lE(n.y,e.y,t.y,i)}function K4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Z4={duration:.45,ease:[.4,0,.1,1]},cE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),uE=cE("applewebkit/")&&!cE("chrome/")?Math.round:yi;function hE(n){n.min=uE(n.min),n.max=uE(n.max)}function Q4(n){hE(n.x),hE(n.y)}function r2(n,e,t){return n==="position"||n==="preserve-aspect"&&!ax(nE(e),nE(t),.2)}const J4=s2({attachResizeListener:(n,e)=>bo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ov={current:void 0},o2=s2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ov.current){const n=new J4({});n.mount(window),n.setOptions({layoutScroll:!0}),Ov.current=n}return Ov.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),e5={pan:{Feature:g4},drag:{Feature:m4,ProjectionNode:o2,MeasureLayout:QP}},hx={current:null},a2={current:!1};function t5(){if(a2.current=!0,!!c1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>hx.current=n.matches;n.addListener(e),e()}else hx.current=!1}function n5(n,e,t){const{willChange:i}=e;for(const s in e){const r=e[s],o=t[s];if(Di(r))n.addValue(s,r),pg(i)&&i.add(s);else if(Di(o))n.addValue(s,Yr(r,{owner:n})),pg(i)&&i.remove(s);else if(o!==r)if(n.hasValue(s)){const a=n.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(s);n.addValue(s,Yr(a!==void 0?a:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const dE=new WeakMap,i5=[...vP,bi,ja],s5=n=>i5.find(gP(n)),l2=Object.keys(lf),r5=l2.length,fE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],o5=f1.length;function c2(n){if(n)return n.options.allowProjection!==!1?n.projection:c2(n.parent)}class a5{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.resolveKeyframes=(d,f,g,m)=>new this.KeyframeResolver(d,f,g,m,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=E1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Pt.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=v0(t),this.isVariantNode=$R(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&Di(f)&&(f.set(l[d],!1),pg(u)&&u.add(d))}}mount(e){this.current=e,dE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),a2.current||t5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){var e;dE.delete(this.current),this.projection&&this.projection.unmount(),Ir(this.notifyUpdate),Ir(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)(e=this.features[t])===null||e===void 0||e.unmount();this.current=null}bindToMotionValue(e,t){const i=_c.has(e),s=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,s,r){let o,a;for(let l=0;l<r5;l++){const c=l2[l],{isEnabled:u,Feature:h,ProjectionNode:d,MeasureLayout:f}=lf[c];d&&(o=d),u(t)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),f&&(a=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:d,layoutRoot:f}=t;this.projection=new o(this.latestValues,t["data-framer-portal-id"]?void 0:c2(this.parent)),this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&au(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<fE.length;i++){const s=fE[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=e[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=n5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<o5;i++){const s=f1[i],r=this.props[s];(af(r)||r===!1)&&(t[s]=r)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Yr(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(pP(s)||fP(s))?s=parseFloat(s):!s5(s)&&ja.test(t)&&(s=EP(e,t)),this.setBaseTarget(e,Di(s)?s.get():s)),Di(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const o=M1(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(s=o[e])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Di(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new V1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class u2 extends a5{constructor(){super(...arguments),this.KeyframeResolver=AP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function l5(n){return window.getComputedStyle(n)}class c5 extends u2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(_c.has(t)){const i=N1(t);return i&&i.default||0}else{const i=l5(e),s=(ZR(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return KP(e,t)}build(e,t,i,s){_1(e,t,i,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return T1(e,t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Di(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,s){nP(e,t,i,s)}}class u5 extends u2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(_c.has(t)){const i=N1(t);return i&&i.default||0}return t=iP.has(t)?t:u1(t),e.getAttribute(t)}measureInstanceViewportBox(){return In()}scrapeMotionValuesFromProps(e,t,i){return rP(e,t,i)}build(e,t,i,s){x1(e,t,i,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,i,s){sP(e,t,i,s)}mount(e){this.isSVGTag=S1(e.tagName),super.mount(e)}}const h5=(n,e)=>m1(n)?new u5(e,{enableHardwareAcceleration:!1}):new c5(e,{allowProjection:n!==z.Fragment,enableHardwareAcceleration:!0}),d5={layout:{ProjectionNode:o2,MeasureLayout:QP}},f5={...YB,...rz,...e5,...d5},Fa=mk((n,e)=>Xk(n,e,f5,h5));function h2(){const n=z.useRef(!1);return If(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function p5(){const n=h2(),[e,t]=z.useState(0),i=z.useCallback(()=>{n.current&&t(e+1)},[e]);return[z.useCallback(()=>Pt.postRender(i),[i]),e]}class m5 extends z.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function g5({children:n,isPresent:e}){const t=z.useId(),i=z.useRef(null),s=z.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=z.useContext(f0);return z.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const u=document.createElement("style");return r&&(u.nonce=r),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.jsx(m5,{isPresent:e,childRef:i,sizeRef:s,children:z.cloneElement(n,{ref:i})})}const Uv=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o})=>{const a=Ff(v5),l=z.useId(),c=z.useMemo(()=>({id:l,initial:e,isPresent:t,custom:s,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;i&&i()},register:u=>(a.set(u,!1),()=>a.delete(u))}),r?[Math.random()]:[t]);return z.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[t]),z.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=b.jsx(g5,{isPresent:t,children:n})),b.jsx(m0.Provider,{value:c,children:n})};function v5(){return new Map}function _5(n){return z.useEffect(()=>()=>n(),[])}const Cl=n=>n.key||"";function y5(n,e){n.forEach(t=>{const i=Cl(t);e.set(i,t)})}function x5(n){const e=[];return z.Children.forEach(n,t=>{z.isValidElement(t)&&e.push(t)}),e}const S5=({children:n,custom:e,initial:t=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:r=!0,mode:o="sync"})=>{const a=z.useContext(p1).forceRender||p5()[0],l=h2(),c=x5(n);let u=c;const h=z.useRef(new Map).current,d=z.useRef(u),f=z.useRef(new Map).current,g=z.useRef(!0);if(If(()=>{g.current=!1,y5(c,f),d.current=u}),_5(()=>{g.current=!0,f.clear(),h.clear()}),g.current)return b.jsx(b.Fragment,{children:u.map(y=>b.jsx(Uv,{isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:r,mode:o,children:y},Cl(y)))});u=[...u];const m=d.current.map(Cl),v=c.map(Cl),p=m.length;for(let y=0;y<p;y++){const _=m[y];v.indexOf(_)===-1&&!h.has(_)&&h.set(_,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((y,_)=>{if(v.indexOf(_)!==-1)return;const x=f.get(_);if(!x)return;const E=m.indexOf(_);let w=y;if(!w){const T=()=>{h.delete(_);const A=Array.from(f.keys()).filter(M=>!v.includes(M));if(A.forEach(M=>f.delete(M)),d.current=c.filter(M=>{const S=Cl(M);return S===_||A.includes(S)}),!h.size){if(l.current===!1)return;a(),i&&i()}};w=b.jsx(Uv,{isPresent:!1,onExitComplete:T,custom:e,presenceAffectsLayout:r,mode:o,children:x},Cl(x)),h.set(_,w)}u.splice(E,0,w)}),u=u.map(y=>{const _=y.key;return h.has(_)?y:b.jsx(Uv,{isPresent:!0,presenceAffectsLayout:r,mode:o,children:y},Cl(y))}),b.jsx(b.Fragment,{children:h.size?u:u.map(y=>z.cloneElement(y))})};function T5(n){const e=Ff(()=>Yr(n)),{isStatic:t}=z.useContext(f0);if(t){const[,i]=z.useState(n);z.useEffect(()=>e.on("change",i),[])}return e}const M5=n=>n&&typeof n=="object"&&n.mix,w5=n=>M5(n)?n.mix:void 0;function E5(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],s=n[1+t],r=n[2+t],o=n[3+t],a=L1(s,r,{mixer:w5(r[0]),...o});return e?a(i):a}function d2(n,e){const t=T5(e()),i=()=>t.set(e());return i(),If(()=>{const s=()=>Pt.preRender(i,!1,!0),r=n.map(o=>o.on("change",s));return()=>{r.forEach(o=>o()),Ir(i)}}),t}function A5(n){Td.current=[],n();const e=d2(Td.current,n);return Td.current=void 0,e}function S0(n,e,t,i){if(typeof n=="function")return A5(n);const s=typeof e=="function"?e:E5(e,t,i);return Array.isArray(n)?pE(n,s):pE([n],([r])=>s(r))}function pE(n,e){const t=Ff(()=>[]);return d2(n,()=>{t.length=0;const i=n.length;for(let s=0;s<i;s++)t[s]=n[s].get();return e(t)})}function N5(n,e,t){return typeof n=="string"?n=document.querySelectorAll(n):n instanceof Element&&(n=[n]),Array.from(n||[])}const Sm=new WeakMap;let ra;function C5(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function b5({target:n,contentRect:e,borderBoxSize:t}){var i;(i=Sm.get(n))===null||i===void 0||i.forEach(s=>{s({target:n,contentSize:e,get size(){return C5(n,t)}})})}function R5(n){n.forEach(b5)}function P5(){typeof ResizeObserver>"u"||(ra=new ResizeObserver(R5))}function L5(n,e){ra||P5();const t=N5(n);return t.forEach(i=>{let s=Sm.get(i);s||(s=new Set,Sm.set(i,s)),s.add(e),ra==null||ra.observe(i)}),()=>{t.forEach(i=>{const s=Sm.get(i);s==null||s.delete(e),s!=null&&s.size||ra==null||ra.unobserve(i)})}}const Tm=new Set;let Ed;function I5(){Ed=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Tm.forEach(t=>t(e))},window.addEventListener("resize",Ed)}function D5(n){return Tm.add(n),Ed||I5(),()=>{Tm.delete(n),!Tm.size&&Ed&&(Ed=void 0)}}function O5(n,e){return typeof n=="function"?D5(n):L5(n,e)}const U5=50,mE=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),F5=()=>({time:0,x:mE(),y:mE()}),V5={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function gE(n,e,t,i){const s=t[e],{length:r,position:o}=V5[e],a=s.current,l=t.time;s.current=n[`scroll${o}`],s.scrollLength=n[`scroll${r}`]-n[`client${r}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=Ku(0,s.scrollLength,s.current);const c=i-l;s.velocity=c>U5?0:C1(s.current-a,c)}function k5(n,e,t){gE(n,"x",e,t),gE(n,"y",e,t),e.time=t}function z5(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const s=i.getBoundingClientRect();i=i.parentElement;const r=i.getBoundingClientRect();t.x+=s.left-r.left,t.y+=s.top-r.top}else if(i instanceof SVGGraphicsElement){const{x:s,y:r}=i.getBBox();t.x+=s,t.y+=r;let o=null,a=i.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=i.parentNode;i=o}else break;return t}const B5={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},dx={start:0,center:.5,end:1};function vE(n,e,t=0){let i=0;if(n in dx&&(n=dx[n]),typeof n=="string"){const s=parseFloat(n);n.endsWith("px")?i=s:n.endsWith("%")?n=s/100:n.endsWith("vw")?i=s/100*document.documentElement.clientWidth:n.endsWith("vh")?i=s/100*document.documentElement.clientHeight:n=s}return typeof n=="number"&&(i=e*n),t+i}const H5=[0,0];function G5(n,e,t,i){let s=Array.isArray(n)?n:H5,r=0,o=0;return typeof n=="number"?s=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?s=n.split(" "):s=[n,dx[n]?n:"0"]),r=vE(s[0],t,i),o=vE(s[1],e),r-o}const W5={x:0,y:0};function j5(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function X5(n,e,t){const{offset:i=B5.All}=t,{target:s=n,axis:r="y"}=t,o=r==="y"?"height":"width",a=s!==n?z5(s,n):W5,l=s===n?{width:n.scrollWidth,height:n.scrollHeight}:j5(s),c={width:n.clientWidth,height:n.clientHeight};e[r].offset.length=0;let u=!e[r].interpolate;const h=i.length;for(let d=0;d<h;d++){const f=G5(i[d],c[o],l[o],a[r]);!u&&f!==e[r].interpolatorOffsets[d]&&(u=!0),e[r].offset[d]=f}u&&(e[r].interpolate=L1(e[r].offset,kP(i)),e[r].interpolatorOffsets=[...e[r].offset]),e[r].progress=e[r].interpolate(e[r].current)}function $5(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function q5(n,e,t,i={}){return{measure:()=>$5(n,i.target,t),update:s=>{k5(n,t,s),(i.offset||i.target)&&X5(n,t,i)},notify:()=>e(t)}}const zh=new WeakMap,_E=new WeakMap,Fv=new WeakMap,yE=n=>n===document.documentElement?window:n;function Y5(n,{container:e=document.documentElement,...t}={}){let i=Fv.get(e);i||(i=new Set,Fv.set(e,i));const s=F5(),r=q5(e,n,s,t);if(i.add(r),!zh.has(e)){const a=()=>{for(const d of i)d.measure()},l=()=>{for(const d of i)d.update(ri.timestamp)},c=()=>{for(const d of i)d.notify()},u=()=>{Pt.read(a,!1,!0),Pt.read(l,!1,!0),Pt.update(c,!1,!0)};zh.set(e,u);const h=yE(e);window.addEventListener("resize",u,{passive:!0}),e!==document.documentElement&&_E.set(e,O5(e,u)),h.addEventListener("scroll",u,{passive:!0})}const o=zh.get(e);return Pt.read(o,!1,!0),()=>{var a;Ir(o);const l=Fv.get(e);if(!l||(l.delete(r),l.size))return;const c=zh.get(e);zh.delete(e),c&&(yE(e).removeEventListener("scroll",c),(a=_E.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function xE(n,e){mz(!!(!e||e.current))}const K5=()=>({scrollX:Yr(0),scrollY:Yr(0),scrollXProgress:Yr(0),scrollYProgress:Yr(0)});function T0({container:n,target:e,layoutEffect:t=!0,...i}={}){const s=Ff(K5);return(t?If:z.useEffect)(()=>(xE("target",e),xE("container",n),Y5(({x:o,y:a})=>{s.scrollX.set(o.current),s.scrollXProgress.set(o.progress),s.scrollY.set(a.current),s.scrollYProgress.set(a.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),s}var f2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SE=us.createContext&&us.createContext(f2),Z5=["attr","size","title"];function Q5(n,e){if(n==null)return{};var t=J5(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function J5(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function gg(){return gg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gg.apply(this,arguments)}function TE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function vg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TE(Object(t),!0).forEach(function(i){eH(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function eH(n,e,t){return e=tH(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tH(n){var e=nH(n,"string");return typeof e=="symbol"?e:e+""}function nH(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function p2(n){return n&&n.map((e,t)=>us.createElement(e.tag,vg({key:t},e.attr),p2(e.child)))}function yc(n){return e=>us.createElement(iH,gg({attr:vg({},n.attr)},e),p2(n.child))}function iH(n){var e=t=>{var{attr:i,size:s,title:r}=n,o=Q5(n,Z5),a=s||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),us.createElement("svg",gg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:vg(vg({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),r&&us.createElement("title",null,r),n.children)};return SE!==void 0?us.createElement(SE.Consumer,null,t=>e(t)):e(f2)}function sH(n){return yc({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(n)}function m2(n){return yc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M3,3 L21,21 M3,21 L21,3"},child:[]}]})(n)}const k1=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"58",height:"60",viewBox:"0 0 58 60",fill:"none",className:"max-sm:h-[2rem] max-md:h-[2.2rem] h-[2.5rem]",children:b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.2787 17.4522C33.2787 19.1723 33.9573 20.7546 35.2392 22.0313C37.0421 23.8237 39.0166 24.0686 40.3599 23.9611C41.958 23.8307 43.5654 23.1038 44.6632 22.0147L44.9444 21.7346C45.7511 20.931 46.2457 20.4383 46.7275 19.9731L50.0375 23.1838L52.3616 20.8599L52.3931 20.8026L49.132 17.5532L51.4515 15.2408L49.0267 12.8259L46.7069 15.1406C46.7069 15.1406 39.9283 8.37288 39.0873 7.52677C38.6355 7.06986 38.3585 6.58897 38.3585 5.82527C38.3585 5.01591 38.7252 4.47583 39.0372 4.16748C39.4905 3.71445 40.1583 3.4328 40.7693 3.4328C41.7012 3.4328 42.2761 3.92452 42.4727 4.13305L42.5232 4.18334L42.5737 4.13537L43.9515 2.76775L44.9025 1.82066L44.9433 1.77308L44.8788 1.7015C44.2553 1.06624 42.8852 0 40.7611 0C39.1424 0 37.6434 0.642996 36.5444 1.80906C35.5146 2.89813 34.9273 4.35744 34.9273 5.81405C34.9273 8.23322 36.3098 9.72 37.2876 10.6253L35.2248 12.6359C34.0249 13.8294 33.2787 15.6776 33.2787 17.4522ZM37.6578 15.0644L39.7061 13.0228L44.2914 17.5462C44.0821 17.7609 43.194 18.6535 42.2163 19.6187C41.0354 20.7751 39.0795 21.0181 37.6578 19.6044C37.0374 18.9827 36.7099 18.212 36.7099 17.3698C36.7099 16.5214 37.0657 15.6571 37.6578 15.0644ZM52.602 31.8444C49.4681 28.7343 45.2986 27.0231 40.865 27.0231C36.4318 27.0231 32.2618 28.7343 29.1272 31.8444C25.9933 34.9576 24.2667 39.0915 24.2667 43.4897C24.2667 47.8886 25.9933 52.0199 29.1272 55.13C32.2618 58.242 36.4318 59.9535 40.865 59.9535C45.2986 59.9535 49.4681 58.242 52.602 55.13C55.7374 52.0199 57.4648 47.8886 57.4648 43.4897C57.4648 39.0915 55.7374 34.9576 52.602 31.8444ZM40.865 55.7176C37.5714 55.7176 34.4742 54.4442 32.1465 52.1346C29.8178 49.8254 28.5313 46.7532 28.5313 43.4897C28.5313 40.2196 29.8178 37.1501 32.1465 34.8409C34.4742 32.5271 37.5714 31.2556 40.865 31.2556C44.1585 31.2556 47.2546 32.5271 49.585 34.8409C51.9106 37.1501 53.1956 40.2196 53.1956 43.4897C53.1956 50.2315 47.6652 55.7176 40.865 55.7176ZM24.2935 19.7394C24.2935 26.7462 20.4301 33.1364 14.1989 36.4393C15.9789 37.5605 17.4773 39.1086 18.5141 40.9294C19.6098 42.8384 20.1898 45.015 20.1898 47.2234C20.1898 50.6333 18.8456 53.8423 16.4117 56.2585C13.9828 58.6705 10.7453 59.9999 7.3049 59.9999H0.996653L0.987305 0.814872H5.21955C10.3141 0.814872 15.1061 2.78216 18.712 6.36051C22.3172 9.93501 24.2935 14.6875 24.2935 19.7394ZM15.6911 9.35278C12.9097 6.59541 9.20914 5.07011 5.27953 5.05195V34.4291C9.20914 34.4109 12.9097 32.8853 15.6911 30.129C18.4912 27.3562 20.0242 23.6654 20.0242 19.7394C20.0242 15.8179 18.4912 12.1299 15.6911 9.35278ZM5.27953 55.7652H7.30022C12.0485 55.7652 15.9119 51.9334 15.9119 47.2234C15.9119 44.9412 15.0184 42.7978 13.3931 41.1805C11.765 39.5698 9.585 38.6843 7.28231 38.6843C7.28231 38.6843 5.62929 38.6751 5.27953 38.6751V55.7652Z",fill:"#fff"})}),rH=us.memo(({setOpenNav:n,openNav:e,navLinkData:t,Navbardata:i,handleButtonClick:s})=>{const r=t?t.data:[],[o,a]=z.useState(null),[l,c]=z.useState(null);return z.useEffect(()=>{r&&r.length>0&&(a(r[0].categoryImage),c(r[0].categoryDescription))},[r]),b.jsxs("div",{className:`full-screenNavbar ${e?"w-[65%] max-xl:w-[100%] px-[5%] max-sm:px-[8%] ":"w-0"} left-0 h-screen duration-[1.2s] overflow-hidden top-0 flex flex-col gap-20 py-10 fixed bg-black`,children:[b.jsxs("div",{className:` top-part-fullscreen-Nav ${e?"opacity-100 delay-700":"opacity-0 duration-500"}  h-[10vh] flex justify-between items-center`,children:[b.jsx("div",{className:"h-[8vh] max-sm:hidden flex gap-[.8vw] text-[.8rem] font-primary items-center w-full ",children:i.map((u,h)=>b.jsx("div",{className:"p-1 w-fit cursor-pointer",onClick:()=>s(u),children:u.title},h))}),b.jsx(cg,{to:"/",className:"logo-container sm:hidden",children:b.jsx(k1,{})}),b.jsx(oH,{setOpenNav:n,openNav:e})]}),b.jsxs("div",{className:`bottom-part-fullscreen-Nav ${e?"opacity-100 delay-700":"opacity-0 duration-500"}  h-full w-full flex justify-between`,children:[b.jsxs("div",{className:"Nav-routes flex flex-col gap-[3%] max-sm:hidden text-white",children:[b.jsxs(cg,{to:t==null?void 0:t.path,className:"text-sm font-primary uppercase pb-5",children:[(t==null?void 0:t.title)!=="WORLD OF B&O"&&(t==null?void 0:t.title)!=="SUPPORT"?"shop for ":"",t==null?void 0:t.title]}),r&&r.map((u,h)=>b.jsx(sw,{to:t==null?void 0:t.path,className:" text-[1.8rem] max-md:text-[1.5rem] font-primary",onMouseEnter:()=>{a(u.categoryImage),c(u.categoryDescription)},onClick:()=>n(d=>!d),children:u.categoryTitle},h))]}),b.jsxs("div",{className:"image-div max-sm:hidden  w-[45%] max-lg:w-[50%]",children:[b.jsx("img",{className:"h-[60vh] max-md:h-[40vh] w-full object-cover",src:o,alt:"Category"}),b.jsx("p",{className:"pt-4 uppercase  font-Secondary font-[500] tracking-wider ",children:l})]}),b.jsx("div",{className:"flex flex-col gap-5 sm:hidden text-xl font-primary capitalize",children:i.map((u,h)=>b.jsx(sw,{to:u.path,className:d=>d.isActive?"text-yellow-400":"p-1 w-fit  cursor-pointer",children:u.title},h))})]})]})}),oH=({setOpenNav:n,openNav:e})=>b.jsx("div",{onClick:()=>{n(!1)},className:`h-5 ${e?"opacity-1":"opacity-0"}  cursor-pointer`,children:b.jsx(m2,{className:"text-xl"})});function So(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g2(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Os={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Zu={duration:.5,overwrite:!1,delay:0},z1,Ui,gn,nr=1e8,en=1/nr,fx=Math.PI*2,aH=fx/4,lH=0,v2=Math.sqrt,cH=Math.cos,uH=Math.sin,hi=function(e){return typeof e=="string"},Cn=function(e){return typeof e=="function"},jo=function(e){return typeof e=="number"},B1=function(e){return typeof e>"u"},ro=function(e){return typeof e=="object"},ps=function(e){return e!==!1},H1=function(){return typeof window<"u"},yp=function(e){return Cn(e)||hi(e)},_2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Fi=Array.isArray,px=/(?:-?\.?\d|\.)+/gi,y2=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,hu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Vv=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,x2=/[+-]=-?[.\d]+/,S2=/[^,'"\[\]\s]+/gi,hH=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,xn,Br,mx,G1,zs={},_g={},T2,M2=function(e){return(_g=oc(e,zs))&&ys},W1=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},uf=function(e,t){return!t&&console.warn(e)},w2=function(e,t){return e&&(zs[e]=t)&&_g&&(_g[e]=t)||zs},hf=function(){return 0},dH={suppressEvents:!0,isStart:!0,kill:!1},Mm={suppressEvents:!0,kill:!1},fH={suppressEvents:!0},j1={},Va=[],gx={},E2,Ns={},kv={},ME=30,wm=[],X1="",$1=function(e){var t=e[0],i,s;if(ro(t)||Cn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=wm.length;s--&&!wm[s].targetTest(t););i=wm[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Y2(e[s],i)))||e.splice(s,1);return e},ql=function(e){return e._gsap||$1(ir(e))[0]._gsap},A2=function(e,t,i){return(i=e[t])&&Cn(i)?e[t]():B1(i)&&e.getAttribute&&e.getAttribute(t)||i},ms=function(e,t){return(e=e.split(",")).forEach(t)||e},Dn=function(e){return Math.round(e*1e5)/1e5||0},li=function(e){return Math.round(e*1e7)/1e7||0},Eu=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+s:i==="-"?e-s:i==="*"?e*s:e/s},pH=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},yg=function(){var e=Va.length,t=Va.slice(0),i,s;for(gx={},Va.length=0,i=0;i<e;i++)s=t[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},N2=function(e,t,i,s){Va.length&&!Ui&&yg(),e.render(t,i,Ui&&t<0&&(e._initted||e._startAt)),Va.length&&!Ui&&yg()},C2=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(S2).length<2?t:hi(e)?e.trim():e},b2=function(e){return e},cr=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},mH=function(e){return function(t,i){for(var s in i)s in t||s==="duration"&&e||s==="ease"||(t[s]=i[s])}},oc=function(e,t){for(var i in t)e[i]=t[i];return e},wE=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=ro(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},xg=function(e,t){var i={},s;for(s in e)s in t||(i[s]=e[s]);return i},Ad=function(e){var t=e.parent||xn,i=e.keyframes?mH(Fi(e.keyframes)):cr;if(ps(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},gH=function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0},R2=function(e,t,i,s,r){var o=e[s],a;if(r)for(a=t[r];o&&o[r]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},M0=function(e,t,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},Xa=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Yl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},vH=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},vx=function(e,t,i,s){return e._startAt&&(Ui?e._startAt.revert(Mm):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},_H=function n(e){return!e||e._ts&&n(e.parent)},EE=function(e){return e._repeat?Qu(e._tTime,e=e.duration()+e._rDelay)*e:0},Qu=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Sg=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},w0=function(e){return e._end=li(e._start+(e._tDur/Math.abs(e._ts||e._rts||en)||0))},E0=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=li(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),w0(e),i._dirty||Yl(i,e)),e},P2=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Sg(e.rawTime(),t),(!t._dur||kf(0,t.totalDuration(),i)-t._tTime>en)&&t.render(i,!0)),Yl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-en}},$r=function(e,t,i,s){return t.parent&&Xa(t),t._start=li((jo(i)?i:i||e!==xn?qs(e,i,t):e._time)+t._delay),t._end=li(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),R2(e,t,"_first","_last",e._sort?"_start":0),_x(t)||(e._recent=t),s||P2(e,t),e._ts<0&&E0(e,e._tTime),e},L2=function(e,t){return(zs.ScrollTrigger||W1("scrollTrigger",t))&&zs.ScrollTrigger.create(t,e)},I2=function(e,t,i,s,r){if(Y1(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!Ui&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&E2!==Cs.frame)return Va.push(e),e._lazy=[r,s],1},yH=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},_x=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},xH=function(e,t,i,s){var r=e.ratio,o=t<0||!t&&(!e._start&&yH(e)&&!(!e._initted&&_x(e))||(e._ts<0||e._dp._ts<0)&&!_x(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=kf(0,e._tDur,t),u=Qu(l,a),e._yoyo&&u&1&&(o=1-o),u!==Qu(e._tTime,a)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||Ui||s||e._zTime===en||!t&&e._zTime){if(!e._initted&&I2(e,t,s,i,l))return;for(h=e._zTime,e._zTime=t||(i?en:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&vx(e,t,i,!0),e._onUpdate&&!i&&Ps(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ps(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Xa(e,1),!i&&!Ui&&(Ps(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},SH=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},Ju=function(e,t,i,s){var r=e._repeat,o=li(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:li(o*(r+1)+e._rDelay*r):o,a>0&&!s&&E0(e,e._tTime=e._tDur*a),e.parent&&w0(e),i||Yl(e.parent,e),e},AE=function(e){return e instanceof Zi?Yl(e):Ju(e,e._dur)},TH={_start:0,endTime:hf,totalDuration:hf},qs=function n(e,t,i){var s=e.labels,r=e._recent||TH,o=e.duration()>=nr?r.endTime(!1):e._dur,a,l,c;return hi(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?r:i).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(Fi(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},Nd=function(e,t,i){var s=jo(t[1]),r=(s?2:1)+(e<2?0:1),o=t[r],a,l;if(s&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ps(l.vars.inherit)&&l.parent;o.immediateRender=ps(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new Bn(t[0],o,t[r+1])},al=function(e,t){return e||e===0?t(e):t},kf=function(e,t,i){return i<e?e:i>t?t:i},Ii=function(e,t){return!hi(e)||!(t=hH.exec(e))?"":t[1]},MH=function(e,t,i){return al(i,function(s){return kf(e,t,s)})},yx=[].slice,D2=function(e,t){return e&&ro(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ro(e[0]))&&!e.nodeType&&e!==Br},wH=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(s){var r;return hi(s)&&!t||D2(s,1)?(r=i).push.apply(r,ir(s)):i.push(s)})||i},ir=function(e,t,i){return gn&&!t&&gn.selector?gn.selector(e):hi(e)&&!i&&(mx||!eh())?yx.call((t||G1).querySelectorAll(e),0):Fi(e)?wH(e,i):D2(e)?yx.call(e,0):e?[e]:[]},xx=function(e){return e=ir(e)[0]||uf("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return ir(t,i.querySelectorAll?i:i===e?uf("Invalid scope")||G1.createElement("div"):e)}},O2=function(e){return e.sort(function(){return .5-Math.random()})},U2=function(e){if(Cn(e))return e;var t=ro(e)?e:{each:e},i=Kl(t.ease),s=t.from||0,r=parseFloat(t.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=t.axis,u=s,h=s;return hi(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],h=s[1]),function(d,f,g){var m=(g||t).length,v=o[m],p,y,_,x,E,w,T,A,M;if(!v){if(M=t.grid==="auto"?0:(t.grid||[1,nr])[1],!M){for(T=-nr;T<(T=g[M++].getBoundingClientRect().left)&&M<m;);M<m&&M--}for(v=o[m]=[],p=l?Math.min(M,m)*u-.5:s%M,y=M===nr?0:l?m*h/M-.5:s/M|0,T=0,A=nr,w=0;w<m;w++)_=w%M-p,x=y-(w/M|0),v[w]=E=c?Math.abs(c==="y"?x:_):v2(_*_+x*x),E>T&&(T=E),E<A&&(A=E);s==="random"&&O2(v),v.max=T-A,v.min=A,v.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(M>m?m-1:c?c==="y"?m/M:M:Math.max(M,m/M))||0)*(s==="edges"?-1:1),v.b=m<0?r-m:r,v.u=Ii(t.amount||t.each)||0,i=i&&m<0?X2(i):i}return m=(v[d]-v.min)/v.max||0,li(v.b+(i?i(m):m)*v.v)+v.u}},Sx=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=li(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(jo(i)?0:Ii(i))}},F2=function(e,t){var i=Fi(e),s,r;return!i&&ro(e)&&(s=i=e.radius||nr,e.values?(e=ir(e.values),(r=!jo(e[0]))&&(s*=s)):e=Sx(e.increment)),al(t,i?Cn(e)?function(o){return r=e(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),c=nr,u=0,h=e.length,d,f;h--;)r?(d=e[h].x-a,f=e[h].y-l,d=d*d+f*f):d=Math.abs(e[h]-a),d<c&&(c=d,u=h);return u=!s||c<=s?e[u]:o,r||u===o||jo(o)?u:u+Ii(o)}:Sx(e))},V2=function(e,t,i,s){return al(Fi(e)?!t:i===!0?!!(i=0):!s,function(){return Fi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*s)/s})},EH=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,o){return o(r)},s)}},AH=function(e,t){return function(i){return e(parseFloat(i))+(t||Ii(i))}},NH=function(e,t,i){return z2(e,t,0,1,i)},k2=function(e,t,i){return al(i,function(s){return e[~~t(s)]})},CH=function n(e,t,i){var s=t-e;return Fi(e)?k2(e,n(0,e.length),t):al(i,function(r){return(s+(r-e)%s)%s+e})},bH=function n(e,t,i){var s=t-e,r=s*2;return Fi(e)?k2(e,n(0,e.length-1),t):al(i,function(o){return o=(r+(o-e)%r)%r||0,e+(o>s?r-o:o)})},df=function(e){for(var t=0,i="",s,r,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",r=e.substr(s+7,o-s-7).match(a?S2:px),i+=e.substr(t,s-t)+V2(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},z2=function(e,t,i,s,r){var o=t-e,a=s-i;return al(r,function(l){return i+((l-e)/o*a||0)})},RH=function n(e,t,i,s){var r=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!r){var o=hi(e),a={},l,c,u,h,d;if(i===!0&&(s=1)&&(i=null),o)e={p:e},t={p:t};else if(Fi(e)&&!Fi(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(n(e[c-1],e[c]));h--,r=function(g){g*=h;var m=Math.min(d,~~g);return u[m](g-m)},i=t}else s||(e=oc(Fi(e)?[]:{},e));if(!u){for(l in t)q1.call(a,e,l,"get",t[l]);r=function(g){return Q1(g,a)||(o?e.p:e)}}}return al(i,r)},NE=function(e,t,i){var s=e.labels,r=nr,o,a,l;for(o in s)a=s[o]-t,a<0==!!i&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},Ps=function(e,t,i){var s=e.vars,r=s[t],o=gn,a=e._ctx,l,c,u;if(r)return l=s[t+"Params"],c=s.callbackScope||e,i&&Va.length&&yg(),a&&(gn=a),u=l?r.apply(c,l):r.call(c),gn=o,u},id=function(e){return Xa(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ui),e.progress()<1&&Ps(e,"onInterrupt"),e},du,B2=[],H2=function(e){if(e)if(e=!e.name&&e.default||e,H1()||e.headless){var t=e.name,i=Cn(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:hf,render:Q1,add:q1,kill:XH,modifier:jH,rawVars:0},o={targetTest:0,get:0,getSetter:Z1,aliases:{},register:0};if(eh(),e!==s){if(Ns[t])return;cr(s,cr(xg(e,r),o)),oc(s.prototype,oc(r,xg(e,o))),Ns[s.prop=t]=s,e.targetTest&&(wm.push(s),j1[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}w2(t,s),e.register&&e.register(ys,s,gs)}else B2.push(e)},Zt=255,sd={aqua:[0,Zt,Zt],lime:[0,Zt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Zt],navy:[0,0,128],white:[Zt,Zt,Zt],olive:[128,128,0],yellow:[Zt,Zt,0],orange:[Zt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Zt,0,0],pink:[Zt,192,203],cyan:[0,Zt,Zt],transparent:[Zt,Zt,Zt,0]},zv=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Zt+.5|0},G2=function(e,t,i){var s=e?jo(e)?[e>>16,e>>8&Zt,e&Zt]:0:sd.black,r,o,a,l,c,u,h,d,f,g;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),sd[e])s=sd[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Zt,s&Zt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Zt,e&Zt]}else if(e.substr(0,3)==="hsl"){if(s=g=e.match(px),!t)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,r=u*2-o,s.length>3&&(s[3]*=1),s[0]=zv(l+1/3,r,o),s[1]=zv(l,r,o),s[2]=zv(l-1/3,r,o);else if(~e.indexOf("="))return s=e.match(y2),i&&s.length<4&&(s[3]=1),s}else s=e.match(px)||sd.transparent;s=s.map(Number)}return t&&!g&&(r=s[0]/Zt,o=s[1]/Zt,a=s[2]/Zt,h=Math.max(r,o,a),d=Math.min(r,o,a),u=(h+d)/2,h===d?l=c=0:(f=h-d,c=u>.5?f/(2-h-d):f/(h+d),l=h===r?(o-a)/f+(o<a?6:0):h===o?(a-r)/f+2:(r-o)/f+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},W2=function(e){var t=[],i=[],s=-1;return e.split(ka).forEach(function(r){var o=r.match(hu)||[];t.push.apply(t,o),i.push(s+=o.length+1)}),t.c=i,t},CE=function(e,t,i){var s="",r=(e+s).match(ka),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!r)return e;if(r=r.map(function(d){return(d=G2(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(u=W2(e),l=i.c,l.join(s)!==u.c.join(s)))for(c=e.replace(ka,"1").split(hu),h=c.length-1;a<h;a++)s+=c[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!c)for(c=e.split(ka),h=c.length-1;a<h;a++)s+=c[a]+r[a];return s+c[h]},ka=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in sd)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),PH=/hsl[a]?\(/,j2=function(e){var t=e.join(" "),i;if(ka.lastIndex=0,ka.test(t))return i=PH.test(t),e[1]=CE(e[1],i),e[0]=CE(e[0],i,W2(e[1])),!0},ff,Cs=function(){var n=Date.now,e=500,t=33,i=n(),s=i,r=1e3/240,o=r,a=[],l,c,u,h,d,f,g=function m(v){var p=n()-s,y=v===!0,_,x,E,w;if((p>e||p<0)&&(i+=p-t),s+=p,E=s-i,_=E-o,(_>0||y)&&(w=++h.frame,d=E-h.time*1e3,h.time=E=E/1e3,o+=_+(_>=r?4:r-_),x=1),y||(l=c(m)),x)for(f=0;f<a.length;f++)a[f](E,d,w,v)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(v){return d/(1e3/(v||60))},wake:function(){T2&&(!mx&&H1()&&(Br=mx=window,G1=Br.document||{},zs.gsap=ys,(Br.gsapVersions||(Br.gsapVersions=[])).push(ys.version),M2(_g||Br.GreenSockGlobals||!Br.gsap&&Br||{}),B2.forEach(H2)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(v){return setTimeout(v,o-h.time*1e3+1|0)},ff=1,g(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),ff=0,c=hf},lagSmoothing:function(v,p){e=v||1/0,t=Math.min(p||33,e)},fps:function(v){r=1e3/(v||240),o=h.time*1e3+r},add:function(v,p,y){var _=p?function(x,E,w,T){v(x,E,w,T),h.remove(_)}:v;return h.remove(v),a[y?"unshift":"push"](_),eh(),_},remove:function(v,p){~(p=a.indexOf(v))&&a.splice(p,1)&&f>=p&&f--},_listeners:a},h}(),eh=function(){return!ff&&Cs.wake()},Ct={},LH=/^[\d.\-M][\d.\-,\s]/,IH=/["']/g,DH=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,o=i.length,a,l,c;r<o;r++)l=i[r],a=r!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[s]=isNaN(c)?c.replace(IH,"").trim():+c,s=l.substr(a+1).trim();return t},OH=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)},UH=function(e){var t=(e+"").split("("),i=Ct[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[DH(t[1])]:OH(e).split(",").map(C2)):Ct._CE&&LH.test(e)?Ct._CE("",e):i},X2=function(e){return function(t){return 1-e(1-t)}},$2=function n(e,t){for(var i=e._first,s;i;)i instanceof Zi?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},Kl=function(e,t){return e&&(Cn(e)?e:Ct[e]||UH(e))||t},xc=function(e,t,i,s){i===void 0&&(i=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:s},o;return ms(e,function(a){Ct[a]=zs[a]=r,Ct[o=a.toLowerCase()]=i;for(var l in r)Ct[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ct[a+"."+l]=r[l]}),r},q2=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Bv=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/fx*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*uH((u-o)*r)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:q2(a);return r=fx/r,l.config=function(c,u){return n(e,c,u)},l},Hv=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:q2(i);return s.config=function(r){return n(e,r)},s};ms("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;xc(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Ct.Linear.easeNone=Ct.none=Ct.Linear.easeIn;xc("Elastic",Bv("in"),Bv("out"),Bv());(function(n,e){var t=1/e,i=2*t,s=2.5*t,r=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<s?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};xc("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);xc("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});xc("Circ",function(n){return-(v2(1-n*n)-1)});xc("Sine",function(n){return n===1?1:-cH(n*aH)+1});xc("Back",Hv("in"),Hv("out"),Hv());Ct.SteppedEase=Ct.steps=zs.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0,o=1-en;return function(a){return((s*kf(0,o,a)|0)+r)*i}}};Zu.ease=Ct["quad.out"];ms("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return X1+=n+","+n+"Params,"});var Y2=function(e,t){this.id=lH++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:A2,this.set=t?t.getSetter:Z1},pf=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ju(this,+t.duration,1,1),this.data=t.data,gn&&(this._ctx=gn,gn.data.push(this)),ff||Cs.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Ju(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(eh(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(E0(this,i),!r._dp||r.parent||P2(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&$r(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===en||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),N2(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+EE(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+EE(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?Qu(this._tTime,r)+1:1},e.timeScale=function(i,s){if(!arguments.length)return this._rts===-en?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Sg(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-en?0:this._rts,this.totalTime(kf(-Math.abs(this._delay),this._tDur,r),s!==!1),w0(this),vH(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(eh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==en&&(this._tTime-=en)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&$r(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(ps(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Sg(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=fH);var s=Ui;return Ui=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ui=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,AE(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,AE(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(qs(this,i),ps(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,ps(s))},e.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-en:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-en,this},e.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-en)},e.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete o[i],this):o[i]},e.then=function(i){var s=this;return new Promise(function(r){var o=Cn(i)?i:b2,a=function(){var c=s.then;s.then=null,Cn(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),r(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){id(this)},n}();cr(pf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-en,_prom:0,_ps:!1,_rts:1});var Zi=function(n){g2(e,n);function e(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=ps(i.sortChildren),xn&&$r(i.parent||xn,So(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&L2(So(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,o){return Nd(0,arguments,this),this},t.from=function(s,r,o){return Nd(1,arguments,this),this},t.fromTo=function(s,r,o,a){return Nd(2,arguments,this),this},t.set=function(s,r,o){return r.duration=0,r.parent=this,Ad(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Bn(s,r,qs(this,o),1),this},t.call=function(s,r,o){return $r(this,Bn.delayedCall(0,s,r),o)},t.staggerTo=function(s,r,o,a,l,c,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Bn(s,o,qs(this,l)),this},t.staggerFrom=function(s,r,o,a,l,c,u){return o.runBackwards=1,Ad(o).immediateRender=ps(o.immediateRender),this.staggerTo(s,r,o,a,l,c,u)},t.staggerFromTo=function(s,r,o,a,l,c,u,h){return a.startAt=o,Ad(a).immediateRender=ps(a.immediateRender),this.staggerTo(s,r,a,l,c,u,h)},t.render=function(s,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:li(s),h=this._zTime<0!=s<0&&(this._initted||!c),d,f,g,m,v,p,y,_,x,E,w,T;if(this!==xn&&u>l&&s>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),d=u,x=this._start,_=this._ts,p=!_,h&&(c||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(w=this._yoyo,v=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(v*100+s,r,o);if(d=li(u%v),u===l?(m=this._repeat,d=c):(m=~~(u/v),m&&m===u/v&&(d=c,m--),d>c&&(d=c)),E=Qu(this._tTime,v),!a&&this._tTime&&E!==m&&this._tTime-E*v-this._dur<=0&&(E=m),w&&m&1&&(d=c-d,T=1),m!==E&&!this._lock){var A=w&&E&1,M=A===(w&&m&1);if(m<E&&(A=!A),a=A?0:u%c?c:u,this._lock=1,this.render(a||(T?0:li(m*v)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&Ps(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),a&&a!==this._time||p!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,M&&(this._lock=2,a=A?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!p)return this;$2(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=SH(this,li(a),li(d)),y&&(u-=d-(d=y._start))),this._tTime=u,this._time=d,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!r&&!m&&(Ps(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(f=this._first;f;){if(g=f._next,(f._act||d>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(s,r,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,r,o),d!==this._time||!this._ts&&!p){y=0,g&&(u+=this._zTime=-en);break}}f=g}else{f=this._last;for(var S=s<0?s:d;f;){if(g=f._prev,(f._act||S<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(s,r,o);if(f.render(f._ts>0?(S-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(S-f._start)*f._ts,r,o||Ui&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!p){y=0,g&&(u+=this._zTime=S?-en:en);break}}f=g}}if(y&&!r&&(this.pause(),y.render(d>=a?0:-en)._zTime=d>=a?1:-1,this._ts))return this._start=x,w0(this),this.render(s,r,o);this._onUpdate&&!r&&Ps(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(x===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Xa(this,1),!r&&!(s<0&&!a)&&(u||a||!l)&&(Ps(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var o=this;if(jo(r)||(r=qs(this,r,s)),!(s instanceof pf)){if(Fi(s))return s.forEach(function(a){return o.add(a,r)}),this;if(hi(s))return this.addLabel(s,r);if(Cn(s))s=Bn.delayedCall(0,s);else return this}return this!==s?$r(this,s,r):this},t.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-nr);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Bn?r&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,o)))),c=c._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},t.remove=function(s){return hi(s)?this.removeLabel(s):Cn(s)?this.killTweensOf(s):(M0(this,s),s===this._recent&&(this._recent=this._last),Yl(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=li(Cs.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=qs(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,o){var a=Bn.delayedCall(0,r||hf,o);return a.data="isPause",this._hasPause=1,$r(this,a,qs(this,s))},t.removePause=function(s){var r=this._first;for(s=qs(this,s);r;)r._start===s&&r.data==="isPause"&&Xa(r),r=r._next},t.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)_a!==a[l]&&a[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var o=[],a=ir(s),l=this._first,c=jo(r),u;l;)l instanceof Bn?pH(l._targets,a)&&(c?(!_a||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(u=l.getTweensOf(a,r)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(s,r){r=r||{};var o=this,a=qs(o,s),l=r,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,f,g=Bn.to(o,cr({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||en,onStart:function(){if(o.pause(),!f){var v=r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==v&&Ju(g,v,0,1).render(g._time,!0,!0),f=1}u&&u.apply(g,h||[])}},r));return d?g.render(0):g},t.tweenFromTo=function(s,r,o){return this.tweenTo(r,cr({startAt:{time:qs(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),NE(this,qs(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),NE(this,qs(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+en)},t.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(c in l)l[c]>=o&&(l[c]+=s);return Yl(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Yl(this)},t.totalDuration=function(s){var r=0,o=this,a=o._last,l=nr,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,$r(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(r-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=c;Ju(o,o===xn&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(xn._ts&&(N2(xn,Sg(s,xn)),E2=Cs.frame),Cs.frame>=ME){ME+=Os.autoSleep||120;var r=xn._first;if((!r||!r._ts)&&Os.autoSleep&&Cs._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Cs.sleep()}}},e}(pf);cr(Zi.prototype,{_lock:0,_hasPause:0,_forcing:0});var FH=function(e,t,i,s,r,o,a){var l=new gs(this._pt,e,t,0,1,tL,null,r),c=0,u=0,h,d,f,g,m,v,p,y;for(l.b=i,l.e=s,i+="",s+="",(p=~s.indexOf("random("))&&(s=df(s)),o&&(y=[i,s],o(y,e,t),i=y[0],s=y[1]),d=i.match(Vv)||[];h=Vv.exec(s);)g=h[0],m=s.substring(c,h.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),g!==d[u++]&&(v=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:m||u===1?m:",",s:v,c:g.charAt(1)==="="?Eu(v,g)-v:parseFloat(g)-v,m:f&&f<4?Math.round:0},c=Vv.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(x2.test(s)||p)&&(l.e=0),this._pt=l,l},q1=function(e,t,i,s,r,o,a,l,c,u){Cn(s)&&(s=s(r||0,e,o));var h=e[t],d=i!=="get"?i:Cn(h)?c?e[t.indexOf("set")||!Cn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,f=Cn(h)?c?HH:J2:K1,g;if(hi(s)&&(~s.indexOf("random(")&&(s=df(s)),s.charAt(1)==="="&&(g=Eu(d,s)+(Ii(d)||0),(g||g===0)&&(s=g))),!u||d!==s||Tx)return!isNaN(d*s)&&s!==""?(g=new gs(this._pt,e,t,+d||0,s-(d||0),typeof h=="boolean"?WH:eL,0,f),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!h&&!(t in e)&&W1(t,s),FH.call(this,e,t,d,s,f,l||Os.stringFilter,c))},VH=function(e,t,i,s,r){if(Cn(e)&&(e=Cd(e,r,t,i,s)),!ro(e)||e.style&&e.nodeType||Fi(e)||_2(e))return hi(e)?Cd(e,r,t,i,s):e;var o={},a;for(a in e)o[a]=Cd(e[a],r,t,i,s);return o},K2=function(e,t,i,s,r,o){var a,l,c,u;if(Ns[e]&&(a=new Ns[e]).init(r,a.rawVars?t[e]:VH(t[e],s,r,o,i),i,s,o)!==!1&&(i._pt=l=new gs(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==du))for(c=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)c[a._props[u]]=l;return a},_a,Tx,Y1=function n(e,t,i){var s=e.vars,r=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,h=s.yoyoEase,d=s.keyframes,f=s.autoRevert,g=e._dur,m=e._startAt,v=e._targets,p=e.parent,y=p&&p.data==="nested"?p.vars.targets:v,_=e._overwrite==="auto"&&!z1,x=e.timeline,E,w,T,A,M,S,P,F,H,ee,K,j,Z;if(x&&(!d||!r)&&(r="none"),e._ease=Kl(r,Zu.ease),e._yEase=h?X2(Kl(h===!0?r:h,Zu.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!x&&!!s.runBackwards,!x||d&&!s.stagger){if(F=v[0]?ql(v[0]).harness:0,j=F&&s[F.prop],E=xg(s,j1),m&&(m._zTime<0&&m.progress(1),t<0&&u&&a&&!f?m.render(-1,!0):m.revert(u&&g?Mm:dH),m._lazy=0),o){if(Xa(e._startAt=Bn.set(v,cr({data:"isStart",overwrite:!1,parent:p,immediateRender:!0,lazy:!m&&ps(l),startAt:null,delay:0,onUpdate:c&&function(){return Ps(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ui||!a&&!f)&&e._startAt.revert(Mm),a&&g&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&g&&!m){if(t&&(a=!1),T=cr({overwrite:!1,data:"isFromStart",lazy:a&&!m&&ps(l),immediateRender:a,stagger:0,parent:p},E),j&&(T[F.prop]=j),Xa(e._startAt=Bn.set(v,T)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ui?e._startAt.revert(Mm):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,en,en);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&ps(l)||l&&!g,w=0;w<v.length;w++){if(M=v[w],P=M._gsap||$1(v)[w]._gsap,e._ptLookup[w]=ee={},gx[P.id]&&Va.length&&yg(),K=y===v?w:y.indexOf(M),F&&(H=new F).init(M,j||E,e,K,y)!==!1&&(e._pt=A=new gs(e._pt,M,H.name,0,1,H.render,H,0,H.priority),H._props.forEach(function(D){ee[D]=A}),H.priority&&(S=1)),!F||j)for(T in E)Ns[T]&&(H=K2(T,E,e,K,M,y))?H.priority&&(S=1):ee[T]=A=q1.call(e,M,T,"get",E[T],K,y,0,s.stringFilter);e._op&&e._op[w]&&e.kill(M,e._op[w]),_&&e._pt&&(_a=e,xn.killTweensOf(M,ee,e.globalTime(t)),Z=!e.parent,_a=0),e._pt&&l&&(gx[P.id]=1)}S&&nL(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Z,d&&t<=0&&x.render(nr,!0,!0)},kH=function(e,t,i,s,r,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,d,f;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,f=e._targets.length;f--;){if(u=d[f][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return Tx=1,e.vars[t]="+=0",Y1(e,a),Tx=0,l?uf(t+" not eligible for reset"):1;c.push(u)}for(f=c.length;f--;)h=c[f],u=h._pt||h,u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=Dn(i)+Ii(h.e)),h.b&&(h.b=u.s+Ii(h.b))},zH=function(e,t){var i=e[0]?ql(e[0]).harness:0,s=i&&i.aliases,r,o,a,l;if(!s)return t;r=oc({},t);for(o in s)if(o in r)for(l=s[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},BH=function(e,t,i,s){var r=t.ease||s||"power1.inOut",o,a;if(Fi(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:r})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:r})},Cd=function(e,t,i,s,r){return Cn(e)?e.call(t,i,s,r):hi(e)&&~e.indexOf("random(")?df(e):e},Z2=X1+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Q2={};ms(Z2+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Q2[n]=1});var Bn=function(n){g2(e,n);function e(i,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=n.call(this,o?s:Ad(s))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,g=l.keyframes,m=l.defaults,v=l.scrollTrigger,p=l.yoyoEase,y=s.parent||xn,_=(Fi(i)||_2(i)?jo(i[0]):"length"in s)?[i]:ir(i),x,E,w,T,A,M,S,P;if(a._targets=_.length?$1(_):uf("GSAP target "+i+" not found. https://gsap.com",!Os.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||d||yp(c)||yp(u)){if(s=a.vars,x=a.timeline=new Zi({data:"nested",defaults:m||{},targets:y&&y.data==="nested"?y.vars.targets:_}),x.kill(),x.parent=x._dp=So(a),x._start=0,d||yp(c)||yp(u)){if(T=_.length,S=d&&U2(d),ro(d))for(A in d)~Z2.indexOf(A)&&(P||(P={}),P[A]=d[A]);for(E=0;E<T;E++)w=xg(s,Q2),w.stagger=0,p&&(w.yoyoEase=p),P&&oc(w,P),M=_[E],w.duration=+Cd(c,So(a),E,M,_),w.delay=(+Cd(u,So(a),E,M,_)||0)-a._delay,!d&&T===1&&w.delay&&(a._delay=u=w.delay,a._start+=u,w.delay=0),x.to(M,w,S?S(E,M,_):0),x._ease=Ct.none;x.duration()?c=u=0:a.timeline=0}else if(g){Ad(cr(x.vars.defaults,{ease:"none"})),x._ease=Kl(g.ease||s.ease||"none");var F=0,H,ee,K;if(Fi(g))g.forEach(function(j){return x.to(_,j,">")}),x.duration();else{w={};for(A in g)A==="ease"||A==="easeEach"||BH(A,g[A],w,g.easeEach);for(A in w)for(H=w[A].sort(function(j,Z){return j.t-Z.t}),F=0,E=0;E<H.length;E++)ee=H[E],K={ease:ee.e,duration:(ee.t-(E?H[E-1].t:0))/100*c},K[A]=ee.v,x.to(_,K,F),F+=K.duration;x.duration()<c&&x.to({},{duration:c-x.duration()})}}c||a.duration(c=x.duration())}else a.timeline=0;return f===!0&&!z1&&(_a=So(a),xn.killTweensOf(_),_a=0),$r(y,So(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!c&&!g&&a._start===li(y._time)&&ps(h)&&_H(So(a))&&y.data!=="nested")&&(a._tTime=-en,a.render(Math.max(0,-u)||0)),v&&L2(So(a),v),a}var t=e.prototype;return t.render=function(s,r,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,h=s>l-en&&!u?l:s<en?0:s,d,f,g,m,v,p,y,_,x;if(!c)xH(this,s,r,o);else if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,_=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(m*100+s,r,o);if(d=li(h%m),h===l?(g=this._repeat,d=c):(g=~~(h/m),g&&g===li(h/m)&&(d=c,g--),d>c&&(d=c)),p=this._yoyo&&g&1,p&&(x=this._yEase,d=c-d),v=Qu(this._tTime,m),d===a&&!o&&this._initted&&g===v)return this._tTime=h,this;g!==v&&(_&&this._yEase&&$2(_,p),this.vars.repeatRefresh&&!p&&!this._lock&&this._time!==m&&this._initted&&(this._lock=o=1,this.render(li(m*g),!0).invalidate()._lock=0))}if(!this._initted){if(I2(this,u?s:d,o,r,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==v))return this;if(c!==this._dur)return this.render(s,r,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(x||this._ease)(d/c),this._from&&(this.ratio=y=1-y),d&&!a&&!r&&!g&&(Ps(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;_&&_.render(s<0?s:_._dur*_._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&vx(this,s,r,o),Ps(this,"onUpdate")),this._repeat&&g!==v&&this.vars.onRepeat&&!r&&this.parent&&Ps(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&vx(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Xa(this,1),!r&&!(u&&!a)&&(h||a||p)&&(Ps(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,o,a,l){ff||Cs.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Y1(this,c),u=this._ease(c/this._dur),kH(this,s,r,o,a,u,c,l)?this.resetTo(s,r,o,a,1):(E0(this,0),this.parent||R2(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?id(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,_a&&_a.vars.overwrite!==!0)._first||id(this),this.parent&&o!==this.timeline.totalDuration()&&Ju(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?ir(s):a,c=this._ptLookup,u=this._pt,h,d,f,g,m,v,p;if((!r||r==="all")&&gH(a,l))return r==="all"&&(this._pt=0),id(this);for(h=this._op=this._op||[],r!=="all"&&(hi(r)&&(m={},ms(r,function(y){return m[y]=1}),r=m),r=zH(a,r)),p=a.length;p--;)if(~l.indexOf(a[p])){d=c[p],r==="all"?(h[p]=r,g=d,f={}):(f=h[p]=h[p]||{},g=r);for(m in g)v=d&&d[m],v&&((!("kill"in v.d)||v.d.kill(m)===!0)&&M0(this,v,"_pt"),delete d[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&u&&id(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return Nd(1,arguments)},e.delayedCall=function(s,r,o,a){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,r,o){return Nd(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,o){return xn.killTweensOf(s,r,o)},e}(pf);cr(Bn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ms("staggerTo,staggerFrom,staggerFromTo",function(n){Bn[n]=function(){var e=new Zi,t=yx.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var K1=function(e,t,i){return e[t]=i},J2=function(e,t,i){return e[t](i)},HH=function(e,t,i,s){return e[t](s.fp,i)},GH=function(e,t,i){return e.setAttribute(t,i)},Z1=function(e,t){return Cn(e[t])?J2:B1(e[t])&&e.setAttribute?GH:K1},eL=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},WH=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},tL=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},Q1=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},jH=function(e,t,i,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(e,t,i),r=o},XH=function(e){for(var t=this._pt,i,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?M0(this,t,"_pt"):t.dep||(i=1),t=s;return!i},$H=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},nL=function(e){for(var t=e._pt,i,s,r,o;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:o=t,t=i}e._pt=r},gs=function(){function n(t,i,s,r,o,a,l,c,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||eL,this.d=l||this,this.set=c||K1,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=$H,this.m=i,this.mt=r,this.tween=s},n}();ms(X1+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return j1[n]=1});zs.TweenMax=zs.TweenLite=Bn;zs.TimelineLite=zs.TimelineMax=Zi;xn=new Zi({sortChildren:!1,defaults:Zu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Os.stringFilter=j2;var Zl=[],Em={},qH=[],bE=0,YH=0,Gv=function(e){return(Em[e]||qH).map(function(t){return t()})},Mx=function(){var e=Date.now(),t=[];e-bE>2&&(Gv("matchMediaInit"),Zl.forEach(function(i){var s=i.queries,r=i.conditions,o,a,l,c;for(a in s)o=Br.matchMedia(s[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),Gv("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),bE=e,Gv("matchMedia"))},iL=function(){function n(t,i){this.selector=i&&xx(i),this.data=[],this._r=[],this.isReverted=!1,this.id=YH++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){Cn(i)&&(r=s,s=i,i=Cn);var o=this,a=function(){var c=gn,u=o.selector,h;return c&&c!==o&&c.data.push(o),r&&(o.selector=xx(r)),gn=o,h=s.apply(o,arguments),Cn(h)&&o._r.push(h),gn=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===Cn?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var s=gn;gn=null,i(this),gn=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof Bn&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=r.data.length;l--;)c=r.data[l],c instanceof Zi?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Bn)&&c.revert&&c.revert(i);r._r.forEach(function(u){return u(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Zl.length;o--;)Zl[o].id===this.id&&Zl.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),KH=function(){function n(t){this.contexts=[],this.scope=t,gn&&gn.data.push(this)}var e=n.prototype;return e.add=function(i,s,r){ro(i)||(i={matches:i});var o=new iL(0,r||this.scope),a=o.conditions={},l,c,u;gn&&!o.selector&&(o.selector=gn.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=i;for(c in i)c==="all"?u=1:(l=Br.matchMedia(i[c]),l&&(Zl.indexOf(o)<0&&Zl.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Mx):l.addEventListener("change",Mx)));return u&&s(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),Tg={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return H2(s)})},timeline:function(e){return new Zi(e)},getTweensOf:function(e,t){return xn.getTweensOf(e,t)},getProperty:function(e,t,i,s){hi(e)&&(e=ir(e)[0]);var r=ql(e||{}).get,o=i?b2:C2;return i==="native"&&(i=""),e&&(t?o((Ns[t]&&Ns[t].get||r)(e,t,i,s)):function(a,l,c){return o((Ns[a]&&Ns[a].get||r)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=ir(e),e.length>1){var s=e.map(function(u){return ys.quickSetter(u,t,i)}),r=s.length;return function(u){for(var h=r;h--;)s[h](u)}}e=e[0]||{};var o=Ns[t],a=ql(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;du._pt=0,h.init(e,i?u+i:u,du,0,[e]),h.render(1,h),du._pt&&Q1(1,du)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var s,r=ys.to(e,oc((s={},s[t]="+=0.1",s.paused=!0,s),i||{})),o=function(l,c,u){return r.resetTo(t,l,c,u)};return o.tween=r,o},isTweening:function(e){return xn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Kl(e.ease,Zu.ease)),wE(Zu,e||{})},config:function(e){return wE(Os,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.plugins,r=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Ns[a]&&!zs[a]&&uf(t+" effect requires "+a+" plugin.")}),kv[t]=function(a,l,c){return i(ir(a),cr(l||{},r),c)},o&&(Zi.prototype[t]=function(a,l,c){return this.add(kv[t](a,ro(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Ct[e]=Kl(t)},parseEase:function(e,t){return arguments.length?Kl(e,t):Ct},getById:function(e){return xn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Zi(e),s,r;for(i.smoothChildTiming=ps(e.smoothChildTiming),xn.remove(i),i._dp=0,i._time=i._tTime=xn._time,s=xn._first;s;)r=s._next,(t||!(!s._dur&&s instanceof Bn&&s.vars.onComplete===s._targets[0]))&&$r(i,s,s._start-s._delay),s=r;return $r(xn,i,0),i},context:function(e,t){return e?new iL(e,t):gn},matchMedia:function(e){return new KH(e)},matchMediaRefresh:function(){return Zl.forEach(function(e){var t=e.conditions,i,s;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||Mx()},addEventListener:function(e,t){var i=Em[e]||(Em[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Em[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:CH,wrapYoyo:bH,distribute:U2,random:V2,snap:F2,normalize:NH,getUnit:Ii,clamp:MH,splitColor:G2,toArray:ir,selector:xx,mapRange:z2,pipe:EH,unitize:AH,interpolate:RH,shuffle:O2},install:M2,effects:kv,ticker:Cs,updateRoot:Zi.updateRoot,plugins:Ns,globalTimeline:xn,core:{PropTween:gs,globals:w2,Tween:Bn,Timeline:Zi,Animation:pf,getCache:ql,_removeLinkedListItem:M0,reverting:function(){return Ui},context:function(e){return e&&gn&&(gn.data.push(e),e._ctx=gn),gn},suppressOverwrites:function(e){return z1=e}}};ms("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Tg[n]=Bn[n]});Cs.add(Zi.updateRoot);du=Tg.to({},{duration:0});var ZH=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},QH=function(e,t){var i=e._targets,s,r,o;for(s in t)for(r=i.length;r--;)o=e._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=ZH(o,s)),o&&o.modifier&&o.modifier(t[s],e,i[r],s))},Wv=function(e,t){return{name:e,rawVars:1,init:function(s,r,o){o._onInit=function(a){var l,c;if(hi(r)&&(l={},ms(r,function(u){return l[u]=1}),r=l),t){l={};for(c in r)l[c]=t(r[c]);r=l}QH(a,r)}}}},ys=Tg.registerPlugin({name:"attr",init:function(e,t,i,s,r){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],s,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Ui?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Wv("roundProps",Sx),Wv("modifiers"),Wv("snap",F2))||Tg;Bn.version=Zi.version=ys.version="3.12.5";T2=1;H1()&&eh();Ct.Power0;Ct.Power1;Ct.Power2;Ct.Power3;Ct.Power4;Ct.Linear;Ct.Quad;Ct.Cubic;Ct.Quart;Ct.Quint;Ct.Strong;Ct.Elastic;Ct.Back;Ct.SteppedEase;Ct.Bounce;Ct.Sine;Ct.Expo;Ct.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var RE,ya,Au,J1,Bl,PE,eT,JH=function(){return typeof window<"u"},Xo={},bl=180/Math.PI,Nu=Math.PI/180,Nc=Math.atan2,LE=1e8,tT=/([A-Z])/g,e6=/(left|right|width|margin|padding|x)/i,t6=/[\s,\(]\S/,Kr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},wx=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},n6=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},i6=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},s6=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},sL=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},rL=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},r6=function(e,t,i){return e.style[t]=i},o6=function(e,t,i){return e.style.setProperty(t,i)},a6=function(e,t,i){return e._gsap[t]=i},l6=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},c6=function(e,t,i,s,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},u6=function(e,t,i,s,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},wn="transform",vs=wn+"Origin",h6=function n(e,t){var i=this,s=this.target,r=s.style,o=s._gsap;if(e in Xo&&r){if(this.tfm=this.tfm||{},e!=="transform")e=Kr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Mo(s,a)}):this.tfm[e]=o.x?o[e]:Mo(s,e),e===vs&&(this.tfm.zOrigin=o.zOrigin);else return Kr.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(wn)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(vs,t,"")),e=wn}(r||t)&&this.props.push(e,t,r[e])},oL=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},d6=function(){var e=this.props,t=this.target,i=t.style,s=t._gsap,r,o;for(r=0;r<e.length;r+=3)e[r+1]?t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(tT,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=eT(),(!r||!r.isStart)&&!i[wn]&&(oL(i),s.zOrigin&&i[vs]&&(i[vs]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},aL=function(e,t){var i={target:e,props:[],revert:d6,save:h6};return e._gsap||ys.core.getCache(e),t&&t.split(",").forEach(function(s){return i.save(s)}),i},lL,Ex=function(e,t){var i=ya.createElementNS?ya.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ya.createElement(e);return i&&i.style?i:ya.createElement(e)},io=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(tT,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,th(t)||t,1)||""},IE="O,Moz,ms,Ms,Webkit".split(","),th=function(e,t,i){var s=t||Bl,r=s.style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(IE[o]+e in r););return o<0?null:(o===3?"ms":o>=0?IE[o]:"")+e},Ax=function(){JH()&&window.document&&(RE=window,ya=RE.document,Au=ya.documentElement,Bl=Ex("div")||{style:{}},Ex("div"),wn=th(wn),vs=wn+"Origin",Bl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",lL=!!th("perspective"),eT=ys.core.reverting,J1=1)},jv=function n(e){var t=Ex("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(Au.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Au.removeChild(t),this.style.cssText=r,o},DE=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},cL=function(e){var t;try{t=e.getBBox()}catch{t=jv.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===jv||(t=jv.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+DE(e,["x","cx","x1"])||0,y:+DE(e,["y","cy","y1"])||0,width:0,height:0}:t},uL=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&cL(e))},ac=function(e,t){if(t){var i=e.style,s;t in Xo&&t!==vs&&(t=wn),i.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(s==="--"?t:t.replace(tT,"-$1").toLowerCase())):i.removeAttribute(t)}},xa=function(e,t,i,s,r,o){var a=new gs(e._pt,t,i,0,1,o?rL:sL);return e._pt=a,a.b=s,a.e=r,e._props.push(i),a},OE={deg:1,rad:1,turn:1},f6={grid:1,flex:1},$a=function n(e,t,i,s){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=Bl.style,l=e6.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=s==="px",f=s==="%",g,m,v,p;if(s===o||!r||OE[s]||OE[o])return r;if(o!=="px"&&!d&&(r=n(e,t,i,"px")),p=e.getCTM&&uL(e),(f||o==="%")&&(Xo[t]||~t.indexOf("adius")))return g=p?e.getBBox()[l?"width":"height"]:e[u],Dn(f?r/g*h:r/100*g);if(a[l?"width":"height"]=h+(d?o:s),m=~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,p&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===ya||!m.appendChild)&&(m=ya.body),v=m._gsap,v&&f&&v.width&&l&&v.time===Cs.time&&!v.uncache)return Dn(r/v.width*h);if(f&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=h+s,g=e[u],y?e.style[t]=y:ac(e,t)}else(f||o==="%")&&!f6[io(m,"display")]&&(a.position=io(e,"position")),m===e&&(a.position="static"),m.appendChild(Bl),g=Bl[u],m.removeChild(Bl),a.position="absolute";return l&&f&&(v=ql(m),v.time=Cs.time,v.width=m[u]),Dn(d?g*r/h:g&&r?h/g*r:0)},Mo=function(e,t,i,s){var r;return J1||Ax(),t in Kr&&t!=="transform"&&(t=Kr[t],~t.indexOf(",")&&(t=t.split(",")[0])),Xo[t]&&t!=="transform"?(r=gf(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:wg(io(e,vs))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Mg[t]&&Mg[t](e,t,i)||io(e,t)||A2(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?$a(e,t,r,i)+i:r},p6=function(e,t,i,s){if(!i||i==="none"){var r=th(t,e,1),o=r&&io(e,r,1);o&&o!==i?(t=r,i=o):t==="borderColor"&&(i=io(e,"borderTopColor"))}var a=new gs(this._pt,e.style,t,0,1,tL),l=0,c=0,u,h,d,f,g,m,v,p,y,_,x,E;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(m=e.style[t],e.style[t]=s,s=io(e,t)||s,m?e.style[t]=m:ac(e,t)),u=[i,s],j2(u),i=u[0],s=u[1],d=i.match(hu)||[],E=s.match(hu)||[],E.length){for(;h=hu.exec(s);)v=h[0],y=s.substring(l,h.index),g?g=(g+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(g=1),v!==(m=d[c++]||"")&&(f=parseFloat(m)||0,x=m.substr((f+"").length),v.charAt(1)==="="&&(v=Eu(f,v)+x),p=parseFloat(v),_=v.substr((p+"").length),l=hu.lastIndex-_.length,_||(_=_||Os.units[t]||x,l===s.length&&(s+=_,a.e+=_)),x!==_&&(f=$a(e,t,m,_)||0),a._pt={_next:a._pt,p:y||c===1?y:",",s:f,c:p-f,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=t==="display"&&s==="none"?rL:sL;return x2.test(s)&&(a.e=0),this._pt=a,a},UE={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},m6=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(e=i,i=s,s=e),t[0]=UE[i]||i,t[1]=UE[s]||s,t.join(" ")},g6=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,s=i.style,r=t.u,o=i._gsap,a,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)a=r[c],Xo[a]&&(l=1,a=a==="transformOrigin"?vs:wn),ac(i,a);l&&(ac(i,wn),o&&(o.svg&&i.removeAttribute("transform"),gf(i,1),o.uncache=1,oL(s)))}},Mg={clearProps:function(e,t,i,s,r){if(r.data!=="isFromStart"){var o=e._pt=new gs(e._pt,t,i,0,0,g6);return o.u=s,o.pr=-10,o.tween=r,e._props.push(i),1}}},mf=[1,0,0,1,0,0],hL={},dL=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},FE=function(e){var t=io(e,wn);return dL(t)?mf:t.substr(7).match(y2).map(Dn)},nT=function(e,t){var i=e._gsap||ql(e),s=e.style,r=FE(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?mf:r):(r===mf&&!e.offsetParent&&e!==Au&&!i.svg&&(l=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Au.appendChild(e)),r=FE(e),l?s.display=l:ac(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Au.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Nx=function(e,t,i,s,r,o){var a=e._gsap,l=r||nT(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=l[0],g=l[1],m=l[2],v=l[3],p=l[4],y=l[5],_=t.split(" "),x=parseFloat(_[0])||0,E=parseFloat(_[1])||0,w,T,A,M;i?l!==mf&&(T=f*v-g*m)&&(A=x*(v/T)+E*(-m/T)+(m*y-v*p)/T,M=x*(-g/T)+E*(f/T)-(f*y-g*p)/T,x=A,E=M):(w=cL(e),x=w.x+(~_[0].indexOf("%")?x/100*w.width:x),E=w.y+(~(_[1]||_[0]).indexOf("%")?E/100*w.height:E)),s||s!==!1&&a.smooth?(p=x-c,y=E-u,a.xOffset=h+(p*f+y*m)-p,a.yOffset=d+(p*g+y*v)-y):a.xOffset=a.yOffset=0,a.xOrigin=x,a.yOrigin=E,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!i,e.style[vs]="0px 0px",o&&(xa(o,a,"xOrigin",c,x),xa(o,a,"yOrigin",u,E),xa(o,a,"xOffset",h,a.xOffset),xa(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",x+" "+E)},gf=function(e,t){var i=e._gsap||new Y2(e);if("x"in i&&!t&&!i.uncache)return i;var s=e.style,r=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=io(e,vs)||"0",u,h,d,f,g,m,v,p,y,_,x,E,w,T,A,M,S,P,F,H,ee,K,j,Z,D,ie,R,ce,Pe,ut,te,he;return u=h=d=m=v=p=y=_=x=0,f=g=1,i.svg=!!(e.getCTM&&uL(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[wn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[wn]!=="none"?l[wn]:"")),s.scale=s.rotate=s.translate="none"),T=nT(e,i.svg),i.svg&&(i.uncache?(D=e.getBBox(),c=i.xOrigin-D.x+"px "+(i.yOrigin-D.y)+"px",Z=""):Z=!t&&e.getAttribute("data-svg-origin"),Nx(e,Z||c,!!Z||i.originIsAbsolute,i.smooth!==!1,T)),E=i.xOrigin||0,w=i.yOrigin||0,T!==mf&&(P=T[0],F=T[1],H=T[2],ee=T[3],u=K=T[4],h=j=T[5],T.length===6?(f=Math.sqrt(P*P+F*F),g=Math.sqrt(ee*ee+H*H),m=P||F?Nc(F,P)*bl:0,y=H||ee?Nc(H,ee)*bl+m:0,y&&(g*=Math.abs(Math.cos(y*Nu))),i.svg&&(u-=E-(E*P+w*H),h-=w-(E*F+w*ee))):(he=T[6],ut=T[7],R=T[8],ce=T[9],Pe=T[10],te=T[11],u=T[12],h=T[13],d=T[14],A=Nc(he,Pe),v=A*bl,A&&(M=Math.cos(-A),S=Math.sin(-A),Z=K*M+R*S,D=j*M+ce*S,ie=he*M+Pe*S,R=K*-S+R*M,ce=j*-S+ce*M,Pe=he*-S+Pe*M,te=ut*-S+te*M,K=Z,j=D,he=ie),A=Nc(-H,Pe),p=A*bl,A&&(M=Math.cos(-A),S=Math.sin(-A),Z=P*M-R*S,D=F*M-ce*S,ie=H*M-Pe*S,te=ee*S+te*M,P=Z,F=D,H=ie),A=Nc(F,P),m=A*bl,A&&(M=Math.cos(A),S=Math.sin(A),Z=P*M+F*S,D=K*M+j*S,F=F*M-P*S,j=j*M-K*S,P=Z,K=D),v&&Math.abs(v)+Math.abs(m)>359.9&&(v=m=0,p=180-p),f=Dn(Math.sqrt(P*P+F*F+H*H)),g=Dn(Math.sqrt(j*j+he*he)),A=Nc(K,j),y=Math.abs(A)>2e-4?A*bl:0,x=te?1/(te<0?-te:te):0),i.svg&&(Z=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!dL(io(e,wn)),Z&&e.setAttribute("transform",Z))),Math.abs(y)>90&&Math.abs(y)<270&&(r?(f*=-1,y+=m<=0?180:-180,m+=m<=0?180:-180):(g*=-1,y+=y<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=Dn(f),i.scaleY=Dn(g),i.rotation=Dn(m)+a,i.rotationX=Dn(v)+a,i.rotationY=Dn(p)+a,i.skewX=y+a,i.skewY=_+a,i.transformPerspective=x+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(s[vs]=wg(c)),i.xOffset=i.yOffset=0,i.force3D=Os.force3D,i.renderTransform=i.svg?_6:lL?fL:v6,i.uncache=0,i},wg=function(e){return(e=e.split(" "))[0]+" "+e[1]},Xv=function(e,t,i){var s=Ii(t);return Dn(parseFloat(t)+parseFloat($a(e,"x",i+"px",s)))+s},v6=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,fL(e,t)},dl="0deg",Bh="0px",fl=") ",fL=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,d=i.skewX,f=i.skewY,g=i.scaleX,m=i.scaleY,v=i.transformPerspective,p=i.force3D,y=i.target,_=i.zOrigin,x="",E=p==="auto"&&e&&e!==1||p===!0;if(_&&(h!==dl||u!==dl)){var w=parseFloat(u)*Nu,T=Math.sin(w),A=Math.cos(w),M;w=parseFloat(h)*Nu,M=Math.cos(w),o=Xv(y,o,T*M*-_),a=Xv(y,a,-Math.sin(w)*-_),l=Xv(y,l,A*M*-_+_)}v!==Bh&&(x+="perspective("+v+fl),(s||r)&&(x+="translate("+s+"%, "+r+"%) "),(E||o!==Bh||a!==Bh||l!==Bh)&&(x+=l!==Bh||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+fl),c!==dl&&(x+="rotate("+c+fl),u!==dl&&(x+="rotateY("+u+fl),h!==dl&&(x+="rotateX("+h+fl),(d!==dl||f!==dl)&&(x+="skew("+d+", "+f+fl),(g!==1||m!==1)&&(x+="scale("+g+", "+m+fl),y.style[wn]=x||"translate(0, 0)"},_6=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,d=i.scaleY,f=i.target,g=i.xOrigin,m=i.yOrigin,v=i.xOffset,p=i.yOffset,y=i.forceCSS,_=parseFloat(o),x=parseFloat(a),E,w,T,A,M;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Nu,c*=Nu,E=Math.cos(l)*h,w=Math.sin(l)*h,T=Math.sin(l-c)*-d,A=Math.cos(l-c)*d,c&&(u*=Nu,M=Math.tan(c-u),M=Math.sqrt(1+M*M),T*=M,A*=M,u&&(M=Math.tan(u),M=Math.sqrt(1+M*M),E*=M,w*=M)),E=Dn(E),w=Dn(w),T=Dn(T),A=Dn(A)):(E=h,A=d,w=T=0),(_&&!~(o+"").indexOf("px")||x&&!~(a+"").indexOf("px"))&&(_=$a(f,"x",o,"px"),x=$a(f,"y",a,"px")),(g||m||v||p)&&(_=Dn(_+g-(g*E+m*T)+v),x=Dn(x+m-(g*w+m*A)+p)),(s||r)&&(M=f.getBBox(),_=Dn(_+s/100*M.width),x=Dn(x+r/100*M.height)),M="matrix("+E+","+w+","+T+","+A+","+_+","+x+")",f.setAttribute("transform",M),y&&(f.style[wn]=M)},y6=function(e,t,i,s,r){var o=360,a=hi(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?bl:1),c=l-s,u=s+c+"deg",h,d;return a&&(h=r.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*LE)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*LE)%o-~~(c/o)*o)),e._pt=d=new gs(e._pt,t,i,s,c,n6),d.e=u,d.u="deg",e._props.push(i),d},VE=function(e,t){for(var i in t)e[i]=t[i];return e},x6=function(e,t,i){var s=VE({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,d,f,g;s.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[wn]=t,a=gf(i,1),ac(i,wn),i.setAttribute("transform",c)):(c=getComputedStyle(i)[wn],o[wn]=t,a=gf(i,1),o[wn]=c);for(l in Xo)c=s[l],u=a[l],c!==u&&r.indexOf(l)<0&&(f=Ii(c),g=Ii(u),h=f!==g?$a(i,l,c,g):parseFloat(c),d=parseFloat(u),e._pt=new gs(e._pt,a,l,h,d-h,wx),e._pt.u=g||0,e._props.push(l));VE(a,s)};ms("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",o=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(a){return e<2?n+a:"border"+a+n});Mg[e>1?"border"+n:n]=function(a,l,c,u,h){var d,f;if(arguments.length<4)return d=o.map(function(g){return Mo(a,g,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(u+"").split(" "),f={},o.forEach(function(g,m){return f[g]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(l,f,h)}});var pL={name:"css",register:Ax,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var o=this._props,a=e.style,l=i.vars.startAt,c,u,h,d,f,g,m,v,p,y,_,x,E,w,T,A;J1||Ax(),this.styles=this.styles||aL(e),A=this.styles.props,this.tween=i;for(m in t)if(m!=="autoRound"&&(u=t[m],!(Ns[m]&&K2(m,t,i,s,e,r)))){if(f=typeof u,g=Mg[m],f==="function"&&(u=u.call(i,s,e,r),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=df(u)),g)g(this,e,m,u,i)&&(T=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",ka.lastIndex=0,ka.test(c)||(v=Ii(c),p=Ii(u)),p?v!==p&&(c=$a(e,m,c,p)+p):v&&(u+=v),this.add(a,"setProperty",c,u,s,r,0,0,m),o.push(m),A.push(m,0,a[m]);else if(f!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(i,s,e,r):l[m],hi(c)&&~c.indexOf("random(")&&(c=df(c)),Ii(c+"")||c==="auto"||(c+=Os.units[m]||Ii(Mo(e,m))||""),(c+"").charAt(1)==="="&&(c=Mo(e,m))):c=Mo(e,m),d=parseFloat(c),y=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),y&&(u=u.substr(2)),h=parseFloat(u),m in Kr&&(m==="autoAlpha"&&(d===1&&Mo(e,"visibility")==="hidden"&&h&&(d=0),A.push("visibility",0,a.visibility),xa(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),m!=="scale"&&m!=="transform"&&(m=Kr[m],~m.indexOf(",")&&(m=m.split(",")[0]))),_=m in Xo,_){if(this.styles.save(m),x||(E=e._gsap,E.renderTransform&&!t.parseTransform||gf(e,t.parseTransform),w=t.smoothOrigin!==!1&&E.smooth,x=this._pt=new gs(this._pt,a,wn,0,1,E.renderTransform,E,0,-1),x.dep=1),m==="scale")this._pt=new gs(this._pt,E,"scaleY",E.scaleY,(y?Eu(E.scaleY,y+h):h)-E.scaleY||0,wx),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){A.push(vs,0,a[vs]),u=m6(u),E.svg?Nx(e,u,0,w,0,this):(p=parseFloat(u.split(" ")[2])||0,p!==E.zOrigin&&xa(this,E,"zOrigin",E.zOrigin,p),xa(this,a,m,wg(c),wg(u)));continue}else if(m==="svgOrigin"){Nx(e,u,1,w,0,this);continue}else if(m in hL){y6(this,E,m,d,y?Eu(d,y+u):u);continue}else if(m==="smoothOrigin"){xa(this,E,"smooth",E.smooth,u);continue}else if(m==="force3D"){E[m]=u;continue}else if(m==="transform"){x6(this,u,e);continue}}else m in a||(m=th(m)||m);if(_||(h||h===0)&&(d||d===0)&&!t6.test(u)&&m in a)v=(c+"").substr((d+"").length),h||(h=0),p=Ii(u)||(m in Os.units?Os.units[m]:v),v!==p&&(d=$a(e,m,c,p)),this._pt=new gs(this._pt,_?E:a,m,d,(y?Eu(d,y+h):h)-d,!_&&(p==="px"||m==="zIndex")&&t.autoRound!==!1?s6:wx),this._pt.u=p||0,v!==p&&p!=="%"&&(this._pt.b=c,this._pt.r=i6);else if(m in a)p6.call(this,e,m,c,y?y+u:u);else if(m in e)this.add(e,m,c||e[m],y?y+u:u,s,r);else if(m!=="parseTransform"){W1(m,u);continue}_||(m in a?A.push(m,0,a[m]):A.push(m,1,c||e[m])),o.push(m)}}T&&nL(this)},render:function(e,t){if(t.tween._time||!eT())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Mo,aliases:Kr,getSetter:function(e,t,i){var s=Kr[t];return s&&s.indexOf(",")<0&&(t=s),t in Xo&&t!==vs&&(e._gsap.x||Mo(e,"x"))?i&&PE===i?t==="scale"?l6:a6:(PE=i||{})&&(t==="scale"?c6:u6):e.style&&!B1(e.style[t])?r6:~t.indexOf("-")?o6:Z1(e,t)},core:{_removeProperty:ac,_getMatrix:nT}};ys.utils.checkPrefix=th;ys.core.getStyleSaver=aL;(function(n,e,t,i){var s=ms(n+","+e+","+t,function(r){Xo[r]=1});ms(e,function(r){Os.units[r]="deg",hL[r]=1}),Kr[s[13]]=n+","+e,ms(i,function(r){var o=r.split(":");Kr[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ms("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Os.units[n]="px"});ys.registerPlugin(pL);var zt=ys.registerPlugin(pL)||ys;zt.core.Tween;/*!
 * @gsap/react 2.1.1
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let kE=typeof window<"u"?z.useLayoutEffect:z.useEffect,zE=n=>n&&!Array.isArray(n)&&typeof n=="object",xp=[],S6={},mL=zt;const Sc=(n,e=xp)=>{let t=S6;zE(n)?(t=n,n=null,e="dependencies"in t?t.dependencies:xp):zE(e)&&(t=e,e="dependencies"in t?t.dependencies:xp),n&&typeof n!="function"&&console.warn("First parameter must be a function or config object");const{scope:i,revertOnUpdate:s}=t,r=z.useRef(!1),o=z.useRef(mL.context(()=>{},i)),a=z.useRef(c=>o.current.add(null,c)),l=e&&e.length&&!s;return kE(()=>{if(n&&o.current.add(n,i),!l||!r.current)return()=>o.current.revert()},e),l&&kE(()=>(r.current=!0,()=>o.current.revert()),xp),{context:o.current,contextSafe:a.current}};Sc.register=n=>{mL=n};Sc.headless=!0;const T6=({text:n})=>{const e=z.useRef(null),{contextSafe:t}=Sc();return z.useEffect(()=>{const i=e.current,s=t(()=>{zt.fromTo(i,{width:"0%",left:"0%"},{width:"100%",ease:"power2.out",duration:.5})}),r=t(()=>{zt.fromTo(i,{width:"100%",left:"0%"},{width:"0%",left:"100%",ease:"power2.out"})}),o=i.parentElement;return o.addEventListener("mouseenter",s),o.addEventListener("mouseleave",r),()=>{o.removeEventListener("mouseenter",s),o.removeEventListener("mouseleave",r)}},[t]),b.jsxs("div",{className:"relative overflow-hidden",children:[b.jsx("h1",{children:n}),b.jsx("div",{ref:e,className:"w-0 h-[1px] bg-white absolute bottom-0"})]})},M6=()=>{const[n,e]=z.useState(!1),[t,i]=z.useState(null),s=z.useMemo(()=>[{title:"SPEAKERS",path:"/speakers",data:[{categoryTitle:"All Speakers",categoryDescription:"BEOSOUND A9",categoryImage:"https://static.dezeen.com/uploads/2020/03/layer-bang-olufsen-balance-speaker-design_dezeen_2364_col_12.jpg"},{categoryTitle:"Portable",categoryDescription:"BEOSOUND A1 2ND GEN",categoryImage:"https://cdn.mos.cms.futurecdn.net/XtTL8xyXXrSAiuSoTLnKFW.jpg"},{categoryTitle:"Home Audio",categoryDescription:"BEOSOUND BALANCE",categoryImage:"https://www.trustedreviews.com/wp-content/uploads/sites/54/2020/03/Beosound-Balance-2-920x609.jpg"},{categoryTitle:"Speaker Sets",categoryDescription:"BEOLAB 8",categoryImage:"https://bollostore.com/wp-content/uploads/2023/12/Untitled-design34.jpg"},{categoryTitle:"Speaker Accessories",categoryDescription:"BESOUND LEVEL WALL BRACKET",categoryImage:"https://www.mrporter.com/variants/images/1647597327922252/cu/w2000_q60.jpg"}]},{title:"HEADPHONES",path:"/headphones",data:[{categoryTitle:"All Headphones",categoryDescription:"BEOPLAY H9",categoryImage:"https://i.pinimg.com/564x/17/ba/5f/17ba5f8986966c9cfd870c2877c56ad5.jpg"},{categoryTitle:"Over-Ear",categoryDescription:"BEOPLAY H95",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/5NDF4JIjP9Au8CIPvh4tBh/aba17042a2c92e70057645616dc6f5d5/Beoplay-H95-_-Beoplay-A9-4th-Gen.-0004-Sound-And-Vision-For-Your-Home-2000x2800px.jpg?q=90&w=1920&fit=fill&fm=webp"},{categoryTitle:"In-Ear",categoryDescription:"BEOPLAY EX FERRARI EDITION",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/1ONawzyBPqAsQGm5bIPwaF/79100b4328ddb917a45f6dc1713e03a3/EX_Ferrari_HR.jpg?q=90&fm=webp&w=720"},{categoryTitle:"Headphone Accessories",categoryDescription:"CASE FOR BEOPLAY H95",categoryImage:"https://crewedesign.com/cdn/shop/files/CD.Bang.Rose.Top_1a0f8d99-b25b-4a84-a46a-5df5b649183b.jpg?v=1699586972"}]},{title:"TELEVISION",path:"/television",data:[{categoryTitle:"All Television",categoryDescription:"BEOVISION HARMONY",categoryImage:"https://i.pinimg.com/564x/5e/36/42/5e3642898d2ff8862d2de3b522407b5e.jpg"},{categoryTitle:"Remote and Smart Home",categoryDescription:"BEOREMOTE HALO",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/7INQPqApUxn1cBocan7ZT8/e48d5c03f7c64551cbf9000f6c70a0c2/PA_Halo_Alu_Table_front.jpg?q=90&fm=webp&w=720"}]},{title:"SOUNDBARS",path:"/soundbars",data:[{categoryTitle:"Stage Sounbars",categoryDescription:"BEOSOUND STAGE",categoryImage:"https://images.squarespace-cdn.com/content/v1/5b6799518f5130d3cc91dc22/1600401572844-V339S6NSVNNZH184P4U1/Stage_Bronze_GG2.jpg"},{categoryTitle:"Theatre Sounbars",categoryDescription:"BEOSOUND THEATRE",categoryImage:"https://i.pinimg.com/564x/94/07/38/9407381c4096d39fa3884a88d1f7a756.jpg"}]},{title:"WORLD OF B&O",path:"/worldb&o",data:[{categoryTitle:"Art",categoryDescription:"BEOPLAY A9",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/6wBf3l2vuB4ZFKymtDndFn/e82f77ed9c3e9e98b8b1e0823f73343f/A9_Portrait.jpg?q=90&fm=webp&w=480&h=718&fit=fill"},{categoryTitle:"Music",categoryDescription:"Intriducing a harmonius Fusion",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/3sJewp4W4vhZ7QHYBu1hmb/9770f0bde3b64d52b34076d979359319/Cercle_Hero.jpg?q=90&fm=webp&w=1440&h=808&fit=fill"},{categoryTitle:"Culture",categoryDescription:"At the mayfair flagship store",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/4nISV5C5VJVQ1fyH74PASL/46f7d6571e458cc94f7cca7b2b1b3459/Hero_outside.jpg?q=90&fm=webp&w=480&h=480&fit=fill"},{categoryTitle:"Living",categoryDescription:"Interview with Caroline wozniacki",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/6zTOILiuwRx5OxENVpZbAV/85ef99ddf16a60d3126d4f88834e0e3e/Couple_square.jpg?q=90&fm=webp&w=480&h=718&fit=fill"},{categoryTitle:"Timelessness",categoryDescription:"besound 9000",categoryImage:"https://images.ctfassets.net/8cd2csgvqd3m/4IUWP2Lz7R0ThsXwRLKbNl/0366a0d97c33572cf7e2b0d9199d6090/Lifestyle_Beosystem9000c_0015_16x9.jpg?q=90&fm=webp&w=480&h=718&fit=fill"}]}],[]),r=z.useCallback(o=>{i(o),e(!0)},[]);return b.jsxs("div",{className:"navcontainer max-2xl:px-5 w-full px-20 h-[8vh] text-white fixed flex justify-between items-center z-[99] top-0",children:[b.jsx(cg,{to:"/",className:"logo-container w-[10rem] overflow-hidden",children:b.jsx(k1,{})}),b.jsx("div",{className:`flex ${n?"opacity-5":"opacity-100"} text-sm items-center max-lg:hidden gap-[3vw]`,children:s.map((o,a)=>b.jsx("div",{className:"p-1 w-fit font-primary cursor-pointer",onClick:()=>r(o),children:b.jsx(T6,{text:o.title})},a))}),b.jsx("div",{className:"menu-button-container lg:hidden",children:b.jsx(sH,{onClick:()=>{e(o=>!o),i(s[0])},className:"text-xl"})}),b.jsx(rH,{setOpenNav:e,openNav:n,navLinkData:t,Navbardata:s,handleButtonClick:r})]})},Sh=({children:n})=>{const e=r=>({initial:"initial",animate:"enter",exit:"exit",variants:r}),t={initial:{opacity:0},enter:{opacity:1,transition:{duration:.2,ease:[.32,0,.67,0]}},exit:{opacity:1}},i={initial:{top:"100vh"},enter:{top:"100vh"},exit:{top:"0vh",transition:{duration:1.6,ease:[.76,0,.24,0]}}},s={initial:{y:0,scale:1,opacity:1},enter:{y:0,scale:1,opacity:1},exit:{y:-100,scaleX:.85,transition:{duration:1.8,ease:[.76,0,.24,0]},opacity:.5}};return b.jsxs("div",{className:"inner bg-black",children:[b.jsx(Fa.div,{...e(i),className:"slide fixed top-0 z-[9999] bg-white left-0 h-screen w-screen"}),b.jsx(Fa.div,{className:"page",...e(s),children:b.jsx(Fa.div,{...e(t),children:n})})]})};class w6{constructor(e){return this.result=new Object,this.result.originalText=e.innerText,this.result.splitted=this.split(e),this.result.words=this.result.splitted.querySelectorAll(".SplitTextJS-wrapper"),this.result.chars=this.result.splitted.querySelectorAll(".SplitTextJS-char"),this.result.spaces=this.result.splitted.querySelectorAll(".SplitTextJS-spacer"),this.result}createSpan(e){let t=document.createElement("span");return t.style.display="inline-block",t.className=e,t}split(e){let t=new Array;const i=e.innerText.split(" ");let s=i.length;return i.map(r=>{const o=this.createSpan("SplitTextJS-wrapper");if(r.split(/(?!^)/).map(a=>{let l=this.createSpan("SplitTextJS-char");l.innerText=a,o.appendChild(l)}),s--,t.push(o),s>0){let a=this.createSpan("SplitTextJS-char SplitTextJS-spacer");a.innerHTML="&nbsp;",t.push(a)}}),e.innerHTML="",t.forEach(r=>{e.appendChild(r)}),e}}var E6=w6;const Cx=yC(E6),vf=({text:n,customclassName:e})=>{const{contextSafe:t}=Sc(),i=z.useRef(),s=z.useRef(),r=z.useRef(),o=z.useRef();z.useEffect(()=>{i.current&&s.current&&(r.current=new Cx(i.current),o.current=new Cx(s.current))},[]);const a=(u,h,d)=>{zt.to(u,{y:h,duration:d})},l=t(()=>{r.current&&o.current&&(a(r.current.chars,"-100%",.3),a(o.current.chars,"-100%",.3))}),c=t(()=>{r.current&&o.current&&(a(r.current.chars,"0%",.3),a(o.current.chars,"0%",.3))});return b.jsxs("div",{onMouseEnter:l,onMouseLeave:c,className:"h-[2.1rem] text-[1rem] relative bg-white  px-5  mt-5 font-primary leading-[2rem] overflow-hidden w-fit max-lg:text-[.7rem] uppercase ",children:[b.jsx("h1",{ref:i,className:`${e}`,children:n}),b.jsx("h1",{ref:s,className:`${e}`,children:n})]})};function BE(n){return yc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6v2h8.59L5 17.59 6.41 19 16 9.41V18h2V6z"},child:[]}]})(n)}const nh=us.memo(({text:n})=>{const{contextSafe:e}=Sc(),t=z.useRef(null),i=z.useRef(null),s=z.useRef(null);return z.useEffect(()=>{const r=e(()=>{zt.to(t.current,{y:"-100%"}),zt.to(i.current,{y:"-100%"}),zt.fromTo(s.current,{width:"0%",left:"0%"},{width:"100%",ease:"power2.out",duration:.7})}),o=e(()=>{zt.to(t.current,{y:"0%"}),zt.to(i.current,{y:"0%"}),zt.fromTo(s.current,{width:"100%",left:"0%"},{width:"0%",left:"100%",ease:"power2.out"})}),a=s.current.parentElement;return a.addEventListener("mouseenter",r),a.addEventListener("mouseleave",o),()=>{a.removeEventListener("mouseenter",r),a.removeEventListener("mouseleave",o)}},[e]),b.jsxs("div",{className:"button relative overflow-hidden",children:[b.jsxs("div",{className:"h-[1.5rem] text-[1rem] max-sm:text-[.9rem] overflow-hidden",children:[b.jsxs("h1",{ref:t,className:"flex items-center gap-2 max-sm:gap-1",children:[n||"Shop Now "," ",b.jsx(BE,{})]}),b.jsxs("h1",{ref:i,className:"flex items-center gap-2 max-sm:gap-1",children:[n||"Shop Now "," ",b.jsx(BE,{})]})]}),b.jsx("div",{ref:s,className:"absolute bottom-0 left-0 h-[1px] w-[0] bg-white"})]})}),A6=[{type:"Email",value:"bangandolufsen.com"},{type:"Phone",value:"+852 800 906672"}],N6=[{name:"youtube",url:"https://youtube.com"},{name:"twitter",url:"https://twitter.com"},{name:"facebook",url:"https://facebook.com"},{name:"instagram",url:"https://instagram.com"},{name:"pinterest",url:"https://pinterest.com"}],C6=["Speakers","Headphones","Television","World of B&O"],A0=()=>b.jsxs("div",{children:[b.jsxs("div",{className:"footer-main w-full h-[40vh] flex flex-col gap-3 items-center justify-center bg-gray-800",children:[b.jsx("h3",{className:"text-sm font-primary text-white",children:"EXPLORE THE HOUSE OF BANG & OLUFSEN"}),b.jsxs("h2",{className:"font-Secondary text-5xl py-3 text-center text-white",children:["Join our global community for exclusive ",b.jsx("br",{})," benefits and news about"]}),b.jsx(vf,{text:"Join us"})]}),b.jsx("div",{className:"relative h-[80vh] max-md:h-[38vh] bg-black ",style:{clipPath:"polygon(0% 0, 100% 0%, 100% 100%, 0 100%)"},children:b.jsxs("div",{className:"fixed bottom-0 w-full text-black max-md:pb-3 px-6",children:[b.jsx(k1,{}),b.jsxs("div",{className:"container mx-auto  py-12 flex flex-wrap justify-between",children:[b.jsxs("div",{className:"first-col  w-full md:w-[40%] mb-6 md:mb-0   ",children:[b.jsx("h1",{className:"text-5xl font-[500] md:mb-5 text-white",children:"We would love to hear from you."}),b.jsx("p",{className:"text-gray-500 md:mb-6 ",children:"Feel free to reach out if you want to collaborate with us, or simply have a chat."}),b.jsx("button",{className:"bg-white  text-black px-6 py-2 rounded-full md:mb-6 ",children:"Become a Client →"}),b.jsx("p",{className:"text-gray-500 md:mb-3 ",children:"Don't like the forms? Drop us a line via email."}),b.jsx("a",{className:" font-bold text-white ",href:"#",children:"bangandolufsen.com"})]}),b.jsxs("div",{className:"right w-[60%] h-full flex flex-wrap justify-between pl-16",children:[b.jsxs("div",{className:"contact w-full md:w-1/4 mb-6 md:mb-0",children:[b.jsx("h3",{className:"text-xl text-white font-semibold mb-4",children:"Contact us"}),b.jsx("ul",{className:"text-gray-500",children:A6.map((n,e)=>b.jsx("li",{className:"mb-2 inline-block",children:n.type==="Email"?b.jsx("a",{href:`mailto:${n.value}`,className:"",children:b.jsx(nh,{text:n.value})}):b.jsx("a",{href:`tel:${n.value}`,className:"hover:underline",children:b.jsx(nh,{text:n.value})})},e))})]}),b.jsxs("div",{className:"follow w-full md:w-1/4 mb-6 md:mb-0",children:[b.jsx("h3",{className:"text-xl text-white  font-semibold mb-4",children:"Follow us"}),b.jsx("ul",{className:"text-gray-500",children:N6.map((n,e)=>b.jsx("li",{className:"mb-2",children:b.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:n.name})},e))})]}),b.jsxs("div",{className:"services  w-full md:w-1/4 mb-6 md:mb-0",children:[b.jsx("h3",{className:"text-xl text-white  font-semibold mb-4",children:"Services"}),b.jsx("ul",{className:"text-gray-500",children:C6.map((n,e)=>b.jsx("li",{className:"mb-2",children:n},e))})]})]})]}),b.jsxs("div",{className:"flex justify-between items-center py-12 ",children:[b.jsxs("p",{className:"text-gray-500 tracking-wide",children:["© Awsmd 2024. All rights reserved.",b.jsx("a",{href:"/privacy-policy",className:"hover:underline pl-2",children:"• Privacy Policy"})]}),b.jsx("a",{href:"#top",className:"ml-4 text-gray-600 hover:underline",children:"Back to the top ↑"})]})]})})]});function b6(n){return yc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 96h16v320h-16zm144 0h16v320h-16z"},child:[]}]})(n)}function R6(n){return yc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 104.3v303.4c0 6.4 6.5 10.4 11.7 7.2l240.5-151.7c5.1-3.2 5.1-11.1 0-14.3L139.7 97.2c-5.2-3.3-11.7.7-11.7 7.1z"},child:[]}]})(n)}function P6(n){return yc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.88889 16H2C1.44772 16 1 15.5523 1 15V9.00001C1 8.44772 1.44772 8.00001 2 8.00001H5.88889L11.1834 3.66815C11.3971 3.49329 11.7121 3.52479 11.887 3.73851C11.9601 3.82784 12 3.93971 12 4.05513V19.9449C12 20.221 11.7761 20.4449 11.5 20.4449C11.3846 20.4449 11.2727 20.405 11.1834 20.3319L5.88889 16ZM20.4142 12L23.9497 15.5355L22.5355 16.9498L19 13.4142L15.4645 16.9498L14.0503 15.5355L17.5858 12L14.0503 8.46447L15.4645 7.05026L19 10.5858L22.5355 7.05026L23.9497 8.46447L20.4142 12Z"},child:[]}]})(n)}function L6(n){return yc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.553 3.064A.75.75 0 0 1 12 3.75v16.5a.75.75 0 0 1-1.255.555L5.46 16H2.75A1.75 1.75 0 0 1 1 14.25v-4.5C1 8.784 1.784 8 2.75 8h2.71l5.285-4.805a.752.752 0 0 1 .808-.13ZM10.5 5.445l-4.245 3.86a.748.748 0 0 1-.505.195h-3a.25.25 0 0 0-.25.25v4.5c0 .138.112.25.25.25h3c.187 0 .367.069.505.195l4.245 3.86Zm8.218-1.223a.75.75 0 0 1 1.06 0c4.296 4.296 4.296 11.26 0 15.556a.75.75 0 0 1-1.06-1.06 9.5 9.5 0 0 0 0-13.436.75.75 0 0 1 0-1.06Z"},child:[]},{tag:"path",attr:{d:"M16.243 7.757a.75.75 0 1 0-1.061 1.061 4.5 4.5 0 0 1 0 6.364.75.75 0 0 0 1.06 1.06 6 6 0 0 0 0-8.485Z"},child:[]}]})(n)}function I6(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function D6(n,e,t){return e&&I6(n.prototype,e),n}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var mi,Am,bs,Sa,Ta,Cu,gL,Rl,bd,vL,Ro,gr,_L,yL=function(){return mi||typeof window<"u"&&(mi=window.gsap)&&mi.registerPlugin&&mi},xL=1,fu=[],Mt=[],so=[],Rd=Date.now,bx=function(e,t){return t},O6=function(){var e=bd.core,t=e.bridge||{},i=e._scrollers,s=e._proxies;i.push.apply(i,Mt),s.push.apply(s,so),Mt=i,so=s,bx=function(o,a){return t[o](a)}},za=function(e,t){return~so.indexOf(e)&&so[so.indexOf(e)+1][t]},Pd=function(e){return!!~vL.indexOf(e)},Wi=function(e,t,i,s,r){return e.addEventListener(t,i,{passive:s!==!1,capture:!!r})},Hi=function(e,t,i,s){return e.removeEventListener(t,i,!!s)},Sp="scrollLeft",Tp="scrollTop",Rx=function(){return Ro&&Ro.isPressed||Mt.cache++},Eg=function(e,t){var i=function s(r){if(r||r===0){xL&&(bs.history.scrollRestoration="manual");var o=Ro&&Ro.isPressed;r=s.v=Math.round(r)||(Ro&&Ro.iOS?1:0),e(r),s.cacheID=Mt.cache,o&&bx("ss",r)}else(t||Mt.cache!==s.cacheID||bx("ref"))&&(s.cacheID=Mt.cache,s.v=e());return s.v+s.offset};return i.offset=0,e&&i},Qi={s:Sp,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Eg(function(n){return arguments.length?bs.scrollTo(n,qn.sc()):bs.pageXOffset||Sa[Sp]||Ta[Sp]||Cu[Sp]||0})},qn={s:Tp,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Qi,sc:Eg(function(n){return arguments.length?bs.scrollTo(Qi.sc(),n):bs.pageYOffset||Sa[Tp]||Ta[Tp]||Cu[Tp]||0})},ss=function(e,t){return(t&&t._ctx&&t._ctx.selector||mi.utils.toArray)(e)[0]||(typeof e=="string"&&mi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},qa=function(e,t){var i=t.s,s=t.sc;Pd(e)&&(e=Sa.scrollingElement||Ta);var r=Mt.indexOf(e),o=s===qn.sc?1:2;!~r&&(r=Mt.push(e)-1),Mt[r+o]||Wi(e,"scroll",Rx);var a=Mt[r+o],l=a||(Mt[r+o]=Eg(za(e,i),!0)||(Pd(e)?s:Eg(function(c){return arguments.length?e[i]=c:e[i]})));return l.target=e,a||(l.smooth=mi.getProperty(e,"scrollBehavior")==="smooth"),l},Px=function(e,t,i){var s=e,r=e,o=Rd(),a=o,l=t||50,c=Math.max(500,l*3),u=function(g,m){var v=Rd();m||v-o>l?(r=s,s=g,a=o,o=v):i?s+=g:s=r+(g-r)/(v-a)*(o-a)},h=function(){r=s=i?0:s,a=o=0},d=function(g){var m=a,v=r,p=Rd();return(g||g===0)&&g!==s&&u(g),o===a||p-a>c?0:(s+(i?v:-v))/((i?p:o)-m)*1e3};return{update:u,reset:h,getVelocity:d}},Hh=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},HE=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},SL=function(){bd=mi.core.globals().ScrollTrigger,bd&&bd.core&&O6()},TL=function(e){return mi=e||yL(),!Am&&mi&&typeof document<"u"&&document.body&&(bs=window,Sa=document,Ta=Sa.documentElement,Cu=Sa.body,vL=[bs,Sa,Ta,Cu],mi.utils.clamp,_L=mi.core.context||function(){},Rl="onpointerenter"in Cu?"pointer":"mouse",gL=Fn.isTouch=bs.matchMedia&&bs.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in bs||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,gr=Fn.eventTypes=("ontouchstart"in Ta?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Ta?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return xL=0},500),SL(),Am=1),Am};Qi.op=qn;Mt.cache=0;var Fn=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){Am||TL(mi)||console.warn("Please gsap.registerPlugin(Observer)"),bd||SL();var s=i.tolerance,r=i.dragMinimum,o=i.type,a=i.target,l=i.lineHeight,c=i.debounce,u=i.preventDefault,h=i.onStop,d=i.onStopDelay,f=i.ignore,g=i.wheelSpeed,m=i.event,v=i.onDragStart,p=i.onDragEnd,y=i.onDrag,_=i.onPress,x=i.onRelease,E=i.onRight,w=i.onLeft,T=i.onUp,A=i.onDown,M=i.onChangeX,S=i.onChangeY,P=i.onChange,F=i.onToggleX,H=i.onToggleY,ee=i.onHover,K=i.onHoverEnd,j=i.onMove,Z=i.ignoreCheck,D=i.isNormalizer,ie=i.onGestureStart,R=i.onGestureEnd,ce=i.onWheel,Pe=i.onEnable,ut=i.onDisable,te=i.onClick,he=i.scrollSpeed,Te=i.capture,ge=i.allowClicks,Qe=i.lockAxis,qe=i.onLockAxis;this.target=a=ss(a)||Ta,this.vars=i,f&&(f=mi.utils.toArray(f)),s=s||1e-9,r=r||0,g=g||1,he=he||1,o=o||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(bs.getComputedStyle(Cu).lineHeight)||22);var pt,U,ot,Le,ht,ke,at,q=this,Ke=0,Ft=0,I=i.passive||!u,N=qa(a,Qi),ne=qa(a,qn),de=N(),me=ne(),le=~o.indexOf("touch")&&!~o.indexOf("pointer")&&gr[0]==="pointerdown",Ge=Pd(a),ve=a.ownerDocument||Sa,we=[0,0,0],et=[0,0,0],_e=0,Be=function(){return _e=Rd()},Xe=function(We,xt){return(q.event=We)&&f&&~f.indexOf(We.target)||xt&&le&&We.pointerType!=="touch"||Z&&Z(We,xt)},nt=function(){q._vx.reset(),q._vy.reset(),U.pause(),h&&h(q)},Ee=function(){var We=q.deltaX=HE(we),xt=q.deltaY=HE(et),Ce=Math.abs(We)>=s,dt=Math.abs(xt)>=s;P&&(Ce||dt)&&P(q,We,xt,we,et),Ce&&(E&&q.deltaX>0&&E(q),w&&q.deltaX<0&&w(q),M&&M(q),F&&q.deltaX<0!=Ke<0&&F(q),Ke=q.deltaX,we[0]=we[1]=we[2]=0),dt&&(A&&q.deltaY>0&&A(q),T&&q.deltaY<0&&T(q),S&&S(q),H&&q.deltaY<0!=Ft<0&&H(q),Ft=q.deltaY,et[0]=et[1]=et[2]=0),(Le||ot)&&(j&&j(q),ot&&(y(q),ot=!1),Le=!1),ke&&!(ke=!1)&&qe&&qe(q),ht&&(ce(q),ht=!1),pt=0},lt=function(We,xt,Ce){we[Ce]+=We,et[Ce]+=xt,q._vx.update(We),q._vy.update(xt),c?pt||(pt=requestAnimationFrame(Ee)):Ee()},mt=function(We,xt){Qe&&!at&&(q.axis=at=Math.abs(We)>Math.abs(xt)?"x":"y",ke=!0),at!=="y"&&(we[2]+=We,q._vx.update(We,!0)),at!=="x"&&(et[2]+=xt,q._vy.update(xt,!0)),c?pt||(pt=requestAnimationFrame(Ee)):Ee()},Vt=function(We){if(!Xe(We,1)){We=Hh(We,u);var xt=We.clientX,Ce=We.clientY,dt=xt-q.x,Ze=Ce-q.y,rt=q.isDragging;q.x=xt,q.y=Ce,(rt||Math.abs(q.startX-xt)>=r||Math.abs(q.startY-Ce)>=r)&&(y&&(ot=!0),rt||(q.isDragging=!0),mt(dt,Ze),rt||v&&v(q))}},V=q.onPress=function(Je){Xe(Je,1)||Je&&Je.button||(q.axis=at=null,U.pause(),q.isPressed=!0,Je=Hh(Je),Ke=Ft=0,q.startX=q.x=Je.clientX,q.startY=q.y=Je.clientY,q._vx.reset(),q._vy.reset(),Wi(D?a:ve,gr[1],Vt,I,!0),q.deltaX=q.deltaY=0,_&&_(q))},fe=q.onRelease=function(Je){if(!Xe(Je,1)){Hi(D?a:ve,gr[1],Vt,!0);var We=!isNaN(q.y-q.startY),xt=q.isDragging,Ce=xt&&(Math.abs(q.x-q.startX)>3||Math.abs(q.y-q.startY)>3),dt=Hh(Je);!Ce&&We&&(q._vx.reset(),q._vy.reset(),u&&ge&&mi.delayedCall(.08,function(){if(Rd()-_e>300&&!Je.defaultPrevented){if(Je.target.click)Je.target.click();else if(ve.createEvent){var Ze=ve.createEvent("MouseEvents");Ze.initMouseEvent("click",!0,!0,bs,1,dt.screenX,dt.screenY,dt.clientX,dt.clientY,!1,!1,!1,!1,0,null),Je.target.dispatchEvent(Ze)}}})),q.isDragging=q.isGesturing=q.isPressed=!1,h&&xt&&!D&&U.restart(!0),p&&xt&&p(q),x&&x(q,Ce)}},oe=function(We){return We.touches&&We.touches.length>1&&(q.isGesturing=!0)&&ie(We,q.isDragging)},ae=function(){return(q.isGesturing=!1)||R(q)},ye=function(We){if(!Xe(We)){var xt=N(),Ce=ne();lt((xt-de)*he,(Ce-me)*he,1),de=xt,me=Ce,h&&U.restart(!0)}},$e=function(We){if(!Xe(We)){We=Hh(We,u),ce&&(ht=!0);var xt=(We.deltaMode===1?l:We.deltaMode===2?bs.innerHeight:1)*g;lt(We.deltaX*xt,We.deltaY*xt,0),h&&!D&&U.restart(!0)}},yt=function(We){if(!Xe(We)){var xt=We.clientX,Ce=We.clientY,dt=xt-q.x,Ze=Ce-q.y;q.x=xt,q.y=Ce,Le=!0,h&&U.restart(!0),(dt||Ze)&&mt(dt,Ze)}},Xt=function(We){q.event=We,ee(q)},$t=function(We){q.event=We,K(q)},bt=function(We){return Xe(We)||Hh(We,u)&&te(q)};U=q._dc=mi.delayedCall(d||.25,nt).pause(),q.deltaX=q.deltaY=0,q._vx=Px(0,50,!0),q._vy=Px(0,50,!0),q.scrollX=N,q.scrollY=ne,q.isDragging=q.isGesturing=q.isPressed=!1,_L(this),q.enable=function(Je){return q.isEnabled||(Wi(Ge?ve:a,"scroll",Rx),o.indexOf("scroll")>=0&&Wi(Ge?ve:a,"scroll",ye,I,Te),o.indexOf("wheel")>=0&&Wi(a,"wheel",$e,I,Te),(o.indexOf("touch")>=0&&gL||o.indexOf("pointer")>=0)&&(Wi(a,gr[0],V,I,Te),Wi(ve,gr[2],fe),Wi(ve,gr[3],fe),ge&&Wi(a,"click",Be,!0,!0),te&&Wi(a,"click",bt),ie&&Wi(ve,"gesturestart",oe),R&&Wi(ve,"gestureend",ae),ee&&Wi(a,Rl+"enter",Xt),K&&Wi(a,Rl+"leave",$t),j&&Wi(a,Rl+"move",yt)),q.isEnabled=!0,Je&&Je.type&&V(Je),Pe&&Pe(q)),q},q.disable=function(){q.isEnabled&&(fu.filter(function(Je){return Je!==q&&Pd(Je.target)}).length||Hi(Ge?ve:a,"scroll",Rx),q.isPressed&&(q._vx.reset(),q._vy.reset(),Hi(D?a:ve,gr[1],Vt,!0)),Hi(Ge?ve:a,"scroll",ye,Te),Hi(a,"wheel",$e,Te),Hi(a,gr[0],V,Te),Hi(ve,gr[2],fe),Hi(ve,gr[3],fe),Hi(a,"click",Be,!0),Hi(a,"click",bt),Hi(ve,"gesturestart",oe),Hi(ve,"gestureend",ae),Hi(a,Rl+"enter",Xt),Hi(a,Rl+"leave",$t),Hi(a,Rl+"move",yt),q.isEnabled=q.isPressed=q.isDragging=!1,ut&&ut(q))},q.kill=q.revert=function(){q.disable();var Je=fu.indexOf(q);Je>=0&&fu.splice(Je,1),Ro===q&&(Ro=0)},fu.push(q),D&&Pd(a)&&(Ro=q),q.enable(m)},D6(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Fn.version="3.12.5";Fn.create=function(n){return new Fn(n)};Fn.register=TL;Fn.getAll=function(){return fu.slice()};Fn.getById=function(n){return fu.filter(function(e){return e.vars.id===n})[0]};yL()&&mi.registerPlugin(Fn);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Oe,$c,At,_n,Tr,ln,ML,Ag,_f,Ld,rd,Mp,Ci,N0,Lx,Yi,GE,WE,qc,wL,$v,EL,$i,Ix,AL,NL,oa,Dx,iT,bu,sT,Ng,Ox,qv,wp=1,Ri=Date.now,Yv=Ri(),rr=0,od=0,jE=function(e,t,i){var s=As(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=s,s?e.substr(6,e.length-7):e},XE=function(e,t){return t&&(!As(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},U6=function n(){return od&&requestAnimationFrame(n)},$E=function(){return N0=1},qE=function(){return N0=0},Hr=function(e){return e},ad=function(e){return Math.round(e*1e5)/1e5||0},CL=function(){return typeof window<"u"},bL=function(){return Oe||CL()&&(Oe=window.gsap)&&Oe.registerPlugin&&Oe},lc=function(e){return!!~ML.indexOf(e)},RL=function(e){return(e==="Height"?sT:At["inner"+e])||Tr["client"+e]||ln["client"+e]},PL=function(e){return za(e,"getBoundingClientRect")||(lc(e)?function(){return Pm.width=At.innerWidth,Pm.height=sT,Pm}:function(){return Eo(e)})},F6=function(e,t,i){var s=i.d,r=i.d2,o=i.a;return(o=za(e,"getBoundingClientRect"))?function(){return o()[s]}:function(){return(t?RL(r):e["client"+r])||0}},V6=function(e,t){return!t||~so.indexOf(e)?PL(e):function(){return Pm}},Zr=function(e,t){var i=t.s,s=t.d2,r=t.d,o=t.a;return Math.max(0,(i="scroll"+s)&&(o=za(e,i))?o()-PL(e)()[r]:lc(e)?(Tr[i]||ln[i])-RL(s):e[i]-e["offset"+s])},Ep=function(e,t){for(var i=0;i<qc.length;i+=3)(!t||~t.indexOf(qc[i+1]))&&e(qc[i],qc[i+1],qc[i+2])},As=function(e){return typeof e=="string"},Ji=function(e){return typeof e=="function"},ld=function(e){return typeof e=="number"},Pl=function(e){return typeof e=="object"},Gh=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},Kv=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Cc=Math.abs,LL="left",IL="top",rT="right",oT="bottom",Ql="width",Jl="height",Id="Right",Dd="Left",Od="Top",Ud="Bottom",zn="padding",Js="margin",ih="Width",aT="Height",Xn="px",er=function(e){return At.getComputedStyle(e)},k6=function(e){var t=er(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},YE=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Eo=function(e,t){var i=t&&er(e)[Lx]!=="matrix(1, 0, 0, 1, 0, 0)"&&Oe.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),s=e.getBoundingClientRect();return i&&i.progress(0).kill(),s},Cg=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},DL=function(e){var t=[],i=e.labels,s=e.duration(),r;for(r in i)t.push(i[r]/s);return t},z6=function(e){return function(t){return Oe.utils.snap(DL(e),t)}},lT=function(e){var t=Oe.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(s,r){return s-r});return i?function(s,r,o){o===void 0&&(o=.001);var a;if(!r)return t(s);if(r>0){for(s-=o,a=0;a<i.length;a++)if(i[a]>=s)return i[a];return i[a-1]}else for(a=i.length,s+=o;a--;)if(i[a]<=s)return i[a];return i[0]}:function(s,r,o){o===void 0&&(o=.001);var a=t(s);return!r||Math.abs(a-s)<o||a-s<0==r<0?a:t(r<0?s-e:s+e)}},B6=function(e){return function(t,i){return lT(DL(e))(t,i.direction)}},Ap=function(e,t,i,s){return i.split(",").forEach(function(r){return e(t,r,s)})},si=function(e,t,i,s,r){return e.addEventListener(t,i,{passive:!s,capture:!!r})},ii=function(e,t,i,s){return e.removeEventListener(t,i,!!s)},Np=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},KE={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Cp={toggleActions:"play",anticipatePin:0},bg={top:0,left:0,center:.5,bottom:1,right:1},Nm=function(e,t){if(As(e)){var i=e.indexOf("="),s=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(s*=t/100),e=e.substr(0,i-1)),e=s+(e in bg?bg[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},bp=function(e,t,i,s,r,o,a,l){var c=r.startColor,u=r.endColor,h=r.fontSize,d=r.indent,f=r.fontWeight,g=_n.createElement("div"),m=lc(i)||za(i,"pinType")==="fixed",v=e.indexOf("scroller")!==-1,p=m?ln:i,y=e.indexOf("start")!==-1,_=y?c:u,x="border-color:"+_+";font-size:"+h+";color:"+_+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return x+="position:"+((v||l)&&m?"fixed;":"absolute;"),(v||l||!m)&&(x+=(s===qn?rT:oT)+":"+(o+parseFloat(d))+"px;"),a&&(x+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),g._isStart=y,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=x,g.innerText=t||t===0?e+"-"+t:e,p.children[0]?p.insertBefore(g,p.children[0]):p.appendChild(g),g._offset=g["offset"+s.op.d2],Cm(g,0,s,y),g},Cm=function(e,t,i,s){var r={display:"block"},o=i[s?"os2":"p2"],a=i[s?"p2":"os2"];e._isFlipped=s,r[i.a+"Percent"]=s?-100:0,r[i.a]=s?"1px":0,r["border"+o+ih]=1,r["border"+a+ih]=0,r[i.p]=t+"px",Oe.set(e,r)},Tt=[],Ux={},yf,ZE=function(){return Ri()-rr>34&&(yf||(yf=requestAnimationFrame(Fo)))},bc=function(){(!$i||!$i.isPressed||$i.startX>ln.clientWidth)&&(Mt.cache++,$i?yf||(yf=requestAnimationFrame(Fo)):Fo(),rr||uc("scrollStart"),rr=Ri())},Zv=function(){NL=At.innerWidth,AL=At.innerHeight},cd=function(){Mt.cache++,!Ci&&!EL&&!_n.fullscreenElement&&!_n.webkitFullscreenElement&&(!Ix||NL!==At.innerWidth||Math.abs(At.innerHeight-AL)>At.innerHeight*.25)&&Ag.restart(!0)},cc={},H6=[],OL=function n(){return ii(ft,"scrollEnd",n)||Hl(!0)},uc=function(e){return cc[e]&&cc[e].map(function(t){return t()})||H6},ws=[],UL=function(e){for(var t=0;t<ws.length;t+=5)(!e||ws[t+4]&&ws[t+4].query===e)&&(ws[t].style.cssText=ws[t+1],ws[t].getBBox&&ws[t].setAttribute("transform",ws[t+2]||""),ws[t+3].uncache=1)},cT=function(e,t){var i;for(Yi=0;Yi<Tt.length;Yi++)i=Tt[Yi],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));Ng=!0,t&&UL(t),t||uc("revert")},FL=function(e,t){Mt.cache++,(t||!Ki)&&Mt.forEach(function(i){return Ji(i)&&i.cacheID++&&(i.rec=0)}),As(e)&&(At.history.scrollRestoration=iT=e)},Ki,ec=0,QE,G6=function(){if(QE!==ec){var e=QE=ec;requestAnimationFrame(function(){return e===ec&&Hl(!0)})}},VL=function(){ln.appendChild(bu),sT=!$i&&bu.offsetHeight||At.innerHeight,ln.removeChild(bu)},JE=function(e){return _f(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Hl=function(e,t){if(rr&&!e&&!Ng){si(ft,"scrollEnd",OL);return}VL(),Ki=ft.isRefreshing=!0,Mt.forEach(function(s){return Ji(s)&&++s.cacheID&&(s.rec=s())});var i=uc("refreshInit");wL&&ft.sort(),t||cT(),Mt.forEach(function(s){Ji(s)&&(s.smooth&&(s.target.style.scrollBehavior="auto"),s(0))}),Tt.slice(0).forEach(function(s){return s.refresh()}),Ng=!1,Tt.forEach(function(s){if(s._subPinOffset&&s.pin){var r=s.vars.horizontal?"offsetWidth":"offsetHeight",o=s.pin[r];s.revert(!0,1),s.adjustPinSpacing(s.pin[r]-o),s.refresh()}}),Ox=1,JE(!0),Tt.forEach(function(s){var r=Zr(s.scroller,s._dir),o=s.vars.end==="max"||s._endClamp&&s.end>r,a=s._startClamp&&s.start>=r;(o||a)&&s.setPositions(a?r-1:s.start,o?Math.max(a?r:s.start+1,r):s.end,!0)}),JE(!1),Ox=0,i.forEach(function(s){return s&&s.render&&s.render(-1)}),Mt.forEach(function(s){Ji(s)&&(s.smooth&&requestAnimationFrame(function(){return s.target.style.scrollBehavior="smooth"}),s.rec&&s(s.rec))}),FL(iT,1),Ag.pause(),ec++,Ki=2,Fo(2),Tt.forEach(function(s){return Ji(s.vars.onRefresh)&&s.vars.onRefresh(s)}),Ki=ft.isRefreshing=!1,uc("refresh")},Fx=0,bm=1,Fd,Fo=function(e){if(e===2||!Ki&&!Ng){ft.isUpdating=!0,Fd&&Fd.update(0);var t=Tt.length,i=Ri(),s=i-Yv>=50,r=t&&Tt[0].scroll();if(bm=Fx>r?-1:1,Ki||(Fx=r),s&&(rr&&!N0&&i-rr>200&&(rr=0,uc("scrollEnd")),rd=Yv,Yv=i),bm<0){for(Yi=t;Yi-- >0;)Tt[Yi]&&Tt[Yi].update(0,s);bm=1}else for(Yi=0;Yi<t;Yi++)Tt[Yi]&&Tt[Yi].update(0,s);ft.isUpdating=!1}yf=0},Vx=[LL,IL,oT,rT,Js+Ud,Js+Id,Js+Od,Js+Dd,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Rm=Vx.concat([Ql,Jl,"boxSizing","max"+ih,"max"+aT,"position",Js,zn,zn+Od,zn+Id,zn+Ud,zn+Dd]),W6=function(e,t,i){Ru(i);var s=e._gsap;if(s.spacerIsNative)Ru(s.spacerState);else if(e._gsap.swappedIn){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}e._gsap.swappedIn=!1},Qv=function(e,t,i,s){if(!e._gsap.swappedIn){for(var r=Vx.length,o=t.style,a=e.style,l;r--;)l=Vx[r],o[l]=i[l];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),a[oT]=a[rT]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Ql]=Cg(e,Qi)+Xn,o[Jl]=Cg(e,qn)+Xn,o[zn]=a[Js]=a[IL]=a[LL]="0",Ru(s),a[Ql]=a["max"+ih]=i[Ql],a[Jl]=a["max"+aT]=i[Jl],a[zn]=i[zn],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},j6=/([A-Z])/g,Ru=function(e){if(e){var t=e.t.style,i=e.length,s=0,r,o;for((e.t._gsap||Oe.core.getCache(e.t)).uncache=1;s<i;s+=2)o=e[s+1],r=e[s],o?t[r]=o:t[r]&&t.removeProperty(r.replace(j6,"-$1").toLowerCase())}},Rp=function(e){for(var t=Rm.length,i=e.style,s=[],r=0;r<t;r++)s.push(Rm[r],i[Rm[r]]);return s.t=e,s},X6=function(e,t,i){for(var s=[],r=e.length,o=i?8:0,a;o<r;o+=2)a=e[o],s.push(a,a in t?t[a]:e[o+1]);return s.t=e.t,s},Pm={left:0,top:0},eA=function(e,t,i,s,r,o,a,l,c,u,h,d,f,g){Ji(e)&&(e=e(l)),As(e)&&e.substr(0,3)==="max"&&(e=d+(e.charAt(4)==="="?Nm("0"+e.substr(3),i):0));var m=f?f.time():0,v,p,y;if(f&&f.seek(0),isNaN(e)||(e=+e),ld(e))f&&(e=Oe.utils.mapRange(f.scrollTrigger.start,f.scrollTrigger.end,0,d,e)),a&&Cm(a,i,s,!0);else{Ji(t)&&(t=t(l));var _=(e||"0").split(" "),x,E,w,T;y=ss(t,l)||ln,x=Eo(y)||{},(!x||!x.left&&!x.top)&&er(y).display==="none"&&(T=y.style.display,y.style.display="block",x=Eo(y),T?y.style.display=T:y.style.removeProperty("display")),E=Nm(_[0],x[s.d]),w=Nm(_[1]||"0",i),e=x[s.p]-c[s.p]-u+E+r-w,a&&Cm(a,w,s,i-w<20||a._isStart&&w>20),i-=i-w}if(g&&(l[g]=e||-.001,e<0&&(e=0)),o){var A=e+i,M=o._isStart;v="scroll"+s.d2,Cm(o,A,s,M&&A>20||!M&&(h?Math.max(ln[v],Tr[v]):o.parentNode[v])<=A+1),h&&(c=Eo(a),h&&(o.style[s.op.p]=c[s.op.p]-s.op.m-o._offset+Xn))}return f&&y&&(v=Eo(y),f.seek(d),p=Eo(y),f._caScrollDist=v[s.p]-p[s.p],e=e/f._caScrollDist*d),f&&f.seek(m),f?e:Math.round(e)},$6=/(webkit|moz|length|cssText|inset)/i,tA=function(e,t,i,s){if(e.parentNode!==t){var r=e.style,o,a;if(t===ln){e._stOrig=r.cssText,a=er(e);for(o in a)!+o&&!$6.test(o)&&a[o]&&typeof r[o]=="string"&&o!=="0"&&(r[o]=a[o]);r.top=i,r.left=s}else r.cssText=e._stOrig;Oe.core.getCache(e).uncache=1,t.appendChild(e)}},kL=function(e,t,i){var s=t,r=s;return function(o){var a=Math.round(e());return a!==s&&a!==r&&Math.abs(a-s)>3&&Math.abs(a-r)>3&&(o=a,i&&i()),r=s,s=o,o}},Pp=function(e,t,i){var s={};s[t.p]="+="+i,Oe.set(e,s)},nA=function(e,t){var i=qa(e,t),s="_scroll"+t.p2,r=function o(a,l,c,u,h){var d=o.tween,f=l.onComplete,g={};c=c||i();var m=kL(i,c,function(){d.kill(),o.tween=0});return h=u&&h||0,u=u||a-c,d&&d.kill(),l[s]=a,l.inherit=!1,l.modifiers=g,g[s]=function(){return m(c+u*d.ratio+h*d.ratio*d.ratio)},l.onUpdate=function(){Mt.cache++,o.tween&&Fo()},l.onComplete=function(){o.tween=0,f&&f.call(d)},d=o.tween=Oe.to(e,l),d};return e[s]=i,i.wheelHandler=function(){return r.tween&&r.tween.kill()&&(r.tween=0)},si(e,"wheel",i.wheelHandler),ft.isTouch&&si(e,"touchmove",i.wheelHandler),r},ft=function(){function n(t,i){$c||n.register(Oe)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Dx(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,s){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!od){this.update=this.refresh=this.kill=Hr;return}i=YE(As(i)||ld(i)||i.nodeType?{trigger:i}:i,Cp);var r=i,o=r.onUpdate,a=r.toggleClass,l=r.id,c=r.onToggle,u=r.onRefresh,h=r.scrub,d=r.trigger,f=r.pin,g=r.pinSpacing,m=r.invalidateOnRefresh,v=r.anticipatePin,p=r.onScrubComplete,y=r.onSnapComplete,_=r.once,x=r.snap,E=r.pinReparent,w=r.pinSpacer,T=r.containerAnimation,A=r.fastScrollEnd,M=r.preventOverlaps,S=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Qi:qn,P=!h&&h!==0,F=ss(i.scroller||At),H=Oe.core.getCache(F),ee=lc(F),K=("pinType"in i?i.pinType:za(F,"pinType")||ee&&"fixed")==="fixed",j=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],Z=P&&i.toggleActions.split(" "),D="markers"in i?i.markers:Cp.markers,ie=ee?0:parseFloat(er(F)["border"+S.p2+ih])||0,R=this,ce=i.onRefreshInit&&function(){return i.onRefreshInit(R)},Pe=F6(F,ee,S),ut=V6(F,ee),te=0,he=0,Te=0,ge=qa(F,S),Qe,qe,pt,U,ot,Le,ht,ke,at,q,Ke,Ft,I,N,ne,de,me,le,Ge,ve,we,et,_e,Be,Xe,nt,Ee,lt,mt,Vt,V,fe,oe,ae,ye,$e,yt,Xt,$t;if(R._startClamp=R._endClamp=!1,R._dir=S,v*=45,R.scroller=F,R.scroll=T?T.time.bind(T):ge,U=ge(),R.vars=i,s=s||i.animation,"refreshPriority"in i&&(wL=1,i.refreshPriority===-9999&&(Fd=R)),H.tweenScroll=H.tweenScroll||{top:nA(F,qn),left:nA(F,Qi)},R.tweenTo=Qe=H.tweenScroll[S.p],R.scrubDuration=function(Ce){oe=ld(Ce)&&Ce,oe?fe?fe.duration(Ce):fe=Oe.to(s,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:oe,paused:!0,onComplete:function(){return p&&p(R)}}):(fe&&fe.progress(1).kill(),fe=0)},s&&(s.vars.lazy=!1,s._initted&&!R.isReverted||s.vars.immediateRender!==!1&&i.immediateRender!==!1&&s.duration()&&s.render(0,!0,!0),R.animation=s.pause(),s.scrollTrigger=R,R.scrubDuration(h),Vt=0,l||(l=s.vars.id)),x&&((!Pl(x)||x.push)&&(x={snapTo:x}),"scrollBehavior"in ln.style&&Oe.set(ee?[ln,Tr]:F,{scrollBehavior:"auto"}),Mt.forEach(function(Ce){return Ji(Ce)&&Ce.target===(ee?_n.scrollingElement||Tr:F)&&(Ce.smooth=!1)}),pt=Ji(x.snapTo)?x.snapTo:x.snapTo==="labels"?z6(s):x.snapTo==="labelsDirectional"?B6(s):x.directional!==!1?function(Ce,dt){return lT(x.snapTo)(Ce,Ri()-he<500?0:dt.direction)}:Oe.utils.snap(x.snapTo),ae=x.duration||{min:.1,max:2},ae=Pl(ae)?Ld(ae.min,ae.max):Ld(ae,ae),ye=Oe.delayedCall(x.delay||oe/2||.1,function(){var Ce=ge(),dt=Ri()-he<500,Ze=Qe.tween;if((dt||Math.abs(R.getVelocity())<10)&&!Ze&&!N0&&te!==Ce){var rt=(Ce-Le)/N,Pn=s&&!P?s.totalProgress():rt,vt=dt?0:(Pn-V)/(Ri()-rd)*1e3||0,dn=Oe.utils.clamp(-rt,1-rt,Cc(vt/2)*vt/.185),jn=rt+(x.inertia===!1?0:dn),fn,Jt,Bt=x,C=Bt.onStart,k=Bt.onInterrupt,Y=Bt.onComplete;if(fn=pt(jn,R),ld(fn)||(fn=jn),Jt=Math.round(Le+fn*N),Ce<=ht&&Ce>=Le&&Jt!==Ce){if(Ze&&!Ze._initted&&Ze.data<=Cc(Jt-Ce))return;x.inertia===!1&&(dn=fn-rt),Qe(Jt,{duration:ae(Cc(Math.max(Cc(jn-Pn),Cc(fn-Pn))*.185/vt/.05||0)),ease:x.ease||"power3",data:Cc(Jt-Ce),onInterrupt:function(){return ye.restart(!0)&&k&&k(R)},onComplete:function(){R.update(),te=ge(),s&&(fe?fe.resetTo("totalProgress",fn,s._tTime/s._tDur):s.progress(fn)),Vt=V=s&&!P?s.totalProgress():R.progress,y&&y(R),Y&&Y(R)}},Ce,dn*N,Jt-Ce-dn*N),C&&C(R,Qe.tween)}}else R.isActive&&te!==Ce&&ye.restart(!0)}).pause()),l&&(Ux[l]=R),d=R.trigger=ss(d||f!==!0&&f),$t=d&&d._gsap&&d._gsap.stRevert,$t&&($t=$t(R)),f=f===!0?d:ss(f),As(a)&&(a={targets:d,className:a}),f&&(g===!1||g===Js||(g=!g&&f.parentNode&&f.parentNode.style&&er(f.parentNode).display==="flex"?!1:zn),R.pin=f,qe=Oe.core.getCache(f),qe.spacer?ne=qe.pinState:(w&&(w=ss(w),w&&!w.nodeType&&(w=w.current||w.nativeElement),qe.spacerIsNative=!!w,w&&(qe.spacerState=Rp(w))),qe.spacer=le=w||_n.createElement("div"),le.classList.add("pin-spacer"),l&&le.classList.add("pin-spacer-"+l),qe.pinState=ne=Rp(f)),i.force3D!==!1&&Oe.set(f,{force3D:!0}),R.spacer=le=qe.spacer,mt=er(f),Be=mt[g+S.os2],ve=Oe.getProperty(f),we=Oe.quickSetter(f,S.a,Xn),Qv(f,le,mt),me=Rp(f)),D){Ft=Pl(D)?YE(D,KE):KE,q=bp("scroller-start",l,F,S,Ft,0),Ke=bp("scroller-end",l,F,S,Ft,0,q),Ge=q["offset"+S.op.d2];var bt=ss(za(F,"content")||F);ke=this.markerStart=bp("start",l,bt,S,Ft,Ge,0,T),at=this.markerEnd=bp("end",l,bt,S,Ft,Ge,0,T),T&&(Xt=Oe.quickSetter([ke,at],S.a,Xn)),!K&&!(so.length&&za(F,"fixedMarkers")===!0)&&(k6(ee?ln:F),Oe.set([q,Ke],{force3D:!0}),nt=Oe.quickSetter(q,S.a,Xn),lt=Oe.quickSetter(Ke,S.a,Xn))}if(T){var Je=T.vars.onUpdate,We=T.vars.onUpdateParams;T.eventCallback("onUpdate",function(){R.update(0,0,1),Je&&Je.apply(T,We||[])})}if(R.previous=function(){return Tt[Tt.indexOf(R)-1]},R.next=function(){return Tt[Tt.indexOf(R)+1]},R.revert=function(Ce,dt){if(!dt)return R.kill(!0);var Ze=Ce!==!1||!R.enabled,rt=Ci;Ze!==R.isReverted&&(Ze&&($e=Math.max(ge(),R.scroll.rec||0),Te=R.progress,yt=s&&s.progress()),ke&&[ke,at,q,Ke].forEach(function(Pn){return Pn.style.display=Ze?"none":"block"}),Ze&&(Ci=R,R.update(Ze)),f&&(!E||!R.isActive)&&(Ze?W6(f,le,ne):Qv(f,le,er(f),Xe)),Ze||R.update(Ze),Ci=rt,R.isReverted=Ze)},R.refresh=function(Ce,dt,Ze,rt){if(!((Ci||!R.enabled)&&!dt)){if(f&&Ce&&rr){si(n,"scrollEnd",OL);return}!Ki&&ce&&ce(R),Ci=R,Qe.tween&&!Ze&&(Qe.tween.kill(),Qe.tween=0),fe&&fe.pause(),m&&s&&s.revert({kill:!1}).invalidate(),R.isReverted||R.revert(!0,!0),R._subPinOffset=!1;var Pn=Pe(),vt=ut(),dn=T?T.duration():Zr(F,S),jn=N<=.01,fn=0,Jt=rt||0,Bt=Pl(Ze)?Ze.end:i.end,C=i.endTrigger||d,k=Pl(Ze)?Ze.start:i.start||(i.start===0||!d?0:f?"0 0":"0 100%"),Y=R.pinnedContainer=i.pinnedContainer&&ss(i.pinnedContainer,R),Q=d&&Math.max(0,Tt.indexOf(R))||0,G=Q,pe,Me,Re,ze,Fe,Ie,He,Rt,rn,qt,pn,Et,je;for(D&&Pl(Ze)&&(Et=Oe.getProperty(q,S.p),je=Oe.getProperty(Ke,S.p));G--;)Ie=Tt[G],Ie.end||Ie.refresh(0,1)||(Ci=R),He=Ie.pin,He&&(He===d||He===f||He===Y)&&!Ie.isReverted&&(qt||(qt=[]),qt.unshift(Ie),Ie.revert(!0,!0)),Ie!==Tt[G]&&(Q--,G--);for(Ji(k)&&(k=k(R)),k=jE(k,"start",R),Le=eA(k,d,Pn,S,ge(),ke,q,R,vt,ie,K,dn,T,R._startClamp&&"_startClamp")||(f?-.001:0),Ji(Bt)&&(Bt=Bt(R)),As(Bt)&&!Bt.indexOf("+=")&&(~Bt.indexOf(" ")?Bt=(As(k)?k.split(" ")[0]:"")+Bt:(fn=Nm(Bt.substr(2),Pn),Bt=As(k)?k:(T?Oe.utils.mapRange(0,T.duration(),T.scrollTrigger.start,T.scrollTrigger.end,Le):Le)+fn,C=d)),Bt=jE(Bt,"end",R),ht=Math.max(Le,eA(Bt||(C?"100% 0":dn),C,Pn,S,ge()+fn,at,Ke,R,vt,ie,K,dn,T,R._endClamp&&"_endClamp"))||-.001,fn=0,G=Q;G--;)Ie=Tt[G],He=Ie.pin,He&&Ie.start-Ie._pinPush<=Le&&!T&&Ie.end>0&&(pe=Ie.end-(R._startClamp?Math.max(0,Ie.start):Ie.start),(He===d&&Ie.start-Ie._pinPush<Le||He===Y)&&isNaN(k)&&(fn+=pe*(1-Ie.progress)),He===f&&(Jt+=pe));if(Le+=fn,ht+=fn,R._startClamp&&(R._startClamp+=fn),R._endClamp&&!Ki&&(R._endClamp=ht||-.001,ht=Math.min(ht,Zr(F,S))),N=ht-Le||(Le-=.01)&&.001,jn&&(Te=Oe.utils.clamp(0,1,Oe.utils.normalize(Le,ht,$e))),R._pinPush=Jt,ke&&fn&&(pe={},pe[S.a]="+="+fn,Y&&(pe[S.p]="-="+ge()),Oe.set([ke,at],pe)),f&&!(Ox&&R.end>=Zr(F,S)))pe=er(f),ze=S===qn,Re=ge(),et=parseFloat(ve(S.a))+Jt,!dn&&ht>1&&(pn=(ee?_n.scrollingElement||Tr:F).style,pn={style:pn,value:pn["overflow"+S.a.toUpperCase()]},ee&&er(ln)["overflow"+S.a.toUpperCase()]!=="scroll"&&(pn.style["overflow"+S.a.toUpperCase()]="scroll")),Qv(f,le,pe),me=Rp(f),Me=Eo(f,!0),Rt=K&&qa(F,ze?Qi:qn)(),g?(Xe=[g+S.os2,N+Jt+Xn],Xe.t=le,G=g===zn?Cg(f,S)+N+Jt:0,G&&(Xe.push(S.d,G+Xn),le.style.flexBasis!=="auto"&&(le.style.flexBasis=G+Xn)),Ru(Xe),Y&&Tt.forEach(function(Ln){Ln.pin===Y&&Ln.vars.pinSpacing!==!1&&(Ln._subPinOffset=!0)}),K&&ge($e)):(G=Cg(f,S),G&&le.style.flexBasis!=="auto"&&(le.style.flexBasis=G+Xn)),K&&(Fe={top:Me.top+(ze?Re-Le:Rt)+Xn,left:Me.left+(ze?Rt:Re-Le)+Xn,boxSizing:"border-box",position:"fixed"},Fe[Ql]=Fe["max"+ih]=Math.ceil(Me.width)+Xn,Fe[Jl]=Fe["max"+aT]=Math.ceil(Me.height)+Xn,Fe[Js]=Fe[Js+Od]=Fe[Js+Id]=Fe[Js+Ud]=Fe[Js+Dd]="0",Fe[zn]=pe[zn],Fe[zn+Od]=pe[zn+Od],Fe[zn+Id]=pe[zn+Id],Fe[zn+Ud]=pe[zn+Ud],Fe[zn+Dd]=pe[zn+Dd],de=X6(ne,Fe,E),Ki&&ge(0)),s?(rn=s._initted,$v(1),s.render(s.duration(),!0,!0),_e=ve(S.a)-et+N+Jt,Ee=Math.abs(N-_e)>1,K&&Ee&&de.splice(de.length-2,2),s.render(0,!0,!0),rn||s.invalidate(!0),s.parent||s.totalTime(s.totalTime()),$v(0)):_e=N,pn&&(pn.value?pn.style["overflow"+S.a.toUpperCase()]=pn.value:pn.style.removeProperty("overflow-"+S.a));else if(d&&ge()&&!T)for(Me=d.parentNode;Me&&Me!==ln;)Me._pinOffset&&(Le-=Me._pinOffset,ht-=Me._pinOffset),Me=Me.parentNode;qt&&qt.forEach(function(Ln){return Ln.revert(!1,!0)}),R.start=Le,R.end=ht,U=ot=Ki?$e:ge(),!T&&!Ki&&(U<$e&&ge($e),R.scroll.rec=0),R.revert(!1,!0),he=Ri(),ye&&(te=-1,ye.restart(!0)),Ci=0,s&&P&&(s._initted||yt)&&s.progress()!==yt&&s.progress(yt||0,!0).render(s.time(),!0,!0),(jn||Te!==R.progress||T||m)&&(s&&!P&&s.totalProgress(T&&Le<-.001&&!Te?Oe.utils.normalize(Le,ht,0):Te,!0),R.progress=jn||(U-Le)/N===Te?0:Te),f&&g&&(le._pinOffset=Math.round(R.progress*_e)),fe&&fe.invalidate(),isNaN(Et)||(Et-=Oe.getProperty(q,S.p),je-=Oe.getProperty(Ke,S.p),Pp(q,S,Et),Pp(ke,S,Et-(rt||0)),Pp(Ke,S,je),Pp(at,S,je-(rt||0))),jn&&!Ki&&R.update(),u&&!Ki&&!I&&(I=!0,u(R),I=!1)}},R.getVelocity=function(){return(ge()-ot)/(Ri()-rd)*1e3||0},R.endAnimation=function(){Gh(R.callbackAnimation),s&&(fe?fe.progress(1):s.paused()?P||Gh(s,R.direction<0,1):Gh(s,s.reversed()))},R.labelToScroll=function(Ce){return s&&s.labels&&(Le||R.refresh()||Le)+s.labels[Ce]/s.duration()*N||0},R.getTrailing=function(Ce){var dt=Tt.indexOf(R),Ze=R.direction>0?Tt.slice(0,dt).reverse():Tt.slice(dt+1);return(As(Ce)?Ze.filter(function(rt){return rt.vars.preventOverlaps===Ce}):Ze).filter(function(rt){return R.direction>0?rt.end<=Le:rt.start>=ht})},R.update=function(Ce,dt,Ze){if(!(T&&!Ze&&!Ce)){var rt=Ki===!0?$e:R.scroll(),Pn=Ce?0:(rt-Le)/N,vt=Pn<0?0:Pn>1?1:Pn||0,dn=R.progress,jn,fn,Jt,Bt,C,k,Y,Q;if(dt&&(ot=U,U=T?ge():rt,x&&(V=Vt,Vt=s&&!P?s.totalProgress():vt)),v&&f&&!Ci&&!wp&&rr&&(!vt&&Le<rt+(rt-ot)/(Ri()-rd)*v?vt=1e-4:vt===1&&ht>rt+(rt-ot)/(Ri()-rd)*v&&(vt=.9999)),vt!==dn&&R.enabled){if(jn=R.isActive=!!vt&&vt<1,fn=!!dn&&dn<1,k=jn!==fn,C=k||!!vt!=!!dn,R.direction=vt>dn?1:-1,R.progress=vt,C&&!Ci&&(Jt=vt&&!dn?0:vt===1?1:dn===1?2:3,P&&(Bt=!k&&Z[Jt+1]!=="none"&&Z[Jt+1]||Z[Jt],Q=s&&(Bt==="complete"||Bt==="reset"||Bt in s))),M&&(k||Q)&&(Q||h||!s)&&(Ji(M)?M(R):R.getTrailing(M).forEach(function(Re){return Re.endAnimation()})),P||(fe&&!Ci&&!wp?(fe._dp._time-fe._start!==fe._time&&fe.render(fe._dp._time-fe._start),fe.resetTo?fe.resetTo("totalProgress",vt,s._tTime/s._tDur):(fe.vars.totalProgress=vt,fe.invalidate().restart())):s&&s.totalProgress(vt,!!(Ci&&(he||Ce)))),f){if(Ce&&g&&(le.style[g+S.os2]=Be),!K)we(ad(et+_e*vt));else if(C){if(Y=!Ce&&vt>dn&&ht+1>rt&&rt+1>=Zr(F,S),E)if(!Ce&&(jn||Y)){var G=Eo(f,!0),pe=rt-Le;tA(f,ln,G.top+(S===qn?pe:0)+Xn,G.left+(S===qn?0:pe)+Xn)}else tA(f,le);Ru(jn||Y?de:me),Ee&&vt<1&&jn||we(et+(vt===1&&!Y?_e:0))}}x&&!Qe.tween&&!Ci&&!wp&&ye.restart(!0),a&&(k||_&&vt&&(vt<1||!qv))&&_f(a.targets).forEach(function(Re){return Re.classList[jn||_?"add":"remove"](a.className)}),o&&!P&&!Ce&&o(R),C&&!Ci?(P&&(Q&&(Bt==="complete"?s.pause().totalProgress(1):Bt==="reset"?s.restart(!0).pause():Bt==="restart"?s.restart(!0):s[Bt]()),o&&o(R)),(k||!qv)&&(c&&k&&Kv(R,c),j[Jt]&&Kv(R,j[Jt]),_&&(vt===1?R.kill(!1,1):j[Jt]=0),k||(Jt=vt===1?1:3,j[Jt]&&Kv(R,j[Jt]))),A&&!jn&&Math.abs(R.getVelocity())>(ld(A)?A:2500)&&(Gh(R.callbackAnimation),fe?fe.progress(1):Gh(s,Bt==="reverse"?1:!vt,1))):P&&o&&!Ci&&o(R)}if(lt){var Me=T?rt/T.duration()*(T._caScrollDist||0):rt;nt(Me+(q._isFlipped?1:0)),lt(Me)}Xt&&Xt(-rt/T.duration()*(T._caScrollDist||0))}},R.enable=function(Ce,dt){R.enabled||(R.enabled=!0,si(F,"resize",cd),ee||si(F,"scroll",bc),ce&&si(n,"refreshInit",ce),Ce!==!1&&(R.progress=Te=0,U=ot=te=ge()),dt!==!1&&R.refresh())},R.getTween=function(Ce){return Ce&&Qe?Qe.tween:fe},R.setPositions=function(Ce,dt,Ze,rt){if(T){var Pn=T.scrollTrigger,vt=T.duration(),dn=Pn.end-Pn.start;Ce=Pn.start+dn*Ce/vt,dt=Pn.start+dn*dt/vt}R.refresh(!1,!1,{start:XE(Ce,Ze&&!!R._startClamp),end:XE(dt,Ze&&!!R._endClamp)},rt),R.update()},R.adjustPinSpacing=function(Ce){if(Xe&&Ce){var dt=Xe.indexOf(S.d)+1;Xe[dt]=parseFloat(Xe[dt])+Ce+Xn,Xe[1]=parseFloat(Xe[1])+Ce+Xn,Ru(Xe)}},R.disable=function(Ce,dt){if(R.enabled&&(Ce!==!1&&R.revert(!0,!0),R.enabled=R.isActive=!1,dt||fe&&fe.pause(),$e=0,qe&&(qe.uncache=1),ce&&ii(n,"refreshInit",ce),ye&&(ye.pause(),Qe.tween&&Qe.tween.kill()&&(Qe.tween=0)),!ee)){for(var Ze=Tt.length;Ze--;)if(Tt[Ze].scroller===F&&Tt[Ze]!==R)return;ii(F,"resize",cd),ee||ii(F,"scroll",bc)}},R.kill=function(Ce,dt){R.disable(Ce,dt),fe&&!dt&&fe.kill(),l&&delete Ux[l];var Ze=Tt.indexOf(R);Ze>=0&&Tt.splice(Ze,1),Ze===Yi&&bm>0&&Yi--,Ze=0,Tt.forEach(function(rt){return rt.scroller===R.scroller&&(Ze=1)}),Ze||Ki||(R.scroll.rec=0),s&&(s.scrollTrigger=null,Ce&&s.revert({kill:!1}),dt||s.kill()),ke&&[ke,at,q,Ke].forEach(function(rt){return rt.parentNode&&rt.parentNode.removeChild(rt)}),Fd===R&&(Fd=0),f&&(qe&&(qe.uncache=1),Ze=0,Tt.forEach(function(rt){return rt.pin===f&&Ze++}),Ze||(qe.spacer=0)),i.onKill&&i.onKill(R)},Tt.push(R),R.enable(!1,!1),$t&&$t(R),s&&s.add&&!N){var xt=R.update;R.update=function(){R.update=xt,Le||ht||R.refresh()},Oe.delayedCall(.01,R.update),N=.01,Le=ht=0}else R.refresh();f&&G6()},n.register=function(i){return $c||(Oe=i||bL(),CL()&&window.document&&n.enable(),$c=od),$c},n.defaults=function(i){if(i)for(var s in i)Cp[s]=i[s];return Cp},n.disable=function(i,s){od=0,Tt.forEach(function(o){return o[s?"kill":"disable"](i)}),ii(At,"wheel",bc),ii(_n,"scroll",bc),clearInterval(Mp),ii(_n,"touchcancel",Hr),ii(ln,"touchstart",Hr),Ap(ii,_n,"pointerdown,touchstart,mousedown",$E),Ap(ii,_n,"pointerup,touchend,mouseup",qE),Ag.kill(),Ep(ii);for(var r=0;r<Mt.length;r+=3)Np(ii,Mt[r],Mt[r+1]),Np(ii,Mt[r],Mt[r+2])},n.enable=function(){if(At=window,_n=document,Tr=_n.documentElement,ln=_n.body,Oe&&(_f=Oe.utils.toArray,Ld=Oe.utils.clamp,Dx=Oe.core.context||Hr,$v=Oe.core.suppressOverwrites||Hr,iT=At.history.scrollRestoration||"auto",Fx=At.pageYOffset,Oe.core.globals("ScrollTrigger",n),ln)){od=1,bu=document.createElement("div"),bu.style.height="100vh",bu.style.position="absolute",VL(),U6(),Fn.register(Oe),n.isTouch=Fn.isTouch,oa=Fn.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Ix=Fn.isTouch===1,si(At,"wheel",bc),ML=[At,_n,Tr,ln],Oe.matchMedia?(n.matchMedia=function(l){var c=Oe.matchMedia(),u;for(u in l)c.add(u,l[u]);return c},Oe.addEventListener("matchMediaInit",function(){return cT()}),Oe.addEventListener("matchMediaRevert",function(){return UL()}),Oe.addEventListener("matchMedia",function(){Hl(0,1),uc("matchMedia")}),Oe.matchMedia("(orientation: portrait)",function(){return Zv(),Zv})):console.warn("Requires GSAP 3.11.0 or later"),Zv(),si(_n,"scroll",bc);var i=ln.style,s=i.borderTopStyle,r=Oe.core.Animation.prototype,o,a;for(r.revert||Object.defineProperty(r,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",o=Eo(ln),qn.m=Math.round(o.top+qn.sc())||0,Qi.m=Math.round(o.left+Qi.sc())||0,s?i.borderTopStyle=s:i.removeProperty("border-top-style"),Mp=setInterval(ZE,250),Oe.delayedCall(.5,function(){return wp=0}),si(_n,"touchcancel",Hr),si(ln,"touchstart",Hr),Ap(si,_n,"pointerdown,touchstart,mousedown",$E),Ap(si,_n,"pointerup,touchend,mouseup",qE),Lx=Oe.utils.checkPrefix("transform"),Rm.push(Lx),$c=Ri(),Ag=Oe.delayedCall(.2,Hl).pause(),qc=[_n,"visibilitychange",function(){var l=At.innerWidth,c=At.innerHeight;_n.hidden?(GE=l,WE=c):(GE!==l||WE!==c)&&cd()},_n,"DOMContentLoaded",Hl,At,"load",Hl,At,"resize",cd],Ep(si),Tt.forEach(function(l){return l.enable(0,1)}),a=0;a<Mt.length;a+=3)Np(ii,Mt[a],Mt[a+1]),Np(ii,Mt[a],Mt[a+2])}},n.config=function(i){"limitCallbacks"in i&&(qv=!!i.limitCallbacks);var s=i.syncInterval;s&&clearInterval(Mp)||(Mp=s)&&setInterval(ZE,s),"ignoreMobileResize"in i&&(Ix=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(Ep(ii)||Ep(si,i.autoRefreshEvents||"none"),EL=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,s){var r=ss(i),o=Mt.indexOf(r),a=lc(r);~o&&Mt.splice(o,a?6:2),s&&(a?so.unshift(At,s,ln,s,Tr,s):so.unshift(r,s))},n.clearMatchMedia=function(i){Tt.forEach(function(s){return s._ctx&&s._ctx.query===i&&s._ctx.kill(!0,!0)})},n.isInViewport=function(i,s,r){var o=(As(i)?ss(i):i).getBoundingClientRect(),a=o[r?Ql:Jl]*s||0;return r?o.right-a>0&&o.left+a<At.innerWidth:o.bottom-a>0&&o.top+a<At.innerHeight},n.positionInViewport=function(i,s,r){As(i)&&(i=ss(i));var o=i.getBoundingClientRect(),a=o[r?Ql:Jl],l=s==null?a/2:s in bg?bg[s]*a:~s.indexOf("%")?parseFloat(s)*a/100:parseFloat(s)||0;return r?(o.left+l)/At.innerWidth:(o.top+l)/At.innerHeight},n.killAll=function(i){if(Tt.slice(0).forEach(function(r){return r.vars.id!=="ScrollSmoother"&&r.kill()}),i!==!0){var s=cc.killAll||[];cc={},s.forEach(function(r){return r()})}},n}();ft.version="3.12.5";ft.saveStyles=function(n){return n?_f(n).forEach(function(e){if(e&&e.style){var t=ws.indexOf(e);t>=0&&ws.splice(t,5),ws.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Oe.core.getCache(e),Dx())}}):ws};ft.revert=function(n,e){return cT(!n,e)};ft.create=function(n,e){return new ft(n,e)};ft.refresh=function(n){return n?cd():($c||ft.register())&&Hl(!0)};ft.update=function(n){return++Mt.cache&&Fo(n===!0?2:0)};ft.clearScrollMemory=FL;ft.maxScroll=function(n,e){return Zr(n,e?Qi:qn)};ft.getScrollFunc=function(n,e){return qa(ss(n),e?Qi:qn)};ft.getById=function(n){return Ux[n]};ft.getAll=function(){return Tt.filter(function(n){return n.vars.id!=="ScrollSmoother"})};ft.isScrolling=function(){return!!rr};ft.snapDirectional=lT;ft.addEventListener=function(n,e){var t=cc[n]||(cc[n]=[]);~t.indexOf(e)||t.push(e)};ft.removeEventListener=function(n,e){var t=cc[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};ft.batch=function(n,e){var t=[],i={},s=e.interval||.016,r=e.batchMax||1e9,o=function(c,u){var h=[],d=[],f=Oe.delayedCall(s,function(){u(h,d),h=[],d=[]}).pause();return function(g){h.length||f.restart(!0),h.push(g.trigger),d.push(g),r<=h.length&&f.progress(1)}},a;for(a in e)i[a]=a.substr(0,2)==="on"&&Ji(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return Ji(r)&&(r=r(),si(ft,"refresh",function(){return r=e.batchMax()})),_f(n).forEach(function(l){var c={};for(a in i)c[a]=i[a];c.trigger=l,t.push(ft.create(c))}),t};var iA=function(e,t,i,s){return t>s?e(s):t<0&&e(0),i>s?(s-t)/(i-t):i<0?t/(t-i):1},Jv=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Fn.isTouch?" pinch-zoom":""):"none",e===Tr&&n(ln,t)},Lp={auto:1,scroll:1},q6=function(e){var t=e.event,i=e.target,s=e.axis,r=(t.changedTouches?t.changedTouches[0]:t).target,o=r._gsap||Oe.core.getCache(r),a=Ri(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;r&&r!==ln&&(r.scrollHeight<=r.clientHeight&&r.scrollWidth<=r.clientWidth||!(Lp[(l=er(r)).overflowY]||Lp[l.overflowX]));)r=r.parentNode;o._isScroll=r&&r!==i&&!lc(r)&&(Lp[(l=er(r)).overflowY]||Lp[l.overflowX]),o._isScrollT=a}(o._isScroll||s==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},zL=function(e,t,i,s){return Fn.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:s=s&&q6,onPress:s,onDrag:s,onScroll:s,onEnable:function(){return i&&si(_n,Fn.eventTypes[0],rA,!1,!0)},onDisable:function(){return ii(_n,Fn.eventTypes[0],rA,!0)}})},Y6=/(input|label|select|textarea)/i,sA,rA=function(e){var t=Y6.test(e.target.tagName);(t||sA)&&(e._gsapAllow=!0,sA=t)},K6=function(e){Pl(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,s=t.momentum,r=t.allowNestedScroll,o=t.onRelease,a,l,c=ss(e.target)||Tr,u=Oe.core.globals().ScrollSmoother,h=u&&u.get(),d=oa&&(e.content&&ss(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),f=qa(c,qn),g=qa(c,Qi),m=1,v=(Fn.isTouch&&At.visualViewport?At.visualViewport.scale*At.visualViewport.width:At.outerWidth)/At.innerWidth,p=0,y=Ji(s)?function(){return s(a)}:function(){return s||2.8},_,x,E=zL(c,e.type,!0,r),w=function(){return x=!1},T=Hr,A=Hr,M=function(){l=Zr(c,qn),A=Ld(oa?1:0,l),i&&(T=Ld(0,Zr(c,Qi))),_=ec},S=function(){d._gsap.y=ad(parseFloat(d._gsap.y)+f.offset)+"px",d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(d._gsap.y)+", 0, 1)",f.offset=f.cacheID=0},P=function(){if(x){requestAnimationFrame(w);var D=ad(a.deltaY/2),ie=A(f.v-D);if(d&&ie!==f.v+f.offset){f.offset=ie-f.v;var R=ad((parseFloat(d&&d._gsap.y)||0)-f.offset);d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+R+", 0, 1)",d._gsap.y=R+"px",f.cacheID=Mt.cache,Fo()}return!0}f.offset&&S(),x=!0},F,H,ee,K,j=function(){M(),F.isActive()&&F.vars.scrollY>l&&(f()>l?F.progress(1)&&f(l):F.resetTo("scrollY",l))};return d&&Oe.set(d,{y:"+=0"}),e.ignoreCheck=function(Z){return oa&&Z.type==="touchmove"&&P()||m>1.05&&Z.type!=="touchstart"||a.isGesturing||Z.touches&&Z.touches.length>1},e.onPress=function(){x=!1;var Z=m;m=ad((At.visualViewport&&At.visualViewport.scale||1)/v),F.pause(),Z!==m&&Jv(c,m>1.01?!0:i?!1:"x"),H=g(),ee=f(),M(),_=ec},e.onRelease=e.onGestureStart=function(Z,D){if(f.offset&&S(),!D)K.restart(!0);else{Mt.cache++;var ie=y(),R,ce;i&&(R=g(),ce=R+ie*.05*-Z.velocityX/.227,ie*=iA(g,R,ce,Zr(c,Qi)),F.vars.scrollX=T(ce)),R=f(),ce=R+ie*.05*-Z.velocityY/.227,ie*=iA(f,R,ce,Zr(c,qn)),F.vars.scrollY=A(ce),F.invalidate().duration(ie).play(.01),(oa&&F.vars.scrollY>=l||R>=l-1)&&Oe.to({},{onUpdate:j,duration:ie})}o&&o(Z)},e.onWheel=function(){F._ts&&F.pause(),Ri()-p>1e3&&(_=0,p=Ri())},e.onChange=function(Z,D,ie,R,ce){if(ec!==_&&M(),D&&i&&g(T(R[2]===D?H+(Z.startX-Z.x):g()+D-R[1])),ie){f.offset&&S();var Pe=ce[2]===ie,ut=Pe?ee+Z.startY-Z.y:f()+ie-ce[1],te=A(ut);Pe&&ut!==te&&(ee+=te-ut),f(te)}(ie||D)&&Fo()},e.onEnable=function(){Jv(c,i?!1:"x"),ft.addEventListener("refresh",j),si(At,"resize",j),f.smooth&&(f.target.style.scrollBehavior="auto",f.smooth=g.smooth=!1),E.enable()},e.onDisable=function(){Jv(c,!0),ii(At,"resize",j),ft.removeEventListener("refresh",j),E.kill()},e.lockAxis=e.lockAxis!==!1,a=new Fn(e),a.iOS=oa,oa&&!f()&&f(1),oa&&Oe.ticker.add(Hr),K=a._dc,F=Oe.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:kL(f,f(),function(){return F.pause()})},onUpdate:Fo,onComplete:K.vars.onComplete}),a};ft.sort=function(n){return Tt.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};ft.observe=function(n){return new Fn(n)};ft.normalizeScroll=function(n){if(typeof n>"u")return $i;if(n===!0&&$i)return $i.enable();if(n===!1){$i&&$i.kill(),$i=n;return}var e=n instanceof Fn?n:K6(n);return $i&&$i.target===e.target&&$i.kill(),lc(e.target)&&($i=e),e};ft.core={_getVelocityProp:Px,_inputObserver:zL,_scrollers:Mt,_proxies:so,bridge:{ss:function(){rr||uc("scrollStart"),rr=Ri()},ref:function(){return Ci}}};bL()&&Oe.registerPlugin(ft);zt.registerPlugin(ft);const Ya=({text:n,textSize:e,className:t})=>{const i=z.useRef();return z.useEffect(()=>{const s=new Cx(i.current);zt.from(s.chars,{y:100,stagger:.01,scrollTrigger:{trigger:i.current,start:"top 50%",end:"top 20%"}})},[]),b.jsx("h1",{ref:i,className:`${e} w-full text-center leading-none overflow-hidden ${t}`,children:n})};zt.registerPlugin(ft);const Z6=()=>{const n=z.useRef(null),e=z.useRef(null),{scrollYProgress:t}=T0({target:n}),i=S0(t,[0,1],["-10%","10%"]),[s,r]=z.useState(!0),[o,a]=z.useState(!0),l=()=>{e.current&&(s?e.current.pause():e.current.play(),r(!s))},c=()=>{e.current&&(e.current.muted=!e.current.muted,a(!o))};return b.jsxs("div",{className:"pt-[10vh] max-sm:pt-[5vh] bg-[#fff] overflow-hidden",children:[b.jsxs("div",{className:"text-container-video h-[15vh] w-full max-md:pb-5 flex items-center justify-center flex-col gap-3",children:[b.jsx(Ya,{text:"Experience the joy in Motion",textSize:"text-[3rem] max-sm:text-2xl font-Decorative uppercase max-lg:text-[2rem] max-xl:text-[2.5rem] "}),b.jsx(Ya,{text:"Beopoly Ex",textSize:"text-[1.5rem] uppercase font-Decorative max-sm:text-xl max-lg:text-[1rem]"})]}),b.jsxs("div",{ref:n,className:"relative flex items-center mt-5 justify-center h-screen overflow-hidden",style:{clipPath:"polygon(0% 0, 100% 0%, 100% 100%, 0 100%)"},children:[b.jsx("div",{className:"fixed top-[-10vh] left-0 h-[120vh] w-full",children:b.jsx(Fa.div,{style:{y:i},className:"relative overflow-hidden w-full h-full",children:b.jsx("video",{ref:e,loop:!0,muted:!0,autoPlay:!0,className:"object-cover w-full h-full",src:"/src/assets/videos/hpvideo.mp4"})})}),b.jsxs("div",{className:"w-[10%] flex text-white gap-6 max-xl:gap-4 max-sm:gap-0 max-sm:right-[12%] absolute bottom-[2%] max-xl:right-[5%] right-0 h-[6vh]",children:[b.jsx("button",{onClick:c,children:o?b.jsx(P6,{className:"p-3 h-[5vh] w-[5vh]"}):b.jsx(L6,{className:"p-3 h-[5vh] w-[5vh]"})}),b.jsx("button",{onClick:l,children:s?b.jsx(b6,{className:"p-3 h-[5vh] w-[5vh]"}):b.jsx(R6,{className:"p-3 h-[5vh] w-[5vh]"})})]})]})]})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const uT="165",Q6=0,oA=1,J6=2,BL=1,e8=2,yo=3,Ka=0,ts=1,Ao=2,Ba=0,Pu=1,aA=2,lA=3,cA=4,t8=5,Dl=100,n8=101,i8=102,s8=103,r8=104,o8=200,a8=201,l8=202,c8=203,kx=204,zx=205,u8=206,h8=207,d8=208,f8=209,p8=210,m8=211,g8=212,v8=213,_8=214,y8=0,x8=1,S8=2,Rg=3,T8=4,M8=5,w8=6,E8=7,C0=0,A8=1,N8=2,Us=0,HL=1,GL=2,WL=3,jL=4,C8=5,XL=6,b8=7,$L=300,sh=301,rh=302,Bx=303,Hx=304,b0=306,Gx=1e3,Gl=1001,Wx=1002,Oi=1003,R8=1004,Ip=1005,Mr=1006,e_=1007,Ma=1008,Za=1009,P8=1010,L8=1011,Pg=1012,qL=1013,oh=1014,Po=1015,zf=1016,YL=1017,KL=1018,ah=1020,I8=35902,D8=1021,O8=1022,Qr=1023,U8=1024,F8=1025,Lu=1026,lh=1027,V8=1028,ZL=1029,k8=1030,QL=1031,JL=1033,t_=33776,n_=33777,i_=33778,s_=33779,uA=35840,hA=35841,dA=35842,fA=35843,pA=36196,mA=37492,gA=37496,vA=37808,_A=37809,yA=37810,xA=37811,SA=37812,TA=37813,MA=37814,wA=37815,EA=37816,AA=37817,NA=37818,CA=37819,bA=37820,RA=37821,r_=36492,PA=36494,LA=36495,z8=36283,IA=36284,DA=36285,OA=36286,B8=3200,H8=3201,$o=0,eI=1,pa="",yr="srgb",Fr="srgb-linear",hT="display-p3",R0="display-p3-linear",Lg="linear",an="srgb",Ig="rec709",Dg="p3",Rc=7680,UA=519,G8=512,tI=513,W8=514,nI=515,j8=516,X8=517,$8=518,q8=519,Og=35044,jx=35048,FA="300 es",Ar=2e3,ch=2001;class ll{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const Ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let VA=1234567;const Vd=Math.PI/180,uh=180/Math.PI;function Vo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ai[n&255]+Ai[n>>8&255]+Ai[n>>16&255]+Ai[n>>24&255]+"-"+Ai[e&255]+Ai[e>>8&255]+"-"+Ai[e>>16&15|64]+Ai[e>>24&255]+"-"+Ai[t&63|128]+Ai[t>>8&255]+"-"+Ai[t>>16&255]+Ai[t>>24&255]+Ai[i&255]+Ai[i>>8&255]+Ai[i>>16&255]+Ai[i>>24&255]).toLowerCase()}function Li(n,e,t){return Math.max(e,Math.min(t,n))}function dT(n,e){return(n%e+e)%e}function Y8(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function K8(n,e,t){return n!==e?(t-n)/(e-n):0}function kd(n,e,t){return(1-t)*n+t*e}function Z8(n,e,t,i){return kd(n,e,1-Math.exp(-t*i))}function Q8(n,e=1){return e-Math.abs(dT(n,e*2)-e)}function J8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function eG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function tG(n,e){return n+Math.floor(Math.random()*(e-n+1))}function nG(n,e){return n+Math.random()*(e-n)}function iG(n){return n*(.5-Math.random())}function sG(n){n!==void 0&&(VA=n);let e=VA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rG(n){return n*Vd}function oG(n){return n*uh}function aG(n){return(n&n-1)===0&&n!==0}function lG(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function cG(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function uG(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),c=r((e+i)/2),u=o((e+i)/2),h=r((e-i)/2),d=o((e-i)/2),f=r((i-e)/2),g=o((i-e)/2);switch(s){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function wr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ht(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const iI={DEG2RAD:Vd,RAD2DEG:uh,generateUUID:Vo,clamp:Li,euclideanModulo:dT,mapLinear:Y8,inverseLerp:K8,lerp:kd,damp:Z8,pingpong:Q8,smoothstep:J8,smootherstep:eG,randInt:tG,randFloat:nG,randFloatSpread:iG,seededRandom:sG,degToRad:rG,radToDeg:oG,isPowerOfTwo:aG,ceilPowerOfTwo:lG,floorPowerOfTwo:cG,setQuaternionFromProperEuler:uG,normalize:Ht,denormalize:wr};class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Li(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gt{constructor(e,t,i,s,r,o,a,l,c){gt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c)}set(e,t,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],d=i[2],f=i[5],g=i[8],m=s[0],v=s[3],p=s[6],y=s[1],_=s[4],x=s[7],E=s[2],w=s[5],T=s[8];return r[0]=o*m+a*y+l*E,r[3]=o*v+a*_+l*w,r[6]=o*p+a*x+l*T,r[1]=c*m+u*y+h*E,r[4]=c*v+u*_+h*w,r[7]=c*p+u*x+h*T,r[2]=d*m+f*y+g*E,r[5]=d*v+f*_+g*w,r[8]=d*p+f*x+g*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*r*u+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*r,f=c*r-o*l,g=t*h+i*d+s*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/g;return e[0]=h*m,e[1]=(s*c-u*i)*m,e[2]=(a*i-s*o)*m,e[3]=d*m,e[4]=(u*t-s*l)*m,e[5]=(s*r-a*t)*m,e[6]=f*m,e[7]=(i*l-c*t)*m,e[8]=(o*t-i*r)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(o_.makeScale(e,t)),this}rotate(e){return this.premultiply(o_.makeRotation(-e)),this}translate(e,t){return this.premultiply(o_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const o_=new gt;function sI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function xf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function hG(){const n=xf("canvas");return n.style.display="block",n}const kA={};function fT(n){n in kA||(kA[n]=!0,console.warn(n))}function dG(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}const zA=new gt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),BA=new gt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Dp={[Fr]:{transfer:Lg,primaries:Ig,toReference:n=>n,fromReference:n=>n},[yr]:{transfer:an,primaries:Ig,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[R0]:{transfer:Lg,primaries:Dg,toReference:n=>n.applyMatrix3(BA),fromReference:n=>n.applyMatrix3(zA)},[hT]:{transfer:an,primaries:Dg,toReference:n=>n.convertSRGBToLinear().applyMatrix3(BA),fromReference:n=>n.applyMatrix3(zA).convertLinearToSRGB()}},fG=new Set([Fr,R0]),Gt={enabled:!0,_workingColorSpace:Fr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!fG.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Dp[e].toReference,s=Dp[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Dp[n].primaries},getTransfer:function(n){return n===pa?Lg:Dp[n].transfer}};function Iu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function a_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Pc;class pG{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Pc===void 0&&(Pc=xf("canvas")),Pc.width=e.width,Pc.height=e.height;const i=Pc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Pc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=xf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Iu(r[o]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Iu(t[i]/255)*255):t[i]=Iu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mG=0;class rI{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mG++}),this.uuid=Vo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(l_(s[o].image)):r.push(l_(s[o]))}else r=l_(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function l_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pG.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gG=0;class Vi extends ll{constructor(e=Vi.DEFAULT_IMAGE,t=Vi.DEFAULT_MAPPING,i=Gl,s=Gl,r=Mr,o=Ma,a=Qr,l=Za,c=Vi.DEFAULT_ANISOTROPY,u=pa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gG++}),this.uuid=Vo(),this.name="",this.source=new rI(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$L)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Gx:e.x=e.x-Math.floor(e.x);break;case Gl:e.x=e.x<0?0:1;break;case Wx:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Gx:e.y=e.y-Math.floor(e.y);break;case Gl:e.y=e.y<0?0:1;break;case Wx:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Vi.DEFAULT_IMAGE=null;Vi.DEFAULT_MAPPING=$L;Vi.DEFAULT_ANISOTROPY=1;class Dt{constructor(e=0,t=0,i=0,s=1){Dt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],g=l[9],m=l[2],v=l[6],p=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-m)<.01&&Math.abs(g-v)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+m)<.1&&Math.abs(g+v)<.1&&Math.abs(c+f+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,x=(f+1)/2,E=(p+1)/2,w=(u+d)/4,T=(h+m)/4,A=(g+v)/4;return _>x&&_>E?_<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(_),s=w/i,r=T/i):x>E?x<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(x),i=w/s,r=A/s):E<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(E),i=T/r,s=A/r),this.set(i,s,r,t),this}let y=Math.sqrt((v-g)*(v-g)+(h-m)*(h-m)+(d-u)*(d-u));return Math.abs(y)<.001&&(y=1),this.x=(v-g)/y,this.y=(h-m)/y,this.z=(d-u)/y,this.w=Math.acos((c+f+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qa extends ll{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Dt(0,0,e,t),this.scissorTest=!1,this.viewport=new Dt(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Vi(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new rI(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hc extends Qa{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class pT extends Vi{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=Gl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vG extends Vi{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=Gl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Bf{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],h=i[s+3];const d=r[o+0],f=r[o+1],g=r[o+2],m=r[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=m;return}if(h!==m||l!==d||c!==f||u!==g){let v=1-a;const p=l*d+c*f+u*g+h*m,y=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const E=Math.sqrt(_),w=Math.atan2(E,p*y);v=Math.sin(v*w)/E,a=Math.sin(a*w)/E}const x=a*y;if(l=l*v+d*x,c=c*v+f*x,u=u*v+g*x,h=h*v+m*x,v===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=E,c*=E,u*=E,h*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],h=r[o],d=r[o+1],f=r[o+2],g=r[o+3];return e[t]=a*g+u*h+l*f-c*d,e[t+1]=l*g+u*d+c*h-a*f,e[t+2]=c*g+u*f+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),h=a(r/2),d=l(i/2),f=l(s/2),g=l(r/2);switch(o){case"XYZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"YXZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"ZXY":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"ZYX":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"YZX":this._x=d*u*h+c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h-d*f*g;break;case"XZY":this._x=d*u*h-c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=i+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(r-c)*f,this._z=(o-s)*f}else if(i>a&&i>h){const f=2*Math.sqrt(1+i-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-i-h);this._w=(r-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-i-a);this._w=(o-s)/f,this._x=(r+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Li(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=s*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,i=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(HA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(HA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*i),u=2*(a*t-r*s),h=2*(r*i-o*t);return this.x=t+l*c+o*h-a*u,this.y=i+l*u+a*c-r*h,this.z=s+l*h+r*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return c_.copy(this).projectOnVector(e),this.sub(c_)}reflect(e){return this.sub(c_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Li(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const c_=new $,HA=new Bf;class Hf{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(fr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(fr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=fr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,fr):fr.fromBufferAttribute(r,o),fr.applyMatrix4(e.matrixWorld),this.expandByPoint(fr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Op.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Op.copy(i.boundingBox)),Op.applyMatrix4(e.matrixWorld),this.union(Op)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fr),fr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Wh),Up.subVectors(this.max,Wh),Lc.subVectors(e.a,Wh),Ic.subVectors(e.b,Wh),Dc.subVectors(e.c,Wh),Qo.subVectors(Ic,Lc),Jo.subVectors(Dc,Ic),pl.subVectors(Lc,Dc);let t=[0,-Qo.z,Qo.y,0,-Jo.z,Jo.y,0,-pl.z,pl.y,Qo.z,0,-Qo.x,Jo.z,0,-Jo.x,pl.z,0,-pl.x,-Qo.y,Qo.x,0,-Jo.y,Jo.x,0,-pl.y,pl.x,0];return!u_(t,Lc,Ic,Dc,Up)||(t=[1,0,0,0,1,0,0,0,1],!u_(t,Lc,Ic,Dc,Up))?!1:(Fp.crossVectors(Qo,Jo),t=[Fp.x,Fp.y,Fp.z],u_(t,Lc,Ic,Dc,Up))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(po[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),po[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),po[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),po[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),po[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),po[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),po[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),po[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(po),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const po=[new $,new $,new $,new $,new $,new $,new $,new $],fr=new $,Op=new Hf,Lc=new $,Ic=new $,Dc=new $,Qo=new $,Jo=new $,pl=new $,Wh=new $,Up=new $,Fp=new $,ml=new $;function u_(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){ml.fromArray(n,r);const a=s.x*Math.abs(ml.x)+s.y*Math.abs(ml.y)+s.z*Math.abs(ml.z),l=e.dot(ml),c=t.dot(ml),u=i.dot(ml);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const _G=new Hf,jh=new $,h_=new $;class mT{constructor(e=new $,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):_G.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jh.subVectors(e,this.center);const t=jh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(jh,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(h_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jh.copy(e.center).add(h_)),this.expandByPoint(jh.copy(e.center).sub(h_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const mo=new $,d_=new $,Vp=new $,ea=new $,f_=new $,kp=new $,p_=new $;class yG{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=mo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mo.copy(this.origin).addScaledVector(this.direction,t),mo.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){d_.copy(e).add(t).multiplyScalar(.5),Vp.copy(t).sub(e).normalize(),ea.copy(this.origin).sub(d_);const r=e.distanceTo(t)*.5,o=-this.direction.dot(Vp),a=ea.dot(this.direction),l=-ea.dot(Vp),c=ea.lengthSq(),u=Math.abs(1-o*o);let h,d,f,g;if(u>0)if(h=o*l-a,d=o*a-l,g=r*u,h>=0)if(d>=-g)if(d<=g){const m=1/u;h*=m,d*=m,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-g?(h=Math.max(0,-(-o*r+a)),d=h>0?-r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c):d<=g?(h=0,d=Math.min(Math.max(-r,-l),r),f=d*(d+2*l)+c):(h=Math.max(0,-(o*r+a)),d=h>0?r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c);else d=o>0?-r:r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),s&&s.copy(d_).addScaledVector(Vp,d),f}intersectSphere(e,t){mo.subVectors(e.center,this.origin);const i=mo.dot(this.direction),s=mo.dot(mo)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,s=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,s=(e.min.x-d.x)*c),u>=0?(r=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,mo)!==null}intersectTriangle(e,t,i,s,r){f_.subVectors(t,e),kp.subVectors(i,e),p_.crossVectors(f_,kp);let o=this.direction.dot(p_),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ea.subVectors(this.origin,e);const l=a*this.direction.dot(kp.crossVectors(ea,kp));if(l<0)return null;const c=a*this.direction.dot(f_.cross(ea));if(c<0||l+c>o)return null;const u=-a*ea.dot(p_);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class un{constructor(e,t,i,s,r,o,a,l,c,u,h,d,f,g,m,v){un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c,u,h,d,f,g,m,v)}set(e,t,i,s,r,o,a,l,c,u,h,d,f,g,m,v){const p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=s,p[1]=r,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=h,p[14]=d,p[3]=f,p[7]=g,p[11]=m,p[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new un().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Oc.setFromMatrixColumn(e,0).length(),r=1/Oc.setFromMatrixColumn(e,1).length(),o=1/Oc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),h=Math.sin(r);if(e.order==="XYZ"){const d=o*u,f=o*h,g=a*u,m=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+g*c,t[5]=d-m*c,t[9]=-a*l,t[2]=m-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,g=c*u,m=c*h;t[0]=d+m*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=m+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,g=c*u,m=c*h;t[0]=d-m*a,t[4]=-o*h,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=m-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,g=a*u,m=a*h;t[0]=l*u,t[4]=g*c-f,t[8]=d*c+m,t[1]=l*h,t[5]=m*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,m=a*c;t[0]=l*u,t[4]=m-d*h,t[8]=g*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+g,t[10]=d-m*h}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,m=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+m,t[5]=o*u,t[9]=f*h-g,t[2]=g*h-f,t[6]=a*u,t[10]=m*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xG,e,SG)}lookAt(e,t,i){const s=this.elements;return Ss.subVectors(e,t),Ss.lengthSq()===0&&(Ss.z=1),Ss.normalize(),ta.crossVectors(i,Ss),ta.lengthSq()===0&&(Math.abs(i.z)===1?Ss.x+=1e-4:Ss.z+=1e-4,Ss.normalize(),ta.crossVectors(i,Ss)),ta.normalize(),zp.crossVectors(Ss,ta),s[0]=ta.x,s[4]=zp.x,s[8]=Ss.x,s[1]=ta.y,s[5]=zp.y,s[9]=Ss.y,s[2]=ta.z,s[6]=zp.z,s[10]=Ss.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],d=i[9],f=i[13],g=i[2],m=i[6],v=i[10],p=i[14],y=i[3],_=i[7],x=i[11],E=i[15],w=s[0],T=s[4],A=s[8],M=s[12],S=s[1],P=s[5],F=s[9],H=s[13],ee=s[2],K=s[6],j=s[10],Z=s[14],D=s[3],ie=s[7],R=s[11],ce=s[15];return r[0]=o*w+a*S+l*ee+c*D,r[4]=o*T+a*P+l*K+c*ie,r[8]=o*A+a*F+l*j+c*R,r[12]=o*M+a*H+l*Z+c*ce,r[1]=u*w+h*S+d*ee+f*D,r[5]=u*T+h*P+d*K+f*ie,r[9]=u*A+h*F+d*j+f*R,r[13]=u*M+h*H+d*Z+f*ce,r[2]=g*w+m*S+v*ee+p*D,r[6]=g*T+m*P+v*K+p*ie,r[10]=g*A+m*F+v*j+p*R,r[14]=g*M+m*H+v*Z+p*ce,r[3]=y*w+_*S+x*ee+E*D,r[7]=y*T+_*P+x*K+E*ie,r[11]=y*A+_*F+x*j+E*R,r[15]=y*M+_*H+x*Z+E*ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],g=e[3],m=e[7],v=e[11],p=e[15];return g*(+r*l*h-s*c*h-r*a*d+i*c*d+s*a*f-i*l*f)+m*(+t*l*f-t*c*d+r*o*d-s*o*f+s*c*u-r*l*u)+v*(+t*c*h-t*a*f-r*o*h+i*o*f+r*a*u-i*c*u)+p*(-s*a*u-t*l*h+t*a*d+s*o*h-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],m=e[13],v=e[14],p=e[15],y=h*v*c-m*d*c+m*l*f-a*v*f-h*l*p+a*d*p,_=g*d*c-u*v*c-g*l*f+o*v*f+u*l*p-o*d*p,x=u*m*c-g*h*c+g*a*f-o*m*f-u*a*p+o*h*p,E=g*h*l-u*m*l-g*a*d+o*m*d+u*a*v-o*h*v,w=t*y+i*_+s*x+r*E;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/w;return e[0]=y*T,e[1]=(m*d*r-h*v*r-m*s*f+i*v*f+h*s*p-i*d*p)*T,e[2]=(a*v*r-m*l*r+m*s*c-i*v*c-a*s*p+i*l*p)*T,e[3]=(h*l*r-a*d*r-h*s*c+i*d*c+a*s*f-i*l*f)*T,e[4]=_*T,e[5]=(u*v*r-g*d*r+g*s*f-t*v*f-u*s*p+t*d*p)*T,e[6]=(g*l*r-o*v*r-g*s*c+t*v*c+o*s*p-t*l*p)*T,e[7]=(o*d*r-u*l*r+u*s*c-t*d*c-o*s*f+t*l*f)*T,e[8]=x*T,e[9]=(g*h*r-u*m*r-g*i*f+t*m*f+u*i*p-t*h*p)*T,e[10]=(o*m*r-g*a*r+g*i*c-t*m*c-o*i*p+t*a*p)*T,e[11]=(u*a*r-o*h*r-u*i*c+t*h*c+o*i*f-t*a*f)*T,e[12]=E*T,e[13]=(u*m*s-g*h*s+g*i*d-t*m*d-u*i*v+t*h*v)*T,e[14]=(g*a*s-o*m*s-g*i*l+t*m*l+o*i*v-t*a*v)*T,e[15]=(o*h*s-u*a*s+u*i*l-t*h*l-o*i*d+t*a*d)*T,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,u=o+o,h=a+a,d=r*c,f=r*u,g=r*h,m=o*u,v=o*h,p=a*h,y=l*c,_=l*u,x=l*h,E=i.x,w=i.y,T=i.z;return s[0]=(1-(m+p))*E,s[1]=(f+x)*E,s[2]=(g-_)*E,s[3]=0,s[4]=(f-x)*w,s[5]=(1-(d+p))*w,s[6]=(v+y)*w,s[7]=0,s[8]=(g+_)*T,s[9]=(v-y)*T,s[10]=(1-(d+m))*T,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Oc.set(s[0],s[1],s[2]).length();const o=Oc.set(s[4],s[5],s[6]).length(),a=Oc.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],pr.copy(this);const c=1/r,u=1/o,h=1/a;return pr.elements[0]*=c,pr.elements[1]*=c,pr.elements[2]*=c,pr.elements[4]*=u,pr.elements[5]*=u,pr.elements[6]*=u,pr.elements[8]*=h,pr.elements[9]*=h,pr.elements[10]*=h,t.setFromRotationMatrix(pr),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o,a=Ar){const l=this.elements,c=2*r/(t-e),u=2*r/(i-s),h=(t+e)/(t-e),d=(i+s)/(i-s);let f,g;if(a===Ar)f=-(o+r)/(o-r),g=-2*o*r/(o-r);else if(a===ch)f=-o/(o-r),g=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,o,a=Ar){const l=this.elements,c=1/(t-e),u=1/(i-s),h=1/(o-r),d=(t+e)*c,f=(i+s)*u;let g,m;if(a===Ar)g=(o+r)*h,m=-2*h;else if(a===ch)g=r*h,m=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=m,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Oc=new $,pr=new un,xG=new $(0,0,0),SG=new $(1,1,1),ta=new $,zp=new $,Ss=new $,GA=new un,WA=new Bf;class ur{constructor(e=0,t=0,i=0,s=ur.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],h=s[2],d=s[6],f=s[10];switch(t){case"XYZ":this._y=Math.asin(Li(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Li(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(Li(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-Li(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Li(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Li(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return GA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(GA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return WA.setFromEuler(this),this.setFromQuaternion(WA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ur.DEFAULT_ORDER="XYZ";class oI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let TG=0;const jA=new $,Uc=new Bf,go=new un,Bp=new $,Xh=new $,MG=new $,wG=new Bf,XA=new $(1,0,0),$A=new $(0,1,0),qA=new $(0,0,1),YA={type:"added"},EG={type:"removed"},Fc={type:"childadded",child:null},m_={type:"childremoved",child:null};class Zn extends ll{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:TG++}),this.uuid=Vo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zn.DEFAULT_UP.clone();const e=new $,t=new ur,i=new Bf,s=new $(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new un},normalMatrix:{value:new gt}}),this.matrix=new un,this.matrixWorld=new un,this.matrixAutoUpdate=Zn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new oI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Uc.setFromAxisAngle(e,t),this.quaternion.multiply(Uc),this}rotateOnWorldAxis(e,t){return Uc.setFromAxisAngle(e,t),this.quaternion.premultiply(Uc),this}rotateX(e){return this.rotateOnAxis(XA,e)}rotateY(e){return this.rotateOnAxis($A,e)}rotateZ(e){return this.rotateOnAxis(qA,e)}translateOnAxis(e,t){return jA.copy(e).applyQuaternion(this.quaternion),this.position.add(jA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XA,e)}translateY(e){return this.translateOnAxis($A,e)}translateZ(e){return this.translateOnAxis(qA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(go.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Bp.copy(e):Bp.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Xh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?go.lookAt(Xh,Bp,this.up):go.lookAt(Bp,Xh,this.up),this.quaternion.setFromRotationMatrix(go),s&&(go.extractRotation(s.matrixWorld),Uc.setFromRotationMatrix(go),this.quaternion.premultiply(Uc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(YA),Fc.child=e,this.dispatchEvent(Fc),Fc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(EG),m_.child=e,this.dispatchEvent(m_),m_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),go.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),go.multiply(e.parent.matrixWorld)),e.applyMatrix4(go),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(YA),Fc.child=e,this.dispatchEvent(Fc),Fc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xh,e,MG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xh,wG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const r=t[i];(r.matrixWorldAutoUpdate===!0||e===!0)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++){const a=s[r];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];r(e.shapes,h)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),g.length>0&&(i.nodes=g)}return i.object=s,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Zn.DEFAULT_UP=new $(0,1,0);Zn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const mr=new $,vo=new $,g_=new $,_o=new $,Vc=new $,kc=new $,KA=new $,v_=new $,__=new $,y_=new $;class qr{constructor(e=new $,t=new $,i=new $){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),mr.subVectors(e,t),s.cross(mr);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){mr.subVectors(s,t),vo.subVectors(i,t),g_.subVectors(e,t);const o=mr.dot(mr),a=mr.dot(vo),l=mr.dot(g_),c=vo.dot(vo),u=vo.dot(g_),h=o*c-a*a;if(h===0)return r.set(0,0,0),null;const d=1/h,f=(c*l-a*u)*d,g=(o*u-a*l)*d;return r.set(1-f-g,g,f)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,_o)===null?!1:_o.x>=0&&_o.y>=0&&_o.x+_o.y<=1}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,_o)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,_o.x),l.addScaledVector(o,_o.y),l.addScaledVector(a,_o.z),l)}static isFrontFacing(e,t,i,s){return mr.subVectors(i,t),vo.subVectors(e,t),mr.cross(vo).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mr.subVectors(this.c,this.b),vo.subVectors(this.a,this.b),mr.cross(vo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return qr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return qr.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return qr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;Vc.subVectors(s,i),kc.subVectors(r,i),v_.subVectors(e,i);const l=Vc.dot(v_),c=kc.dot(v_);if(l<=0&&c<=0)return t.copy(i);__.subVectors(e,s);const u=Vc.dot(__),h=kc.dot(__);if(u>=0&&h<=u)return t.copy(s);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Vc,o);y_.subVectors(e,r);const f=Vc.dot(y_),g=kc.dot(y_);if(g>=0&&f<=g)return t.copy(r);const m=f*c-l*g;if(m<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(kc,a);const v=u*g-f*h;if(v<=0&&h-u>=0&&f-g>=0)return KA.subVectors(r,s),a=(h-u)/(h-u+(f-g)),t.copy(s).addScaledVector(KA,a);const p=1/(v+m+d);return o=m*p,a=d*p,t.copy(i).addScaledVector(Vc,o).addScaledVector(kc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const aI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},na={h:0,s:0,l:0},Hp={h:0,s:0,l:0};function x_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class st{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=yr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Gt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Gt.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Gt.workingColorSpace){if(e=dT(e,1),t=Li(t,0,1),i=Li(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=x_(o,r,e+1/3),this.g=x_(o,r,e),this.b=x_(o,r,e-1/3)}return Gt.toWorkingColorSpace(this,s),this}setStyle(e,t=yr){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=yr){const i=aI[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Iu(e.r),this.g=Iu(e.g),this.b=Iu(e.b),this}copyLinearToSRGB(e){return this.r=a_(e.r),this.g=a_(e.g),this.b=a_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=yr){return Gt.fromWorkingColorSpace(Ni.copy(this),e),Math.round(Li(Ni.r*255,0,255))*65536+Math.round(Li(Ni.g*255,0,255))*256+Math.round(Li(Ni.b*255,0,255))}getHexString(e=yr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gt.workingColorSpace){Gt.fromWorkingColorSpace(Ni.copy(this),t);const i=Ni.r,s=Ni.g,r=Ni.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(s-r)/h+(s<r?6:0);break;case s:l=(r-i)/h+2;break;case r:l=(i-s)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Gt.workingColorSpace){return Gt.fromWorkingColorSpace(Ni.copy(this),t),e.r=Ni.r,e.g=Ni.g,e.b=Ni.b,e}getStyle(e=yr){Gt.fromWorkingColorSpace(Ni.copy(this),e);const t=Ni.r,i=Ni.g,s=Ni.b;return e!==yr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(na),this.setHSL(na.h+e,na.s+t,na.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(na),e.getHSL(Hp);const i=kd(na.h,Hp.h,t),s=kd(na.s,Hp.s,t),r=kd(na.l,Hp.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ni=new st;st.NAMES=aI;let AG=0;class zi extends ll{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:AG++}),this.uuid=Vo(),this.name="",this.type="Material",this.blending=Pu,this.side=Ka,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=kx,this.blendDst=zx,this.blendEquation=Dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new st(0,0,0),this.blendAlpha=0,this.depthFunc=Rg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=UA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rc,this.stencilZFail=Rc,this.stencilZPass=Rc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Pu&&(i.blending=this.blending),this.side!==Ka&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==kx&&(i.blendSrc=this.blendSrc),this.blendDst!==zx&&(i.blendDst=this.blendDst),this.blendEquation!==Dl&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Rg&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==UA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Rc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Rc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class gT extends zi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kn=new $,Gp=new Ye;class or{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Og,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Po,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return fT("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Gp.fromBufferAttribute(this,t),Gp.applyMatrix3(e),this.setXY(t,Gp.x,Gp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix3(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix4(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyNormalMatrix(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.transformDirection(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=wr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ht(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),s=Ht(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),s=Ht(s,this.array),r=Ht(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Og&&(e.usage=this.usage),e}}class lI extends or{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class cI extends or{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class ko extends or{constructor(e,t,i){super(new Float32Array(e),t,i)}}let NG=0;const Xs=new un,S_=new Zn,zc=new $,Ts=new Hf,$h=new Hf,ni=new $;class cl extends ll{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NG++}),this.uuid=Vo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sI(e)?cI:lI)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new gt().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xs.makeRotationFromQuaternion(e),this.applyMatrix4(Xs),this}rotateX(e){return Xs.makeRotationX(e),this.applyMatrix4(Xs),this}rotateY(e){return Xs.makeRotationY(e),this.applyMatrix4(Xs),this}rotateZ(e){return Xs.makeRotationZ(e),this.applyMatrix4(Xs),this}translate(e,t,i){return Xs.makeTranslation(e,t,i),this.applyMatrix4(Xs),this}scale(e,t,i){return Xs.makeScale(e,t,i),this.applyMatrix4(Xs),this}lookAt(e){return S_.lookAt(e),S_.updateMatrix(),this.applyMatrix4(S_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zc).negate(),this.translate(zc.x,zc.y,zc.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new ko(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];Ts.setFromBufferAttribute(r),this.morphTargetsRelative?(ni.addVectors(this.boundingBox.min,Ts.min),this.boundingBox.expandByPoint(ni),ni.addVectors(this.boundingBox.max,Ts.max),this.boundingBox.expandByPoint(ni)):(this.boundingBox.expandByPoint(Ts.min),this.boundingBox.expandByPoint(Ts.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new mT);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new $,1/0);return}if(e){const i=this.boundingSphere.center;if(Ts.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];$h.setFromBufferAttribute(a),this.morphTargetsRelative?(ni.addVectors(Ts.min,$h.min),Ts.expandByPoint(ni),ni.addVectors(Ts.max,$h.max),Ts.expandByPoint(ni)):(Ts.expandByPoint($h.min),Ts.expandByPoint($h.max))}Ts.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)ni.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(ni));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ni.fromBufferAttribute(a,c),l&&(zc.fromBufferAttribute(e,c),ni.add(zc)),s=Math.max(s,i.distanceToSquared(ni))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new or(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let A=0;A<i.count;A++)a[A]=new $,l[A]=new $;const c=new $,u=new $,h=new $,d=new Ye,f=new Ye,g=new Ye,m=new $,v=new $;function p(A,M,S){c.fromBufferAttribute(i,A),u.fromBufferAttribute(i,M),h.fromBufferAttribute(i,S),d.fromBufferAttribute(r,A),f.fromBufferAttribute(r,M),g.fromBufferAttribute(r,S),u.sub(c),h.sub(c),f.sub(d),g.sub(d);const P=1/(f.x*g.y-g.x*f.y);isFinite(P)&&(m.copy(u).multiplyScalar(g.y).addScaledVector(h,-f.y).multiplyScalar(P),v.copy(h).multiplyScalar(f.x).addScaledVector(u,-g.x).multiplyScalar(P),a[A].add(m),a[M].add(m),a[S].add(m),l[A].add(v),l[M].add(v),l[S].add(v))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let A=0,M=y.length;A<M;++A){const S=y[A],P=S.start,F=S.count;for(let H=P,ee=P+F;H<ee;H+=3)p(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const _=new $,x=new $,E=new $,w=new $;function T(A){E.fromBufferAttribute(s,A),w.copy(E);const M=a[A];_.copy(M),_.sub(E.multiplyScalar(E.dot(M))).normalize(),x.crossVectors(w,M);const P=x.dot(l[A])<0?-1:1;o.setXYZW(A,_.x,_.y,_.z,P)}for(let A=0,M=y.length;A<M;++A){const S=y[A],P=S.start,F=S.count;for(let H=P,ee=P+F;H<ee;H+=3)T(e.getX(H+0)),T(e.getX(H+1)),T(e.getX(H+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new or(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const s=new $,r=new $,o=new $,a=new $,l=new $,c=new $,u=new $,h=new $;if(e)for(let d=0,f=e.count;d<f;d+=3){const g=e.getX(d+0),m=e.getX(d+1),v=e.getX(d+2);s.fromBufferAttribute(t,g),r.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,v),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)s.fromBufferAttribute(t,d+0),r.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ni.fromBufferAttribute(e,t),ni.normalize(),e.setXYZ(t,ni.x,ni.y,ni.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,g=0;for(let m=0,v=l.length;m<v;m++){a.isInterleavedBufferAttribute?f=l[m]*a.data.stride+a.offset:f=l[m]*u;for(let p=0;p<u;p++)d[g++]=c[f++]}return new or(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new cl,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,i);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],h=r[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ZA=new un,gl=new yG,Wp=new mT,QA=new $,Bc=new $,Hc=new $,Gc=new $,T_=new $,jp=new $,Xp=new Ye,$p=new Ye,qp=new Ye,JA=new $,eN=new $,tN=new $,Yp=new $,Kp=new $;class Nr extends Zn{constructor(e=new cl,t=new gT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){jp.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=a[l],h=r[l];u!==0&&(T_.fromBufferAttribute(h,e),o?jp.addScaledVector(T_,u):jp.addScaledVector(T_.sub(t),u))}t.add(jp)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Wp.copy(i.boundingSphere),Wp.applyMatrix4(r),gl.copy(e.ray).recast(e.near),!(Wp.containsPoint(gl.origin)===!1&&(gl.intersectSphere(Wp,QA)===null||gl.origin.distanceToSquared(QA)>(e.far-e.near)**2))&&(ZA.copy(r).invert(),gl.copy(e.ray).applyMatrix4(ZA),!(i.boundingBox!==null&&gl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,gl)))}_computeIntersections(e,t,i){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,h=r.attributes.normal,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,m=d.length;g<m;g++){const v=d[g],p=o[v.materialIndex],y=Math.max(v.start,f.start),_=Math.min(a.count,Math.min(v.start+v.count,f.start+f.count));for(let x=y,E=_;x<E;x+=3){const w=a.getX(x),T=a.getX(x+1),A=a.getX(x+2);s=Zp(this,p,e,i,c,u,h,w,T,A),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const g=Math.max(0,f.start),m=Math.min(a.count,f.start+f.count);for(let v=g,p=m;v<p;v+=3){const y=a.getX(v),_=a.getX(v+1),x=a.getX(v+2);s=Zp(this,o,e,i,c,u,h,y,_,x),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,m=d.length;g<m;g++){const v=d[g],p=o[v.materialIndex],y=Math.max(v.start,f.start),_=Math.min(l.count,Math.min(v.start+v.count,f.start+f.count));for(let x=y,E=_;x<E;x+=3){const w=x,T=x+1,A=x+2;s=Zp(this,p,e,i,c,u,h,w,T,A),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const g=Math.max(0,f.start),m=Math.min(l.count,f.start+f.count);for(let v=g,p=m;v<p;v+=3){const y=v,_=v+1,x=v+2;s=Zp(this,o,e,i,c,u,h,y,_,x),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}}function CG(n,e,t,i,s,r,o,a){let l;if(e.side===ts?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side===Ka,a),l===null)return null;Kp.copy(a),Kp.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Kp);return c<t.near||c>t.far?null:{distance:c,point:Kp.clone(),object:n}}function Zp(n,e,t,i,s,r,o,a,l,c){n.getVertexPosition(a,Bc),n.getVertexPosition(l,Hc),n.getVertexPosition(c,Gc);const u=CG(n,e,t,i,Bc,Hc,Gc,Yp);if(u){s&&(Xp.fromBufferAttribute(s,a),$p.fromBufferAttribute(s,l),qp.fromBufferAttribute(s,c),u.uv=qr.getInterpolation(Yp,Bc,Hc,Gc,Xp,$p,qp,new Ye)),r&&(Xp.fromBufferAttribute(r,a),$p.fromBufferAttribute(r,l),qp.fromBufferAttribute(r,c),u.uv1=qr.getInterpolation(Yp,Bc,Hc,Gc,Xp,$p,qp,new Ye)),o&&(JA.fromBufferAttribute(o,a),eN.fromBufferAttribute(o,l),tN.fromBufferAttribute(o,c),u.normal=qr.getInterpolation(Yp,Bc,Hc,Gc,JA,eN,tN,new $),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new $,materialIndex:0};qr.getNormal(Bc,Hc,Gc,h.normal),u.face=h}return u}class Gf extends cl{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;g("z","y","x",-1,-1,i,t,e,o,r,0),g("z","y","x",1,-1,i,t,-e,o,r,1),g("x","z","y",1,1,e,i,t,s,o,2),g("x","z","y",1,-1,e,i,-t,s,o,3),g("x","y","z",1,-1,e,t,i,s,r,4),g("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new ko(c,3)),this.setAttribute("normal",new ko(u,3)),this.setAttribute("uv",new ko(h,2));function g(m,v,p,y,_,x,E,w,T,A,M){const S=x/T,P=E/A,F=x/2,H=E/2,ee=w/2,K=T+1,j=A+1;let Z=0,D=0;const ie=new $;for(let R=0;R<j;R++){const ce=R*P-H;for(let Pe=0;Pe<K;Pe++){const ut=Pe*S-F;ie[m]=ut*y,ie[v]=ce*_,ie[p]=ee,c.push(ie.x,ie.y,ie.z),ie[m]=0,ie[v]=0,ie[p]=w>0?1:-1,u.push(ie.x,ie.y,ie.z),h.push(Pe/T),h.push(1-R/A),Z+=1}}for(let R=0;R<A;R++)for(let ce=0;ce<T;ce++){const Pe=d+ce+K*R,ut=d+ce+K*(R+1),te=d+(ce+1)+K*(R+1),he=d+(ce+1)+K*R;l.push(Pe,ut,he),l.push(ut,te,he),D+=6}a.addGroup(f,D,M),f+=D,d+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function ji(n){const e={};for(let t=0;t<n.length;t++){const i=hh(n[t]);for(const s in i)e[s]=i[s]}return e}function bG(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function uI(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Gt.workingColorSpace}const RG={clone:hh,merge:ji};var PG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,LG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class qo extends zi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=PG,this.fragmentShader=LG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hh(e.uniforms),this.uniformsGroups=bG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class hI extends Zn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new un,this.projectionMatrix=new un,this.projectionMatrixInverse=new un,this.coordinateSystem=Ar}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ia=new $,nN=new Ye,iN=new Ye;class as extends hI{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uh*2*Math.atan(Math.tan(Vd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ia.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ia.x,ia.y).multiplyScalar(-e/ia.z),ia.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ia.x,ia.y).multiplyScalar(-e/ia.z)}getViewSize(e,t){return this.getViewBounds(e,nN,iN),t.subVectors(iN,nN)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Vd*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Wc=-90,jc=1;class IG extends Zn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new as(Wc,jc,e,t);s.layers=this.layers,this.add(s);const r=new as(Wc,jc,e,t);r.layers=this.layers,this.add(r);const o=new as(Wc,jc,e,t);o.layers=this.layers,this.add(o);const a=new as(Wc,jc,e,t);a.layers=this.layers,this.add(a);const l=new as(Wc,jc,e,t);l.layers=this.layers,this.add(l);const c=new as(Wc,jc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ar)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ch)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,o),e.setRenderTarget(i,2,s),e.render(t,a),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,c),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,s),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class dI extends Vi{constructor(e,t,i,s,r,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:sh,super(e,t,i,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class DG extends hc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new dI(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Mr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Gf(5,5,5),r=new qo({name:"CubemapFromEquirect",uniforms:hh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ts,blending:Ba});r.uniforms.tEquirect.value=t;const o=new Nr(s,r),a=t.minFilter;return t.minFilter===Ma&&(t.minFilter=Mr),new IG(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}const M_=new $,OG=new $,UG=new gt;class ua{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=M_.subVectors(i,t).cross(OG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(M_),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||UG.getNormalMatrix(e),s=this.coplanarPoint(M_).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vl=new mT,Qp=new $;class vT{constructor(e=new ua,t=new ua,i=new ua,s=new ua,r=new ua,o=new ua){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ar){const i=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],h=s[6],d=s[7],f=s[8],g=s[9],m=s[10],v=s[11],p=s[12],y=s[13],_=s[14],x=s[15];if(i[0].setComponents(l-r,d-c,v-f,x-p).normalize(),i[1].setComponents(l+r,d+c,v+f,x+p).normalize(),i[2].setComponents(l+o,d+u,v+g,x+y).normalize(),i[3].setComponents(l-o,d-u,v-g,x-y).normalize(),i[4].setComponents(l-a,d-h,v-m,x-_).normalize(),t===Ar)i[5].setComponents(l+a,d+h,v+m,x+_).normalize();else if(t===ch)i[5].setComponents(a,h,m,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),vl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vl)}intersectsSprite(e){return vl.center.set(0,0,0),vl.radius=.7071067811865476,vl.applyMatrix4(e.matrixWorld),this.intersectsSphere(vl)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Qp.x=s.normal.x>0?e.max.x:e.min.x,Qp.y=s.normal.y>0?e.max.y:e.min.y,Qp.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Qp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function fI(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function FG(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,c){const u=l.array,h=l._updateRange,d=l.updateRanges;if(n.bindBuffer(c,a),h.count===-1&&d.length===0&&n.bufferSubData(c,0,u),d.length!==0){for(let f=0,g=d.length;f<g;f++){const m=d[f];n.bufferSubData(c,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}l.clearUpdateRanges()}h.count!==-1&&(n.bufferSubData(c,h.offset*u.BYTES_PER_ELEMENT,u,h.offset,h.count),h.count=-1),l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function r(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:s,remove:r,update:o}}class Wf extends cl{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),c=a+1,u=l+1,h=e/a,d=t/l,f=[],g=[],m=[],v=[];for(let p=0;p<u;p++){const y=p*d-o;for(let _=0;_<c;_++){const x=_*h-r;g.push(x,-y,0),m.push(0,0,1),v.push(_/a),v.push(1-p/l)}}for(let p=0;p<l;p++)for(let y=0;y<a;y++){const _=y+c*p,x=y+c*(p+1),E=y+1+c*(p+1),w=y+1+c*p;f.push(_,x,w),f.push(x,E,w)}this.setIndex(f),this.setAttribute("position",new ko(g,3)),this.setAttribute("normal",new ko(m,3)),this.setAttribute("uv",new ko(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.width,e.height,e.widthSegments,e.heightSegments)}}var VG=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kG=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,BG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,HG=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,GG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,WG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,jG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,XG=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,$G=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,qG=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,YG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,KG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ZG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,QG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,JG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,e9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,t9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,n9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,i9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,s9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,r9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,o9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,a9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,l9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,c9=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,u9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,h9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,d9=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,f9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,p9="gl_FragColor = linearToOutputTexel( gl_FragColor );",m9=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,g9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,v9=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,y9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,x9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,S9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,T9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,M9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,w9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,E9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,A9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,N9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,C9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,b9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,R9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,P9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,L9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,I9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,D9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,O9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,U9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,F9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,V9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,k9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,z9=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,B9=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,H9=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,G9=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,W9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,j9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,X9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,q9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Y9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,K9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Z9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Q9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,J9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,eW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,nW=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,iW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,oW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,aW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,uW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,hW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,fW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,gW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_W=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,yW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,xW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,SW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,TW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,MW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,wW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,EW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,NW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,CW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,bW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,RW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,LW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,IW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,DW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,OW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,UW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const FW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,VW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,WW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,jW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,XW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$W=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,KW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,QW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,n7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,s7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,r7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,l7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,d7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,f7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,m7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,g7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_t={alphahash_fragment:VG,alphahash_pars_fragment:kG,alphamap_fragment:zG,alphamap_pars_fragment:BG,alphatest_fragment:HG,alphatest_pars_fragment:GG,aomap_fragment:WG,aomap_pars_fragment:jG,batching_pars_vertex:XG,batching_vertex:$G,begin_vertex:qG,beginnormal_vertex:YG,bsdfs:KG,iridescence_fragment:ZG,bumpmap_pars_fragment:QG,clipping_planes_fragment:JG,clipping_planes_pars_fragment:e9,clipping_planes_pars_vertex:t9,clipping_planes_vertex:n9,color_fragment:i9,color_pars_fragment:s9,color_pars_vertex:r9,color_vertex:o9,common:a9,cube_uv_reflection_fragment:l9,defaultnormal_vertex:c9,displacementmap_pars_vertex:u9,displacementmap_vertex:h9,emissivemap_fragment:d9,emissivemap_pars_fragment:f9,colorspace_fragment:p9,colorspace_pars_fragment:m9,envmap_fragment:g9,envmap_common_pars_fragment:v9,envmap_pars_fragment:_9,envmap_pars_vertex:y9,envmap_physical_pars_fragment:R9,envmap_vertex:x9,fog_vertex:S9,fog_pars_vertex:T9,fog_fragment:M9,fog_pars_fragment:w9,gradientmap_pars_fragment:E9,lightmap_pars_fragment:A9,lights_lambert_fragment:N9,lights_lambert_pars_fragment:C9,lights_pars_begin:b9,lights_toon_fragment:P9,lights_toon_pars_fragment:L9,lights_phong_fragment:I9,lights_phong_pars_fragment:D9,lights_physical_fragment:O9,lights_physical_pars_fragment:U9,lights_fragment_begin:F9,lights_fragment_maps:V9,lights_fragment_end:k9,logdepthbuf_fragment:z9,logdepthbuf_pars_fragment:B9,logdepthbuf_pars_vertex:H9,logdepthbuf_vertex:G9,map_fragment:W9,map_pars_fragment:j9,map_particle_fragment:X9,map_particle_pars_fragment:$9,metalnessmap_fragment:q9,metalnessmap_pars_fragment:Y9,morphinstance_vertex:K9,morphcolor_vertex:Z9,morphnormal_vertex:Q9,morphtarget_pars_vertex:J9,morphtarget_vertex:eW,normal_fragment_begin:tW,normal_fragment_maps:nW,normal_pars_fragment:iW,normal_pars_vertex:sW,normal_vertex:rW,normalmap_pars_fragment:oW,clearcoat_normal_fragment_begin:aW,clearcoat_normal_fragment_maps:lW,clearcoat_pars_fragment:cW,iridescence_pars_fragment:uW,opaque_fragment:hW,packing:dW,premultiplied_alpha_fragment:fW,project_vertex:pW,dithering_fragment:mW,dithering_pars_fragment:gW,roughnessmap_fragment:vW,roughnessmap_pars_fragment:_W,shadowmap_pars_fragment:yW,shadowmap_pars_vertex:xW,shadowmap_vertex:SW,shadowmask_pars_fragment:TW,skinbase_vertex:MW,skinning_pars_vertex:wW,skinning_vertex:EW,skinnormal_vertex:AW,specularmap_fragment:NW,specularmap_pars_fragment:CW,tonemapping_fragment:bW,tonemapping_pars_fragment:RW,transmission_fragment:PW,transmission_pars_fragment:LW,uv_pars_fragment:IW,uv_pars_vertex:DW,uv_vertex:OW,worldpos_vertex:UW,background_vert:FW,background_frag:VW,backgroundCube_vert:kW,backgroundCube_frag:zW,cube_vert:BW,cube_frag:HW,depth_vert:GW,depth_frag:WW,distanceRGBA_vert:jW,distanceRGBA_frag:XW,equirect_vert:$W,equirect_frag:qW,linedashed_vert:YW,linedashed_frag:KW,meshbasic_vert:ZW,meshbasic_frag:QW,meshlambert_vert:JW,meshlambert_frag:e7,meshmatcap_vert:t7,meshmatcap_frag:n7,meshnormal_vert:i7,meshnormal_frag:s7,meshphong_vert:r7,meshphong_frag:o7,meshphysical_vert:a7,meshphysical_frag:l7,meshtoon_vert:c7,meshtoon_frag:u7,points_vert:h7,points_frag:d7,shadow_vert:f7,shadow_frag:p7,sprite_vert:m7,sprite_frag:g7},be={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gt}},envmap:{envMap:{value:null},envMapRotation:{value:new gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gt},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0},uvTransform:{value:new gt}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}}},Gr={basic:{uniforms:ji([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.fog]),vertexShader:_t.meshbasic_vert,fragmentShader:_t.meshbasic_frag},lambert:{uniforms:ji([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new st(0)}}]),vertexShader:_t.meshlambert_vert,fragmentShader:_t.meshlambert_frag},phong:{uniforms:ji([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:_t.meshphong_vert,fragmentShader:_t.meshphong_frag},standard:{uniforms:ji([be.common,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.roughnessmap,be.metalnessmap,be.fog,be.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag},toon:{uniforms:ji([be.common,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.gradientmap,be.fog,be.lights,{emissive:{value:new st(0)}}]),vertexShader:_t.meshtoon_vert,fragmentShader:_t.meshtoon_frag},matcap:{uniforms:ji([be.common,be.bumpmap,be.normalmap,be.displacementmap,be.fog,{matcap:{value:null}}]),vertexShader:_t.meshmatcap_vert,fragmentShader:_t.meshmatcap_frag},points:{uniforms:ji([be.points,be.fog]),vertexShader:_t.points_vert,fragmentShader:_t.points_frag},dashed:{uniforms:ji([be.common,be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_t.linedashed_vert,fragmentShader:_t.linedashed_frag},depth:{uniforms:ji([be.common,be.displacementmap]),vertexShader:_t.depth_vert,fragmentShader:_t.depth_frag},normal:{uniforms:ji([be.common,be.bumpmap,be.normalmap,be.displacementmap,{opacity:{value:1}}]),vertexShader:_t.meshnormal_vert,fragmentShader:_t.meshnormal_frag},sprite:{uniforms:ji([be.sprite,be.fog]),vertexShader:_t.sprite_vert,fragmentShader:_t.sprite_frag},background:{uniforms:{uvTransform:{value:new gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_t.background_vert,fragmentShader:_t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gt}},vertexShader:_t.backgroundCube_vert,fragmentShader:_t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_t.cube_vert,fragmentShader:_t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_t.equirect_vert,fragmentShader:_t.equirect_frag},distanceRGBA:{uniforms:ji([be.common,be.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_t.distanceRGBA_vert,fragmentShader:_t.distanceRGBA_frag},shadow:{uniforms:ji([be.lights,be.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:_t.shadow_vert,fragmentShader:_t.shadow_frag}};Gr.physical={uniforms:ji([Gr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gt},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gt},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gt},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gt},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gt},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gt}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag};const Jp={r:0,b:0,g:0},_l=new ur,v7=new un;function _7(n,e,t,i,s,r,o){const a=new st(0);let l=r===!0?0:1,c,u,h=null,d=0,f=null;function g(y){let _=y.isScene===!0?y.background:null;return _&&_.isTexture&&(_=(y.backgroundBlurriness>0?t:e).get(_)),_}function m(y){let _=!1;const x=g(y);x===null?p(a,l):x&&x.isColor&&(p(x,1),_=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||_)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(y,_){const x=g(_);x&&(x.isCubeTexture||x.mapping===b0)?(u===void 0&&(u=new Nr(new Gf(1,1,1),new qo({name:"BackgroundCubeMaterial",uniforms:hh(Gr.backgroundCube.uniforms),vertexShader:Gr.backgroundCube.vertexShader,fragmentShader:Gr.backgroundCube.fragmentShader,side:ts,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(E,w,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),_l.copy(_.backgroundRotation),_l.x*=-1,_l.y*=-1,_l.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(_l.y*=-1,_l.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(v7.makeRotationFromEuler(_l)),u.material.toneMapped=Gt.getTransfer(x.colorSpace)!==an,(h!==x||d!==x.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Nr(new Wf(2,2),new qo({name:"BackgroundMaterial",uniforms:hh(Gr.background.uniforms),vertexShader:Gr.background.vertexShader,fragmentShader:Gr.background.fragmentShader,side:Ka,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=Gt.getTransfer(x.colorSpace)!==an,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||d!==x.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function p(y,_){y.getRGB(Jp,uI(n)),i.buffers.color.setClear(Jp.r,Jp.g,Jp.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(y,_=1){a.set(y),l=_,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,p(a,l)},render:m,addToRenderList:v}}function y7(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=d(null);let r=s,o=!1;function a(S,P,F,H,ee){let K=!1;const j=h(H,F,P);r!==j&&(r=j,c(r.object)),K=f(S,H,F,ee),K&&g(S,H,F,ee),ee!==null&&e.update(ee,n.ELEMENT_ARRAY_BUFFER),(K||o)&&(o=!1,x(S,P,F,H),ee!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function l(){return n.createVertexArray()}function c(S){return n.bindVertexArray(S)}function u(S){return n.deleteVertexArray(S)}function h(S,P,F){const H=F.wireframe===!0;let ee=i[S.id];ee===void 0&&(ee={},i[S.id]=ee);let K=ee[P.id];K===void 0&&(K={},ee[P.id]=K);let j=K[H];return j===void 0&&(j=d(l()),K[H]=j),j}function d(S){const P=[],F=[],H=[];for(let ee=0;ee<t;ee++)P[ee]=0,F[ee]=0,H[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:F,attributeDivisors:H,object:S,attributes:{},index:null}}function f(S,P,F,H){const ee=r.attributes,K=P.attributes;let j=0;const Z=F.getAttributes();for(const D in Z)if(Z[D].location>=0){const R=ee[D];let ce=K[D];if(ce===void 0&&(D==="instanceMatrix"&&S.instanceMatrix&&(ce=S.instanceMatrix),D==="instanceColor"&&S.instanceColor&&(ce=S.instanceColor)),R===void 0||R.attribute!==ce||ce&&R.data!==ce.data)return!0;j++}return r.attributesNum!==j||r.index!==H}function g(S,P,F,H){const ee={},K=P.attributes;let j=0;const Z=F.getAttributes();for(const D in Z)if(Z[D].location>=0){let R=K[D];R===void 0&&(D==="instanceMatrix"&&S.instanceMatrix&&(R=S.instanceMatrix),D==="instanceColor"&&S.instanceColor&&(R=S.instanceColor));const ce={};ce.attribute=R,R&&R.data&&(ce.data=R.data),ee[D]=ce,j++}r.attributes=ee,r.attributesNum=j,r.index=H}function m(){const S=r.newAttributes;for(let P=0,F=S.length;P<F;P++)S[P]=0}function v(S){p(S,0)}function p(S,P){const F=r.newAttributes,H=r.enabledAttributes,ee=r.attributeDivisors;F[S]=1,H[S]===0&&(n.enableVertexAttribArray(S),H[S]=1),ee[S]!==P&&(n.vertexAttribDivisor(S,P),ee[S]=P)}function y(){const S=r.newAttributes,P=r.enabledAttributes;for(let F=0,H=P.length;F<H;F++)P[F]!==S[F]&&(n.disableVertexAttribArray(F),P[F]=0)}function _(S,P,F,H,ee,K,j){j===!0?n.vertexAttribIPointer(S,P,F,ee,K):n.vertexAttribPointer(S,P,F,H,ee,K)}function x(S,P,F,H){m();const ee=H.attributes,K=F.getAttributes(),j=P.defaultAttributeValues;for(const Z in K){const D=K[Z];if(D.location>=0){let ie=ee[Z];if(ie===void 0&&(Z==="instanceMatrix"&&S.instanceMatrix&&(ie=S.instanceMatrix),Z==="instanceColor"&&S.instanceColor&&(ie=S.instanceColor)),ie!==void 0){const R=ie.normalized,ce=ie.itemSize,Pe=e.get(ie);if(Pe===void 0)continue;const ut=Pe.buffer,te=Pe.type,he=Pe.bytesPerElement,Te=te===n.INT||te===n.UNSIGNED_INT||ie.gpuType===qL;if(ie.isInterleavedBufferAttribute){const ge=ie.data,Qe=ge.stride,qe=ie.offset;if(ge.isInstancedInterleavedBuffer){for(let pt=0;pt<D.locationSize;pt++)p(D.location+pt,ge.meshPerAttribute);S.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let pt=0;pt<D.locationSize;pt++)v(D.location+pt);n.bindBuffer(n.ARRAY_BUFFER,ut);for(let pt=0;pt<D.locationSize;pt++)_(D.location+pt,ce/D.locationSize,te,R,Qe*he,(qe+ce/D.locationSize*pt)*he,Te)}else{if(ie.isInstancedBufferAttribute){for(let ge=0;ge<D.locationSize;ge++)p(D.location+ge,ie.meshPerAttribute);S.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let ge=0;ge<D.locationSize;ge++)v(D.location+ge);n.bindBuffer(n.ARRAY_BUFFER,ut);for(let ge=0;ge<D.locationSize;ge++)_(D.location+ge,ce/D.locationSize,te,R,ce*he,ce/D.locationSize*ge*he,Te)}}else if(j!==void 0){const R=j[Z];if(R!==void 0)switch(R.length){case 2:n.vertexAttrib2fv(D.location,R);break;case 3:n.vertexAttrib3fv(D.location,R);break;case 4:n.vertexAttrib4fv(D.location,R);break;default:n.vertexAttrib1fv(D.location,R)}}}}y()}function E(){A();for(const S in i){const P=i[S];for(const F in P){const H=P[F];for(const ee in H)u(H[ee].object),delete H[ee];delete P[F]}delete i[S]}}function w(S){if(i[S.id]===void 0)return;const P=i[S.id];for(const F in P){const H=P[F];for(const ee in H)u(H[ee].object),delete H[ee];delete P[F]}delete i[S.id]}function T(S){for(const P in i){const F=i[P];if(F[S.id]===void 0)continue;const H=F[S.id];for(const ee in H)u(H[ee].object),delete H[ee];delete F[S.id]}}function A(){M(),o=!0,r!==s&&(r=s,c(r.object))}function M(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:A,resetDefaultState:M,dispose:E,releaseStatesOfGeometry:w,releaseStatesOfProgram:T,initAttributes:m,enableAttribute:v,disableUnusedAttributes:y}}function x7(n,e,t){let i;function s(c){i=c}function r(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(i,c,u,h),t.update(u,i,h))}function a(c,u,h){if(h===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let f=0;f<h;f++)this.render(c[f],u[f]);else{d.multiDrawArraysWEBGL(i,c,0,u,0,h);let f=0;for(let g=0;g<h;g++)f+=u[g];t.update(f,i,1)}}function l(c,u,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let g=0;g<c.length;g++)o(c[g],u[g],d[g]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,d,0,h);let g=0;for(let m=0;m<h;m++)g+=u[m];for(let m=0;m<d.length;m++)t.update(g,i,d[m])}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function S7(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const w=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(w){return!(w!==Qr&&i.convert(w)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(w){const T=w===zf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(w!==Za&&i.convert(w)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&w!==Po&&!T)}function l(w){if(w==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return w==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),p=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,E=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:f,maxTextureSize:g,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:p,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:x,maxSamples:E}}function T7(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new ua,a=new gt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||i!==0||s;return s=d,i=h.length,f},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const g=h.clippingPlanes,m=h.clipIntersection,v=h.clipShadows,p=n.get(h);if(!s||g===null||g.length===0||r&&!v)r?u(null):c();else{const y=r?0:i,_=y*4;let x=p.clippingState||null;l.value=x,x=u(g,d,_,f);for(let E=0;E!==_;++E)x[E]=t[E];p.clippingState=x,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,d,f,g){const m=h!==null?h.length:0;let v=null;if(m!==0){if(v=l.value,g!==!0||v===null){const p=f+m*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(v===null||v.length<p)&&(v=new Float32Array(p));for(let _=0,x=f;_!==m;++_,x+=4)o.copy(h[_]).applyMatrix4(y,a),o.normal.toArray(v,x),v[x+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function M7(n){let e=new WeakMap;function t(o,a){return a===Bx?o.mapping=sh:a===Hx&&(o.mapping=rh),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Bx||a===Hx)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new DG(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}class _T extends hI{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const pu=4,sN=[.125,.215,.35,.446,.526,.582],Ol=20,w_=new _T,rN=new st;let E_=null,A_=0,N_=0,C_=!1;const Ll=(1+Math.sqrt(5))/2,Xc=1/Ll,oN=[new $(-Ll,Xc,0),new $(Ll,Xc,0),new $(-Xc,0,Ll),new $(Xc,0,Ll),new $(0,Ll,-Xc),new $(0,Ll,Xc),new $(-1,1,-1),new $(1,1,-1),new $(-1,1,1),new $(1,1,1)];class aN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){E_=this._renderer.getRenderTarget(),A_=this._renderer.getActiveCubeFace(),N_=this._renderer.getActiveMipmapLevel(),C_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(E_,A_,N_),this._renderer.xr.enabled=C_,e.scissorTest=!1,em(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===sh||e.mapping===rh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),E_=this._renderer.getRenderTarget(),A_=this._renderer.getActiveCubeFace(),N_=this._renderer.getActiveMipmapLevel(),C_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Mr,minFilter:Mr,generateMipmaps:!1,type:zf,format:Qr,colorSpace:Fr,depthBuffer:!1},s=lN(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lN(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=w7(r)),this._blurMaterial=E7(r,e,t)}return s}_compileMaterial(e){const t=new Nr(this._lodPlanes[0],e);this._renderer.compile(t,w_)}_sceneToCubeUV(e,t,i,s){const a=new as(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(rN),u.toneMapping=Us,u.autoClear=!1;const f=new gT({name:"PMREM.Background",side:ts,depthWrite:!1,depthTest:!1}),g=new Nr(new Gf,f);let m=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,m=!0):(f.color.copy(rN),m=!0);for(let p=0;p<6;p++){const y=p%3;y===0?(a.up.set(0,l[p],0),a.lookAt(c[p],0,0)):y===1?(a.up.set(0,0,l[p]),a.lookAt(0,c[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,c[p]));const _=this._cubeSize;em(s,y*_,p>2?_:0,_,_),u.setRenderTarget(s),m&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===sh||e.mapping===rh;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=uN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cN());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Nr(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;em(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,w_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=oN[(s-r-1)%oN.length];this._blur(e,r-1,r,o,a)}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Nr(this._lodPlanes[s],c),d=c.uniforms,f=this._sizeLods[i]-1,g=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*Ol-1),m=r/g,v=isFinite(r)?1+Math.floor(u*m):Ol;v>Ol&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Ol}`);const p=[];let y=0;for(let T=0;T<Ol;++T){const A=T/m,M=Math.exp(-A*A/2);p.push(M),T===0?y+=M:T<v&&(y+=2*M)}for(let T=0;T<p.length;T++)p[T]=p[T]/y;d.envMap.value=e.texture,d.samples.value=v,d.weights.value=p,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:_}=this;d.dTheta.value=g,d.mipInt.value=_-i;const x=this._sizeLods[s],E=3*x*(s>_-pu?s-_+pu:0),w=4*(this._cubeSize-x);em(t,E,w,3*x,2*x),l.setRenderTarget(t),l.render(h,w_)}}function w7(n){const e=[],t=[],i=[];let s=n;const r=n-pu+1+sN.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-pu?l=sN[o-n+pu-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,g=6,m=3,v=2,p=1,y=new Float32Array(m*g*f),_=new Float32Array(v*g*f),x=new Float32Array(p*g*f);for(let w=0;w<f;w++){const T=w%3*2/3-1,A=w>2?0:-1,M=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];y.set(M,m*g*w),_.set(d,v*g*w);const S=[w,w,w,w,w,w];x.set(S,p*g*w)}const E=new cl;E.setAttribute("position",new or(y,m)),E.setAttribute("uv",new or(_,v)),E.setAttribute("faceIndex",new or(x,p)),e.push(E),s>pu&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function lN(n,e,t){const i=new hc(n,e,t);return i.texture.mapping=b0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function em(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function E7(n,e,t){const i=new Float32Array(Ol),s=new $(0,1,0);return new qo({name:"SphericalGaussianBlur",defines:{n:Ol,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:yT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function cN(){return new qo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function uN(){return new qo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function yT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function A7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Bx||l===Hx,u=l===sh||l===rh;if(c||u){let h=e.get(a);const d=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new aN(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&s(f)?(t===null&&(t=new aN(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",r),h.texture):null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function N7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&fT("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function C7(n,e,t,i){const s={},r=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);for(const g in d.morphAttributes){const m=d.morphAttributes[g];for(let v=0,p=m.length;v<p;v++)e.remove(m[v])}d.removeEventListener("dispose",o),delete s[d.id];const f=r.get(d);f&&(e.remove(f),r.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return s[d.id]===!0||(d.addEventListener("dispose",o),s[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const g in d)e.update(d[g],n.ARRAY_BUFFER);const f=h.morphAttributes;for(const g in f){const m=f[g];for(let v=0,p=m.length;v<p;v++)e.update(m[v],n.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,g=h.attributes.position;let m=0;if(f!==null){const y=f.array;m=f.version;for(let _=0,x=y.length;_<x;_+=3){const E=y[_+0],w=y[_+1],T=y[_+2];d.push(E,w,w,T,T,E)}}else if(g!==void 0){const y=g.array;m=g.version;for(let _=0,x=y.length/3-1;_<x;_+=3){const E=_+0,w=_+1,T=_+2;d.push(E,w,w,T,T,E)}}else return;const v=new(sI(d)?cI:lI)(d,1);v.version=m;const p=r.get(h);p&&e.remove(p),r.set(h,v)}function u(h){const d=r.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return r.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function b7(n,e,t){let i;function s(d){i=d}let r,o;function a(d){r=d.type,o=d.bytesPerElement}function l(d,f){n.drawElements(i,f,r,d*o),t.update(f,i,1)}function c(d,f,g){g!==0&&(n.drawElementsInstanced(i,f,r,d*o,g),t.update(f,i,g))}function u(d,f,g){if(g===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<g;v++)this.render(d[v]/o,f[v]);else{m.multiDrawElementsWEBGL(i,f,0,r,d,0,g);let v=0;for(let p=0;p<g;p++)v+=f[p];t.update(v,i,1)}}function h(d,f,g,m){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let p=0;p<d.length;p++)c(d[p]/o,f[p],m[p]);else{v.multiDrawElementsInstancedWEBGL(i,f,0,r,d,0,m,0,g);let p=0;for(let y=0;y<g;y++)p+=f[y];for(let y=0;y<m.length;y++)t.update(p,i,m[y])}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function R7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function P7(n,e,t){const i=new WeakMap,s=new Dt;function r(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let d=i.get(a);if(d===void 0||d.count!==h){let S=function(){A.dispose(),i.delete(a),a.removeEventListener("dispose",S)};var f=S;d!==void 0&&d.texture.dispose();const g=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,p=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],_=a.morphAttributes.color||[];let x=0;g===!0&&(x=1),m===!0&&(x=2),v===!0&&(x=3);let E=a.attributes.position.count*x,w=1;E>e.maxTextureSize&&(w=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*w*4*h),A=new pT(T,E,w,h);A.type=Po,A.needsUpdate=!0;const M=x*4;for(let P=0;P<h;P++){const F=p[P],H=y[P],ee=_[P],K=E*w*4*P;for(let j=0;j<F.count;j++){const Z=j*M;g===!0&&(s.fromBufferAttribute(F,j),T[K+Z+0]=s.x,T[K+Z+1]=s.y,T[K+Z+2]=s.z,T[K+Z+3]=0),m===!0&&(s.fromBufferAttribute(H,j),T[K+Z+4]=s.x,T[K+Z+5]=s.y,T[K+Z+6]=s.z,T[K+Z+7]=0),v===!0&&(s.fromBufferAttribute(ee,j),T[K+Z+8]=s.x,T[K+Z+9]=s.y,T[K+Z+10]=s.z,T[K+Z+11]=ee.itemSize===4?s.w:1)}}d={count:h,texture:A,size:new Ye(E,w)},i.set(a,d),a.addEventListener("dispose",S)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let v=0;v<c.length;v++)g+=c[v];const m=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:r}}function L7(n,e,t,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(s.get(h)!==c&&(e.update(h),s.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;s.get(d)!==c&&(d.update(),s.set(d,c))}return h}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:o}}class jf extends Vi{constructor(e,t,i,s,r,o,a,l,c,u=Lu){if(u!==Lu&&u!==lh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Lu&&(i=oh),i===void 0&&u===lh&&(i=ah),super(null,s,r,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Oi,this.minFilter=l!==void 0?l:Oi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const pI=new Vi,mI=new jf(1,1);mI.compareFunction=nI;const gI=new pT,vI=new vG,_I=new dI,hN=[],dN=[],fN=new Float32Array(16),pN=new Float32Array(9),mN=new Float32Array(4);function Th(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=hN[s];if(r===void 0&&(r=new Float32Array(s),hN[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function Qn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Jn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function P0(n,e){let t=dN[e];t===void 0&&(t=new Int32Array(e),dN[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function I7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function D7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2fv(this.addr,e),Jn(t,e)}}function O7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qn(t,e))return;n.uniform3fv(this.addr,e),Jn(t,e)}}function U7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4fv(this.addr,e),Jn(t,e)}}function F7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Jn(t,e)}else{if(Qn(t,i))return;mN.set(i),n.uniformMatrix2fv(this.addr,!1,mN),Jn(t,i)}}function V7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Jn(t,e)}else{if(Qn(t,i))return;pN.set(i),n.uniformMatrix3fv(this.addr,!1,pN),Jn(t,i)}}function k7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Jn(t,e)}else{if(Qn(t,i))return;fN.set(i),n.uniformMatrix4fv(this.addr,!1,fN),Jn(t,i)}}function z7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function B7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2iv(this.addr,e),Jn(t,e)}}function H7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3iv(this.addr,e),Jn(t,e)}}function G7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4iv(this.addr,e),Jn(t,e)}}function W7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function j7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2uiv(this.addr,e),Jn(t,e)}}function X7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3uiv(this.addr,e),Jn(t,e)}}function $7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4uiv(this.addr,e),Jn(t,e)}}function q7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);const r=this.type===n.SAMPLER_2D_SHADOW?mI:pI;t.setTexture2D(e||r,s)}function Y7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||vI,s)}function K7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||_I,s)}function Z7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||gI,s)}function Q7(n){switch(n){case 5126:return I7;case 35664:return D7;case 35665:return O7;case 35666:return U7;case 35674:return F7;case 35675:return V7;case 35676:return k7;case 5124:case 35670:return z7;case 35667:case 35671:return B7;case 35668:case 35672:return H7;case 35669:case 35673:return G7;case 5125:return W7;case 36294:return j7;case 36295:return X7;case 36296:return $7;case 35678:case 36198:case 36298:case 36306:case 35682:return q7;case 35679:case 36299:case 36307:return Y7;case 35680:case 36300:case 36308:case 36293:return K7;case 36289:case 36303:case 36311:case 36292:return Z7}}function J7(n,e){n.uniform1fv(this.addr,e)}function ej(n,e){const t=Th(e,this.size,2);n.uniform2fv(this.addr,t)}function tj(n,e){const t=Th(e,this.size,3);n.uniform3fv(this.addr,t)}function nj(n,e){const t=Th(e,this.size,4);n.uniform4fv(this.addr,t)}function ij(n,e){const t=Th(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function sj(n,e){const t=Th(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function rj(n,e){const t=Th(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function oj(n,e){n.uniform1iv(this.addr,e)}function aj(n,e){n.uniform2iv(this.addr,e)}function lj(n,e){n.uniform3iv(this.addr,e)}function cj(n,e){n.uniform4iv(this.addr,e)}function uj(n,e){n.uniform1uiv(this.addr,e)}function hj(n,e){n.uniform2uiv(this.addr,e)}function dj(n,e){n.uniform3uiv(this.addr,e)}function fj(n,e){n.uniform4uiv(this.addr,e)}function pj(n,e,t){const i=this.cache,s=e.length,r=P0(t,s);Qn(i,r)||(n.uniform1iv(this.addr,r),Jn(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||pI,r[o])}function mj(n,e,t){const i=this.cache,s=e.length,r=P0(t,s);Qn(i,r)||(n.uniform1iv(this.addr,r),Jn(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||vI,r[o])}function gj(n,e,t){const i=this.cache,s=e.length,r=P0(t,s);Qn(i,r)||(n.uniform1iv(this.addr,r),Jn(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||_I,r[o])}function vj(n,e,t){const i=this.cache,s=e.length,r=P0(t,s);Qn(i,r)||(n.uniform1iv(this.addr,r),Jn(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||gI,r[o])}function _j(n){switch(n){case 5126:return J7;case 35664:return ej;case 35665:return tj;case 35666:return nj;case 35674:return ij;case 35675:return sj;case 35676:return rj;case 5124:case 35670:return oj;case 35667:case 35671:return aj;case 35668:case 35672:return lj;case 35669:case 35673:return cj;case 5125:return uj;case 36294:return hj;case 36295:return dj;case 36296:return fj;case 35678:case 36198:case 36298:case 36306:case 35682:return pj;case 35679:case 36299:case 36307:return mj;case 35680:case 36300:case 36308:case 36293:return gj;case 36289:case 36303:case 36311:case 36292:return vj}}class yj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Q7(t.type)}}class xj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=_j(t.type)}}class Sj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const b_=/(\w+)(\])?(\[|\.)?/g;function gN(n,e){n.seq.push(e),n.map[e.id]=e}function Tj(n,e,t){const i=n.name,s=i.length;for(b_.lastIndex=0;;){const r=b_.exec(i),o=b_.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){gN(t,c===void 0?new yj(a,n,e):new xj(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new Sj(a),gN(t,h)),t=h}}}class Lm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);Tj(r,o,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function vN(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Mj=37297;let wj=0;function Ej(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function Aj(n){const e=Gt.getPrimaries(Gt.workingColorSpace),t=Gt.getPrimaries(n);let i;switch(e===t?i="":e===Dg&&t===Ig?i="LinearDisplayP3ToLinearSRGB":e===Ig&&t===Dg&&(i="LinearSRGBToLinearDisplayP3"),n){case Fr:case R0:return[i,"LinearTransferOETF"];case yr:case hT:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function _N(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+Ej(n.getShaderSource(e),o)}else return s}function Nj(n,e){const t=Aj(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Cj(n,e){let t;switch(e){case HL:t="Linear";break;case GL:t="Reinhard";break;case WL:t="OptimizedCineon";break;case jL:t="ACESFilmic";break;case XL:t="AgX";break;case b8:t="Neutral";break;case C8:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function bj(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ud).join(`
`)}function Rj(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Pj(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function ud(n){return n!==""}function yN(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xN(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Lj=/^[ \t]*#include +<([\w\d./]+)>/gm;function Xx(n){return n.replace(Lj,Dj)}const Ij=new Map;function Dj(n,e){let t=_t[e];if(t===void 0){const i=Ij.get(e);if(i!==void 0)t=_t[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Xx(t)}const Oj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function SN(n){return n.replace(Oj,Uj)}function Uj(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function TN(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Fj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===BL?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===e8?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yo&&(e="SHADOWMAP_TYPE_VSM"),e}function Vj(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case sh:case rh:e="ENVMAP_TYPE_CUBE";break;case b0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case rh:e="ENVMAP_MODE_REFRACTION";break}return e}function zj(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case C0:e="ENVMAP_BLENDING_MULTIPLY";break;case A8:e="ENVMAP_BLENDING_MIX";break;case N8:e="ENVMAP_BLENDING_ADD";break}return e}function Bj(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Hj(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Fj(t),c=Vj(t),u=kj(t),h=zj(t),d=Bj(t),f=bj(t),g=Rj(r),m=s.createProgram();let v,p,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(ud).join(`
`),v.length>0&&(v+=`
`),p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(ud).join(`
`),p.length>0&&(p+=`
`)):(v=[TN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ud).join(`
`),p=[TN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Us?"#define TONE_MAPPING":"",t.toneMapping!==Us?_t.tonemapping_pars_fragment:"",t.toneMapping!==Us?Cj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",_t.colorspace_pars_fragment,Nj("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ud).join(`
`)),o=Xx(o),o=yN(o,t),o=xN(o,t),a=Xx(a),a=yN(a,t),a=xN(a,t),o=SN(o),a=SN(a),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,p=["#define varying in",t.glslVersion===FA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===FA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=y+v+o,x=y+p+a,E=vN(s,s.VERTEX_SHADER,_),w=vN(s,s.FRAGMENT_SHADER,x);s.attachShader(m,E),s.attachShader(m,w),t.index0AttributeName!==void 0?s.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m);function T(P){if(n.debug.checkShaderErrors){const F=s.getProgramInfoLog(m).trim(),H=s.getShaderInfoLog(E).trim(),ee=s.getShaderInfoLog(w).trim();let K=!0,j=!0;if(s.getProgramParameter(m,s.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,m,E,w);else{const Z=_N(s,E,"vertex"),D=_N(s,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,s.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+F+`
`+Z+`
`+D)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):(H===""||ee==="")&&(j=!1);j&&(P.diagnostics={runnable:K,programLog:F,vertexShader:{log:H,prefix:v},fragmentShader:{log:ee,prefix:p}})}s.deleteShader(E),s.deleteShader(w),A=new Lm(s,m),M=Pj(s,m)}let A;this.getUniforms=function(){return A===void 0&&T(this),A};let M;this.getAttributes=function(){return M===void 0&&T(this),M};let S=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return S===!1&&(S=s.getProgramParameter(m,Mj)),S},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=wj++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=w,this}let Gj=0;class Wj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new jj(e),t.set(e,i)),i}}class jj{constructor(e){this.id=Gj++,this.code=e,this.usedTimes=0}}function Xj(n,e,t,i,s,r,o){const a=new oI,l=new Wj,c=new Set,u=[],h=s.logarithmicDepthBuffer,d=s.vertexTextures;let f=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M){return c.add(M),M===0?"uv":`uv${M}`}function v(M,S,P,F,H){const ee=F.fog,K=H.geometry,j=M.isMeshStandardMaterial?F.environment:null,Z=(M.isMeshStandardMaterial?t:e).get(M.envMap||j),D=Z&&Z.mapping===b0?Z.image.height:null,ie=g[M.type];M.precision!==null&&(f=s.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const R=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ce=R!==void 0?R.length:0;let Pe=0;K.morphAttributes.position!==void 0&&(Pe=1),K.morphAttributes.normal!==void 0&&(Pe=2),K.morphAttributes.color!==void 0&&(Pe=3);let ut,te,he,Te;if(ie){const bt=Gr[ie];ut=bt.vertexShader,te=bt.fragmentShader}else ut=M.vertexShader,te=M.fragmentShader,l.update(M),he=l.getVertexShaderID(M),Te=l.getFragmentShaderID(M);const ge=n.getRenderTarget(),Qe=H.isInstancedMesh===!0,qe=H.isBatchedMesh===!0,pt=!!M.map,U=!!M.matcap,ot=!!Z,Le=!!M.aoMap,ht=!!M.lightMap,ke=!!M.bumpMap,at=!!M.normalMap,q=!!M.displacementMap,Ke=!!M.emissiveMap,Ft=!!M.metalnessMap,I=!!M.roughnessMap,N=M.anisotropy>0,ne=M.clearcoat>0,de=M.dispersion>0,me=M.iridescence>0,le=M.sheen>0,Ge=M.transmission>0,ve=N&&!!M.anisotropyMap,we=ne&&!!M.clearcoatMap,et=ne&&!!M.clearcoatNormalMap,_e=ne&&!!M.clearcoatRoughnessMap,Be=me&&!!M.iridescenceMap,Xe=me&&!!M.iridescenceThicknessMap,nt=le&&!!M.sheenColorMap,Ee=le&&!!M.sheenRoughnessMap,lt=!!M.specularMap,mt=!!M.specularColorMap,Vt=!!M.specularIntensityMap,V=Ge&&!!M.transmissionMap,fe=Ge&&!!M.thicknessMap,oe=!!M.gradientMap,ae=!!M.alphaMap,ye=M.alphaTest>0,$e=!!M.alphaHash,yt=!!M.extensions;let Xt=Us;M.toneMapped&&(ge===null||ge.isXRRenderTarget===!0)&&(Xt=n.toneMapping);const $t={shaderID:ie,shaderType:M.type,shaderName:M.name,vertexShader:ut,fragmentShader:te,defines:M.defines,customVertexShaderID:he,customFragmentShaderID:Te,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,batching:qe,batchingColor:qe&&H._colorsTexture!==null,instancing:Qe,instancingColor:Qe&&H.instanceColor!==null,instancingMorph:Qe&&H.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:ge===null?n.outputColorSpace:ge.isXRRenderTarget===!0?ge.texture.colorSpace:Fr,alphaToCoverage:!!M.alphaToCoverage,map:pt,matcap:U,envMap:ot,envMapMode:ot&&Z.mapping,envMapCubeUVHeight:D,aoMap:Le,lightMap:ht,bumpMap:ke,normalMap:at,displacementMap:d&&q,emissiveMap:Ke,normalMapObjectSpace:at&&M.normalMapType===eI,normalMapTangentSpace:at&&M.normalMapType===$o,metalnessMap:Ft,roughnessMap:I,anisotropy:N,anisotropyMap:ve,clearcoat:ne,clearcoatMap:we,clearcoatNormalMap:et,clearcoatRoughnessMap:_e,dispersion:de,iridescence:me,iridescenceMap:Be,iridescenceThicknessMap:Xe,sheen:le,sheenColorMap:nt,sheenRoughnessMap:Ee,specularMap:lt,specularColorMap:mt,specularIntensityMap:Vt,transmission:Ge,transmissionMap:V,thicknessMap:fe,gradientMap:oe,opaque:M.transparent===!1&&M.blending===Pu&&M.alphaToCoverage===!1,alphaMap:ae,alphaTest:ye,alphaHash:$e,combine:M.combine,mapUv:pt&&m(M.map.channel),aoMapUv:Le&&m(M.aoMap.channel),lightMapUv:ht&&m(M.lightMap.channel),bumpMapUv:ke&&m(M.bumpMap.channel),normalMapUv:at&&m(M.normalMap.channel),displacementMapUv:q&&m(M.displacementMap.channel),emissiveMapUv:Ke&&m(M.emissiveMap.channel),metalnessMapUv:Ft&&m(M.metalnessMap.channel),roughnessMapUv:I&&m(M.roughnessMap.channel),anisotropyMapUv:ve&&m(M.anisotropyMap.channel),clearcoatMapUv:we&&m(M.clearcoatMap.channel),clearcoatNormalMapUv:et&&m(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:_e&&m(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Be&&m(M.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&m(M.iridescenceThicknessMap.channel),sheenColorMapUv:nt&&m(M.sheenColorMap.channel),sheenRoughnessMapUv:Ee&&m(M.sheenRoughnessMap.channel),specularMapUv:lt&&m(M.specularMap.channel),specularColorMapUv:mt&&m(M.specularColorMap.channel),specularIntensityMapUv:Vt&&m(M.specularIntensityMap.channel),transmissionMapUv:V&&m(M.transmissionMap.channel),thicknessMapUv:fe&&m(M.thicknessMap.channel),alphaMapUv:ae&&m(M.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(at||N),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!K.attributes.uv&&(pt||ae),fog:!!ee,useFog:M.fog===!0,fogExp2:!!ee&&ee.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:H.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:Pe,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numLightProbes:S.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:Xt,decodeVideoTexture:pt&&M.map.isVideoTexture===!0&&Gt.getTransfer(M.map.colorSpace)===an,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Ao,flipSided:M.side===ts,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:yt&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:yt&&M.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return $t.vertexUv1s=c.has(1),$t.vertexUv2s=c.has(2),$t.vertexUv3s=c.has(3),c.clear(),$t}function p(M){const S=[];if(M.shaderID?S.push(M.shaderID):(S.push(M.customVertexShaderID),S.push(M.customFragmentShaderID)),M.defines!==void 0)for(const P in M.defines)S.push(P),S.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(y(S,M),_(S,M),S.push(n.outputColorSpace)),S.push(M.customProgramCacheKey),S.join()}function y(M,S){M.push(S.precision),M.push(S.outputColorSpace),M.push(S.envMapMode),M.push(S.envMapCubeUVHeight),M.push(S.mapUv),M.push(S.alphaMapUv),M.push(S.lightMapUv),M.push(S.aoMapUv),M.push(S.bumpMapUv),M.push(S.normalMapUv),M.push(S.displacementMapUv),M.push(S.emissiveMapUv),M.push(S.metalnessMapUv),M.push(S.roughnessMapUv),M.push(S.anisotropyMapUv),M.push(S.clearcoatMapUv),M.push(S.clearcoatNormalMapUv),M.push(S.clearcoatRoughnessMapUv),M.push(S.iridescenceMapUv),M.push(S.iridescenceThicknessMapUv),M.push(S.sheenColorMapUv),M.push(S.sheenRoughnessMapUv),M.push(S.specularMapUv),M.push(S.specularColorMapUv),M.push(S.specularIntensityMapUv),M.push(S.transmissionMapUv),M.push(S.thicknessMapUv),M.push(S.combine),M.push(S.fogExp2),M.push(S.sizeAttenuation),M.push(S.morphTargetsCount),M.push(S.morphAttributeCount),M.push(S.numDirLights),M.push(S.numPointLights),M.push(S.numSpotLights),M.push(S.numSpotLightMaps),M.push(S.numHemiLights),M.push(S.numRectAreaLights),M.push(S.numDirLightShadows),M.push(S.numPointLightShadows),M.push(S.numSpotLightShadows),M.push(S.numSpotLightShadowsWithMaps),M.push(S.numLightProbes),M.push(S.shadowMapType),M.push(S.toneMapping),M.push(S.numClippingPlanes),M.push(S.numClipIntersection),M.push(S.depthPacking)}function _(M,S){a.disableAll(),S.supportsVertexTextures&&a.enable(0),S.instancing&&a.enable(1),S.instancingColor&&a.enable(2),S.instancingMorph&&a.enable(3),S.matcap&&a.enable(4),S.envMap&&a.enable(5),S.normalMapObjectSpace&&a.enable(6),S.normalMapTangentSpace&&a.enable(7),S.clearcoat&&a.enable(8),S.iridescence&&a.enable(9),S.alphaTest&&a.enable(10),S.vertexColors&&a.enable(11),S.vertexAlphas&&a.enable(12),S.vertexUv1s&&a.enable(13),S.vertexUv2s&&a.enable(14),S.vertexUv3s&&a.enable(15),S.vertexTangents&&a.enable(16),S.anisotropy&&a.enable(17),S.alphaHash&&a.enable(18),S.batching&&a.enable(19),S.dispersion&&a.enable(20),S.batchingColor&&a.enable(21),M.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.doubleSided&&a.enable(10),S.flipSided&&a.enable(11),S.useDepthPacking&&a.enable(12),S.dithering&&a.enable(13),S.transmission&&a.enable(14),S.sheen&&a.enable(15),S.opaque&&a.enable(16),S.pointsUvs&&a.enable(17),S.decodeVideoTexture&&a.enable(18),S.alphaToCoverage&&a.enable(19),M.push(a.mask)}function x(M){const S=g[M.type];let P;if(S){const F=Gr[S];P=RG.clone(F.uniforms)}else P=M.uniforms;return P}function E(M,S){let P;for(let F=0,H=u.length;F<H;F++){const ee=u[F];if(ee.cacheKey===S){P=ee,++P.usedTimes;break}}return P===void 0&&(P=new Hj(n,S,M,r),u.push(P)),P}function w(M){if(--M.usedTimes===0){const S=u.indexOf(M);u[S]=u[u.length-1],u.pop(),M.destroy()}}function T(M){l.remove(M)}function A(){l.dispose()}return{getParameters:v,getProgramCacheKey:p,getUniforms:x,acquireProgram:E,releaseProgram:w,releaseShaderCache:T,programs:u,dispose:A}}function $j(){let n=new WeakMap;function e(r){let o=n.get(r);return o===void 0&&(o={},n.set(r,o)),o}function t(r){n.delete(r)}function i(r,o,a){n.get(r)[o]=a}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function qj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function MN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function wN(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function o(h,d,f,g,m,v){let p=n[e];return p===void 0?(p={id:h.id,object:h,geometry:d,material:f,groupOrder:g,renderOrder:h.renderOrder,z:m,group:v},n[e]=p):(p.id=h.id,p.object=h,p.geometry=d,p.material=f,p.groupOrder=g,p.renderOrder=h.renderOrder,p.z=m,p.group=v),e++,p}function a(h,d,f,g,m,v){const p=o(h,d,f,g,m,v);f.transmission>0?i.push(p):f.transparent===!0?s.push(p):t.push(p)}function l(h,d,f,g,m,v){const p=o(h,d,f,g,m,v);f.transmission>0?i.unshift(p):f.transparent===!0?s.unshift(p):t.unshift(p)}function c(h,d){t.length>1&&t.sort(h||qj),i.length>1&&i.sort(d||MN),s.length>1&&s.sort(d||MN)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:u,sort:c}}function Yj(){let n=new WeakMap;function e(i,s){const r=n.get(i);let o;return r===void 0?(o=new wN,n.set(i,[o])):s>=r.length?(o=new wN,r.push(o)):o=r[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Kj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new st};break;case"SpotLight":t={position:new $,direction:new $,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new st,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new st,groundColor:new st};break;case"RectAreaLight":t={color:new st,position:new $,halfWidth:new $,halfHeight:new $};break}return n[e.id]=t,t}}}function Zj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Qj=0;function Jj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function eX(n){const e=new Kj,t=Zj(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new $);const s=new $,r=new un,o=new un;function a(c){let u=0,h=0,d=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let f=0,g=0,m=0,v=0,p=0,y=0,_=0,x=0,E=0,w=0,T=0;c.sort(Jj);for(let M=0,S=c.length;M<S;M++){const P=c[M],F=P.color,H=P.intensity,ee=P.distance,K=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)u+=F.r*H,h+=F.g*H,d+=F.b*H;else if(P.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(P.sh.coefficients[j],H);T++}else if(P.isDirectionalLight){const j=e.get(P);if(j.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const Z=P.shadow,D=t.get(P);D.shadowBias=Z.bias,D.shadowNormalBias=Z.normalBias,D.shadowRadius=Z.radius,D.shadowMapSize=Z.mapSize,i.directionalShadow[f]=D,i.directionalShadowMap[f]=K,i.directionalShadowMatrix[f]=P.shadow.matrix,y++}i.directional[f]=j,f++}else if(P.isSpotLight){const j=e.get(P);j.position.setFromMatrixPosition(P.matrixWorld),j.color.copy(F).multiplyScalar(H),j.distance=ee,j.coneCos=Math.cos(P.angle),j.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),j.decay=P.decay,i.spot[m]=j;const Z=P.shadow;if(P.map&&(i.spotLightMap[E]=P.map,E++,Z.updateMatrices(P),P.castShadow&&w++),i.spotLightMatrix[m]=Z.matrix,P.castShadow){const D=t.get(P);D.shadowBias=Z.bias,D.shadowNormalBias=Z.normalBias,D.shadowRadius=Z.radius,D.shadowMapSize=Z.mapSize,i.spotShadow[m]=D,i.spotShadowMap[m]=K,x++}m++}else if(P.isRectAreaLight){const j=e.get(P);j.color.copy(F).multiplyScalar(H),j.halfWidth.set(P.width*.5,0,0),j.halfHeight.set(0,P.height*.5,0),i.rectArea[v]=j,v++}else if(P.isPointLight){const j=e.get(P);if(j.color.copy(P.color).multiplyScalar(P.intensity),j.distance=P.distance,j.decay=P.decay,P.castShadow){const Z=P.shadow,D=t.get(P);D.shadowBias=Z.bias,D.shadowNormalBias=Z.normalBias,D.shadowRadius=Z.radius,D.shadowMapSize=Z.mapSize,D.shadowCameraNear=Z.camera.near,D.shadowCameraFar=Z.camera.far,i.pointShadow[g]=D,i.pointShadowMap[g]=K,i.pointShadowMatrix[g]=P.shadow.matrix,_++}i.point[g]=j,g++}else if(P.isHemisphereLight){const j=e.get(P);j.skyColor.copy(P.color).multiplyScalar(H),j.groundColor.copy(P.groundColor).multiplyScalar(H),i.hemi[p]=j,p++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=be.LTC_FLOAT_1,i.rectAreaLTC2=be.LTC_FLOAT_2):(i.rectAreaLTC1=be.LTC_HALF_1,i.rectAreaLTC2=be.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=h,i.ambient[2]=d;const A=i.hash;(A.directionalLength!==f||A.pointLength!==g||A.spotLength!==m||A.rectAreaLength!==v||A.hemiLength!==p||A.numDirectionalShadows!==y||A.numPointShadows!==_||A.numSpotShadows!==x||A.numSpotMaps!==E||A.numLightProbes!==T)&&(i.directional.length=f,i.spot.length=m,i.rectArea.length=v,i.point.length=g,i.hemi.length=p,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=x+E-w,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=w,i.numLightProbes=T,A.directionalLength=f,A.pointLength=g,A.spotLength=m,A.rectAreaLength=v,A.hemiLength=p,A.numDirectionalShadows=y,A.numPointShadows=_,A.numSpotShadows=x,A.numSpotMaps=E,A.numLightProbes=T,i.version=Qj++)}function l(c,u){let h=0,d=0,f=0,g=0,m=0;const v=u.matrixWorldInverse;for(let p=0,y=c.length;p<y;p++){const _=c[p];if(_.isDirectionalLight){const x=i.directional[h];x.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(v),h++}else if(_.isSpotLight){const x=i.spot[f];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(v),x.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(v),f++}else if(_.isRectAreaLight){const x=i.rectArea[g];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(v),o.identity(),r.copy(_.matrixWorld),r.premultiply(v),o.extractRotation(r),x.halfWidth.set(_.width*.5,0,0),x.halfHeight.set(0,_.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),g++}else if(_.isPointLight){const x=i.point[d];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(v),d++}else if(_.isHemisphereLight){const x=i.hemi[m];x.direction.setFromMatrixPosition(_.matrixWorld),x.direction.transformDirection(v),m++}}}return{setup:a,setupView:l,state:i}}function EN(n){const e=new eX(n),t=[],i=[];function s(u){c.camera=u,t.length=0,i.length=0}function r(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:a,setupLightsView:l,pushLight:r,pushShadow:o}}function tX(n){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let a;return o===void 0?(a=new EN(n),e.set(s,[a])):r>=o.length?(a=new EN(n),o.push(a)):a=o[r],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class nX extends zi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=B8,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class iX extends zi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function oX(n,e,t){let i=new vT;const s=new Ye,r=new Ye,o=new Dt,a=new nX({depthPacking:H8}),l=new iX,c={},u=t.maxTextureSize,h={[Ka]:ts,[ts]:Ka,[Ao]:Ao},d=new qo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:sX,fragmentShader:rX}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const g=new cl;g.setAttribute("position",new or(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Nr(g,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=BL;let p=this.type;this.render=function(w,T,A){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||w.length===0)return;const M=n.getRenderTarget(),S=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),F=n.state;F.setBlending(Ba),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const H=p!==yo&&this.type===yo,ee=p===yo&&this.type!==yo;for(let K=0,j=w.length;K<j;K++){const Z=w[K],D=Z.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;s.copy(D.mapSize);const ie=D.getFrameExtents();if(s.multiply(ie),r.copy(D.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/ie.x),s.x=r.x*ie.x,D.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/ie.y),s.y=r.y*ie.y,D.mapSize.y=r.y)),D.map===null||H===!0||ee===!0){const ce=this.type!==yo?{minFilter:Oi,magFilter:Oi}:{};D.map!==null&&D.map.dispose(),D.map=new hc(s.x,s.y,ce),D.map.texture.name=Z.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const R=D.getViewportCount();for(let ce=0;ce<R;ce++){const Pe=D.getViewport(ce);o.set(r.x*Pe.x,r.y*Pe.y,r.x*Pe.z,r.y*Pe.w),F.viewport(o),D.updateMatrices(Z,ce),i=D.getFrustum(),x(T,A,D.camera,Z,this.type)}D.isPointLightShadow!==!0&&this.type===yo&&y(D,A),D.needsUpdate=!1}p=this.type,v.needsUpdate=!1,n.setRenderTarget(M,S,P)};function y(w,T){const A=e.update(m);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new hc(s.x,s.y)),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(T,null,A,d,m,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(T,null,A,f,m,null)}function _(w,T,A,M){let S=null;const P=A.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(P!==void 0)S=P;else if(S=A.isPointLight===!0?l:a,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const F=S.uuid,H=T.uuid;let ee=c[F];ee===void 0&&(ee={},c[F]=ee);let K=ee[H];K===void 0&&(K=S.clone(),ee[H]=K,T.addEventListener("dispose",E)),S=K}if(S.visible=T.visible,S.wireframe=T.wireframe,M===yo?S.side=T.shadowSide!==null?T.shadowSide:T.side:S.side=T.shadowSide!==null?T.shadowSide:h[T.side],S.alphaMap=T.alphaMap,S.alphaTest=T.alphaTest,S.map=T.map,S.clipShadows=T.clipShadows,S.clippingPlanes=T.clippingPlanes,S.clipIntersection=T.clipIntersection,S.displacementMap=T.displacementMap,S.displacementScale=T.displacementScale,S.displacementBias=T.displacementBias,S.wireframeLinewidth=T.wireframeLinewidth,S.linewidth=T.linewidth,A.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const F=n.properties.get(S);F.light=A}return S}function x(w,T,A,M,S){if(w.visible===!1)return;if(w.layers.test(T.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&S===yo)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,w.matrixWorld);const H=e.update(w),ee=w.material;if(Array.isArray(ee)){const K=H.groups;for(let j=0,Z=K.length;j<Z;j++){const D=K[j],ie=ee[D.materialIndex];if(ie&&ie.visible){const R=_(w,ie,M,S);w.onBeforeShadow(n,w,T,A,H,R,D),n.renderBufferDirect(A,null,H,R,w,D),w.onAfterShadow(n,w,T,A,H,R,D)}}}else if(ee.visible){const K=_(w,ee,M,S);w.onBeforeShadow(n,w,T,A,H,K,null),n.renderBufferDirect(A,null,H,K,w,null),w.onAfterShadow(n,w,T,A,H,K,null)}}const F=w.children;for(let H=0,ee=F.length;H<ee;H++)x(F[H],T,A,M,S)}function E(w){w.target.removeEventListener("dispose",E);for(const A in c){const M=c[A],S=w.target.uuid;S in M&&(M[S].dispose(),delete M[S])}}}function aX(n){function e(){let V=!1;const fe=new Dt;let oe=null;const ae=new Dt(0,0,0,0);return{setMask:function(ye){oe!==ye&&!V&&(n.colorMask(ye,ye,ye,ye),oe=ye)},setLocked:function(ye){V=ye},setClear:function(ye,$e,yt,Xt,$t){$t===!0&&(ye*=Xt,$e*=Xt,yt*=Xt),fe.set(ye,$e,yt,Xt),ae.equals(fe)===!1&&(n.clearColor(ye,$e,yt,Xt),ae.copy(fe))},reset:function(){V=!1,oe=null,ae.set(-1,0,0,0)}}}function t(){let V=!1,fe=null,oe=null,ae=null;return{setTest:function(ye){ye?Te(n.DEPTH_TEST):ge(n.DEPTH_TEST)},setMask:function(ye){fe!==ye&&!V&&(n.depthMask(ye),fe=ye)},setFunc:function(ye){if(oe!==ye){switch(ye){case y8:n.depthFunc(n.NEVER);break;case x8:n.depthFunc(n.ALWAYS);break;case S8:n.depthFunc(n.LESS);break;case Rg:n.depthFunc(n.LEQUAL);break;case T8:n.depthFunc(n.EQUAL);break;case M8:n.depthFunc(n.GEQUAL);break;case w8:n.depthFunc(n.GREATER);break;case E8:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}oe=ye}},setLocked:function(ye){V=ye},setClear:function(ye){ae!==ye&&(n.clearDepth(ye),ae=ye)},reset:function(){V=!1,fe=null,oe=null,ae=null}}}function i(){let V=!1,fe=null,oe=null,ae=null,ye=null,$e=null,yt=null,Xt=null,$t=null;return{setTest:function(bt){V||(bt?Te(n.STENCIL_TEST):ge(n.STENCIL_TEST))},setMask:function(bt){fe!==bt&&!V&&(n.stencilMask(bt),fe=bt)},setFunc:function(bt,Je,We){(oe!==bt||ae!==Je||ye!==We)&&(n.stencilFunc(bt,Je,We),oe=bt,ae=Je,ye=We)},setOp:function(bt,Je,We){($e!==bt||yt!==Je||Xt!==We)&&(n.stencilOp(bt,Je,We),$e=bt,yt=Je,Xt=We)},setLocked:function(bt){V=bt},setClear:function(bt){$t!==bt&&(n.clearStencil(bt),$t=bt)},reset:function(){V=!1,fe=null,oe=null,ae=null,ye=null,$e=null,yt=null,Xt=null,$t=null}}}const s=new e,r=new t,o=new i,a=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],f=null,g=!1,m=null,v=null,p=null,y=null,_=null,x=null,E=null,w=new st(0,0,0),T=0,A=!1,M=null,S=null,P=null,F=null,H=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,j=0;const Z=n.getParameter(n.VERSION);Z.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(Z)[1]),K=j>=1):Z.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),K=j>=2);let D=null,ie={};const R=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),Pe=new Dt().fromArray(R),ut=new Dt().fromArray(ce);function te(V,fe,oe,ae){const ye=new Uint8Array(4),$e=n.createTexture();n.bindTexture(V,$e),n.texParameteri(V,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(V,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let yt=0;yt<oe;yt++)V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY?n.texImage3D(fe,0,n.RGBA,1,1,ae,0,n.RGBA,n.UNSIGNED_BYTE,ye):n.texImage2D(fe+yt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ye);return $e}const he={};he[n.TEXTURE_2D]=te(n.TEXTURE_2D,n.TEXTURE_2D,1),he[n.TEXTURE_CUBE_MAP]=te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[n.TEXTURE_2D_ARRAY]=te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),he[n.TEXTURE_3D]=te(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),r.setClear(1),o.setClear(0),Te(n.DEPTH_TEST),r.setFunc(Rg),ke(!1),at(oA),Te(n.CULL_FACE),Le(Ba);function Te(V){c[V]!==!0&&(n.enable(V),c[V]=!0)}function ge(V){c[V]!==!1&&(n.disable(V),c[V]=!1)}function Qe(V,fe){return u[V]!==fe?(n.bindFramebuffer(V,fe),u[V]=fe,V===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=fe),V===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=fe),!0):!1}function qe(V,fe){let oe=d,ae=!1;if(V){oe=h.get(fe),oe===void 0&&(oe=[],h.set(fe,oe));const ye=V.textures;if(oe.length!==ye.length||oe[0]!==n.COLOR_ATTACHMENT0){for(let $e=0,yt=ye.length;$e<yt;$e++)oe[$e]=n.COLOR_ATTACHMENT0+$e;oe.length=ye.length,ae=!0}}else oe[0]!==n.BACK&&(oe[0]=n.BACK,ae=!0);ae&&n.drawBuffers(oe)}function pt(V){return f!==V?(n.useProgram(V),f=V,!0):!1}const U={[Dl]:n.FUNC_ADD,[n8]:n.FUNC_SUBTRACT,[i8]:n.FUNC_REVERSE_SUBTRACT};U[s8]=n.MIN,U[r8]=n.MAX;const ot={[o8]:n.ZERO,[a8]:n.ONE,[l8]:n.SRC_COLOR,[kx]:n.SRC_ALPHA,[p8]:n.SRC_ALPHA_SATURATE,[d8]:n.DST_COLOR,[u8]:n.DST_ALPHA,[c8]:n.ONE_MINUS_SRC_COLOR,[zx]:n.ONE_MINUS_SRC_ALPHA,[f8]:n.ONE_MINUS_DST_COLOR,[h8]:n.ONE_MINUS_DST_ALPHA,[m8]:n.CONSTANT_COLOR,[g8]:n.ONE_MINUS_CONSTANT_COLOR,[v8]:n.CONSTANT_ALPHA,[_8]:n.ONE_MINUS_CONSTANT_ALPHA};function Le(V,fe,oe,ae,ye,$e,yt,Xt,$t,bt){if(V===Ba){g===!0&&(ge(n.BLEND),g=!1);return}if(g===!1&&(Te(n.BLEND),g=!0),V!==t8){if(V!==m||bt!==A){if((v!==Dl||_!==Dl)&&(n.blendEquation(n.FUNC_ADD),v=Dl,_=Dl),bt)switch(V){case Pu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case aA:n.blendFunc(n.ONE,n.ONE);break;case lA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}else switch(V){case Pu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case aA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case lA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}p=null,y=null,x=null,E=null,w.set(0,0,0),T=0,m=V,A=bt}return}ye=ye||fe,$e=$e||oe,yt=yt||ae,(fe!==v||ye!==_)&&(n.blendEquationSeparate(U[fe],U[ye]),v=fe,_=ye),(oe!==p||ae!==y||$e!==x||yt!==E)&&(n.blendFuncSeparate(ot[oe],ot[ae],ot[$e],ot[yt]),p=oe,y=ae,x=$e,E=yt),(Xt.equals(w)===!1||$t!==T)&&(n.blendColor(Xt.r,Xt.g,Xt.b,$t),w.copy(Xt),T=$t),m=V,A=!1}function ht(V,fe){V.side===Ao?ge(n.CULL_FACE):Te(n.CULL_FACE);let oe=V.side===ts;fe&&(oe=!oe),ke(oe),V.blending===Pu&&V.transparent===!1?Le(Ba):Le(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.blendColor,V.blendAlpha,V.premultipliedAlpha),r.setFunc(V.depthFunc),r.setTest(V.depthTest),r.setMask(V.depthWrite),s.setMask(V.colorWrite);const ae=V.stencilWrite;o.setTest(ae),ae&&(o.setMask(V.stencilWriteMask),o.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),o.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),Ke(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),V.alphaToCoverage===!0?Te(n.SAMPLE_ALPHA_TO_COVERAGE):ge(n.SAMPLE_ALPHA_TO_COVERAGE)}function ke(V){M!==V&&(V?n.frontFace(n.CW):n.frontFace(n.CCW),M=V)}function at(V){V!==Q6?(Te(n.CULL_FACE),V!==S&&(V===oA?n.cullFace(n.BACK):V===J6?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ge(n.CULL_FACE),S=V}function q(V){V!==P&&(K&&n.lineWidth(V),P=V)}function Ke(V,fe,oe){V?(Te(n.POLYGON_OFFSET_FILL),(F!==fe||H!==oe)&&(n.polygonOffset(fe,oe),F=fe,H=oe)):ge(n.POLYGON_OFFSET_FILL)}function Ft(V){V?Te(n.SCISSOR_TEST):ge(n.SCISSOR_TEST)}function I(V){V===void 0&&(V=n.TEXTURE0+ee-1),D!==V&&(n.activeTexture(V),D=V)}function N(V,fe,oe){oe===void 0&&(D===null?oe=n.TEXTURE0+ee-1:oe=D);let ae=ie[oe];ae===void 0&&(ae={type:void 0,texture:void 0},ie[oe]=ae),(ae.type!==V||ae.texture!==fe)&&(D!==oe&&(n.activeTexture(oe),D=oe),n.bindTexture(V,fe||he[V]),ae.type=V,ae.texture=fe)}function ne(){const V=ie[D];V!==void 0&&V.type!==void 0&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)}function de(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function le(){try{n.texSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Ge(){try{n.texSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function ve(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function we(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function et(){try{n.texStorage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function _e(){try{n.texStorage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Be(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Xe(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function nt(V){Pe.equals(V)===!1&&(n.scissor(V.x,V.y,V.z,V.w),Pe.copy(V))}function Ee(V){ut.equals(V)===!1&&(n.viewport(V.x,V.y,V.z,V.w),ut.copy(V))}function lt(V,fe){let oe=l.get(fe);oe===void 0&&(oe=new WeakMap,l.set(fe,oe));let ae=oe.get(V);ae===void 0&&(ae=n.getUniformBlockIndex(fe,V.name),oe.set(V,ae))}function mt(V,fe){const ae=l.get(fe).get(V);a.get(fe)!==ae&&(n.uniformBlockBinding(fe,ae,V.__bindingPointIndex),a.set(fe,ae))}function Vt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},D=null,ie={},u={},h=new WeakMap,d=[],f=null,g=!1,m=null,v=null,p=null,y=null,_=null,x=null,E=null,w=new st(0,0,0),T=0,A=!1,M=null,S=null,P=null,F=null,H=null,Pe.set(0,0,n.canvas.width,n.canvas.height),ut.set(0,0,n.canvas.width,n.canvas.height),s.reset(),r.reset(),o.reset()}return{buffers:{color:s,depth:r,stencil:o},enable:Te,disable:ge,bindFramebuffer:Qe,drawBuffers:qe,useProgram:pt,setBlending:Le,setMaterial:ht,setFlipSided:ke,setCullFace:at,setLineWidth:q,setPolygonOffset:Ke,setScissorTest:Ft,activeTexture:I,bindTexture:N,unbindTexture:ne,compressedTexImage2D:de,compressedTexImage3D:me,texImage2D:Be,texImage3D:Xe,updateUBOMapping:lt,uniformBlockBinding:mt,texStorage2D:et,texStorage3D:_e,texSubImage2D:le,texSubImage3D:Ge,compressedTexSubImage2D:ve,compressedTexSubImage3D:we,scissor:nt,viewport:Ee,reset:Vt}}function lX(n,e,t,i,s,r,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ye,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(I,N){return f?new OffscreenCanvas(I,N):xf("canvas")}function m(I,N,ne){let de=1;const me=Ft(I);if((me.width>ne||me.height>ne)&&(de=ne/Math.max(me.width,me.height)),de<1)if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap||typeof VideoFrame<"u"&&I instanceof VideoFrame){const le=Math.floor(de*me.width),Ge=Math.floor(de*me.height);h===void 0&&(h=g(le,Ge));const ve=N?g(le,Ge):h;return ve.width=le,ve.height=Ge,ve.getContext("2d").drawImage(I,0,0,le,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+me.width+"x"+me.height+") to ("+le+"x"+Ge+")."),ve}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+me.width+"x"+me.height+")."),I;return I}function v(I){return I.generateMipmaps&&I.minFilter!==Oi&&I.minFilter!==Mr}function p(I){n.generateMipmap(I)}function y(I,N,ne,de,me=!1){if(I!==null){if(n[I]!==void 0)return n[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let le=N;if(N===n.RED&&(ne===n.FLOAT&&(le=n.R32F),ne===n.HALF_FLOAT&&(le=n.R16F),ne===n.UNSIGNED_BYTE&&(le=n.R8)),N===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(le=n.R8UI),ne===n.UNSIGNED_SHORT&&(le=n.R16UI),ne===n.UNSIGNED_INT&&(le=n.R32UI),ne===n.BYTE&&(le=n.R8I),ne===n.SHORT&&(le=n.R16I),ne===n.INT&&(le=n.R32I)),N===n.RG&&(ne===n.FLOAT&&(le=n.RG32F),ne===n.HALF_FLOAT&&(le=n.RG16F),ne===n.UNSIGNED_BYTE&&(le=n.RG8)),N===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(le=n.RG8UI),ne===n.UNSIGNED_SHORT&&(le=n.RG16UI),ne===n.UNSIGNED_INT&&(le=n.RG32UI),ne===n.BYTE&&(le=n.RG8I),ne===n.SHORT&&(le=n.RG16I),ne===n.INT&&(le=n.RG32I)),N===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(le=n.RGB9_E5),N===n.RGBA){const Ge=me?Lg:Gt.getTransfer(de);ne===n.FLOAT&&(le=n.RGBA32F),ne===n.HALF_FLOAT&&(le=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(le=Ge===an?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(le=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(le=n.RGB5_A1)}return(le===n.R16F||le===n.R32F||le===n.RG16F||le===n.RG32F||le===n.RGBA16F||le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),le}function _(I,N){let ne;return I?N===null||N===oh||N===ah?ne=n.DEPTH24_STENCIL8:N===Po?ne=n.DEPTH32F_STENCIL8:N===Pg&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===oh||N===ah?ne=n.DEPTH_COMPONENT24:N===Po?ne=n.DEPTH_COMPONENT32F:N===Pg&&(ne=n.DEPTH_COMPONENT16),ne}function x(I,N){return v(I)===!0||I.isFramebufferTexture&&I.minFilter!==Oi&&I.minFilter!==Mr?Math.log2(Math.max(N.width,N.height))+1:I.mipmaps!==void 0&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?N.mipmaps.length:1}function E(I){const N=I.target;N.removeEventListener("dispose",E),T(N),N.isVideoTexture&&u.delete(N)}function w(I){const N=I.target;N.removeEventListener("dispose",w),M(N)}function T(I){const N=i.get(I);if(N.__webglInit===void 0)return;const ne=I.source,de=d.get(ne);if(de){const me=de[N.__cacheKey];me.usedTimes--,me.usedTimes===0&&A(I),Object.keys(de).length===0&&d.delete(ne)}i.remove(I)}function A(I){const N=i.get(I);n.deleteTexture(N.__webglTexture);const ne=I.source,de=d.get(ne);delete de[N.__cacheKey],o.memory.textures--}function M(I){const N=i.get(I);if(I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(N.__webglFramebuffer[de]))for(let me=0;me<N.__webglFramebuffer[de].length;me++)n.deleteFramebuffer(N.__webglFramebuffer[de][me]);else n.deleteFramebuffer(N.__webglFramebuffer[de]);N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer[de])}else{if(Array.isArray(N.__webglFramebuffer))for(let de=0;de<N.__webglFramebuffer.length;de++)n.deleteFramebuffer(N.__webglFramebuffer[de]);else n.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&n.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let de=0;de<N.__webglColorRenderbuffer.length;de++)N.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(N.__webglColorRenderbuffer[de]);N.__webglDepthRenderbuffer&&n.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const ne=I.textures;for(let de=0,me=ne.length;de<me;de++){const le=i.get(ne[de]);le.__webglTexture&&(n.deleteTexture(le.__webglTexture),o.memory.textures--),i.remove(ne[de])}i.remove(I)}let S=0;function P(){S=0}function F(){const I=S;return I>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+s.maxTextures),S+=1,I}function H(I){const N=[];return N.push(I.wrapS),N.push(I.wrapT),N.push(I.wrapR||0),N.push(I.magFilter),N.push(I.minFilter),N.push(I.anisotropy),N.push(I.internalFormat),N.push(I.format),N.push(I.type),N.push(I.generateMipmaps),N.push(I.premultiplyAlpha),N.push(I.flipY),N.push(I.unpackAlignment),N.push(I.colorSpace),N.join()}function ee(I,N){const ne=i.get(I);if(I.isVideoTexture&&q(I),I.isRenderTargetTexture===!1&&I.version>0&&ne.__version!==I.version){const de=I.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ut(ne,I,N);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+N)}function K(I,N){const ne=i.get(I);if(I.version>0&&ne.__version!==I.version){ut(ne,I,N);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+N)}function j(I,N){const ne=i.get(I);if(I.version>0&&ne.__version!==I.version){ut(ne,I,N);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+N)}function Z(I,N){const ne=i.get(I);if(I.version>0&&ne.__version!==I.version){te(ne,I,N);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+N)}const D={[Gx]:n.REPEAT,[Gl]:n.CLAMP_TO_EDGE,[Wx]:n.MIRRORED_REPEAT},ie={[Oi]:n.NEAREST,[R8]:n.NEAREST_MIPMAP_NEAREST,[Ip]:n.NEAREST_MIPMAP_LINEAR,[Mr]:n.LINEAR,[e_]:n.LINEAR_MIPMAP_NEAREST,[Ma]:n.LINEAR_MIPMAP_LINEAR},R={[G8]:n.NEVER,[q8]:n.ALWAYS,[tI]:n.LESS,[nI]:n.LEQUAL,[W8]:n.EQUAL,[$8]:n.GEQUAL,[j8]:n.GREATER,[X8]:n.NOTEQUAL};function ce(I,N){if(N.type===Po&&e.has("OES_texture_float_linear")===!1&&(N.magFilter===Mr||N.magFilter===e_||N.magFilter===Ip||N.magFilter===Ma||N.minFilter===Mr||N.minFilter===e_||N.minFilter===Ip||N.minFilter===Ma)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(I,n.TEXTURE_WRAP_S,D[N.wrapS]),n.texParameteri(I,n.TEXTURE_WRAP_T,D[N.wrapT]),(I===n.TEXTURE_3D||I===n.TEXTURE_2D_ARRAY)&&n.texParameteri(I,n.TEXTURE_WRAP_R,D[N.wrapR]),n.texParameteri(I,n.TEXTURE_MAG_FILTER,ie[N.magFilter]),n.texParameteri(I,n.TEXTURE_MIN_FILTER,ie[N.minFilter]),N.compareFunction&&(n.texParameteri(I,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(I,n.TEXTURE_COMPARE_FUNC,R[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===Oi||N.minFilter!==Ip&&N.minFilter!==Ma||N.type===Po&&e.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||i.get(N).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(I,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,s.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy}}}function Pe(I,N){let ne=!1;I.__webglInit===void 0&&(I.__webglInit=!0,N.addEventListener("dispose",E));const de=N.source;let me=d.get(de);me===void 0&&(me={},d.set(de,me));const le=H(N);if(le!==I.__cacheKey){me[le]===void 0&&(me[le]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),me[le].usedTimes++;const Ge=me[I.__cacheKey];Ge!==void 0&&(me[I.__cacheKey].usedTimes--,Ge.usedTimes===0&&A(N)),I.__cacheKey=le,I.__webglTexture=me[le].texture}return ne}function ut(I,N,ne){let de=n.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(de=n.TEXTURE_2D_ARRAY),N.isData3DTexture&&(de=n.TEXTURE_3D);const me=Pe(I,N),le=N.source;t.bindTexture(de,I.__webglTexture,n.TEXTURE0+ne);const Ge=i.get(le);if(le.version!==Ge.__version||me===!0){t.activeTexture(n.TEXTURE0+ne);const ve=Gt.getPrimaries(Gt.workingColorSpace),we=N.colorSpace===pa?null:Gt.getPrimaries(N.colorSpace),et=N.colorSpace===pa||ve===we?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,et);let _e=m(N.image,!1,s.maxTextureSize);_e=Ke(N,_e);const Be=r.convert(N.format,N.colorSpace),Xe=r.convert(N.type);let nt=y(N.internalFormat,Be,Xe,N.colorSpace,N.isVideoTexture);ce(de,N);let Ee;const lt=N.mipmaps,mt=N.isVideoTexture!==!0,Vt=Ge.__version===void 0||me===!0,V=le.dataReady,fe=x(N,_e);if(N.isDepthTexture)nt=_(N.format===lh,N.type),Vt&&(mt?t.texStorage2D(n.TEXTURE_2D,1,nt,_e.width,_e.height):t.texImage2D(n.TEXTURE_2D,0,nt,_e.width,_e.height,0,Be,Xe,null));else if(N.isDataTexture)if(lt.length>0){mt&&Vt&&t.texStorage2D(n.TEXTURE_2D,fe,nt,lt[0].width,lt[0].height);for(let oe=0,ae=lt.length;oe<ae;oe++)Ee=lt[oe],mt?V&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Ee.width,Ee.height,Be,Xe,Ee.data):t.texImage2D(n.TEXTURE_2D,oe,nt,Ee.width,Ee.height,0,Be,Xe,Ee.data);N.generateMipmaps=!1}else mt?(Vt&&t.texStorage2D(n.TEXTURE_2D,fe,nt,_e.width,_e.height),V&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,_e.width,_e.height,Be,Xe,_e.data)):t.texImage2D(n.TEXTURE_2D,0,nt,_e.width,_e.height,0,Be,Xe,_e.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){mt&&Vt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,fe,nt,lt[0].width,lt[0].height,_e.depth);for(let oe=0,ae=lt.length;oe<ae;oe++)if(Ee=lt[oe],N.format!==Qr)if(Be!==null)if(mt){if(V)if(N.layerUpdates.size>0){for(const ye of N.layerUpdates){const $e=Ee.width*Ee.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,ye,Ee.width,Ee.height,1,Be,Ee.data.slice($e*ye,$e*(ye+1)),0,0)}N.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,0,Ee.width,Ee.height,_e.depth,Be,Ee.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,oe,nt,Ee.width,Ee.height,_e.depth,0,Ee.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else mt?V&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,0,Ee.width,Ee.height,_e.depth,Be,Xe,Ee.data):t.texImage3D(n.TEXTURE_2D_ARRAY,oe,nt,Ee.width,Ee.height,_e.depth,0,Be,Xe,Ee.data)}else{mt&&Vt&&t.texStorage2D(n.TEXTURE_2D,fe,nt,lt[0].width,lt[0].height);for(let oe=0,ae=lt.length;oe<ae;oe++)Ee=lt[oe],N.format!==Qr?Be!==null?mt?V&&t.compressedTexSubImage2D(n.TEXTURE_2D,oe,0,0,Ee.width,Ee.height,Be,Ee.data):t.compressedTexImage2D(n.TEXTURE_2D,oe,nt,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):mt?V&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Ee.width,Ee.height,Be,Xe,Ee.data):t.texImage2D(n.TEXTURE_2D,oe,nt,Ee.width,Ee.height,0,Be,Xe,Ee.data)}else if(N.isDataArrayTexture)if(mt){if(Vt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,fe,nt,_e.width,_e.height,_e.depth),V)if(N.layerUpdates.size>0){let oe;switch(Xe){case n.UNSIGNED_BYTE:switch(Be){case n.ALPHA:oe=1;break;case n.LUMINANCE:oe=1;break;case n.LUMINANCE_ALPHA:oe=2;break;case n.RGB:oe=3;break;case n.RGBA:oe=4;break;default:throw new Error(`Unknown texel size for format ${Be}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:oe=1;break;default:throw new Error(`Unknown texel size for type ${Xe}.`)}const ae=_e.width*_e.height*oe;for(const ye of N.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ye,_e.width,_e.height,1,Be,Xe,_e.data.slice(ae*ye,ae*(ye+1)));N.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,_e.width,_e.height,_e.depth,Be,Xe,_e.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,nt,_e.width,_e.height,_e.depth,0,Be,Xe,_e.data);else if(N.isData3DTexture)mt?(Vt&&t.texStorage3D(n.TEXTURE_3D,fe,nt,_e.width,_e.height,_e.depth),V&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,_e.width,_e.height,_e.depth,Be,Xe,_e.data)):t.texImage3D(n.TEXTURE_3D,0,nt,_e.width,_e.height,_e.depth,0,Be,Xe,_e.data);else if(N.isFramebufferTexture){if(Vt)if(mt)t.texStorage2D(n.TEXTURE_2D,fe,nt,_e.width,_e.height);else{let oe=_e.width,ae=_e.height;for(let ye=0;ye<fe;ye++)t.texImage2D(n.TEXTURE_2D,ye,nt,oe,ae,0,Be,Xe,null),oe>>=1,ae>>=1}}else if(lt.length>0){if(mt&&Vt){const oe=Ft(lt[0]);t.texStorage2D(n.TEXTURE_2D,fe,nt,oe.width,oe.height)}for(let oe=0,ae=lt.length;oe<ae;oe++)Ee=lt[oe],mt?V&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Be,Xe,Ee):t.texImage2D(n.TEXTURE_2D,oe,nt,Be,Xe,Ee);N.generateMipmaps=!1}else if(mt){if(Vt){const oe=Ft(_e);t.texStorage2D(n.TEXTURE_2D,fe,nt,oe.width,oe.height)}V&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Be,Xe,_e)}else t.texImage2D(n.TEXTURE_2D,0,nt,Be,Xe,_e);v(N)&&p(de),Ge.__version=le.version,N.onUpdate&&N.onUpdate(N)}I.__version=N.version}function te(I,N,ne){if(N.image.length!==6)return;const de=Pe(I,N),me=N.source;t.bindTexture(n.TEXTURE_CUBE_MAP,I.__webglTexture,n.TEXTURE0+ne);const le=i.get(me);if(me.version!==le.__version||de===!0){t.activeTexture(n.TEXTURE0+ne);const Ge=Gt.getPrimaries(Gt.workingColorSpace),ve=N.colorSpace===pa?null:Gt.getPrimaries(N.colorSpace),we=N.colorSpace===pa||Ge===ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,we);const et=N.isCompressedTexture||N.image[0].isCompressedTexture,_e=N.image[0]&&N.image[0].isDataTexture,Be=[];for(let ae=0;ae<6;ae++)!et&&!_e?Be[ae]=m(N.image[ae],!0,s.maxCubemapSize):Be[ae]=_e?N.image[ae].image:N.image[ae],Be[ae]=Ke(N,Be[ae]);const Xe=Be[0],nt=r.convert(N.format,N.colorSpace),Ee=r.convert(N.type),lt=y(N.internalFormat,nt,Ee,N.colorSpace),mt=N.isVideoTexture!==!0,Vt=le.__version===void 0||de===!0,V=me.dataReady;let fe=x(N,Xe);ce(n.TEXTURE_CUBE_MAP,N);let oe;if(et){mt&&Vt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,lt,Xe.width,Xe.height);for(let ae=0;ae<6;ae++){oe=Be[ae].mipmaps;for(let ye=0;ye<oe.length;ye++){const $e=oe[ye];N.format!==Qr?nt!==null?mt?V&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye,0,0,$e.width,$e.height,nt,$e.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye,lt,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mt?V&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye,0,0,$e.width,$e.height,nt,Ee,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye,lt,$e.width,$e.height,0,nt,Ee,$e.data)}}}else{if(oe=N.mipmaps,mt&&Vt){oe.length>0&&fe++;const ae=Ft(Be[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,lt,ae.width,ae.height)}for(let ae=0;ae<6;ae++)if(_e){mt?V&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,0,0,Be[ae].width,Be[ae].height,nt,Ee,Be[ae].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,lt,Be[ae].width,Be[ae].height,0,nt,Ee,Be[ae].data);for(let ye=0;ye<oe.length;ye++){const yt=oe[ye].image[ae].image;mt?V&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye+1,0,0,yt.width,yt.height,nt,Ee,yt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye+1,lt,yt.width,yt.height,0,nt,Ee,yt.data)}}else{mt?V&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,0,0,nt,Ee,Be[ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,lt,nt,Ee,Be[ae]);for(let ye=0;ye<oe.length;ye++){const $e=oe[ye];mt?V&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye+1,0,0,nt,Ee,$e.image[ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye+1,lt,nt,Ee,$e.image[ae])}}}v(N)&&p(n.TEXTURE_CUBE_MAP),le.__version=me.version,N.onUpdate&&N.onUpdate(N)}I.__version=N.version}function he(I,N,ne,de,me,le){const Ge=r.convert(ne.format,ne.colorSpace),ve=r.convert(ne.type),we=y(ne.internalFormat,Ge,ve,ne.colorSpace);if(!i.get(N).__hasExternalTextures){const _e=Math.max(1,N.width>>le),Be=Math.max(1,N.height>>le);me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?t.texImage3D(me,le,we,_e,Be,N.depth,0,Ge,ve,null):t.texImage2D(me,le,we,_e,Be,0,Ge,ve,null)}t.bindFramebuffer(n.FRAMEBUFFER,I),at(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,de,me,i.get(ne).__webglTexture,0,ke(N)):(me===n.TEXTURE_2D||me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,de,me,i.get(ne).__webglTexture,le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(I,N,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,I),N.depthBuffer){const de=N.depthTexture,me=de&&de.isDepthTexture?de.type:null,le=_(N.stencilBuffer,me),Ge=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=ke(N);at(N)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ve,le,N.width,N.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,ve,le,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,le,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,I)}else{const de=N.textures;for(let me=0;me<de.length;me++){const le=de[me],Ge=r.convert(le.format,le.colorSpace),ve=r.convert(le.type),we=y(le.internalFormat,Ge,ve,le.colorSpace),et=ke(N);ne&&at(N)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,we,N.width,N.height):at(N)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,we,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,we,N.width,N.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ge(I,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,I),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),ee(N.depthTexture,0);const de=i.get(N.depthTexture).__webglTexture,me=ke(N);if(N.depthTexture.format===Lu)at(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,de,0,me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,de,0);else if(N.depthTexture.format===lh)at(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,de,0,me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function Qe(I){const N=i.get(I),ne=I.isWebGLCubeRenderTarget===!0;if(I.depthTexture&&!N.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ge(N.__webglFramebuffer,I)}else if(ne){N.__webglDepthbuffer=[];for(let de=0;de<6;de++)t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer[de]),N.__webglDepthbuffer[de]=n.createRenderbuffer(),Te(N.__webglDepthbuffer[de],I,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer=n.createRenderbuffer(),Te(N.__webglDepthbuffer,I,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function qe(I,N,ne){const de=i.get(I);N!==void 0&&he(de.__webglFramebuffer,I,I.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&Qe(I)}function pt(I){const N=I.texture,ne=i.get(I),de=i.get(N);I.addEventListener("dispose",w);const me=I.textures,le=I.isWebGLCubeRenderTarget===!0,Ge=me.length>1;if(Ge||(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=N.version,o.memory.textures++),le){ne.__webglFramebuffer=[];for(let ve=0;ve<6;ve++)if(N.mipmaps&&N.mipmaps.length>0){ne.__webglFramebuffer[ve]=[];for(let we=0;we<N.mipmaps.length;we++)ne.__webglFramebuffer[ve][we]=n.createFramebuffer()}else ne.__webglFramebuffer[ve]=n.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){ne.__webglFramebuffer=[];for(let ve=0;ve<N.mipmaps.length;ve++)ne.__webglFramebuffer[ve]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(Ge)for(let ve=0,we=me.length;ve<we;ve++){const et=i.get(me[ve]);et.__webglTexture===void 0&&(et.__webglTexture=n.createTexture(),o.memory.textures++)}if(I.samples>0&&at(I)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let ve=0;ve<me.length;ve++){const we=me[ve];ne.__webglColorRenderbuffer[ve]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[ve]);const et=r.convert(we.format,we.colorSpace),_e=r.convert(we.type),Be=y(we.internalFormat,et,_e,we.colorSpace,I.isXRRenderTarget===!0),Xe=ke(I);n.renderbufferStorageMultisample(n.RENDERBUFFER,Xe,Be,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,ne.__webglColorRenderbuffer[ve])}n.bindRenderbuffer(n.RENDERBUFFER,null),I.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),Te(ne.__webglDepthRenderbuffer,I,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(le){t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),ce(n.TEXTURE_CUBE_MAP,N);for(let ve=0;ve<6;ve++)if(N.mipmaps&&N.mipmaps.length>0)for(let we=0;we<N.mipmaps.length;we++)he(ne.__webglFramebuffer[ve][we],I,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,we);else he(ne.__webglFramebuffer[ve],I,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0);v(N)&&p(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ge){for(let ve=0,we=me.length;ve<we;ve++){const et=me[ve],_e=i.get(et);t.bindTexture(n.TEXTURE_2D,_e.__webglTexture),ce(n.TEXTURE_2D,et),he(ne.__webglFramebuffer,I,et,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,0),v(et)&&p(n.TEXTURE_2D)}t.unbindTexture()}else{let ve=n.TEXTURE_2D;if((I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(ve=I.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ve,de.__webglTexture),ce(ve,N),N.mipmaps&&N.mipmaps.length>0)for(let we=0;we<N.mipmaps.length;we++)he(ne.__webglFramebuffer[we],I,N,n.COLOR_ATTACHMENT0,ve,we);else he(ne.__webglFramebuffer,I,N,n.COLOR_ATTACHMENT0,ve,0);v(N)&&p(ve),t.unbindTexture()}I.depthBuffer&&Qe(I)}function U(I){const N=I.textures;for(let ne=0,de=N.length;ne<de;ne++){const me=N[ne];if(v(me)){const le=I.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ge=i.get(me).__webglTexture;t.bindTexture(le,Ge),p(le),t.unbindTexture()}}}const ot=[],Le=[];function ht(I){if(I.samples>0){if(at(I)===!1){const N=I.textures,ne=I.width,de=I.height;let me=n.COLOR_BUFFER_BIT;const le=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=i.get(I),ve=N.length>1;if(ve)for(let we=0;we<N.length;we++)t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ge.__webglFramebuffer);for(let we=0;we<N.length;we++){if(I.resolveDepthBuffer&&(I.depthBuffer&&(me|=n.DEPTH_BUFFER_BIT),I.stencilBuffer&&I.resolveStencilBuffer&&(me|=n.STENCIL_BUFFER_BIT)),ve){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[we]);const et=i.get(N[we]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,et,0)}n.blitFramebuffer(0,0,ne,de,0,0,ne,de,me,n.NEAREST),l===!0&&(ot.length=0,Le.length=0,ot.push(n.COLOR_ATTACHMENT0+we),I.depthBuffer&&I.resolveDepthBuffer===!1&&(ot.push(le),Le.push(le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Le)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ot))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ve)for(let we=0;we<N.length;we++){t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[we]);const et=i.get(N[we]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,et,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ge.__webglMultisampledFramebuffer)}else if(I.depthBuffer&&I.resolveDepthBuffer===!1&&l){const N=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N])}}}function ke(I){return Math.min(s.maxSamples,I.samples)}function at(I){const N=i.get(I);return I.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function q(I){const N=o.render.frame;u.get(I)!==N&&(u.set(I,N),I.update())}function Ke(I,N){const ne=I.colorSpace,de=I.format,me=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||ne!==Fr&&ne!==pa&&(Gt.getTransfer(ne)===an?(de!==Qr||me!==Za)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),N}function Ft(I){return typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement?(c.width=I.naturalWidth||I.width,c.height=I.naturalHeight||I.height):typeof VideoFrame<"u"&&I instanceof VideoFrame?(c.width=I.displayWidth,c.height=I.displayHeight):(c.width=I.width,c.height=I.height),c}this.allocateTextureUnit=F,this.resetTextureUnits=P,this.setTexture2D=ee,this.setTexture2DArray=K,this.setTexture3D=j,this.setTextureCube=Z,this.rebindTextures=qe,this.setupRenderTarget=pt,this.updateRenderTargetMipmap=U,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=he,this.useMultisampledRTT=at}function cX(n,e){function t(i,s=pa){let r;const o=Gt.getTransfer(s);if(i===Za)return n.UNSIGNED_BYTE;if(i===YL)return n.UNSIGNED_SHORT_4_4_4_4;if(i===KL)return n.UNSIGNED_SHORT_5_5_5_1;if(i===I8)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===P8)return n.BYTE;if(i===L8)return n.SHORT;if(i===Pg)return n.UNSIGNED_SHORT;if(i===qL)return n.INT;if(i===oh)return n.UNSIGNED_INT;if(i===Po)return n.FLOAT;if(i===zf)return n.HALF_FLOAT;if(i===D8)return n.ALPHA;if(i===O8)return n.RGB;if(i===Qr)return n.RGBA;if(i===U8)return n.LUMINANCE;if(i===F8)return n.LUMINANCE_ALPHA;if(i===Lu)return n.DEPTH_COMPONENT;if(i===lh)return n.DEPTH_STENCIL;if(i===V8)return n.RED;if(i===ZL)return n.RED_INTEGER;if(i===k8)return n.RG;if(i===QL)return n.RG_INTEGER;if(i===JL)return n.RGBA_INTEGER;if(i===t_||i===n_||i===i_||i===s_)if(o===an)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===t_)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===n_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===i_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===s_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===t_)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===n_)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===i_)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===s_)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===uA||i===hA||i===dA||i===fA)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===uA)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===hA)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===dA)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===fA)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===pA||i===mA||i===gA)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===pA||i===mA)return o===an?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===gA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===vA||i===_A||i===yA||i===xA||i===SA||i===TA||i===MA||i===wA||i===EA||i===AA||i===NA||i===CA||i===bA||i===RA)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===vA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===_A)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===yA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===xA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===SA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===TA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===MA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===wA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===EA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===AA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===NA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===CA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===bA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===RA)return o===an?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===r_||i===PA||i===LA)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===r_)return o===an?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===PA)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===LA)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===z8||i===IA||i===DA||i===OA)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===r_)return r.COMPRESSED_RED_RGTC1_EXT;if(i===IA)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===DA)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===OA)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ah?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class uX extends as{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class tm extends Zn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hX={type:"move"};class R_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new tm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new tm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new tm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,i),p=this._getHandJoint(c,m);v!==null&&(p.matrix.fromArray(v.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=v.radius),p.visible=v!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,g=.005;c.inputState.pinching&&d>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(hX)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new tm;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const dX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class pX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new Vi,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new qo({vertexShader:dX,fragmentShader:fX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Nr(new Wf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class mX extends ll{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,g=null;const m=new pX,v=t.getContextAttributes();let p=null,y=null;const _=[],x=[],E=new Ye;let w=null;const T=new as;T.layers.enable(1),T.viewport=new Dt;const A=new as;A.layers.enable(2),A.viewport=new Dt;const M=[T,A],S=new uX;S.layers.enable(1),S.layers.enable(2);let P=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let he=_[te];return he===void 0&&(he=new R_,_[te]=he),he.getTargetRaySpace()},this.getControllerGrip=function(te){let he=_[te];return he===void 0&&(he=new R_,_[te]=he),he.getGripSpace()},this.getHand=function(te){let he=_[te];return he===void 0&&(he=new R_,_[te]=he),he.getHandSpace()};function H(te){const he=x.indexOf(te.inputSource);if(he===-1)return;const Te=_[he];Te!==void 0&&(Te.update(te.inputSource,te.frame,c||o),Te.dispatchEvent({type:te.type,data:te.inputSource}))}function ee(){s.removeEventListener("select",H),s.removeEventListener("selectstart",H),s.removeEventListener("selectend",H),s.removeEventListener("squeeze",H),s.removeEventListener("squeezestart",H),s.removeEventListener("squeezeend",H),s.removeEventListener("end",ee),s.removeEventListener("inputsourceschange",K);for(let te=0;te<_.length;te++){const he=x[te];he!==null&&(x[te]=null,_[te].disconnect(he))}P=null,F=null,m.reset(),e.setRenderTarget(p),f=null,d=null,h=null,s=null,y=null,ut.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(E.width,E.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){r=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){a=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(te){c=te},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function(te){if(s=te,s!==null){if(p=e.getRenderTarget(),s.addEventListener("select",H),s.addEventListener("selectstart",H),s.addEventListener("selectend",H),s.addEventListener("squeeze",H),s.addEventListener("squeezestart",H),s.addEventListener("squeezeend",H),s.addEventListener("end",ee),s.addEventListener("inputsourceschange",K),v.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(E),s.renderState.layers===void 0){const he={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(s,t,he),s.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),y=new hc(f.framebufferWidth,f.framebufferHeight,{format:Qr,type:Za,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let he=null,Te=null,ge=null;v.depth&&(ge=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=v.stencil?lh:Lu,Te=v.stencil?ah:oh);const Qe={colorFormat:t.RGBA8,depthFormat:ge,scaleFactor:r};h=new XRWebGLBinding(s,t),d=h.createProjectionLayer(Qe),s.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),y=new hc(d.textureWidth,d.textureHeight,{format:Qr,type:Za,depthTexture:new jf(d.textureWidth,d.textureHeight,Te,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),ut.setContext(s),ut.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function K(te){for(let he=0;he<te.removed.length;he++){const Te=te.removed[he],ge=x.indexOf(Te);ge>=0&&(x[ge]=null,_[ge].disconnect(Te))}for(let he=0;he<te.added.length;he++){const Te=te.added[he];let ge=x.indexOf(Te);if(ge===-1){for(let qe=0;qe<_.length;qe++)if(qe>=x.length){x.push(Te),ge=qe;break}else if(x[qe]===null){x[qe]=Te,ge=qe;break}if(ge===-1)break}const Qe=_[ge];Qe&&Qe.connect(Te)}}const j=new $,Z=new $;function D(te,he,Te){j.setFromMatrixPosition(he.matrixWorld),Z.setFromMatrixPosition(Te.matrixWorld);const ge=j.distanceTo(Z),Qe=he.projectionMatrix.elements,qe=Te.projectionMatrix.elements,pt=Qe[14]/(Qe[10]-1),U=Qe[14]/(Qe[10]+1),ot=(Qe[9]+1)/Qe[5],Le=(Qe[9]-1)/Qe[5],ht=(Qe[8]-1)/Qe[0],ke=(qe[8]+1)/qe[0],at=pt*ht,q=pt*ke,Ke=ge/(-ht+ke),Ft=Ke*-ht;he.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(Ft),te.translateZ(Ke),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert();const I=pt+Ke,N=U+Ke,ne=at-Ft,de=q+(ge-Ft),me=ot*U/N*I,le=Le*U/N*I;te.projectionMatrix.makePerspective(ne,de,me,le,I,N),te.projectionMatrixInverse.copy(te.projectionMatrix).invert()}function ie(te,he){he===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(he.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(s===null)return;m.texture!==null&&(te.near=m.depthNear,te.far=m.depthFar),S.near=A.near=T.near=te.near,S.far=A.far=T.far=te.far,(P!==S.near||F!==S.far)&&(s.updateRenderState({depthNear:S.near,depthFar:S.far}),P=S.near,F=S.far,T.near=P,T.far=F,A.near=P,A.far=F,T.updateProjectionMatrix(),A.updateProjectionMatrix(),te.updateProjectionMatrix());const he=te.parent,Te=S.cameras;ie(S,he);for(let ge=0;ge<Te.length;ge++)ie(Te[ge],he);Te.length===2?D(S,T,A):S.projectionMatrix.copy(T.projectionMatrix),R(te,S,he)};function R(te,he,Te){Te===null?te.matrix.copy(he.matrixWorld):(te.matrix.copy(Te.matrixWorld),te.matrix.invert(),te.matrix.multiply(he.matrixWorld)),te.matrix.decompose(te.position,te.quaternion,te.scale),te.updateMatrixWorld(!0),te.projectionMatrix.copy(he.projectionMatrix),te.projectionMatrixInverse.copy(he.projectionMatrixInverse),te.isPerspectiveCamera&&(te.fov=uh*2*Math.atan(1/te.projectionMatrix.elements[5]),te.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(te){l=te,d!==null&&(d.fixedFoveation=te),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=te)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(S)};let ce=null;function Pe(te,he){if(u=he.getViewerPose(c||o),g=he,u!==null){const Te=u.views;f!==null&&(e.setRenderTargetFramebuffer(y,f.framebuffer),e.setRenderTarget(y));let ge=!1;Te.length!==S.cameras.length&&(S.cameras.length=0,ge=!0);for(let qe=0;qe<Te.length;qe++){const pt=Te[qe];let U=null;if(f!==null)U=f.getViewport(pt);else{const Le=h.getViewSubImage(d,pt);U=Le.viewport,qe===0&&(e.setRenderTargetTextures(y,Le.colorTexture,d.ignoreDepthValues?void 0:Le.depthStencilTexture),e.setRenderTarget(y))}let ot=M[qe];ot===void 0&&(ot=new as,ot.layers.enable(qe),ot.viewport=new Dt,M[qe]=ot),ot.matrix.fromArray(pt.transform.matrix),ot.matrix.decompose(ot.position,ot.quaternion,ot.scale),ot.projectionMatrix.fromArray(pt.projectionMatrix),ot.projectionMatrixInverse.copy(ot.projectionMatrix).invert(),ot.viewport.set(U.x,U.y,U.width,U.height),qe===0&&(S.matrix.copy(ot.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),ge===!0&&S.cameras.push(ot)}const Qe=s.enabledFeatures;if(Qe&&Qe.includes("depth-sensing")){const qe=h.getDepthInformation(Te[0]);qe&&qe.isValid&&qe.texture&&m.init(e,qe,s.renderState)}}for(let Te=0;Te<_.length;Te++){const ge=x[Te],Qe=_[Te];ge!==null&&Qe!==void 0&&Qe.update(ge,he,c||o)}ce&&ce(te,he),he.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:he}),g=null}const ut=new fI;ut.setAnimationLoop(Pe),this.setAnimationLoop=function(te){ce=te},this.dispose=function(){}}}const yl=new ur,gX=new un;function vX(n,e){function t(v,p){v.matrixAutoUpdate===!0&&v.updateMatrix(),p.value.copy(v.matrix)}function i(v,p){p.color.getRGB(v.fogColor.value,uI(n)),p.isFog?(v.fogNear.value=p.near,v.fogFar.value=p.far):p.isFogExp2&&(v.fogDensity.value=p.density)}function s(v,p,y,_,x){p.isMeshBasicMaterial||p.isMeshLambertMaterial?r(v,p):p.isMeshToonMaterial?(r(v,p),h(v,p)):p.isMeshPhongMaterial?(r(v,p),u(v,p)):p.isMeshStandardMaterial?(r(v,p),d(v,p),p.isMeshPhysicalMaterial&&f(v,p,x)):p.isMeshMatcapMaterial?(r(v,p),g(v,p)):p.isMeshDepthMaterial?r(v,p):p.isMeshDistanceMaterial?(r(v,p),m(v,p)):p.isMeshNormalMaterial?r(v,p):p.isLineBasicMaterial?(o(v,p),p.isLineDashedMaterial&&a(v,p)):p.isPointsMaterial?l(v,p,y,_):p.isSpriteMaterial?c(v,p):p.isShadowMaterial?(v.color.value.copy(p.color),v.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function r(v,p){v.opacity.value=p.opacity,p.color&&v.diffuse.value.copy(p.color),p.emissive&&v.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(v.map.value=p.map,t(p.map,v.mapTransform)),p.alphaMap&&(v.alphaMap.value=p.alphaMap,t(p.alphaMap,v.alphaMapTransform)),p.bumpMap&&(v.bumpMap.value=p.bumpMap,t(p.bumpMap,v.bumpMapTransform),v.bumpScale.value=p.bumpScale,p.side===ts&&(v.bumpScale.value*=-1)),p.normalMap&&(v.normalMap.value=p.normalMap,t(p.normalMap,v.normalMapTransform),v.normalScale.value.copy(p.normalScale),p.side===ts&&v.normalScale.value.negate()),p.displacementMap&&(v.displacementMap.value=p.displacementMap,t(p.displacementMap,v.displacementMapTransform),v.displacementScale.value=p.displacementScale,v.displacementBias.value=p.displacementBias),p.emissiveMap&&(v.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,v.emissiveMapTransform)),p.specularMap&&(v.specularMap.value=p.specularMap,t(p.specularMap,v.specularMapTransform)),p.alphaTest>0&&(v.alphaTest.value=p.alphaTest);const y=e.get(p),_=y.envMap,x=y.envMapRotation;_&&(v.envMap.value=_,yl.copy(x),yl.x*=-1,yl.y*=-1,yl.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(yl.y*=-1,yl.z*=-1),v.envMapRotation.value.setFromMatrix4(gX.makeRotationFromEuler(yl)),v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=p.reflectivity,v.ior.value=p.ior,v.refractionRatio.value=p.refractionRatio),p.lightMap&&(v.lightMap.value=p.lightMap,v.lightMapIntensity.value=p.lightMapIntensity,t(p.lightMap,v.lightMapTransform)),p.aoMap&&(v.aoMap.value=p.aoMap,v.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,v.aoMapTransform))}function o(v,p){v.diffuse.value.copy(p.color),v.opacity.value=p.opacity,p.map&&(v.map.value=p.map,t(p.map,v.mapTransform))}function a(v,p){v.dashSize.value=p.dashSize,v.totalSize.value=p.dashSize+p.gapSize,v.scale.value=p.scale}function l(v,p,y,_){v.diffuse.value.copy(p.color),v.opacity.value=p.opacity,v.size.value=p.size*y,v.scale.value=_*.5,p.map&&(v.map.value=p.map,t(p.map,v.uvTransform)),p.alphaMap&&(v.alphaMap.value=p.alphaMap,t(p.alphaMap,v.alphaMapTransform)),p.alphaTest>0&&(v.alphaTest.value=p.alphaTest)}function c(v,p){v.diffuse.value.copy(p.color),v.opacity.value=p.opacity,v.rotation.value=p.rotation,p.map&&(v.map.value=p.map,t(p.map,v.mapTransform)),p.alphaMap&&(v.alphaMap.value=p.alphaMap,t(p.alphaMap,v.alphaMapTransform)),p.alphaTest>0&&(v.alphaTest.value=p.alphaTest)}function u(v,p){v.specular.value.copy(p.specular),v.shininess.value=Math.max(p.shininess,1e-4)}function h(v,p){p.gradientMap&&(v.gradientMap.value=p.gradientMap)}function d(v,p){v.metalness.value=p.metalness,p.metalnessMap&&(v.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,v.metalnessMapTransform)),v.roughness.value=p.roughness,p.roughnessMap&&(v.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,v.roughnessMapTransform)),p.envMap&&(v.envMapIntensity.value=p.envMapIntensity)}function f(v,p,y){v.ior.value=p.ior,p.sheen>0&&(v.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),v.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(v.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,v.sheenColorMapTransform)),p.sheenRoughnessMap&&(v.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,v.sheenRoughnessMapTransform))),p.clearcoat>0&&(v.clearcoat.value=p.clearcoat,v.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(v.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,v.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(v.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===ts&&v.clearcoatNormalScale.value.negate())),p.dispersion>0&&(v.dispersion.value=p.dispersion),p.iridescence>0&&(v.iridescence.value=p.iridescence,v.iridescenceIOR.value=p.iridescenceIOR,v.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(v.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,v.iridescenceMapTransform)),p.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),p.transmission>0&&(v.transmission.value=p.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),p.transmissionMap&&(v.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,v.transmissionMapTransform)),v.thickness.value=p.thickness,p.thicknessMap&&(v.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=p.attenuationDistance,v.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(v.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(v.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=p.specularIntensity,v.specularColor.value.copy(p.specularColor),p.specularColorMap&&(v.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,v.specularColorMapTransform)),p.specularIntensityMap&&(v.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,v.specularIntensityMapTransform))}function g(v,p){p.matcap&&(v.matcap.value=p.matcap)}function m(v,p){const y=e.get(p).light;v.referencePosition.value.setFromMatrixPosition(y.matrixWorld),v.nearDistance.value=y.shadow.camera.near,v.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function _X(n,e,t,i){let s={},r={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,_){const x=_.program;i.uniformBlockBinding(y,x)}function c(y,_){let x=s[y.id];x===void 0&&(g(y),x=u(y),s[y.id]=x,y.addEventListener("dispose",v));const E=_.program;i.updateUBOMapping(y,E);const w=e.render.frame;r[y.id]!==w&&(d(y),r[y.id]=w)}function u(y){const _=h();y.__bindingPointIndex=_;const x=n.createBuffer(),E=y.__size,w=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,E,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,x),x}function h(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const _=s[y.id],x=y.uniforms,E=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let w=0,T=x.length;w<T;w++){const A=Array.isArray(x[w])?x[w]:[x[w]];for(let M=0,S=A.length;M<S;M++){const P=A[M];if(f(P,w,M,E)===!0){const F=P.__offset,H=Array.isArray(P.value)?P.value:[P.value];let ee=0;for(let K=0;K<H.length;K++){const j=H[K],Z=m(j);typeof j=="number"||typeof j=="boolean"?(P.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,F+ee,P.__data)):j.isMatrix3?(P.__data[0]=j.elements[0],P.__data[1]=j.elements[1],P.__data[2]=j.elements[2],P.__data[3]=0,P.__data[4]=j.elements[3],P.__data[5]=j.elements[4],P.__data[6]=j.elements[5],P.__data[7]=0,P.__data[8]=j.elements[6],P.__data[9]=j.elements[7],P.__data[10]=j.elements[8],P.__data[11]=0):(j.toArray(P.__data,ee),ee+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,F,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(y,_,x,E){const w=y.value,T=_+"_"+x;if(E[T]===void 0)return typeof w=="number"||typeof w=="boolean"?E[T]=w:E[T]=w.clone(),!0;{const A=E[T];if(typeof w=="number"||typeof w=="boolean"){if(A!==w)return E[T]=w,!0}else if(A.equals(w)===!1)return A.copy(w),!0}return!1}function g(y){const _=y.uniforms;let x=0;const E=16;for(let T=0,A=_.length;T<A;T++){const M=Array.isArray(_[T])?_[T]:[_[T]];for(let S=0,P=M.length;S<P;S++){const F=M[S],H=Array.isArray(F.value)?F.value:[F.value];for(let ee=0,K=H.length;ee<K;ee++){const j=H[ee],Z=m(j),D=x%E;D!==0&&E-D<Z.boundary&&(x+=E-D),F.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=x,x+=Z.storage}}}const w=x%E;return w>0&&(x+=E-w),y.__size=x,y.__cache={},this}function m(y){const _={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function v(y){const _=y.target;_.removeEventListener("dispose",v);const x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(s[_.id]),delete s[_.id],delete r[_.id]}function p(){for(const y in s)n.deleteBuffer(s[y]);o=[],s={},r={}}return{bind:l,update:c,dispose:p}}class yX{constructor(e={}){const{canvas:t=hG(),context:i=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=i.getContextAttributes().alpha}else d=o;const f=new Uint32Array(4),g=new Int32Array(4);let m=null,v=null;const p=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=yr,this.toneMapping=Us,this.toneMappingExposure=1;const _=this;let x=!1,E=0,w=0,T=null,A=-1,M=null;const S=new Dt,P=new Dt;let F=null;const H=new st(0);let ee=0,K=t.width,j=t.height,Z=1,D=null,ie=null;const R=new Dt(0,0,K,j),ce=new Dt(0,0,K,j);let Pe=!1;const ut=new vT;let te=!1,he=!1;const Te=new un,ge=new $,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let qe=!1;function pt(){return T===null?Z:1}let U=i;function ot(C,k){return t.getContext(C,k)}try{const C={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${uT}`),t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",oe,!1),t.addEventListener("webglcontextcreationerror",ae,!1),U===null){const k="webgl2";if(U=ot(k,C),U===null)throw ot(k)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(C){throw console.error("THREE.WebGLRenderer: "+C.message),C}let Le,ht,ke,at,q,Ke,Ft,I,N,ne,de,me,le,Ge,ve,we,et,_e,Be,Xe,nt,Ee,lt,mt;function Vt(){Le=new N7(U),Le.init(),Ee=new cX(U,Le),ht=new S7(U,Le,e,Ee),ke=new aX(U),at=new R7(U),q=new $j,Ke=new lX(U,Le,ke,q,ht,Ee,at),Ft=new M7(_),I=new A7(_),N=new FG(U),lt=new y7(U,N),ne=new C7(U,N,at,lt),de=new L7(U,ne,N,at),Be=new P7(U,ht,Ke),we=new T7(q),me=new Xj(_,Ft,I,Le,ht,lt,we),le=new vX(_,q),Ge=new Yj,ve=new tX(Le),_e=new _7(_,Ft,I,ke,de,d,l),et=new oX(_,de,ht),mt=new _X(U,at,ht,ke),Xe=new x7(U,Le,at),nt=new b7(U,Le,at),at.programs=me.programs,_.capabilities=ht,_.extensions=Le,_.properties=q,_.renderLists=Ge,_.shadowMap=et,_.state=ke,_.info=at}Vt();const V=new mX(_,U);this.xr=V,this.getContext=function(){return U},this.getContextAttributes=function(){return U.getContextAttributes()},this.forceContextLoss=function(){const C=Le.get("WEBGL_lose_context");C&&C.loseContext()},this.forceContextRestore=function(){const C=Le.get("WEBGL_lose_context");C&&C.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(C){C!==void 0&&(Z=C,this.setSize(K,j,!1))},this.getSize=function(C){return C.set(K,j)},this.setSize=function(C,k,Y=!0){if(V.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=C,j=k,t.width=Math.floor(C*Z),t.height=Math.floor(k*Z),Y===!0&&(t.style.width=C+"px",t.style.height=k+"px"),this.setViewport(0,0,C,k)},this.getDrawingBufferSize=function(C){return C.set(K*Z,j*Z).floor()},this.setDrawingBufferSize=function(C,k,Y){K=C,j=k,Z=Y,t.width=Math.floor(C*Y),t.height=Math.floor(k*Y),this.setViewport(0,0,C,k)},this.getCurrentViewport=function(C){return C.copy(S)},this.getViewport=function(C){return C.copy(R)},this.setViewport=function(C,k,Y,Q){C.isVector4?R.set(C.x,C.y,C.z,C.w):R.set(C,k,Y,Q),ke.viewport(S.copy(R).multiplyScalar(Z).round())},this.getScissor=function(C){return C.copy(ce)},this.setScissor=function(C,k,Y,Q){C.isVector4?ce.set(C.x,C.y,C.z,C.w):ce.set(C,k,Y,Q),ke.scissor(P.copy(ce).multiplyScalar(Z).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(C){ke.setScissorTest(Pe=C)},this.setOpaqueSort=function(C){D=C},this.setTransparentSort=function(C){ie=C},this.getClearColor=function(C){return C.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(C=!0,k=!0,Y=!0){let Q=0;if(C){let G=!1;if(T!==null){const pe=T.texture.format;G=pe===JL||pe===QL||pe===ZL}if(G){const pe=T.texture.type,Me=pe===Za||pe===oh||pe===Pg||pe===ah||pe===YL||pe===KL,Re=_e.getClearColor(),ze=_e.getClearAlpha(),Fe=Re.r,Ie=Re.g,He=Re.b;Me?(f[0]=Fe,f[1]=Ie,f[2]=He,f[3]=ze,U.clearBufferuiv(U.COLOR,0,f)):(g[0]=Fe,g[1]=Ie,g[2]=He,g[3]=ze,U.clearBufferiv(U.COLOR,0,g))}else Q|=U.COLOR_BUFFER_BIT}k&&(Q|=U.DEPTH_BUFFER_BIT),Y&&(Q|=U.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),U.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",oe,!1),t.removeEventListener("webglcontextcreationerror",ae,!1),Ge.dispose(),ve.dispose(),q.dispose(),Ft.dispose(),I.dispose(),de.dispose(),lt.dispose(),mt.dispose(),me.dispose(),V.dispose(),V.removeEventListener("sessionstart",Je),V.removeEventListener("sessionend",We),xt.stop()};function fe(C){C.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function oe(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const C=at.autoReset,k=et.enabled,Y=et.autoUpdate,Q=et.needsUpdate,G=et.type;Vt(),at.autoReset=C,et.enabled=k,et.autoUpdate=Y,et.needsUpdate=Q,et.type=G}function ae(C){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",C.statusMessage)}function ye(C){const k=C.target;k.removeEventListener("dispose",ye),$e(k)}function $e(C){yt(C),q.remove(C)}function yt(C){const k=q.get(C).programs;k!==void 0&&(k.forEach(function(Y){me.releaseProgram(Y)}),C.isShaderMaterial&&me.releaseShaderCache(C))}this.renderBufferDirect=function(C,k,Y,Q,G,pe){k===null&&(k=Qe);const Me=G.isMesh&&G.matrixWorld.determinant()<0,Re=fn(C,k,Y,Q,G);ke.setMaterial(Q,Me);let ze=Y.index,Fe=1;if(Q.wireframe===!0){if(ze=ne.getWireframeAttribute(Y),ze===void 0)return;Fe=2}const Ie=Y.drawRange,He=Y.attributes.position;let Rt=Ie.start*Fe,rn=(Ie.start+Ie.count)*Fe;pe!==null&&(Rt=Math.max(Rt,pe.start*Fe),rn=Math.min(rn,(pe.start+pe.count)*Fe)),ze!==null?(Rt=Math.max(Rt,0),rn=Math.min(rn,ze.count)):He!=null&&(Rt=Math.max(Rt,0),rn=Math.min(rn,He.count));const qt=rn-Rt;if(qt<0||qt===1/0)return;lt.setup(G,Q,Re,Y,ze);let pn,Et=Xe;if(ze!==null&&(pn=N.get(ze),Et=nt,Et.setIndex(pn)),G.isMesh)Q.wireframe===!0?(ke.setLineWidth(Q.wireframeLinewidth*pt()),Et.setMode(U.LINES)):Et.setMode(U.TRIANGLES);else if(G.isLine){let je=Q.linewidth;je===void 0&&(je=1),ke.setLineWidth(je*pt()),G.isLineSegments?Et.setMode(U.LINES):G.isLineLoop?Et.setMode(U.LINE_LOOP):Et.setMode(U.LINE_STRIP)}else G.isPoints?Et.setMode(U.POINTS):G.isSprite&&Et.setMode(U.TRIANGLES);if(G.isBatchedMesh)G._multiDrawInstances!==null?Et.renderMultiDrawInstances(G._multiDrawStarts,G._multiDrawCounts,G._multiDrawCount,G._multiDrawInstances):Et.renderMultiDraw(G._multiDrawStarts,G._multiDrawCounts,G._multiDrawCount);else if(G.isInstancedMesh)Et.renderInstances(Rt,qt,G.count);else if(Y.isInstancedBufferGeometry){const je=Y._maxInstanceCount!==void 0?Y._maxInstanceCount:1/0,Ln=Math.min(Y.instanceCount,je);Et.renderInstances(Rt,qt,Ln)}else Et.render(Rt,qt)};function Xt(C,k,Y){C.transparent===!0&&C.side===Ao&&C.forceSinglePass===!1?(C.side=ts,C.needsUpdate=!0,vt(C,k,Y),C.side=Ka,C.needsUpdate=!0,vt(C,k,Y),C.side=Ao):vt(C,k,Y)}this.compile=function(C,k,Y=null){Y===null&&(Y=C),v=ve.get(Y),v.init(k),y.push(v),Y.traverseVisible(function(G){G.isLight&&G.layers.test(k.layers)&&(v.pushLight(G),G.castShadow&&v.pushShadow(G))}),C!==Y&&C.traverseVisible(function(G){G.isLight&&G.layers.test(k.layers)&&(v.pushLight(G),G.castShadow&&v.pushShadow(G))}),v.setupLights();const Q=new Set;return C.traverse(function(G){const pe=G.material;if(pe)if(Array.isArray(pe))for(let Me=0;Me<pe.length;Me++){const Re=pe[Me];Xt(Re,Y,G),Q.add(Re)}else Xt(pe,Y,G),Q.add(pe)}),y.pop(),v=null,Q},this.compileAsync=function(C,k,Y=null){const Q=this.compile(C,k,Y);return new Promise(G=>{function pe(){if(Q.forEach(function(Me){q.get(Me).currentProgram.isReady()&&Q.delete(Me)}),Q.size===0){G(C);return}setTimeout(pe,10)}Le.get("KHR_parallel_shader_compile")!==null?pe():setTimeout(pe,10)})};let $t=null;function bt(C){$t&&$t(C)}function Je(){xt.stop()}function We(){xt.start()}const xt=new fI;xt.setAnimationLoop(bt),typeof self<"u"&&xt.setContext(self),this.setAnimationLoop=function(C){$t=C,V.setAnimationLoop(C),C===null?xt.stop():xt.start()},V.addEventListener("sessionstart",Je),V.addEventListener("sessionend",We),this.render=function(C,k){if(k!==void 0&&k.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(C.matrixWorldAutoUpdate===!0&&C.updateMatrixWorld(),k.parent===null&&k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),V.enabled===!0&&V.isPresenting===!0&&(V.cameraAutoUpdate===!0&&V.updateCamera(k),k=V.getCamera()),C.isScene===!0&&C.onBeforeRender(_,C,k,T),v=ve.get(C,y.length),v.init(k),y.push(v),Te.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),ut.setFromProjectionMatrix(Te),he=this.localClippingEnabled,te=we.init(this.clippingPlanes,he),m=Ge.get(C,p.length),m.init(),p.push(m),V.enabled===!0&&V.isPresenting===!0){const pe=_.xr.getDepthSensingMesh();pe!==null&&Ce(pe,k,-1/0,_.sortObjects)}Ce(C,k,0,_.sortObjects),m.finish(),_.sortObjects===!0&&m.sort(D,ie),qe=V.enabled===!1||V.isPresenting===!1||V.hasDepthSensing()===!1,qe&&_e.addToRenderList(m,C),this.info.render.frame++,te===!0&&we.beginShadows();const Y=v.state.shadowsArray;et.render(Y,C,k),te===!0&&we.endShadows(),this.info.autoReset===!0&&this.info.reset();const Q=m.opaque,G=m.transmissive;if(v.setupLights(),k.isArrayCamera){const pe=k.cameras;if(G.length>0)for(let Me=0,Re=pe.length;Me<Re;Me++){const ze=pe[Me];Ze(Q,G,C,ze)}qe&&_e.render(C);for(let Me=0,Re=pe.length;Me<Re;Me++){const ze=pe[Me];dt(m,C,ze,ze.viewport)}}else G.length>0&&Ze(Q,G,C,k),qe&&_e.render(C),dt(m,C,k);T!==null&&(Ke.updateMultisampleRenderTarget(T),Ke.updateRenderTargetMipmap(T)),C.isScene===!0&&C.onAfterRender(_,C,k),lt.resetDefaultState(),A=-1,M=null,y.pop(),y.length>0?(v=y[y.length-1],te===!0&&we.setGlobalState(_.clippingPlanes,v.state.camera)):v=null,p.pop(),p.length>0?m=p[p.length-1]:m=null};function Ce(C,k,Y,Q){if(C.visible===!1)return;if(C.layers.test(k.layers)){if(C.isGroup)Y=C.renderOrder;else if(C.isLOD)C.autoUpdate===!0&&C.update(k);else if(C.isLight)v.pushLight(C),C.castShadow&&v.pushShadow(C);else if(C.isSprite){if(!C.frustumCulled||ut.intersectsSprite(C)){Q&&ge.setFromMatrixPosition(C.matrixWorld).applyMatrix4(Te);const Me=de.update(C),Re=C.material;Re.visible&&m.push(C,Me,Re,Y,ge.z,null)}}else if((C.isMesh||C.isLine||C.isPoints)&&(!C.frustumCulled||ut.intersectsObject(C))){const Me=de.update(C),Re=C.material;if(Q&&(C.boundingSphere!==void 0?(C.boundingSphere===null&&C.computeBoundingSphere(),ge.copy(C.boundingSphere.center)):(Me.boundingSphere===null&&Me.computeBoundingSphere(),ge.copy(Me.boundingSphere.center)),ge.applyMatrix4(C.matrixWorld).applyMatrix4(Te)),Array.isArray(Re)){const ze=Me.groups;for(let Fe=0,Ie=ze.length;Fe<Ie;Fe++){const He=ze[Fe],Rt=Re[He.materialIndex];Rt&&Rt.visible&&m.push(C,Me,Rt,Y,ge.z,He)}}else Re.visible&&m.push(C,Me,Re,Y,ge.z,null)}}const pe=C.children;for(let Me=0,Re=pe.length;Me<Re;Me++)Ce(pe[Me],k,Y,Q)}function dt(C,k,Y,Q){const G=C.opaque,pe=C.transmissive,Me=C.transparent;v.setupLightsView(Y),te===!0&&we.setGlobalState(_.clippingPlanes,Y),Q&&ke.viewport(S.copy(Q)),G.length>0&&rt(G,k,Y),pe.length>0&&rt(pe,k,Y),Me.length>0&&rt(Me,k,Y),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function Ze(C,k,Y,Q){if((Y.isScene===!0?Y.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[Q.id]===void 0&&(v.state.transmissionRenderTarget[Q.id]=new hc(1,1,{generateMipmaps:!0,type:Le.has("EXT_color_buffer_half_float")||Le.has("EXT_color_buffer_float")?zf:Za,minFilter:Ma,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Gt.workingColorSpace}));const pe=v.state.transmissionRenderTarget[Q.id],Me=Q.viewport||S;pe.setSize(Me.z,Me.w);const Re=_.getRenderTarget();_.setRenderTarget(pe),_.getClearColor(H),ee=_.getClearAlpha(),ee<1&&_.setClearColor(16777215,.5),qe?_e.render(Y):_.clear();const ze=_.toneMapping;_.toneMapping=Us;const Fe=Q.viewport;if(Q.viewport!==void 0&&(Q.viewport=void 0),v.setupLightsView(Q),te===!0&&we.setGlobalState(_.clippingPlanes,Q),rt(C,Y,Q),Ke.updateMultisampleRenderTarget(pe),Ke.updateRenderTargetMipmap(pe),Le.has("WEBGL_multisampled_render_to_texture")===!1){let Ie=!1;for(let He=0,Rt=k.length;He<Rt;He++){const rn=k[He],qt=rn.object,pn=rn.geometry,Et=rn.material,je=rn.group;if(Et.side===Ao&&qt.layers.test(Q.layers)){const Ln=Et.side;Et.side=ts,Et.needsUpdate=!0,Pn(qt,Y,Q,pn,Et,je),Et.side=Ln,Et.needsUpdate=!0,Ie=!0}}Ie===!0&&(Ke.updateMultisampleRenderTarget(pe),Ke.updateRenderTargetMipmap(pe))}_.setRenderTarget(Re),_.setClearColor(H,ee),Fe!==void 0&&(Q.viewport=Fe),_.toneMapping=ze}function rt(C,k,Y){const Q=k.isScene===!0?k.overrideMaterial:null;for(let G=0,pe=C.length;G<pe;G++){const Me=C[G],Re=Me.object,ze=Me.geometry,Fe=Q===null?Me.material:Q,Ie=Me.group;Re.layers.test(Y.layers)&&Pn(Re,k,Y,ze,Fe,Ie)}}function Pn(C,k,Y,Q,G,pe){C.onBeforeRender(_,k,Y,Q,G,pe),C.modelViewMatrix.multiplyMatrices(Y.matrixWorldInverse,C.matrixWorld),C.normalMatrix.getNormalMatrix(C.modelViewMatrix),G.onBeforeRender(_,k,Y,Q,C,pe),G.transparent===!0&&G.side===Ao&&G.forceSinglePass===!1?(G.side=ts,G.needsUpdate=!0,_.renderBufferDirect(Y,k,Q,G,C,pe),G.side=Ka,G.needsUpdate=!0,_.renderBufferDirect(Y,k,Q,G,C,pe),G.side=Ao):_.renderBufferDirect(Y,k,Q,G,C,pe),C.onAfterRender(_,k,Y,Q,G,pe)}function vt(C,k,Y){k.isScene!==!0&&(k=Qe);const Q=q.get(C),G=v.state.lights,pe=v.state.shadowsArray,Me=G.state.version,Re=me.getParameters(C,G.state,pe,k,Y),ze=me.getProgramCacheKey(Re);let Fe=Q.programs;Q.environment=C.isMeshStandardMaterial?k.environment:null,Q.fog=k.fog,Q.envMap=(C.isMeshStandardMaterial?I:Ft).get(C.envMap||Q.environment),Q.envMapRotation=Q.environment!==null&&C.envMap===null?k.environmentRotation:C.envMapRotation,Fe===void 0&&(C.addEventListener("dispose",ye),Fe=new Map,Q.programs=Fe);let Ie=Fe.get(ze);if(Ie!==void 0){if(Q.currentProgram===Ie&&Q.lightsStateVersion===Me)return jn(C,Re),Ie}else Re.uniforms=me.getUniforms(C),C.onBuild(Y,Re,_),C.onBeforeCompile(Re,_),Ie=me.acquireProgram(Re,ze),Fe.set(ze,Ie),Q.uniforms=Re.uniforms;const He=Q.uniforms;return(!C.isShaderMaterial&&!C.isRawShaderMaterial||C.clipping===!0)&&(He.clippingPlanes=we.uniform),jn(C,Re),Q.needsLights=Bt(C),Q.lightsStateVersion=Me,Q.needsLights&&(He.ambientLightColor.value=G.state.ambient,He.lightProbe.value=G.state.probe,He.directionalLights.value=G.state.directional,He.directionalLightShadows.value=G.state.directionalShadow,He.spotLights.value=G.state.spot,He.spotLightShadows.value=G.state.spotShadow,He.rectAreaLights.value=G.state.rectArea,He.ltc_1.value=G.state.rectAreaLTC1,He.ltc_2.value=G.state.rectAreaLTC2,He.pointLights.value=G.state.point,He.pointLightShadows.value=G.state.pointShadow,He.hemisphereLights.value=G.state.hemi,He.directionalShadowMap.value=G.state.directionalShadowMap,He.directionalShadowMatrix.value=G.state.directionalShadowMatrix,He.spotShadowMap.value=G.state.spotShadowMap,He.spotLightMatrix.value=G.state.spotLightMatrix,He.spotLightMap.value=G.state.spotLightMap,He.pointShadowMap.value=G.state.pointShadowMap,He.pointShadowMatrix.value=G.state.pointShadowMatrix),Q.currentProgram=Ie,Q.uniformsList=null,Ie}function dn(C){if(C.uniformsList===null){const k=C.currentProgram.getUniforms();C.uniformsList=Lm.seqWithValue(k.seq,C.uniforms)}return C.uniformsList}function jn(C,k){const Y=q.get(C);Y.outputColorSpace=k.outputColorSpace,Y.batching=k.batching,Y.batchingColor=k.batchingColor,Y.instancing=k.instancing,Y.instancingColor=k.instancingColor,Y.instancingMorph=k.instancingMorph,Y.skinning=k.skinning,Y.morphTargets=k.morphTargets,Y.morphNormals=k.morphNormals,Y.morphColors=k.morphColors,Y.morphTargetsCount=k.morphTargetsCount,Y.numClippingPlanes=k.numClippingPlanes,Y.numIntersection=k.numClipIntersection,Y.vertexAlphas=k.vertexAlphas,Y.vertexTangents=k.vertexTangents,Y.toneMapping=k.toneMapping}function fn(C,k,Y,Q,G){k.isScene!==!0&&(k=Qe),Ke.resetTextureUnits();const pe=k.fog,Me=Q.isMeshStandardMaterial?k.environment:null,Re=T===null?_.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:Fr,ze=(Q.isMeshStandardMaterial?I:Ft).get(Q.envMap||Me),Fe=Q.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,Ie=!!Y.attributes.tangent&&(!!Q.normalMap||Q.anisotropy>0),He=!!Y.morphAttributes.position,Rt=!!Y.morphAttributes.normal,rn=!!Y.morphAttributes.color;let qt=Us;Q.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(qt=_.toneMapping);const pn=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,Et=pn!==void 0?pn.length:0,je=q.get(Q),Ln=v.state.lights;if(te===!0&&(he===!0||C!==M)){const Ws=C===M&&Q.id===A;we.setState(Q,C,Ws)}let Yt=!1;Q.version===je.__version?(je.needsLights&&je.lightsStateVersion!==Ln.state.version||je.outputColorSpace!==Re||G.isBatchedMesh&&je.batching===!1||!G.isBatchedMesh&&je.batching===!0||G.isBatchedMesh&&je.batchingColor===!0&&G.colorTexture===null||G.isBatchedMesh&&je.batchingColor===!1&&G.colorTexture!==null||G.isInstancedMesh&&je.instancing===!1||!G.isInstancedMesh&&je.instancing===!0||G.isSkinnedMesh&&je.skinning===!1||!G.isSkinnedMesh&&je.skinning===!0||G.isInstancedMesh&&je.instancingColor===!0&&G.instanceColor===null||G.isInstancedMesh&&je.instancingColor===!1&&G.instanceColor!==null||G.isInstancedMesh&&je.instancingMorph===!0&&G.morphTexture===null||G.isInstancedMesh&&je.instancingMorph===!1&&G.morphTexture!==null||je.envMap!==ze||Q.fog===!0&&je.fog!==pe||je.numClippingPlanes!==void 0&&(je.numClippingPlanes!==we.numPlanes||je.numIntersection!==we.numIntersection)||je.vertexAlphas!==Fe||je.vertexTangents!==Ie||je.morphTargets!==He||je.morphNormals!==Rt||je.morphColors!==rn||je.toneMapping!==qt||je.morphTargetsCount!==Et)&&(Yt=!0):(Yt=!0,je.__version=Q.version);let ho=je.currentProgram;Yt===!0&&(ho=vt(Q,k,G));let Qf=!1,ul=!1,$0=!1;const ti=ho.getUniforms(),Ko=je.uniforms;if(ke.useProgram(ho.program)&&(Qf=!0,ul=!0,$0=!0),Q.id!==A&&(A=Q.id,ul=!0),Qf||M!==C){ti.setValue(U,"projectionMatrix",C.projectionMatrix),ti.setValue(U,"viewMatrix",C.matrixWorldInverse);const Ws=ti.map.cameraPosition;Ws!==void 0&&Ws.setValue(U,ge.setFromMatrixPosition(C.matrixWorld)),ht.logarithmicDepthBuffer&&ti.setValue(U,"logDepthBufFC",2/(Math.log(C.far+1)/Math.LN2)),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&ti.setValue(U,"isOrthographic",C.isOrthographicCamera===!0),M!==C&&(M=C,ul=!0,$0=!0)}if(G.isSkinnedMesh){ti.setOptional(U,G,"bindMatrix"),ti.setOptional(U,G,"bindMatrixInverse");const Ws=G.skeleton;Ws&&(Ws.boneTexture===null&&Ws.computeBoneTexture(),ti.setValue(U,"boneTexture",Ws.boneTexture,Ke))}G.isBatchedMesh&&(ti.setOptional(U,G,"batchingTexture"),ti.setValue(U,"batchingTexture",G._matricesTexture,Ke),ti.setOptional(U,G,"batchingColorTexture"),G._colorsTexture!==null&&ti.setValue(U,"batchingColorTexture",G._colorsTexture,Ke));const q0=Y.morphAttributes;if((q0.position!==void 0||q0.normal!==void 0||q0.color!==void 0)&&Be.update(G,Y,ho),(ul||je.receiveShadow!==G.receiveShadow)&&(je.receiveShadow=G.receiveShadow,ti.setValue(U,"receiveShadow",G.receiveShadow)),Q.isMeshGouraudMaterial&&Q.envMap!==null&&(Ko.envMap.value=ze,Ko.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),Q.isMeshStandardMaterial&&Q.envMap===null&&k.environment!==null&&(Ko.envMapIntensity.value=k.environmentIntensity),ul&&(ti.setValue(U,"toneMappingExposure",_.toneMappingExposure),je.needsLights&&Jt(Ko,$0),pe&&Q.fog===!0&&le.refreshFogUniforms(Ko,pe),le.refreshMaterialUniforms(Ko,Q,Z,j,v.state.transmissionRenderTarget[C.id]),Lm.upload(U,dn(je),Ko,Ke)),Q.isShaderMaterial&&Q.uniformsNeedUpdate===!0&&(Lm.upload(U,dn(je),Ko,Ke),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&ti.setValue(U,"center",G.center),ti.setValue(U,"modelViewMatrix",G.modelViewMatrix),ti.setValue(U,"normalMatrix",G.normalMatrix),ti.setValue(U,"modelMatrix",G.matrixWorld),Q.isShaderMaterial||Q.isRawShaderMaterial){const Ws=Q.uniformsGroups;for(let Y0=0,AO=Ws.length;Y0<AO;Y0++){const GT=Ws[Y0];mt.update(GT,ho),mt.bind(GT,ho)}}return ho}function Jt(C,k){C.ambientLightColor.needsUpdate=k,C.lightProbe.needsUpdate=k,C.directionalLights.needsUpdate=k,C.directionalLightShadows.needsUpdate=k,C.pointLights.needsUpdate=k,C.pointLightShadows.needsUpdate=k,C.spotLights.needsUpdate=k,C.spotLightShadows.needsUpdate=k,C.rectAreaLights.needsUpdate=k,C.hemisphereLights.needsUpdate=k}function Bt(C){return C.isMeshLambertMaterial||C.isMeshToonMaterial||C.isMeshPhongMaterial||C.isMeshStandardMaterial||C.isShadowMaterial||C.isShaderMaterial&&C.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(C,k,Y){q.get(C.texture).__webglTexture=k,q.get(C.depthTexture).__webglTexture=Y;const Q=q.get(C);Q.__hasExternalTextures=!0,Q.__autoAllocateDepthBuffer=Y===void 0,Q.__autoAllocateDepthBuffer||Le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Q.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(C,k){const Y=q.get(C);Y.__webglFramebuffer=k,Y.__useDefaultFramebuffer=k===void 0},this.setRenderTarget=function(C,k=0,Y=0){T=C,E=k,w=Y;let Q=!0,G=null,pe=!1,Me=!1;if(C){const ze=q.get(C);ze.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(U.FRAMEBUFFER,null),Q=!1):ze.__webglFramebuffer===void 0?Ke.setupRenderTarget(C):ze.__hasExternalTextures&&Ke.rebindTextures(C,q.get(C.texture).__webglTexture,q.get(C.depthTexture).__webglTexture);const Fe=C.texture;(Fe.isData3DTexture||Fe.isDataArrayTexture||Fe.isCompressedArrayTexture)&&(Me=!0);const Ie=q.get(C).__webglFramebuffer;C.isWebGLCubeRenderTarget?(Array.isArray(Ie[k])?G=Ie[k][Y]:G=Ie[k],pe=!0):C.samples>0&&Ke.useMultisampledRTT(C)===!1?G=q.get(C).__webglMultisampledFramebuffer:Array.isArray(Ie)?G=Ie[Y]:G=Ie,S.copy(C.viewport),P.copy(C.scissor),F=C.scissorTest}else S.copy(R).multiplyScalar(Z).floor(),P.copy(ce).multiplyScalar(Z).floor(),F=Pe;if(ke.bindFramebuffer(U.FRAMEBUFFER,G)&&Q&&ke.drawBuffers(C,G),ke.viewport(S),ke.scissor(P),ke.setScissorTest(F),pe){const ze=q.get(C.texture);U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_CUBE_MAP_POSITIVE_X+k,ze.__webglTexture,Y)}else if(Me){const ze=q.get(C.texture),Fe=k||0;U.framebufferTextureLayer(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,ze.__webglTexture,Y||0,Fe)}A=-1},this.readRenderTargetPixels=function(C,k,Y,Q,G,pe,Me){if(!(C&&C.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Re=q.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&Me!==void 0&&(Re=Re[Me]),Re){ke.bindFramebuffer(U.FRAMEBUFFER,Re);try{const ze=C.texture,Fe=ze.format,Ie=ze.type;if(!ht.textureFormatReadable(Fe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ht.textureTypeReadable(Ie)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}k>=0&&k<=C.width-Q&&Y>=0&&Y<=C.height-G&&U.readPixels(k,Y,Q,G,Ee.convert(Fe),Ee.convert(Ie),pe)}finally{const ze=T!==null?q.get(T).__webglFramebuffer:null;ke.bindFramebuffer(U.FRAMEBUFFER,ze)}}},this.readRenderTargetPixelsAsync=async function(C,k,Y,Q,G,pe,Me){if(!(C&&C.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Re=q.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&Me!==void 0&&(Re=Re[Me]),Re){ke.bindFramebuffer(U.FRAMEBUFFER,Re);try{const ze=C.texture,Fe=ze.format,Ie=ze.type;if(!ht.textureFormatReadable(Fe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ht.textureTypeReadable(Ie))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(k>=0&&k<=C.width-Q&&Y>=0&&Y<=C.height-G){const He=U.createBuffer();U.bindBuffer(U.PIXEL_PACK_BUFFER,He),U.bufferData(U.PIXEL_PACK_BUFFER,pe.byteLength,U.STREAM_READ),U.readPixels(k,Y,Q,G,Ee.convert(Fe),Ee.convert(Ie),0),U.flush();const Rt=U.fenceSync(U.SYNC_GPU_COMMANDS_COMPLETE,0);await dG(U,Rt,4);try{U.bindBuffer(U.PIXEL_PACK_BUFFER,He),U.getBufferSubData(U.PIXEL_PACK_BUFFER,0,pe)}finally{U.deleteBuffer(He),U.deleteSync(Rt)}return pe}}finally{const ze=T!==null?q.get(T).__webglFramebuffer:null;ke.bindFramebuffer(U.FRAMEBUFFER,ze)}}},this.copyFramebufferToTexture=function(C,k=null,Y=0){C.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),k=arguments[0]||null,C=arguments[1]);const Q=Math.pow(2,-Y),G=Math.floor(C.image.width*Q),pe=Math.floor(C.image.height*Q),Me=k!==null?k.x:0,Re=k!==null?k.y:0;Ke.setTexture2D(C,0),U.copyTexSubImage2D(U.TEXTURE_2D,Y,0,0,Me,Re,G,pe),ke.unbindTexture()},this.copyTextureToTexture=function(C,k,Y=null,Q=null,G=0){C.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),Q=arguments[0]||null,C=arguments[1],k=arguments[2],G=arguments[3]||0,Y=null);let pe,Me,Re,ze,Fe,Ie;Y!==null?(pe=Y.max.x-Y.min.x,Me=Y.max.y-Y.min.y,Re=Y.min.x,ze=Y.min.y):(pe=C.image.width,Me=C.image.height,Re=0,ze=0),Q!==null?(Fe=Q.x,Ie=Q.y):(Fe=0,Ie=0);const He=Ee.convert(k.format),Rt=Ee.convert(k.type);Ke.setTexture2D(k,0),U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,k.flipY),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),U.pixelStorei(U.UNPACK_ALIGNMENT,k.unpackAlignment);const rn=U.getParameter(U.UNPACK_ROW_LENGTH),qt=U.getParameter(U.UNPACK_IMAGE_HEIGHT),pn=U.getParameter(U.UNPACK_SKIP_PIXELS),Et=U.getParameter(U.UNPACK_SKIP_ROWS),je=U.getParameter(U.UNPACK_SKIP_IMAGES),Ln=C.isCompressedTexture?C.mipmaps[G]:C.image;U.pixelStorei(U.UNPACK_ROW_LENGTH,Ln.width),U.pixelStorei(U.UNPACK_IMAGE_HEIGHT,Ln.height),U.pixelStorei(U.UNPACK_SKIP_PIXELS,Re),U.pixelStorei(U.UNPACK_SKIP_ROWS,ze),C.isDataTexture?U.texSubImage2D(U.TEXTURE_2D,G,Fe,Ie,pe,Me,He,Rt,Ln.data):C.isCompressedTexture?U.compressedTexSubImage2D(U.TEXTURE_2D,G,Fe,Ie,Ln.width,Ln.height,He,Ln.data):U.texSubImage2D(U.TEXTURE_2D,G,Fe,Ie,He,Rt,Ln),U.pixelStorei(U.UNPACK_ROW_LENGTH,rn),U.pixelStorei(U.UNPACK_IMAGE_HEIGHT,qt),U.pixelStorei(U.UNPACK_SKIP_PIXELS,pn),U.pixelStorei(U.UNPACK_SKIP_ROWS,Et),U.pixelStorei(U.UNPACK_SKIP_IMAGES,je),G===0&&k.generateMipmaps&&U.generateMipmap(U.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(C,k,Y=null,Q=null,G=0){C.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Y=arguments[0]||null,Q=arguments[1]||null,C=arguments[2],k=arguments[3],G=arguments[4]||0);let pe,Me,Re,ze,Fe,Ie,He,Rt,rn;const qt=C.isCompressedTexture?C.mipmaps[G]:C.image;Y!==null?(pe=Y.max.x-Y.min.x,Me=Y.max.y-Y.min.y,Re=Y.max.z-Y.min.z,ze=Y.min.x,Fe=Y.min.y,Ie=Y.min.z):(pe=qt.width,Me=qt.height,Re=qt.depth,ze=0,Fe=0,Ie=0),Q!==null?(He=Q.x,Rt=Q.y,rn=Q.z):(He=0,Rt=0,rn=0);const pn=Ee.convert(k.format),Et=Ee.convert(k.type);let je;if(k.isData3DTexture)Ke.setTexture3D(k,0),je=U.TEXTURE_3D;else if(k.isDataArrayTexture||k.isCompressedArrayTexture)Ke.setTexture2DArray(k,0),je=U.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,k.flipY),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),U.pixelStorei(U.UNPACK_ALIGNMENT,k.unpackAlignment);const Ln=U.getParameter(U.UNPACK_ROW_LENGTH),Yt=U.getParameter(U.UNPACK_IMAGE_HEIGHT),ho=U.getParameter(U.UNPACK_SKIP_PIXELS),Qf=U.getParameter(U.UNPACK_SKIP_ROWS),ul=U.getParameter(U.UNPACK_SKIP_IMAGES);U.pixelStorei(U.UNPACK_ROW_LENGTH,qt.width),U.pixelStorei(U.UNPACK_IMAGE_HEIGHT,qt.height),U.pixelStorei(U.UNPACK_SKIP_PIXELS,ze),U.pixelStorei(U.UNPACK_SKIP_ROWS,Fe),U.pixelStorei(U.UNPACK_SKIP_IMAGES,Ie),C.isDataTexture||C.isData3DTexture?U.texSubImage3D(je,G,He,Rt,rn,pe,Me,Re,pn,Et,qt.data):k.isCompressedArrayTexture?U.compressedTexSubImage3D(je,G,He,Rt,rn,pe,Me,Re,pn,qt.data):U.texSubImage3D(je,G,He,Rt,rn,pe,Me,Re,pn,Et,qt),U.pixelStorei(U.UNPACK_ROW_LENGTH,Ln),U.pixelStorei(U.UNPACK_IMAGE_HEIGHT,Yt),U.pixelStorei(U.UNPACK_SKIP_PIXELS,ho),U.pixelStorei(U.UNPACK_SKIP_ROWS,Qf),U.pixelStorei(U.UNPACK_SKIP_IMAGES,ul),G===0&&k.generateMipmaps&&U.generateMipmap(je),ke.unbindTexture()},this.initRenderTarget=function(C){q.get(C).__webglFramebuffer===void 0&&Ke.setupRenderTarget(C)},this.initTexture=function(C){C.isCubeTexture?Ke.setTextureCube(C,0):C.isData3DTexture?Ke.setTexture3D(C,0):C.isDataArrayTexture||C.isCompressedArrayTexture?Ke.setTexture2DArray(C,0):Ke.setTexture2D(C,0),ke.unbindTexture()},this.resetState=function(){E=0,w=0,T=null,ke.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ar}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===hT?"display-p3":"srgb",t.unpackColorSpace=Gt.workingColorSpace===R0?"display-p3":"srgb"}}class xX extends Zn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ur,this.environmentIntensity=1,this.environmentRotation=new ur,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class yI{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Og,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Vo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return fT("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Gi=new $;class xT{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.applyMatrix4(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.applyNormalMatrix(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.transformDirection(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=wr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ht(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=wr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=wr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=wr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=wr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),s=Ht(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),s=Ht(s,this.array),r=Ht(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new or(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xT(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SX extends zi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class TX extends or{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}class xI extends zi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class SI extends zi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class TI extends Vi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Oi,this.minFilter=Oi,this.generateMipmaps=!1,this.needsUpdate=!0}}class MX extends zi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new st(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class MI extends zi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new st(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wX extends MI{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Li(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new st(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new st(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new st(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class EX extends zi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new st(16777215),this.specular=new st(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AX extends zi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new st(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class NX extends zi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class CX extends zi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bX extends zi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new st(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wI extends xI{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const AN={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class RX{constructor(e,t,i){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,r===!1&&s.onStart!==void 0&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],g=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return g}return null}}}const PX=new RX;class ST{constructor(e){this.manager=e!==void 0?e:PX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ST.DEFAULT_MATERIAL_NAME="__DEFAULT";class LX extends ST{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=AN.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=xf("img");function l(){u(),AN.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(h){u(),s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class IX extends ST{constructor(e){super(e)}load(e,t,i,s){const r=new Vi,o=new LX(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Xf extends Zn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class DX extends Xf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new st(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const P_=new un,NN=new $,CN=new $;class TT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.map=null,this.mapPass=null,this.matrix=new un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vT,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new Dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;NN.setFromMatrixPosition(e.matrixWorld),t.position.copy(NN),CN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(CN),t.updateMatrixWorld(),P_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(P_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(P_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class OX extends TT{constructor(){super(new as(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=uh*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class EI extends Xf{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.target=new Zn,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new OX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const bN=new un,qh=new $,L_=new $;class UX extends TT{constructor(){super(new as(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new Dt(2,1,1,1),new Dt(0,1,1,1),new Dt(3,1,1,1),new Dt(1,1,1,1),new Dt(3,0,1,1),new Dt(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),qh.setFromMatrixPosition(e.matrixWorld),i.position.copy(qh),L_.copy(i.position),L_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(L_),i.updateMatrixWorld(),s.makeTranslation(-qh.x,-qh.y,-qh.z),bN.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bN)}}class FX extends Xf{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new UX}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class VX extends TT{constructor(){super(new _T(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kX extends Xf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.target=new Zn,this.shadow=new VX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zX extends Xf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class BX extends yI{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uT);const HX=()=>{const n=z.useRef(null),[e]=z.useState("/src/assets/Mosaic_land_clot_1.png"),t=z.useRef(.02),i=z.useRef({x:.5,y:.5}),s=z.useRef({x:.5,y:.5}),r=z.useRef({x:.5,y:.5}),o=z.useRef(0);return z.useEffect(()=>{let a,l,c,u;const h=`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `,d=`
      varying vec2 vUv;
      uniform sampler2D u_texture;    
      uniform vec2 u_mouse;
      uniform vec2 u_prevMouse;
      uniform float u_aberrationIntensity;

      void main() {
          vec2 gridUV = floor(vUv * vec2(30.0, 30.0)) / vec2(30.0, 30.0);
          vec2 centerOfPixel = gridUV + vec2(1.0/30.0, 1.0/30.0);
          
          vec2 mouseDirection = u_mouse - u_prevMouse;
          
          vec2 pixelToMouseDirection = centerOfPixel - u_mouse;
          float pixelDistanceToMouse = length(pixelToMouseDirection);
          float strength = smoothstep(0.3, 0.0, pixelDistanceToMouse);
   
          vec2 uvOffset = strength * - mouseDirection * 0.2;
          vec2 uv = vUv - uvOffset;

          vec4 colorR = texture2D(u_texture, uv + vec2(strength * u_aberrationIntensity * 0.01, 0.0));
          vec4 colorG = texture2D(u_texture, uv);
          vec4 colorB = texture2D(u_texture, uv - vec2(strength * u_aberrationIntensity * 0.01, 0.0));

          gl_FragColor = vec4(colorR.r, colorG.g, colorB.b, 1.0);
      }
    `,f=E=>{console.log("Initializing scene..."),a=new xX,l=new as(g(window.innerWidth),window.innerWidth/window.innerHeight,.1,1e3),l.position.z=1;const w=E.image.width/E.image.height,T=window.innerWidth/window.innerHeight;let A,M;T>w?(A=T/w,M=1):(A=1,M=w/T);const S={u_mouse:{type:"v2",value:new Ye},u_prevMouse:{type:"v2",value:new Ye},u_aberrationIntensity:{type:"f",value:0},u_texture:{type:"t",value:E}},P=new Wf(A*2,M*2);u=new Nr(P,new qo({uniforms:S,vertexShader:h,fragmentShader:d})),a.add(u),c=new yX,c.setSize(window.innerWidth,window.innerHeight),c.setPixelRatio(window.devicePixelRatio),n.current.appendChild(c.domElement),window.addEventListener("resize",m,!1),console.log("Scene initialized.")},g=E=>E<768?115:E<1024?60:55,m=()=>{l&&c&&(l.aspect=window.innerWidth/window.innerHeight,l.fov=g(window.innerWidth),l.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight),console.log("Window resized."))};new IX().load(e,E=>{console.log("Texture loaded."),f(E),p()},void 0,E=>{console.error("Error loading texture:",E)});const p=()=>{const E=requestAnimationFrame(p);return i.current.x+=(s.current.x-i.current.x)*t.current,i.current.y+=(s.current.y-i.current.y)*t.current,u.material.uniforms.u_mouse.value.set(i.current.x,1-i.current.y),u.material.uniforms.u_prevMouse.value.set(r.current.x,1-r.current.y),o.current=Math.max(0,o.current-.05),u.material.uniforms.u_aberrationIntensity.value=o.current,c.render(a,l),()=>cancelAnimationFrame(E)},y=E=>{t.current=.02;const w=n.current.getBoundingClientRect();r.current={...s.current},s.current.x=(E.clientX-w.left)/w.width,s.current.y=(E.clientY-w.top)/w.height,o.current=1},_=E=>{t.current=.02;const w=n.current.getBoundingClientRect();i.current.x=s.current.x=(E.clientX-w.left)/w.width,i.current.y=s.current.y=(E.clientY-w.top)/w.height},x=()=>{t.current=.05,s.current={...r.current}};return n.current&&(n.current.addEventListener("mousemove",y),n.current.addEventListener("mouseenter",_),n.current.addEventListener("mouseleave",x)),()=>{c&&c.dispose(),window.removeEventListener("resize",m),n.current&&(n.current.removeEventListener("mousemove",y),n.current.removeEventListener("mouseenter",_),n.current.removeEventListener("mouseleave",x))}},[e]),b.jsx("div",{id:"imageContainer",ref:n,style:{width:"100vw",height:"100vh",overflow:"hidden",position:"relative"},children:b.jsxs("div",{className:"absolute w-full flex max-sm:mt-[-10vh] flex-col items-center justify-center top-0 left-0 z-[99]",children:[b.jsxs("h1",{className:"text-[6rem] max-sm:text-[2.2rem] text-center  text-white font-Decorative  uppercase leading-none",children:["Experience the Ultimate ",b.jsx("br",{})," Audio Innovation and Design"]}),b.jsx("p",{className:"text-md font-primary text-white w-[40%] max-sm:text-xs max-sm:w-[90%] text-center mt-5",children:"Bang & Olufsen has been a pioneer in the audio industry for decades, delivering unmatched sound quality combined with cutting-edge design. Discover our range of products that redefine the audio experience."}),b.jsx(vf,{text:"Explore Now",customclassName:""})]})})},GX=()=>{const n=z.useRef(),{scrollYProgress:e}=T0({target:n,offset:["start start","end start"]}),t=S0(e,[0,1],["0vh","300vh"]);return b.jsx("div",{className:"max-sm:h-[80vh]  overflow-hidden",children:b.jsx(Fa.div,{style:{y:t},className:"relative h-full w-full",children:b.jsx(HX,{})})})},WX=()=>{const n=z.useMemo(()=>[{img1:"/src/assets/images/HomepageImage/hp11.webp",img2:"/src/assets/images/HomepageImage/hp12.webp",imgTitle:"BEOPLAY H95",imgDes:"Premium over-ear headphones"},{img1:"/src/assets/images/HomepageImage/hp21.webp",img2:"/src/assets/images/HomepageImage/hp22.webp",imgTitle:"BEOSOUND A1  EX",imgDes:"Portable Bluetooth speaker"},{img1:"/src/assets/images/HomepageImage/hp31.webp",img2:"/src/assets/images/HomepageImage/hp32.webp",imgTitle:"BALENCIAGA I BANG",imgDes:"Haute Couture HI-FI"}],[]);return b.jsx("div",{className:"w-full flex flex-col bg-[#fff]",children:n.map((e,t)=>b.jsxs("div",{className:"relative bg-[] h-[80vh] max-md:h-[100vh] px-2 flex max-md:flex-col-reverse w-full",children:[b.jsxs("div",{className:"w-1/2 h-full relative max-md:w-full max-md:h-[50%]",children:[b.jsx("img",{className:"h-full w-full object-cover p-1",src:e.img1,alt:""}),b.jsx("div",{className:"absolute bottom-3 max-sm:hidden font-primary text-white right-[3%]",children:b.jsx(nh,{})})]}),b.jsxs("div",{className:"w-1/2 h-full relative max-md:w-full p-1 max-md:h-[50%]",children:[b.jsx("img",{className:`h-full w-full object-cover ${t===2?"object-top":""}`,src:e.img2,alt:""}),b.jsx("div",{className:"absolute bottom-3 max-sm:hidden font-primary text-white right-[3%]",children:b.jsx(nh,{})})]}),b.jsxs("div",{className:"absolute w-full -translate-x-1/2 translate-y-[-50%] top-[50%] left-[50%] text-white flex flex-col items-center justify-center gap-5",children:[b.jsx("h2",{className:"text-xl max-md:text-lg font-Secondary",children:e.imgDes}),b.jsx("h1",{className:"text-5xl max-md:text-3xl font-semibold font-primary",children:e.imgTitle})]})]},t))})};var $x=new Map,nm=new WeakMap,RN=0,jX=void 0;function XX(n){return n?(nm.has(n)||(RN+=1,nm.set(n,RN.toString())),nm.get(n)):"0"}function $X(n){return Object.keys(n).sort().filter(e=>n[e]!==void 0).map(e=>`${e}_${e==="root"?XX(n.root):n[e]}`).toString()}function qX(n){const e=$X(n);let t=$x.get(e);if(!t){const i=new Map;let s;const r=new IntersectionObserver(o=>{o.forEach(a=>{var l;const c=a.isIntersecting&&s.some(u=>a.intersectionRatio>=u);n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(u=>{u(c,a)})})},n);s=r.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:r,elements:i},$x.set(e,t)}return t}function YX(n,e,t={},i=jX){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const l=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:s,observer:r,elements:o}=qX(t),a=o.get(n)||[];return o.has(n)||o.set(n,a),a.push(e),r.observe(n),function(){a.splice(a.indexOf(e),1),a.length===0&&(o.delete(n),r.unobserve(n)),o.size===0&&(r.disconnect(),$x.delete(s))}}function KX({threshold:n,delay:e,trackVisibility:t,rootMargin:i,root:s,triggerOnce:r,skip:o,initialInView:a,fallbackInView:l,onChange:c}={}){var u;const[h,d]=z.useState(null),f=z.useRef(),[g,m]=z.useState({inView:!!a,entry:void 0});f.current=c,z.useEffect(()=>{if(o||!h)return;let _;return _=YX(h,(x,E)=>{m({inView:x,entry:E}),f.current&&f.current(x,E),E.isIntersecting&&r&&_&&(_(),_=void 0)},{root:s,rootMargin:i,threshold:n,trackVisibility:t,delay:e},l),()=>{_&&_()}},[Array.isArray(n)?n.toString():n,h,s,i,r,o,t,l,e]);const v=(u=g.entry)==null?void 0:u.target,p=z.useRef();!h&&v&&!r&&!o&&p.current!==v&&(p.current=v,m({inView:!!a,entry:void 0}));const y=[d,g.inView,g.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}const I_=({phrases:n,className:e})=>{const t={initial:{y:"100%"},enter:o=>({y:"0",transition:{duration:.95,ease:[.33,1,.68,1],delay:.075*o}})},{ref:i,inView:s,entry:r}=KX({threshold:.75,triggerOnce:!0});return b.jsx("div",{ref:i,className:"",children:n.map((o,a)=>b.jsx("div",{className:`overflow-hidden ${e}`,children:b.jsx(Fa.p,{custom:a,variants:t,initial:"initial",animate:s?"enter":"",children:o})},a))})},ZX=()=>{const n=["The collaboration between Bang & Olufsen and leading designers integrates cutting-edge ","technology with timeless design, resulting in exceptional audio and visual experiences that","redefine the standards of luxury and innovation. "],e=["Today, Bang & Olufsen continues to lead the way in high-fidelity audio and innovative design.","Our global network of stores and showrooms provides a space where you can immerse yourself","in the Bang & Olufsen experience, explore our latest innovations, and receive personalized service","from our expert team. Whether you are a longtime aficionado or new to our brand, we invite you to","from our expert team. Whether you are a longtime aficionado or new to our brand, we invite you to","Join us in celebrating a legacy of innovation and design excellence. Experience the unparalleled ","craftsmanship, sophisticated aesthetics, and outstanding performance that define Bang & Olufsen. ","We look forward to welcoming you into our world and helping you create moments of pure auditory ","and visual pleasure. Welcome to the future of sound and vision, welcome to Bang & Olufsen"];return b.jsxs("div",{className:"w-full h-screen flex-col bg-white flex items-center justify-center font-primary",children:[b.jsxs("div",{className:"w-[90%] h-[30%] flex items-start justify-between",children:[b.jsx(I_,{phrases:["THE COMPANY"]}),b.jsx(I_,{phrases:n,className:"text-[1.9rem] font-primary"})]}),b.jsxs("div",{className:"w-[90%] h-[50%] flex items-start justify-between  ",children:[b.jsx(I_,{phrases:e,className:"text-[1.6rem] font-primary"}),b.jsx("div",{className:"w-[25%] h-full bg-red-500",children:b.jsx("img",{className:"w-full h-full object-cover",src:"https://images.ctfassets.net/8cd2csgvqd3m/4w2WiH9iFxmKQtDaU60vZC/65a9307e6cc30cb3fd665bfd99d648f5/BS2_Footer_TIO_Immersive_copy.jpg?q=90&fm=webp&w=480&h=718&fit=fill",alt:""})})]})]})},QX=()=>{const n=z.useRef(null),{scrollYProgress:e}=T0({target:n,offset:["start start","end end"]}),t=S0(e,[0,1],[1,4]),i=[{style:"top-[-10vh] left-[-25vw] w-[20vw] h-[45vh] max-lg:h-[30vh] max-lg:w-[25vw] max-lg:left-[-32vw] max-sm:w-[30vw] max-[450px]:top-[-30vh]"},{style:"top-[-30vh] left-[10vh] w-[35vw] h-[30vh] max-lg:w-[45vw] max-sm:w-[55vw]"},{style:"top-[2vh] left-[27vw] w-[25vw] h-[30vh] max-lg:left-[30vw] max-sm:w-[30vw] max-sm:left-[32vw]"},{style:" left-[-20vw] top-[30vh] w-[35vw] h-[30vh] max-sm:left-[-28vw]"},{style:" top-[33vh] left-[12vw] w-[25vw] h-[25vh] max-sm:w-[35vw]"},{style:"top-[0vh] left-[0vh] w-[25vw] h-[25vh] max-lg:w-[30vw]"}];return b.jsxs("div",{className:"w-full bg-white",children:[b.jsx(Ya,{text:"Our Stories",className:"text-[5rem] uppercase pt-20 font-primary"}),b.jsx("div",{ref:n,className:"h-[300vh] mt-10 relative",children:b.jsx("div",{className:"sticky top-0 overflow-hidden h-[100vh]",children:i.map((s,r)=>b.jsx(Fa.div,{style:{scale:t},className:"w-full h-full absolute top-0 flex items-center justify-center",children:b.jsx("div",{className:`relative ${s.style}`,children:b.jsx("img",{className:"object-cover w-full h-full",src:`/src/assets/images/Stories/stories${r+1}.webp`,alt:""})})},r))})})]})},PN={VERTEX:"vertex",FRAGMENT:"fragment"},sn={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},L0=["x","y","z","w"];function AI(n,e=!1){let t="{";n.isNode===!0&&(t+=n.id);for(const{property:i,childNode:s}of Ug(n))t+=","+i.slice(0,-4)+":"+s.getCacheKey(e);return t+="}",t}function*Ug(n,e=!1){for(const t in n){if(t.startsWith("_")===!0)continue;const i=n[t];if(Array.isArray(i)===!0)for(let s=0;s<i.length;s++){const r=i[s];r&&(r.isNode===!0||e&&typeof r.toJSON=="function")&&(yield{property:t,index:s,childNode:r})}else if(i&&i.isNode===!0)yield{property:t,childNode:i};else if(typeof i=="object")for(const s in i){const r=i[s];r&&(r.isNode===!0||e&&typeof r.toJSON=="function")&&(yield{property:t,index:s,childNode:r})}}}function wa(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function NI(n,...e){const t=n?n.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new st(...e):t==="vec2"?new Ye(...e):t==="vec3"?new $(...e):t==="vec4"?new Dt(...e):t==="mat3"?new gt(...e):t==="mat4"?new un(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?bI(e[0]):null}function CI(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function bI(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const LN=new Map;let JX=0;class tt extends ll{constructor(e=null){super(),this.nodeType=e,this.updateType=sn.NONE,this.updateBeforeType=sn.NONE,this.uuid=iI.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:JX++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,sn.FRAME)}onRenderUpdate(e){return this.onUpdate(e,sn.RENDER)}onObjectUpdate(e){return this.onUpdate(e,sn.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of Ug(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=AI(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let i=0;for(const s of this.getChildren())t["node"+i++]=s;return null}construct(e){return console.warn("THREE.Node: construct() is deprecated. Use setup() instead."),this.setup(e)}increaseUsage(e){const t=e.getDataFromNode(this);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}analyze(e){if(this.increaseUsage(e)===1){const i=e.getNodeProperties(this);for(const s of Object.values(i))s&&s.isNode===!0&&s.build(e)}}generate(e,t){const{outputNode:i}=e.getNodeProperties(this);if(i&&i.isNode===!0)return i.build(e,t)}updateBefore(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const i=this.getShared(e);if(this!==i)return i.build(e,t);e.addNode(this),e.addChain(this);let s=null;const r=e.getBuildStage();if(r==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0||e.context.tempRead===!1){const a=e.stack.nodes.length;o.initialized=!0,o.outputNode=this.setup(e),o.outputNode!==null&&e.stack.nodes.length!==a&&(o.outputNode=e.stack);for(const l of Object.values(o))l&&l.isNode===!0&&l.build(e)}}else if(r==="analyze")this.analyze(e);else if(r==="generate")if(this.generate.length===1){const a=this.getNodeType(e),l=e.getDataFromNode(this);s=l.snippet,s===void 0&&(s=this.generate(e)||"",l.snippet=s),s=e.format(s,a,t)}else s=this.generate(e,t)||"";return e.removeChain(this),s}getSerializeChildren(){return Ug(this)}serialize(e){const t=this.getSerializeChildren(),i={};for(const{property:s,index:r,childNode:o}of t)r!==void 0?(i[s]===void 0&&(i[s]=Number.isInteger(r)?[]:{}),i[s][r]=o.toJSON(e.meta).uuid):i[s]=o.toJSON(e.meta).uuid;Object.keys(i).length>0&&(e.inputNodes=i)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const i in e.inputNodes)if(Array.isArray(e.inputNodes[i])){const s=[];for(const r of e.inputNodes[i])s.push(t[r]);this[i]=s}else if(typeof e.inputNodes[i]=="object"){const s={};for(const r in e.inputNodes[i]){const o=e.inputNodes[i][r];s[r]=t[o]}this[i]=s}else{const s=e.inputNodes[i];this[i]=t[s]}}}toJSON(e){const{uuid:t,type:i}=this,s=e===void 0||typeof e=="string";s&&(e={textures:{},images:{},nodes:{}});let r=e.nodes[t];r===void 0&&(r={uuid:t,type:i,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},s!==!0&&(e.nodes[r.uuid]=r),this.serialize(r),delete r.meta);function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(s){const a=o(e.textures),l=o(e.images),c=o(e.nodes);a.length>0&&(r.textures=a),l.length>0&&(r.images=l),c.length>0&&(r.nodes=c)}return r}}function ue(n,e){if(typeof e!="function"||!n)throw new Error(`Node class ${n} is not a class`);if(LN.has(n)){console.warn(`Redefinition of node class ${n}`);return}LN.set(n,e),e.type=n}class Qt extends tt{constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const s=e.getVectorType(this.getNodeType(e,t)),r=e.getDataFromNode(this);if(e.context.tempRead!==!1&&r.propertyName!==void 0)return e.format(r.propertyName,s,t);if(e.context.tempWrite!==!1&&s!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,s),a=e.getVarFromNode(this,null,s),l=e.getPropertyName(a);return e.addLineFlowCode(`${l} = ${o}`),r.snippet=o,r.propertyName=l,e.format(r.propertyName,s,t)}}return super.build(e,t)}}ue("TempNode",Qt);class Mh extends tt{constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.node.build(e),i=this.indexNode.build(e,"uint");return`${t}[ ${i} ]`}}ue("ArrayElementNode",Mh);class MT extends tt{constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let i=null;for(const s of this.convertTo.split("|"))(i===null||e.getTypeLength(t)===e.getTypeLength(s))&&(i=s);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const i=this.node,s=this.getNodeType(e),r=i.build(e,s);return e.format(r,s,t)}}ue("ConvertNode",MT);class RI extends Qt{constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,i)=>t+e.getTypeLength(i.getNodeType(e)),0))}generate(e,t){const i=this.getNodeType(e),s=this.nodes,r=e.getComponentType(i),o=[];for(const l of s){let c=l.build(e);const u=e.getComponentType(l.getNodeType(e));u!==r&&(c=e.format(c,u,r)),o.push(c)}const a=`${e.getType(i)}( ${o.join(", ")} )`;return e.format(a,i,t)}}ue("JoinNode",RI);const e$=L0.join("");class qx extends tt{constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(L0.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const i=this.node,s=e.getTypeLength(i.getNodeType(e));let r=null;if(s>1){let o=null;this.getVectorLength()>=s&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=i.build(e,o);this.components.length===s&&this.components===e$.slice(0,this.components.length)?r=e.format(l,o,t):r=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else r=i.build(e,t);return r}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}ue("SplitNode",qx);class PI extends Qt{constructor(e,t,i){super(),this.sourceNode=e,this.components=t,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:i,targetNode:s}=this,r=this.getNodeType(e),o=e.getTypeFromLength(i.length),a=s.build(e,o),l=t.build(e,r),c=e.getTypeLength(r),u=[];for(let h=0;h<c;h++){const d=L0[h];d===i[0]?(u.push(a),h+=i.length-1):u.push(l+"."+d)}return`${e.getType(r)}( ${u.join(", ")} )`}}ue("SetNode",PI);class I0 extends tt{constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?wa(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=wa(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=CI(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?NI(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}ue("InputNode",I0);class co extends I0{constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,t)}}ue("ConstNode",co);let dh=null;const mu=new Map;function X(n,e){if(mu.has(n)){console.warn(`Redefinition of node element ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);mu.set(n,e)}const IN=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),LI={setup(n,e){const t=e.shift();return n(U0(t),...e)},get(n,e,t){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...i)=>(dh.assign(t,...i),t);if(mu.has(e)){const i=mu.get(e);return n.isStackNode?(...s)=>t.add(i(...s)):(...s)=>i(t,...s)}else{if(e==="self")return n;if(e.endsWith("Assign")&&mu.has(e.slice(0,e.length-6))){const i=mu.get(e.slice(0,e.length-6));return n.isStackNode?(...s)=>t.assign(s[0],i(...s)):(...s)=>t.assign(i(t,...s))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=IN(e),Ne(new qx(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=IN(e.slice(3).toLowerCase()),e=e.split("").sort().join(""),i=>Ne(new PI(n,e,i));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Ne(new qx(n,e));if(/^\d+$/.test(e)===!0)return Ne(new Mh(t,new co(Number(e),"uint")))}}}return Reflect.get(n,e,t)},set(n,e,t,i){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(i[e].assign(t),!0):Reflect.set(n,e,t,i)}},D_=new WeakMap,DN=new WeakMap,t$=function(n,e=null){const t=wa(n);if(t==="node"){let i=D_.get(n);return i===void 0&&(i=new Proxy(n,LI),D_.set(n,i),D_.set(i,i)),i}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return Ne(Yx(n,e));if(t==="shader")return se(n)}return n},n$=function(n,e=null){for(const t in n)n[t]=Ne(n[t],e);return n},i$=function(n,e=null){const t=n.length;for(let i=0;i<t;i++)n[i]=Ne(n[i],e);return n},s$=function(n,e=null,t=null,i=null){const s=r=>Ne(i!==null?Object.assign(r,i):r);return e===null?(...r)=>s(new n(...Du(r))):t!==null?(t=Ne(t),(...r)=>s(new n(e,...Du(r),t))):(...r)=>s(new n(e,...Du(r)))},r$=function(n,...e){return Ne(new n(...Du(e)))};class o$ extends tt{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode.getNodeType(e)}call(e){const{shaderNode:t,inputNodes:i}=this;if(t.layout){let o=DN.get(e.constructor);o===void 0&&(o=new WeakMap,DN.set(e.constructor,o));let a=o.get(t);return a===void 0&&(a=Ne(e.buildFunctionNode(t)),o.set(t,a)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(a),Ne(a.call(i))}const s=t.jsFunc,r=i!==null?s(i,e.stack,e):s(e.stack,e);return Ne(r)}setup(e){const{outputNode:t}=e.getNodeProperties(this);return t||this.setupOutput(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){const{outputNode:i}=e.getNodeProperties(this);return i===null?this.call(e).build(e,t):super.generate(e,t)}}class a$ extends tt{constructor(e){super(),this.jsFunc=e,this.layout=null}get isArrayInput(){return/^\((\s+)?\[/.test(this.jsFunc.toString())}setLayout(e){return this.layout=e,this}call(e=null){return U0(e),Ne(new o$(this,e))}setup(){return this.call()}}const l$=[!1,!0],c$=[0,1,2,3],u$=[-1,-2],II=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],wT=new Map;for(const n of l$)wT.set(n,new co(n));const ET=new Map;for(const n of c$)ET.set(n,new co(n,"uint"));const AT=new Map([...ET].map(n=>new co(n.value,"int")));for(const n of u$)AT.set(n,new co(n,"int"));const D0=new Map([...AT].map(n=>new co(n.value)));for(const n of II)D0.set(n,new co(n));for(const n of II)D0.set(-n,new co(-n));const O0={bool:wT,uint:ET,ints:AT,float:D0},ON=new Map([...wT,...D0]),Yx=(n,e)=>ON.has(n)?ON.get(n):n.isNode===!0?n:new co(n,e),h$=n=>{try{return n.getNodeType()}catch{return}},jt=function(n,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(n)&&t.every(s=>typeof s!="object"))&&(t=[NI(n,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Ne(e.get(t[0]));if(t.length===1){const s=Yx(t[0],n);return h$(s)===n?Ne(s):Ne(new MT(s,n))}const i=t.map(s=>Yx(s));return Ne(new RI(i,n))}},UN=n=>n&&n.value,d$=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function zd(n){return new Proxy(new a$(n),LI)}const Ne=(n,e=null)=>t$(n,e),U0=(n,e=null)=>new n$(n,e),Du=(n,e=null)=>new i$(n,e),J=(...n)=>new s$(...n),Se=(...n)=>new r$(...n),se=n=>{const e=new zd(n),t=(...i)=>{let s;return U0(i),i[0]&&i[0].isNode?s=[...i]:s=i[0],e.call(s)};return t.shaderNode=e,t.setLayout=i=>(e.setLayout(i),t),t};ue("ShaderNode",zd);X("toGlobal",n=>(n.global=!0,n));const FN=n=>{dh=n},f$=()=>dh,St=(...n)=>dh.if(...n);function p$(n){return dh&&dh.add(n),n}X("append",p$);const m$=new jt("color"),L=new jt("float",O0.float),O=new jt("int",O0.ints),Ae=new jt("uint",O0.uint),dc=new jt("bool",O0.bool),Ve=new jt("vec2"),Wl=new jt("ivec2"),g$=new jt("uvec2"),v$=new jt("bvec2"),B=new jt("vec3"),_$=new jt("ivec3"),$f=new jt("uvec3"),DI=new jt("bvec3"),Ue=new jt("vec4"),y$=new jt("ivec4"),x$=new jt("uvec4"),S$=new jt("bvec4"),NT=new jt("mat2"),T$=new jt("imat2"),M$=new jt("umat2"),w$=new jt("bmat2"),Dr=new jt("mat3"),E$=new jt("imat3"),A$=new jt("umat3"),N$=new jt("bmat3"),Ou=new jt("mat4"),C$=new jt("imat4"),b$=new jt("umat4"),R$=new jt("bmat4");X("toColor",m$);X("toFloat",L);X("toInt",O);X("toUint",Ae);X("toBool",dc);X("toVec2",Ve);X("toIvec2",Wl);X("toUvec2",g$);X("toBvec2",v$);X("toVec3",B);X("toIvec3",_$);X("toUvec3",$f);X("toBvec3",DI);X("toVec4",Ue);X("toIvec4",y$);X("toUvec4",x$);X("toBvec4",S$);X("toMat2",NT);X("toImat2",T$);X("toUmat2",M$);X("toBmat2",w$);X("toMat3",Dr);X("toImat3",E$);X("toUmat3",A$);X("toBmat3",N$);X("toMat4",Ou);X("toImat4",C$);X("toUmat4",b$);X("toBmat4",R$);const P$=J(Mh),L$=(n,e)=>Ne(new MT(Ne(n),e));X("element",P$);X("convert",L$);class OI extends Qt{constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const i=e.getTypeLength(t.node.getNodeType(e));return L0.join("").slice(0,i)!==t.components}return!1}generate(e,t){const{targetNode:i,sourceNode:s}=this,r=this.needsSplitAssign(e),o=i.getNodeType(e),a=i.context({assign:!0}).build(e),l=s.build(e,o),c=s.getNodeType(e),u=e.getDataFromNode(this);let h;if(u.initialized===!0)t!=="void"&&(h=a);else if(r){const d=e.getVarFromNode(this,null,o),f=e.getPropertyName(d);e.addLineFlowCode(`${f} = ${l}`);const g=i.node.context({assign:!0}).build(e);for(let m=0;m<i.components.length;m++){const v=i.components[m];e.addLineFlowCode(`${g}.${v} = ${f}[ ${m} ]`)}t!=="void"&&(h=a)}else h=`${a} = ${l}`,(t==="void"||c==="void")&&(e.addLineFlowCode(h),t!=="void"&&(h=a));return u.initialized=!0,e.format(h,o,t)}}const I$=J(OI);ue("AssignNode",OI);X("assign",I$);class UI extends tt{constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let i=t.varying;if(i===void 0){const s=this.name,r=this.getNodeType(e);t.varying=i=e.getVaryingFromNode(this,s,r),t.node=this.node}return i.needsInterpolation||(i.needsInterpolation=e.shaderStage==="fragment"),i}setup(e){this.setupVarying(e)}generate(e){const t=e.getNodeProperties(this),i=this.setupVarying(e);if(t.propertyName===void 0){const s=this.getNodeType(e),r=e.getPropertyName(i,PN.VERTEX);e.flowNodeFromShaderStage(PN.VERTEX,this.node,s,r),t.propertyName=r}return e.getPropertyName(i)}}const Wn=J(UI);X("varying",Wn);ue("VaryingNode",UI);class CT extends tt{constructor(e,t=null,i=null){super(t),this.defaultNode=i,this._attributeName=e}isGlobal(){return!0}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=super.getNodeType(e);if(t===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const s=e.geometry.getAttribute(i);t=e.getTypeFromAttribute(s)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const r=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(r),a=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(a.name,o,i):Wn(this).build(e,i)}else{console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`);const{defaultNode:r}=this;return r!==null?r.build(e,i):e.generateConst(i)}}}const pi=(n,e,t)=>Ne(new CT(n,e,Ne(t)));ue("AttributeNode",CT);class FI extends tt{constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t),this.outputNode.build(e)}}const VI=J(FI);X("bypass",VI);ue("BypassNode",FI);let D$=0;class O${constructor(){this.id=D$++,this.nodesData=new WeakMap}getNodeData(e){return this.nodesData.get(e)}setNodeData(e,t){this.nodesData.set(e,t)}}class kI extends tt{constructor(e,t=new O$){super(),this.isCacheNode=!0,this.node=e,this.cache=t}getNodeType(e){return this.node.getNodeType(e)}build(e,...t){const i=e.getCache(),s=this.cache||e.globalCache;e.setCache(s);const r=this.node.build(e,...t);return e.setCache(i),r}}const Fg=J(kI),U$=n=>Fg(n,null);X("cache",Fg);X("globalCache",U$);ue("CacheNode",kI);class bT extends tt{constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.context=t}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.context});const i=this.node.build(e);return e.setContext(t),i}generate(e,t){const i=e.getContext();e.setContext({...e.context,...this.context});const s=this.node.build(e,t);return e.setContext(i),s}}const zo=J(bT),F$=(n,e)=>zo(n,{label:e});X("context",zo);X("label",F$);ue("ContextNode",bT);class oo extends tt{constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),i=this.scope;let s;if(i===oo.VERTEX)s=e.getVertexIndex();else if(i===oo.INSTANCE)s=e.getInstanceIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let r;return e.shaderStage==="vertex"||e.shaderStage==="compute"?r=s:r=Wn(this).build(e,t),r}}oo.VERTEX="vertex";oo.INSTANCE="instance";const V$=Se(oo,oo.VERTEX),zI=Se(oo,oo.INSTANCE);ue("IndexNode",oo);class F0{start(){}finish(){}direct(){}indirectDiffuse(){}indirectSpecular(){}ambientOcclusion(){}}class BI extends tt{constructor(e,t=null){super(),this.node=e,this.name=t,this.isVarNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:i}=this,s=e.getVarFromNode(this,i,e.getVectorType(this.getNodeType(e))),r=e.getPropertyName(s),o=t.build(e,s.type);return e.addLineFlowCode(`${r} = ${o}`),r}}const Vg=J(BI);X("temp",Vg);X("toVar",(...n)=>Vg(...n).append());ue("VarNode",BI);class Ut extends tt{constructor(e,t=null,i=!1){super(e),this.name=t,this.varying=i,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const Sn=(n,e)=>Ne(new Ut(n,e)),zr=(n,e)=>Ne(new Ut(n,e,!0)),tn=Se(Ut,"vec4","DiffuseColor"),Ea=Se(Ut,"float","Roughness"),kg=Se(Ut,"float","Metalness"),Kx=Se(Ut,"float","Clearcoat"),zg=Se(Ut,"float","ClearcoatRoughness"),gu=Se(Ut,"vec3","Sheen"),RT=Se(Ut,"float","SheenRoughness"),PT=Se(Ut,"float","Iridescence"),HI=Se(Ut,"float","IridescenceIOR"),GI=Se(Ut,"float","IridescenceThickness"),Zx=Se(Ut,"float","AlphaT"),Il=Se(Ut,"float","Anisotropy"),Im=Se(Ut,"vec3","AnisotropyT"),Uu=Se(Ut,"vec3","AnisotropyB"),xr=Se(Ut,"color","SpecularColor"),Bg=Se(Ut,"float","SpecularF90"),Qx=Se(Ut,"float","Shininess"),k$=Se(Ut,"vec4","Output"),Fu=Se(Ut,"float","dashSize"),Hg=Se(Ut,"float","gapSize");Se(Ut,"float","pointWidth");const Dm=Se(Ut,"float","IOR"),Jx=Se(Ut,"float","Transmission"),WI=Se(Ut,"float","Thickness"),jI=Se(Ut,"float","AttenuationDistance"),XI=Se(Ut,"color","AttenuationColor"),$I=Se(Ut,"float","Dispersion");ue("PropertyNode",Ut);class z$ extends Ut{constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}ue("ParameterNode",z$);class LT extends tt{constructor(e="",t=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this.includes=t}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const s of t)s.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}J(LT);ue("CodeNode",LT);class B$ extends LT{constructor(e="",t=[],i=""){super(e,t,i),this.keywords={}}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let i=t.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),t.nodeFunction=i),i}generate(e,t){super.generate(e);const i=this.getNodeFunction(e),s=i.name,r=i.type,o=e.getCodeFromNode(this,r);s!==""&&(o.name=s);const a=e.getPropertyName(o);let l=this.getNodeFunction(e).getCode(a);const c=this.keywords,u=Object.keys(c);if(u.length>0)for(const h of u){const d=new RegExp(`\\b${h}\\b`,"g"),f=c[h].build(e,"property");l=l.replace(d,f)}return o.code=l+`
`,t==="property"?a:e.format(`${a}()`,r,t)}}ue("FunctionNode",B$);class IT extends tt{constructor(e,t=!1){super("string"),this.name=e,this.version=0,this.shared=t,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}}const H$=n=>new IT(n),qI=n=>new IT(n,!0);qI("frame");qI("render");const G$=H$("object");ue("UniformGroupNode",IT);class Tc extends I0{constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.groupNode=G$}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const i=this.getSelf();return e=e.bind(i),super.onUpdate(s=>{const r=e(s,i);r!==void 0&&(this.value=r)},t)}generate(e,t){const i=this.getNodeType(e),s=this.getUniformHash(e);let r=e.getNodeFromHash(s);r===void 0&&(e.setHashNode(this,s),r=this);const o=r.getInputType(e),a=e.getUniformFromNode(r,o,e.shaderStage,e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,i,t)}}const Lt=(n,e)=>{const t=d$(e||n),i=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return Ne(new Tc(i,t))};ue("UniformNode",Tc);const uo=n=>pi("uv"+(n>0?n:""),"vec2");class YI extends tt{constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const i=this.textureNode.build(e,"property"),s=this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${s} )`,this.getNodeType(e),t)}}const DT=J(YI);X("textureSize",DT);ue("TextureSizeNode",YI);class vn extends Qt{constructor(e,t,i,...s){if(super(),this.op=e,s.length>0){let r=i;for(let o=0;o<s.length;o++)r=new vn(e,r,s[o]);i=r}this.aNode=t,this.bNode=i}getNodeType(e,t){const i=this.op,s=this.aNode,r=this.bNode,o=s.getNodeType(e),a=typeof r<"u"?r.getNodeType(e):null;if(o==="void"||a==="void")return"void";if(i==="%")return o;if(i==="~"||i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(o);if(i==="!"||i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return o==="float"&&e.isMatrix(a)?a:e.isMatrix(o)&&e.isVector(a)?e.getVectorFromMatrix(o):e.isVector(o)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(o)?a:o}generate(e,t){const i=this.op,s=this.aNode,r=this.bNode,o=this.getNodeType(e,t);let a=null,l=null;o!=="void"?(a=s.getNodeType(e),l=typeof r<"u"?r.getNodeType(e):null,i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(a)?l=a:a=l="float":i===">>"||i==="<<"?(a=o,l=e.changeComponentType(l,"uint")):e.isMatrix(a)&&e.isVector(l)?l=e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?a=e.getVectorFromMatrix(l):a=l=o):a=l=o;const c=s.build(e,a),u=typeof r<"u"?r.build(e,l):null,h=e.getTypeLength(t),d=e.getFunctionOperator(i);if(t!=="void")return i==="<"&&h>1?e.format(`${e.getMethod("lessThan")}( ${c}, ${u} )`,o,t):i==="<="&&h>1?e.format(`${e.getMethod("lessThanEqual")}( ${c}, ${u} )`,o,t):i===">"&&h>1?e.format(`${e.getMethod("greaterThan")}( ${c}, ${u} )`,o,t):i===">="&&h>1?e.format(`${e.getMethod("greaterThanEqual")}( ${c}, ${u} )`,o,t):i==="!"||i==="~"?e.format(`(${i}${c})`,a,t):d?e.format(`${d}( ${c}, ${u} )`,o,t):e.format(`( ${c} ${i} ${u} )`,o,t);if(a!=="void")return d?e.format(`${d}( ${c}, ${u} )`,o,t):e.format(`${c} ${i} ${u}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Bs=J(vn,"+"),Vn=J(vn,"-"),Nt=J(vn,"*"),Ja=J(vn,"/"),W$=J(vn,"%"),j$=J(vn,"=="),X$=J(vn,"!="),$$=J(vn,"<"),KI=J(vn,">"),q$=J(vn,"<="),Y$=J(vn,">="),K$=J(vn,"&&"),Z$=J(vn,"||"),Q$=J(vn,"!"),J$=J(vn,"^^"),eq=J(vn,"&"),tq=J(vn,"~"),nq=J(vn,"|"),iq=J(vn,"^"),sq=J(vn,"<<"),rq=J(vn,">>");X("add",Bs);X("sub",Vn);X("mul",Nt);X("div",Ja);X("remainder",W$);X("equal",j$);X("notEqual",X$);X("lessThan",$$);X("greaterThan",KI);X("lessThanEqual",q$);X("greaterThanEqual",Y$);X("and",K$);X("or",Z$);X("not",Q$);X("xor",J$);X("bitAnd",eq);X("bitNot",tq);X("bitOr",nq);X("bitXor",iq);X("shiftLeft",sq);X("shiftRight",rq);ue("OperatorNode",vn);class W extends Qt{constructor(e,t,i=null,s=null){super(),this.method=e,this.aNode=t,this.bNode=i,this.cNode=s}getInputType(e){const t=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,s=this.cNode?this.cNode.getNodeType(e):null,r=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(i)?0:e.getTypeLength(i),a=e.isMatrix(s)?0:e.getTypeLength(s);return r>o&&r>a?t:o>a?i:a>r?s:t}getNodeType(e){const t=this.method;return t===W.LENGTH||t===W.DISTANCE||t===W.DOT?"float":t===W.CROSS?"vec3":t===W.ALL?"bool":t===W.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===W.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,t){const i=this.method,s=this.getNodeType(e),r=this.getInputType(e),o=this.aNode,a=this.bNode,l=this.cNode,c=e.renderer.isWebGLRenderer===!0;if(i===W.TRANSFORM_DIRECTION){let u=o,h=a;e.isMatrix(u.getNodeType(e))?h=Ue(B(h),0):u=Ue(B(u),0);const d=Nt(u,h).xyz;return Sf(d).build(e,t)}else{if(i===W.NEGATE)return e.format("( - "+o.build(e,r)+" )",s,t);if(i===W.ONE_MINUS)return Vn(1,o).build(e,t);if(i===W.RECIPROCAL)return Ja(1,o).build(e,t);if(i===W.DIFFERENCE)return Hn(Vn(o,a)).build(e,t);{const u=[];return i===W.CROSS||i===W.MOD?u.push(o.build(e,s),a.build(e,s)):i===W.STEP?u.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":r),a.build(e,r)):c&&(i===W.MIN||i===W.MAX)||i===W.MOD?u.push(o.build(e,r),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":r)):i===W.REFRACT?u.push(o.build(e,r),a.build(e,r),l.build(e,"float")):i===W.MIX?u.push(o.build(e,r),a.build(e,r),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":r)):(u.push(o.build(e,r)),a!==null&&u.push(a.build(e,r)),l!==null&&u.push(l.build(e,r))),e.format(`${e.getMethod(i,s)}( ${u.join(", ")} )`,s,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}W.ALL="all";W.ANY="any";W.EQUALS="equals";W.RADIANS="radians";W.DEGREES="degrees";W.EXP="exp";W.EXP2="exp2";W.LOG="log";W.LOG2="log2";W.SQRT="sqrt";W.INVERSE_SQRT="inversesqrt";W.FLOOR="floor";W.CEIL="ceil";W.NORMALIZE="normalize";W.FRACT="fract";W.SIN="sin";W.COS="cos";W.TAN="tan";W.ASIN="asin";W.ACOS="acos";W.ATAN="atan";W.ABS="abs";W.SIGN="sign";W.LENGTH="length";W.NEGATE="negate";W.ONE_MINUS="oneMinus";W.DFDX="dFdx";W.DFDY="dFdy";W.ROUND="round";W.RECIPROCAL="reciprocal";W.TRUNC="trunc";W.FWIDTH="fwidth";W.BITCAST="bitcast";W.ATAN2="atan2";W.MIN="min";W.MAX="max";W.MOD="mod";W.STEP="step";W.REFLECT="reflect";W.DISTANCE="distance";W.DIFFERENCE="difference";W.DOT="dot";W.CROSS="cross";W.POW="pow";W.TRANSFORM_DIRECTION="transformDirection";W.MIX="mix";W.CLAMP="clamp";W.REFRACT="refract";W.SMOOTHSTEP="smoothstep";W.FACEFORWARD="faceforward";const ZI=L(1e-6);L(1e6);const VN=L(Math.PI);L(Math.PI*2);const QI=J(W,W.ALL),oq=J(W,W.ANY),aq=J(W,W.EQUALS),lq=J(W,W.RADIANS),cq=J(W,W.DEGREES),JI=J(W,W.EXP),eS=J(W,W.EXP2),e3=J(W,W.LOG),V0=J(W,W.LOG2),Mc=J(W,W.SQRT),uq=J(W,W.INVERSE_SQRT),wh=J(W,W.FLOOR),t3=J(W,W.CEIL),Sf=J(W,W.NORMALIZE),k0=J(W,W.FRACT),wo=J(W,W.SIN),ha=J(W,W.COS),hq=J(W,W.TAN),dq=J(W,W.ASIN),fq=J(W,W.ACOS),pq=J(W,W.ATAN),Hn=J(W,W.ABS),OT=J(W,W.SIGN),Vu=J(W,W.LENGTH),mq=J(W,W.NEGATE),gq=J(W,W.ONE_MINUS),vq=J(W,W.DFDX),_q=J(W,W.DFDY),yq=J(W,W.ROUND),xq=J(W,W.RECIPROCAL),n3=J(W,W.TRUNC),Sq=J(W,W.FWIDTH);J(W,W.BITCAST);const Tq=J(W,W.ATAN2),Er=J(W,W.MIN),gi=J(W,W.MAX),Mq=J(W,W.MOD),wq=J(W,W.STEP),Eq=J(W,W.REFLECT),Aq=J(W,W.DISTANCE),Nq=J(W,W.DIFFERENCE),Eh=J(W,W.DOT),i3=J(W,W.CROSS),Jr=J(W,W.POW),s3=J(W,W.POW,2),Cq=J(W,W.POW,3),bq=J(W,W.POW,4),Rq=J(W,W.TRANSFORM_DIRECTION),Pq=n=>Nt(OT(n),Jr(Hn(n),1/3)),Lq=n=>Eh(n,n),ei=J(W,W.MIX),fh=(n,e=0,t=1)=>Ne(new W(W.CLAMP,Ne(n),Ne(e),Ne(t))),Iq=n=>fh(n),r3=J(W,W.REFRACT),ao=J(W,W.SMOOTHSTEP),Dq=J(W,W.FACEFORWARD),Oq=(n,e,t)=>ei(e,t,n),Uq=(n,e,t)=>ao(e,t,n);X("all",QI);X("any",oq);X("equals",aq);X("radians",lq);X("degrees",cq);X("exp",JI);X("exp2",eS);X("log",e3);X("log2",V0);X("sqrt",Mc);X("inverseSqrt",uq);X("floor",wh);X("ceil",t3);X("normalize",Sf);X("fract",k0);X("sin",wo);X("cos",ha);X("tan",hq);X("asin",dq);X("acos",fq);X("atan",pq);X("abs",Hn);X("sign",OT);X("length",Vu);X("lengthSq",Lq);X("negate",mq);X("oneMinus",gq);X("dFdx",vq);X("dFdy",_q);X("round",yq);X("reciprocal",xq);X("trunc",n3);X("fwidth",Sq);X("atan2",Tq);X("min",Er);X("max",gi);X("mod",Mq);X("step",wq);X("reflect",Eq);X("distance",Aq);X("dot",Eh);X("cross",i3);X("pow",Jr);X("pow2",s3);X("pow3",Cq);X("pow4",bq);X("transformDirection",Rq);X("mix",Oq);X("clamp",fh);X("refract",r3);X("smoothstep",Uq);X("faceForward",Dq);X("difference",Nq);X("saturate",Iq);X("cbrt",Pq);ue("MathNode",W);const Fq=se(n=>{const{value:e}=n,{rgb:t}=e,i=t.mul(.9478672986).add(.0521327014).pow(2.4),s=t.mul(.0773993808),r=t.lessThanEqual(.04045),o=ei(i,s,r);return Ue(o,e.a)}),Vq=se(n=>{const{value:e}=n,{rgb:t}=e,i=t.pow(.41666).mul(1.055).sub(.055),s=t.mul(12.92),r=t.lessThanEqual(.0031308),o=ei(i,s,r);return Ue(o,e.a)}),kN=n=>{let e=null;return n===Fr?e="Linear":n===yr&&(e="sRGB"),e},o3=(n,e)=>kN(n)+"To"+kN(e);class xs extends Qt{constructor(e,t){super("vec4"),this.method=e,this.node=t}setup(){const{method:e,node:t}=this;return e===xs.LINEAR_TO_LINEAR?t:kq[e]({value:t})}}xs.LINEAR_TO_LINEAR="LinearToLinear";xs.LINEAR_TO_sRGB="LinearTosRGB";xs.sRGB_TO_LINEAR="sRGBToLinear";const kq={[xs.LINEAR_TO_sRGB]:Vq,[xs.sRGB_TO_LINEAR]:Fq},zq=(n,e)=>Ne(new xs(o3(Fr,e),Ne(n))),a3=(n,e)=>Ne(new xs(o3(e,Fr),Ne(n))),Bq=J(xs,xs.LINEAR_TO_sRGB),Hq=J(xs,xs.sRGB_TO_LINEAR);X("linearTosRGB",Bq);X("sRGBToLinear",Hq);X("linearToColorSpace",zq);X("colorSpaceToLinear",a3);ue("ColorSpaceNode",xs);class l3 extends tt{constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const i=this.getNodeType(e),s=this.snippet;if(i==="void")e.addLineFlowCode(s);else return e.format(`( ${s} )`,i,t)}}const z0=J(l3);ue("ExpressionNode",l3);class c3 extends Tc{constructor(e){super(0),this.textureNode=e,this.updateType=sn.FRAME}get texture(){return this.textureNode.value}update(){const e=this.texture,t=e.images,i=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(i&&i.width!==void 0){const{width:s,height:r}=i;this.value=Math.log2(Math.max(s,r))}}}const Gq=J(c3);ue("MaxMipLevelNode",c3);class wc extends Tc{constructor(e,t=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=sn.NONE,this.referenceNode=null,this._value=e,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":"vec4"}getInputType(){return"texture"}getDefaultUV(){return uo(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){const t=this.value;return Lt(t.matrix).mul(B(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?sn.FRAME:sn.NONE,this}setupUV(e,t){const i=this.value;return e.isFlipY()&&(i.isRenderTargetTexture===!0||i.isFramebufferTexture===!0||i.isDepthTexture===!0)&&(t=t.setY(t.y.oneMinus())),t}setup(e){const t=e.getNodeProperties(this);let i=this.uvNode;(i===null||e.context.forceUVContext===!0)&&e.context.getUV&&(i=e.context.getUV(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i)),i=this.setupUV(e,i);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=i,t.levelNode=s,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,i,s,r,o,a){const l=this.value;let c;return s?c=e.generateTextureLevel(l,t,i,s,r):a?c=e.generateTextureGrad(l,t,i,a,r):o?c=e.generateTextureCompare(l,t,i,o,r):this.sampler===!1?c=e.generateTextureLoad(l,t,i,r):c=e.generateTexture(l,t,i,r),c}generate(e,t){const i=e.getNodeProperties(this),s=this.value;if(!s||s.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const r=super.generate(e,"property");if(t==="sampler")return r+"_sampler";if(e.isReference(t))return r;{const o=e.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:u,levelNode:h,compareNode:d,depthNode:f,gradNode:g}=i,m=this.generateUV(e,u),v=h?h.build(e,"float"):null,p=f?f.build(e,"int"):null,y=d?d.build(e,"float"):null,_=g?[g[0].build(e,"vec2"),g[1].build(e,"vec2")]:null,x=e.getVarFromNode(this);a=e.getPropertyName(x);const E=this.generateSnippet(e,r,m,v,p,y,_);e.addLineFlowCode(`${a} = ${E}`),e.context.tempWrite!==!1&&(o.snippet=E,o.propertyName=a)}let l=a;const c=this.getNodeType(e);return e.needsColorSpaceToLinear(s)&&(l=a3(z0(l,c),s.colorSpace).setup(e).build(e,c)),e.format(l,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const t=this.clone();return t.uvNode=e,t.referenceNode=this,Ne(t)}blur(e){const t=this.clone();return t.levelNode=e.mul(Gq(t)),t.referenceNode=this,Ne(t)}level(e){const t=this.clone();return t.levelNode=e,t.referenceNode=this,t}size(e){return DT(this,e)}compare(e){const t=this.clone();return t.compareNode=Ne(e),t.referenceNode=this,Ne(t)}grad(e,t){const i=this.clone();return i.gradNode=[Ne(e),Ne(t)],i.referenceNode=this,Ne(i)}depth(e){const t=this.clone();return t.depthNode=Ne(e),t.referenceNode=this,Ne(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value]}update(){const e=this.value;e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e}}const Fs=J(wc),Ul=(...n)=>Fs(...n).setSampler(!1);X("texture",Fs);ue("TextureNode",wc);class B0 extends Tc{constructor(e,t,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=i}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const UT=(n,e,t)=>Ne(new B0(n,e,t));ue("BufferNode",B0);class Wq extends Mh{constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=super.generate(e),i=this.getNodeType();return e.format(t,"vec4",i)}}class u3 extends B0{constructor(e,t=null){super(null,"vec4"),this.array=e,this.elementType=t,this._elementType=null,this._elementLength=0,this.updateType=sn.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:t}=this,i=this.getElementLength(),s=this.getElementType();if(i===1)for(let r=0;r<e.length;r++){const o=r*4;t[o]=e[r]}else if(s==="color")for(let r=0;r<e.length;r++){const o=r*4,a=e[r];t[o]=a.r,t[o+1]=a.g,t[o+2]=a.b||0}else for(let r=0;r<e.length;r++){const o=r*4,a=e[r];t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z||0,t[o+3]=a.w||0}}setup(e){const t=this.array.length;return this._elementType=this.elementType===null?wa(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType),this.value=new Float32Array(t*4),this.bufferCount=t,super.setup(e)}element(e){return Ne(new Wq(this,Ne(e)))}}const tS=(n,e)=>Ne(new u3(n,e));ue("UniformsNode",u3);class jq extends Mh{constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),i=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(t,i,s)}}class Ah extends tt{constructor(e,t,i=null,s=null){super(),this.property=e,this.uniformType=t,this.object=i,this.count=s,this.properties=e.split("."),this.reference=null,this.node=null,this.updateType=sn.OBJECT}element(e){return Ne(new jq(this,Ne(e)))}setNodeType(e){let t=null;this.count!==null?t=UT(null,e,this.count):Array.isArray(this.getValueFromReference())?t=tS(null,e):e==="texture"?t=Fs(null):t=Lt(null,e),this.node=t}getNodeType(e){return this.node===null&&this.updateValue(),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let i=e[t[0]];for(let s=1;s<t.length;s++)i=i[t[s]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Or=(n,e,t)=>Ne(new Ah(n,e,t)),Xq=(n,e,t,i)=>Ne(new Ah(n,e,i,t));ue("ReferenceNode",Ah);class h3 extends Ah{constructor(e,t,i=null){super(e,t,i),this.material=i}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Lo=(n,e,t)=>Ne(new h3(n,e,t));ue("MaterialReferenceNode",h3);const O_=Lt("float").onRenderUpdate(({camera:n})=>n.near),U_=Lt("float").onRenderUpdate(({camera:n})=>n.far),$q=Lt("float").onRenderUpdate(({camera:n})=>2/(Math.log(n.far+1)/Math.LN2)),Wr=Lt("mat4").onRenderUpdate(({camera:n})=>n.projectionMatrix),Nh=Lt("mat4").onRenderUpdate(({camera:n})=>n.matrixWorldInverse),d3=Lt(new $).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class ct extends tt{constructor(e=ct.VIEW_MATRIX,t=null){super(),this.scope=e,this.object3d=t,this.updateType=sn.OBJECT,this._uniformNode=new Tc(null)}getNodeType(){const e=this.scope;if(e===ct.WORLD_MATRIX||e===ct.VIEW_MATRIX)return"mat4";if(e===ct.NORMAL_MATRIX)return"mat3";if(e===ct.POSITION||e===ct.VIEW_POSITION||e===ct.DIRECTION||e===ct.SCALE)return"vec3"}update(e){const t=this.object3d,i=this._uniformNode,s=this.scope;if(s===ct.VIEW_MATRIX)i.value=t.modelViewMatrix;else if(s===ct.NORMAL_MATRIX)i.value=t.normalMatrix;else if(s===ct.WORLD_MATRIX)i.value=t.matrixWorld;else if(s===ct.POSITION)i.value=i.value||new $,i.value.setFromMatrixPosition(t.matrixWorld);else if(s===ct.SCALE)i.value=i.value||new $,i.value.setFromMatrixScale(t.matrixWorld);else if(s===ct.DIRECTION)i.value=i.value||new $,t.getWorldDirection(i.value);else if(s===ct.VIEW_POSITION){const r=e.camera;i.value=i.value||new $,i.value.setFromMatrixPosition(t.matrixWorld),i.value.applyMatrix4(r.matrixWorldInverse)}}generate(e){const t=this.scope;return t===ct.WORLD_MATRIX||t===ct.VIEW_MATRIX?this._uniformNode.nodeType="mat4":t===ct.NORMAL_MATRIX?this._uniformNode.nodeType="mat3":(t===ct.POSITION||t===ct.VIEW_POSITION||t===ct.DIRECTION||t===ct.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ct.VIEW_MATRIX="viewMatrix";ct.NORMAL_MATRIX="normalMatrix";ct.WORLD_MATRIX="worldMatrix";ct.POSITION="position";ct.SCALE="scale";ct.VIEW_POSITION="viewPosition";ct.DIRECTION="direction";J(ct,ct.DIRECTION);J(ct,ct.VIEW_MATRIX);J(ct,ct.NORMAL_MATRIX);J(ct,ct.WORLD_MATRIX);const nS=J(ct,ct.POSITION);J(ct,ct.SCALE);const f3=J(ct,ct.VIEW_POSITION);ue("Object3DNode",ct);class Mi extends ct{constructor(e=Mi.VIEW_MATRIX){super(e)}update(e){this.object3d=e.object,super.update(e)}}Se(Mi,Mi.DIRECTION);const fc=Se(Mi,Mi.VIEW_MATRIX).label("modelViewMatrix").temp("ModelViewMatrix"),p3=Se(Mi,Mi.NORMAL_MATRIX),Tf=Se(Mi,Mi.WORLD_MATRIX);Se(Mi,Mi.POSITION);Se(Mi,Mi.SCALE);Se(Mi,Mi.VIEW_POSITION);const qq=Lt(new un).onObjectUpdate(({object:n},e)=>e.value.copy(n.matrixWorld).invert());ue("ModelNode",Mi);const Gg=pi("normal","vec3",B(0,1,0)),Ur=Gg.toVar("normalLocal"),el=Wn(p3.mul(Ur),"v_normalView").normalize().toVar("normalView"),Yq=Wn(el.transformDirection(Nh),"v_normalWorld").normalize().toVar("transformedNormalWorld"),Un=Sn("vec3","transformedNormalView"),m3=Un.transformDirection(Nh).normalize().toVar("transformedNormalWorld"),vu=Sn("vec3","transformedClearcoatNormalView"),zN=new Map;class re extends tt{constructor(e){super(),this.scope=e}getCache(e,t){let i=zN.get(e);return i===void 0&&(i=Lo(e,t),zN.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,i=this.scope;let s=null;if(i===re.COLOR){const r=this.getColor(i);t.map&&t.map.isTexture===!0?s=r.mul(this.getTexture("map")):s=r}else if(i===re.OPACITY){const r=this.getFloat(i);t.alphaMap&&t.alphaMap.isTexture===!0?s=r.mul(this.getTexture("alpha")):s=r}else if(i===re.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?s=this.getTexture("specular").r:s=L(1);else if(i===re.SPECULAR_INTENSITY){const r=this.getFloat(i);t.specularMap?s=r.mul(this.getTexture(i).a):s=r}else if(i===re.SPECULAR_COLOR){const r=this.getColor(i);t.specularColorMap&&t.specularColorMap.isTexture===!0?s=r.mul(this.getTexture(i).rgb):s=r}else if(i===re.ROUGHNESS){const r=this.getFloat(i);t.roughnessMap&&t.roughnessMap.isTexture===!0?s=r.mul(this.getTexture(i).g):s=r}else if(i===re.METALNESS){const r=this.getFloat(i);t.metalnessMap&&t.metalnessMap.isTexture===!0?s=r.mul(this.getTexture(i).b):s=r}else if(i===re.EMISSIVE){const r=this.getColor(i);t.emissiveMap&&t.emissiveMap.isTexture===!0?s=r.mul(this.getTexture(i)):s=r}else if(i===re.NORMAL)t.normalMap?s=this.getTexture("normal").normalMap(this.getCache("normalScale","vec2")):t.bumpMap?s=this.getTexture("bump").r.bumpMap(this.getFloat("bumpScale")):s=el;else if(i===re.CLEARCOAT){const r=this.getFloat(i);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?s=r.mul(this.getTexture(i).r):s=r}else if(i===re.CLEARCOAT_ROUGHNESS){const r=this.getFloat(i);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?s=r.mul(this.getTexture(i).r):s=r}else if(i===re.CLEARCOAT_NORMAL)t.clearcoatNormalMap?s=this.getTexture(i).normalMap(this.getCache(i+"Scale","vec2")):s=el;else if(i===re.SHEEN){const r=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?s=r.mul(this.getTexture("sheenColor").rgb):s=r}else if(i===re.SHEEN_ROUGHNESS){const r=this.getFloat(i);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?s=r.mul(this.getTexture(i).a):s=r,s=s.clamp(.07,1)}else if(i===re.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const r=this.getTexture(i);s=NT(Yh.x,Yh.y,Yh.y.negate(),Yh.x).mul(r.rg.mul(2).sub(Ve(1)).normalize().mul(r.b))}else s=Yh;else if(i===re.IRIDESCENCE_THICKNESS){const r=Or("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=Or("0","float",t.iridescenceThicknessRange);s=r.sub(o).mul(this.getTexture(i).g).add(o)}else s=r}else if(i===re.TRANSMISSION){const r=this.getFloat(i);t.transmissionMap?s=r.mul(this.getTexture(i).r):s=r}else if(i===re.THICKNESS){const r=this.getFloat(i);t.thicknessMap?s=r.mul(this.getTexture(i).g):s=r}else if(i===re.IOR)s=this.getFloat(i);else{const r=this.getNodeType(e);s=this.getCache(i,r)}return s}}re.ALPHA_TEST="alphaTest";re.COLOR="color";re.OPACITY="opacity";re.SHININESS="shininess";re.SPECULAR="specular";re.SPECULAR_STRENGTH="specularStrength";re.SPECULAR_INTENSITY="specularIntensity";re.SPECULAR_COLOR="specularColor";re.REFLECTIVITY="reflectivity";re.ROUGHNESS="roughness";re.METALNESS="metalness";re.NORMAL="normal";re.CLEARCOAT="clearcoat";re.CLEARCOAT_ROUGHNESS="clearcoatRoughness";re.CLEARCOAT_NORMAL="clearcoatNormal";re.EMISSIVE="emissive";re.ROTATION="rotation";re.SHEEN="sheen";re.SHEEN_ROUGHNESS="sheenRoughness";re.ANISOTROPY="anisotropy";re.IRIDESCENCE="iridescence";re.IRIDESCENCE_IOR="iridescenceIOR";re.IRIDESCENCE_THICKNESS="iridescenceThickness";re.IOR="ior";re.TRANSMISSION="transmission";re.THICKNESS="thickness";re.ATTENUATION_DISTANCE="attenuationDistance";re.ATTENUATION_COLOR="attenuationColor";re.LINE_SCALE="scale";re.LINE_DASH_SIZE="dashSize";re.LINE_GAP_SIZE="gapSize";re.LINE_WIDTH="linewidth";re.LINE_DASH_OFFSET="dashOffset";re.POINT_WIDTH="pointWidth";re.DISPERSION="dispersion";const Kq=Se(re,re.ALPHA_TEST),Mf=Se(re,re.COLOR),Zq=Se(re,re.SHININESS),Qq=Se(re,re.EMISSIVE),g3=Se(re,re.OPACITY),Jq=Se(re,re.SPECULAR),BN=Se(re,re.SPECULAR_INTENSITY),eY=Se(re,re.SPECULAR_COLOR),tY=Se(re,re.SPECULAR_STRENGTH);Se(re,re.REFLECTIVITY);const nY=Se(re,re.ROUGHNESS),iY=Se(re,re.METALNESS),sY=Se(re,re.NORMAL),rY=Se(re,re.CLEARCOAT),oY=Se(re,re.CLEARCOAT_ROUGHNESS),aY=Se(re,re.CLEARCOAT_NORMAL),lY=Se(re,re.ROTATION),cY=Se(re,re.SHEEN),uY=Se(re,re.SHEEN_ROUGHNESS),hY=Se(re,re.ANISOTROPY),dY=Se(re,re.IRIDESCENCE),fY=Se(re,re.IRIDESCENCE_IOR),pY=Se(re,re.IRIDESCENCE_THICKNESS),mY=Se(re,re.TRANSMISSION),gY=Se(re,re.THICKNESS),vY=Se(re,re.IOR),_Y=Se(re,re.ATTENUATION_DISTANCE),yY=Se(re,re.ATTENUATION_COLOR),iS=Se(re,re.LINE_SCALE),v3=Se(re,re.LINE_DASH_SIZE),_3=Se(re,re.LINE_GAP_SIZE),F_=Se(re,re.LINE_WIDTH),HN=Se(re,re.LINE_DASH_OFFSET),xY=Se(re,re.POINT_WIDTH),SY=Se(re,re.DISPERSION),Yh=Lt(new Ye).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});ue("MaterialNode",re);const Xi=pi("position","vec3"),xi=Xi.toVar("positionLocal"),sS=Wn(Tf.mul(xi).xyz,"v_positionWorld"),TY=Wn(xi.transformDirection(Tf),"v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Ls=Wn(fc.mul(xi).xyz,"v_positionView"),Tn=Wn(Ls.negate(),"v_positionViewDirection").normalize().toVar("positionViewDirection");class y3 extends Qt{constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return Wn(e.context.mvp);const t=this.positionNode||xi;return Wr.mul(fc).mul(t)}}const GN=J(y3);ue("ModelViewProjectionNode",y3);class x3 extends I0{constructor(e,t=null,i=0,s=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=i,this.bufferOffset=s,this.usage=Og,this.instanced=!1,this.attribute=null,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),i=this.value,s=e.getTypeLength(t),r=this.bufferStride||s,o=this.bufferOffset,a=i.isInterleavedBuffer===!0?i:new yI(i,r),l=new xT(a,s,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,t),s=e.getPropertyName(i);let r=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=s,r=s):r=Wn(this).build(e,t),r}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this}setInstanced(e){return this.instanced=e,this}}const H0=(n,e,t,i)=>Ne(new x3(n,e,t,i)),MY=(n,e,t,i)=>H0(n,e,t,i).setUsage(jx),WN=(n,e,t,i)=>H0(n,e,t,i).setInstanced(!0),jN=(n,e,t,i)=>MY(n,e,t,i).setInstanced(!0);X("toAttribute",n=>H0(n.value));ue("BufferAttributeNode",x3);class S3 extends tt{constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null,this.instanceColorNode=null}setup(){let e=this.instanceMatrixNode;const t=this.instanceMesh;if(e===null){const l=t.instanceMatrix,c=new BX(l.array,16,1),u=l.usage===jx?jN:WN,h=[u(c,"vec4",16,0),u(c,"vec4",16,4),u(c,"vec4",16,8),u(c,"vec4",16,12)];e=Ou(...h),this.instanceMatrixNode=e}const i=t.instanceColor;if(i&&this.instanceColorNode===null){const l=new TX(i.array,3),c=i.usage===jx?jN:WN;this.instanceColorNode=B(c(l,"vec3",3,0))}const s=e.mul(xi).xyz,r=Dr(e[0].xyz,e[1].xyz,e[2].xyz),o=Ur.div(B(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2]))),a=r.mul(o).xyz;xi.assign(s),Ur.assign(a),this.instanceColorNode!==null&&zr("vec3","vInstanceColor").assign(this.instanceColorNode)}}const wY=J(S3);ue("InstanceNode",S3);const T3=se((n,e)=>(e.geometry.hasAttribute("tangent")===!1&&e.geometry.computeTangents(),pi("tangent","vec4")))(),FT=T3.xyz.toVar("tangentLocal"),M3=Wn(fc.mul(Ue(FT,0)).xyz,"v_tangentView").normalize().toVar("tangentView");class w3 extends tt{constructor(e){super("void"),this.batchMesh=e,this.instanceColorNode=null,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(this.batchingIdNode=pi("batchId"));const t=this.batchMesh._matricesTexture,i=DT(Ul(t),0),s=L(O(this.batchingIdNode)).mul(4).toVar(),r=O(s.mod(i)),o=O(s).div(O(i)),a=Ou(Ul(t,Wl(r,o)),Ul(t,Wl(r.add(1),o)),Ul(t,Wl(r.add(2),o)),Ul(t,Wl(r.add(3),o))),l=Dr(a[0].xyz,a[1].xyz,a[2].xyz);xi.assign(a.mul(xi));const c=Ur.div(B(l[0].dot(l[0]),l[1].dot(l[1]),l[2].dot(l[2]))),u=l.mul(c).xyz;Ur.assign(u),e.hasGeometryAttribute("tangent")&&FT.mulAssign(l)}}const EY=J(w3);ue("batch",w3);class E3 extends tt{constructor(e,t=!1){super("void"),this.skinnedMesh=e,this.useReference=t,this.updateType=sn.OBJECT,this.skinIndexNode=pi("skinIndex","uvec4"),this.skinWeightNode=pi("skinWeight","vec4");let i,s,r;t?(i=Or("bindMatrix","mat4"),s=Or("bindMatrixInverse","mat4"),r=Xq("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(i=Lt(e.bindMatrix,"mat4"),s=Lt(e.bindMatrixInverse,"mat4"),r=UT(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=i,this.bindMatrixInverseNode=s,this.boneMatricesNode=r}setup(e){const{skinIndexNode:t,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:r,boneMatricesNode:o}=this,a=o.element(t.x),l=o.element(t.y),c=o.element(t.z),u=o.element(t.w),h=s.mul(xi),d=Bs(a.mul(i.x).mul(h),l.mul(i.y).mul(h),c.mul(i.z).mul(h),u.mul(i.w).mul(h)),f=r.mul(d).xyz;let g=Bs(i.x.mul(a),i.y.mul(l),i.z.mul(c),i.w.mul(u));g=r.mul(g).mul(s);const m=g.transformDirection(Ur).xyz;xi.assign(f),Ur.assign(m),e.hasGeometryAttribute("tangent")&&FT.assign(m)}generate(e,t){if(t!=="void")return xi.build(e,t)}update(e){(this.useReference?e.object:this.skinnedMesh).skeleton.update()}}const AY=n=>Ne(new E3(n,!0));ue("SkinningNode",E3);class A3 extends tt{constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const i={};for(let s=0,r=this.params.length-1;s<r;s++){const o=this.params[s],a=o.isNode!==!0&&o.name||this.getVarName(s),l=o.isNode!==!0&&o.type||"int";i[a]=z0(a,l)}return t.returnsNode=this.params[this.params.length-1](i,e.addStack(),e),t.stackNode=e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),i={tempWrite:!1},s=this.params,r=t.stackNode;for(let l=0,c=s.length-1;l<c;l++){const u=s[l];let h=null,d=null,f=null,g=null,m=null,v=null;u.isNode?(g="int",f=this.getVarName(l),h="0",d=u.build(e,g),m="<"):(g=u.type||"int",f=u.name||this.getVarName(l),h=u.start,d=u.end,m=u.condition,v=u.update,typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(e,g)),typeof d=="number"?d=d.toString():d&&d.isNode&&(d=d.build(e,g)),h!==void 0&&d===void 0?(h=h+" - 1",d="0",m=">="):d!==void 0&&h===void 0&&(h="0",m="<"),m===void 0&&(Number(h)>Number(d)?m=">=":m="<"));const p={start:h,end:d,condition:m},y=p.start,_=p.end;let x="",E="",w="";v||(g==="int"||g==="uint"?m.includes("<")?v="++":v="--":m.includes("<")?v="+= 1.":v="-= 1."),x+=e.getVar(g,f)+" = "+y,E+=f+" "+m+" "+_,w+=f+" "+v;const T=`for ( ${x}; ${E}; ${w} )`;e.addFlowCode((l===0?`
`:"")+e.tab+T+` {

`).addFlowTab()}const o=zo(r,i).build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+o);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const Kt=(...n)=>Ne(new A3(Du(n,"int"))).append(),N3=()=>z0("break").append();X("loop",(n,...e)=>VI(n,Kt(...e)));ue("LoopNode",A3);const V_=new WeakMap,Ms=new Dt,XN=se(({bufferMap:n,influence:e,stride:t,width:i,depth:s,offset:r})=>{const o=O(V$).mul(t).add(r),a=o.div(i),l=o.sub(a.mul(i));return Ul(n,Wl(l,a)).depth(s).mul(e)});function NY(n){const e=n.morphAttributes.position!==void 0,t=n.morphAttributes.normal!==void 0,i=n.morphAttributes.color!==void 0,s=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,r=s!==void 0?s.length:0;let o=V_.get(n);if(o===void 0||o.count!==r){let y=function(){v.dispose(),V_.delete(n),n.removeEventListener("dispose",y)};var a=y;o!==void 0&&o.texture.dispose();const l=n.morphAttributes.position||[],c=n.morphAttributes.normal||[],u=n.morphAttributes.color||[];let h=0;e===!0&&(h=1),t===!0&&(h=2),i===!0&&(h=3);let d=n.attributes.position.count*h,f=1;const g=4096;d>g&&(f=Math.ceil(d/g),d=g);const m=new Float32Array(d*f*4*r),v=new pT(m,d,f,r);v.type=Po,v.needsUpdate=!0;const p=h*4;for(let _=0;_<r;_++){const x=l[_],E=c[_],w=u[_],T=d*f*4*_;for(let A=0;A<x.count;A++){const M=A*p;e===!0&&(Ms.fromBufferAttribute(x,A),m[T+M+0]=Ms.x,m[T+M+1]=Ms.y,m[T+M+2]=Ms.z,m[T+M+3]=0),t===!0&&(Ms.fromBufferAttribute(E,A),m[T+M+4]=Ms.x,m[T+M+5]=Ms.y,m[T+M+6]=Ms.z,m[T+M+7]=0),i===!0&&(Ms.fromBufferAttribute(w,A),m[T+M+8]=Ms.x,m[T+M+9]=Ms.y,m[T+M+10]=Ms.z,m[T+M+11]=w.itemSize===4?Ms.w:1)}}o={count:r,texture:v,stride:h,size:new Ye(d,f)},V_.set(n,o),n.addEventListener("dispose",y)}return o}class C3 extends tt{constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Lt(1),this.updateType=sn.OBJECT}setup(e){const{geometry:t}=e,i=t.morphAttributes.position!==void 0,s=t.morphAttributes.normal!==void 0,r=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=r!==void 0?r.length:0,{texture:a,stride:l,size:c}=NY(t);i===!0&&xi.mulAssign(this.morphBaseInfluence),s===!0&&Ur.mulAssign(this.morphBaseInfluence);const u=O(c.width);Kt(o,({i:h})=>{const d=L(0).toVar();this.mesh.isInstancedMesh===!0&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?d.assign(Ul(this.mesh.morphTexture,Wl(O(h).add(1),O(zI))).r):d.assign(Or("morphTargetInfluences","float").element(h).toVar()),i===!0&&xi.addAssign(XN({bufferMap:a,influence:d,stride:l,width:u,depth:h,offset:O(0)})),s===!0&&Ur.addAssign(XN({bufferMap:a,influence:d,stride:l,width:u,depth:h,offset:O(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,i)=>t+i,0)}}const CY=J(C3);ue("MorphNode",C3);const bY=Tn.negate().reflect(Un),RY=bY.transformDirection(Nh).toVar("reflectVector");class b3 extends wc{constructor(e,t=null,i=null){super(e,t,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){return RY}setUpdateMatrix(){}setupUV(e,t){const i=this.value;return e.renderer.coordinateSystem===ch||!i.isRenderTargetTexture?B(t.x.negate(),t.yz):t}generateUV(e,t){return t.build(e,"vec3")}}const R3=J(b3);X("cubeTexture",R3);ue("CubeTextureNode",b3);class qf extends tt{constructor(){super("vec3")}generate(){console.warn("Abstract function.")}}ue("LightingNode",qf);let Kh=null;class Ec extends qf{constructor(e=null){super(),this.updateType=sn.FRAME,this.light=e,this.rtt=null,this.shadowNode=null,this.shadowMaskNode=null,this.color=new st,this._defaultColorNode=Lt(this.color),this.colorNode=this._defaultColorNode,this.isAnalyticLightNode=!0}getCacheKey(){return super.getCacheKey()+"-"+(this.light.id+"-"+(this.light.castShadow?"1":"0"))}getHash(){return this.light.uuid}setupShadow(e){const{object:t}=e;if(t.receiveShadow===!1)return;let i=this.shadowNode;if(i===null){Kh===null&&(Kh=e.createNodeMaterial(),Kh.fragmentNode=Ue(0,0,0,1),Kh.isShadowNodeMaterial=!0);const s=this.light.shadow,r=e.createRenderTarget(s.mapSize.width,s.mapSize.height),o=new jf;o.minFilter=Oi,o.magFilter=Oi,o.image.width=s.mapSize.width,o.image.height=s.mapSize.height,o.compareFunction=tI,r.depthTexture=o,s.camera.updateProjectionMatrix();const a=Or("bias","float",s),l=Or("normalBias","float",s),c=t.material.shadowPositionNode||sS;let u=Lt(s.matrix).mul(c.add(Yq.mul(l)));u=u.xyz.div(u.w);const h=u.x.greaterThanEqual(0).and(u.x.lessThanEqual(1)).and(u.y.greaterThanEqual(0)).and(u.y.lessThanEqual(1)).and(u.z.lessThanEqual(1));let d=u.z.add(a);e.renderer.coordinateSystem===ch&&(d=d.mul(2).sub(1)),u=B(u.x,u.y.oneMinus(),d),i=((v,p,y)=>Fs(v,p).compare(y))(o,u.xy,u.z);const g=Fs(r.texture,u),m=h.mix(1,i.mix(g.a.mix(1,g),1));this.rtt=r,this.colorNode=this.colorNode.mul(m),this.shadowNode=i,this.shadowMaskNode=m,this.updateBeforeType=sn.RENDER}}setup(e){this.light.castShadow?this.setupShadow(e):this.shadowNode!==null&&this.disposeShadow()}updateShadow(e){const{rtt:t,light:i}=this,{renderer:s,scene:r,camera:o}=e,a=r.overrideMaterial;r.overrideMaterial=Kh,t.setSize(i.shadow.mapSize.width,i.shadow.mapSize.height),i.shadow.updateMatrices(i),i.shadow.camera.layers.mask=o.layers.mask;const l=s.toneMapping,c=s.getRenderTarget(),u=s.getRenderObjectFunction();s.setRenderObjectFunction((h,...d)=>{h.castShadow===!0&&s.renderObject(h,...d)}),s.setRenderTarget(t),s.toneMapping=Us,s.render(r,i.shadow.camera),s.setRenderTarget(c),s.setRenderObjectFunction(u),s.toneMapping=l,r.overrideMaterial=a}disposeShadow(){this.rtt.dispose(),this.shadowNode=null,this.shadowMaskNode=null,this.rtt=null,this.colorNode=this._defaultColorNode}updateBefore(e){const{light:t}=this;t.castShadow&&this.updateShadow(e)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}ue("AnalyticLightNode",Ec);const Wg=new WeakMap,PY=n=>n.sort((e,t)=>e.id-t.id);class LY extends tt{constructor(e=[]){super("vec3"),this.totalDiffuseNode=B().temp("totalDiffuse"),this.totalSpecularNode=B().temp("totalSpecular"),this.outgoingLightNode=B().temp("outgoingLight"),this.lightNodes=e,this._hash=null}get hasLight(){return this.lightNodes.length>0}getHash(){if(this._hash===null){const e=[];for(const t of this.lightNodes)e.push(t.getHash());this._hash="lights-"+e.join(",")}return this._hash}analyze(e){const t=e.getDataFromNode(this);for(const i of t.nodes)i.build(e)}setup(e){const t=e.context,i=t.lightingModel;let s=this.outgoingLightNode;if(i){const{lightNodes:r,totalDiffuseNode:o,totalSpecularNode:a}=this;t.outgoingLight=s;const l=e.addStack(),c=e.getDataFromNode(this);c.nodes=l.nodes,i.start(t,l,e);for(const p of r)p.build(e);i.indirectDiffuse(t,l,e),i.indirectSpecular(t,l,e),i.ambientOcclusion(t,l,e);const{backdrop:u,backdropAlpha:h}=t,{directDiffuse:d,directSpecular:f,indirectDiffuse:g,indirectSpecular:m}=t.reflectedLight;let v=d.add(g);u!==null&&(h!==null?v=B(h.mix(v,u)):v=B(u),t.material.transparent=!0),o.assign(v),a.assign(f.add(m)),s.assign(o.add(a)),i.finish(t,l,e),s=s.bypass(e.removeStack())}return s}_getLightNodeById(e){for(const t of this.lightNodes)if(t.isAnalyticLightNode&&t.light.id===e)return t;return null}fromLights(e=[]){const t=[];e=PY(e);for(const i of e){let s=this._getLightNodeById(i.id);if(s===null){const r=i.constructor,o=Wg.has(r)?Wg.get(r):Ec;s=Ne(new o(i))}t.push(s)}return this.lightNodes=t,this._hash=null,this}}const IY=J(LY);function Ch(n,e){if(Wg.has(n)){console.warn(`Redefinition of light node ${e.type}`);return}if(typeof n!="function")throw new Error(`Light ${n.name} is not a class`);if(typeof e!="function"||!e.type)throw new Error(`Light node ${e.type} is not a class`);Wg.set(n,e)}class P3 extends qf{constructor(e=null){super(),this.aoNode=e}setup(e){const i=this.aoNode.x.sub(1).mul(1).add(1);e.context.ambientOcclusion.mulAssign(i)}}ue("AONode",P3);class L3 extends bT{constructor(e,t=null,i=null,s=null){super(e),this.lightingModel=t,this.backdropNode=i,this.backdropAlphaNode=s,this._context=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,i=B().temp("directDiffuse"),s=B().temp("directSpecular"),r=B().temp("indirectDiffuse"),o=B().temp("indirectSpecular"),a={directDiffuse:i,directSpecular:s,indirectDiffuse:r,indirectSpecular:o};return{radiance:B().temp("radiance"),irradiance:B().temp("irradiance"),iblIrradiance:B().temp("iblIrradiance"),ambientOcclusion:L(1).temp("ambientOcclusion"),reflectedLight:a,backdrop:e,backdropAlpha:t}}setup(e){return this.context=this._context||(this._context=this.getContext()),this.context.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const I3=J(L3);X("lightingContext",I3);ue("LightingContextNode",L3);const DY=n=>n.mul(T3.w).xyz,OY=Wn(DY(el.cross(M3)),"v_bitangentView").normalize().toVar("bitangentView"),_u=Dr(M3,OY,el);Tn.mul(_u);const UY=(()=>{let n=Uu.cross(Tn);return n=n.cross(Uu).normalize(),n=ei(n,Un,Il.mul(Ea.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})();class VT extends tt{constructor(e,t,i=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=i}getNodeType(e){const t=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(t))return i}return t}generate(e,t){const i=this.getNodeType(e),s={tempWrite:!1},r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{ifNode:o,elseNode:a}=this,l=t!=="void",c=l?Sn(i).build(e):"";r.nodeProperty=c;const u=zo(this.condNode).build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${u} ) {

`).addFlowTab();let h=zo(o,s).build(e,i);if(h&&(l?h=c+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+"}"),a!==null){e.addFlowCode(` else {

`).addFlowTab();let d=zo(a,s).build(e,i);d&&(l?d=c+" = "+d+";":d="return "+d+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+d+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,i,t)}}const Is=J(VT);X("cond",Is);ue("CondNode",VT);const $N=L(1),rS=L(-2),im=L(.8),k_=L(-1),sm=L(.4),z_=L(2),rm=L(.305),B_=L(3),qN=L(.21),FY=L(4),YN=L(4),VY=L(16),kY=se(([n])=>{const e=B(Hn(n)).toVar(),t=L(-1).toVar();return St(e.x.greaterThan(e.z),()=>{St(e.x.greaterThan(e.y),()=>{t.assign(Is(n.x.greaterThan(0),0,3))}).else(()=>{t.assign(Is(n.y.greaterThan(0),1,4))})}).else(()=>{St(e.z.greaterThan(e.y),()=>{t.assign(Is(n.z.greaterThan(0),2,5))}).else(()=>{t.assign(Is(n.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),zY=se(([n,e])=>{const t=Ve().toVar();return St(e.equal(0),()=>{t.assign(Ve(n.z,n.y).div(Hn(n.x)))}).elseif(e.equal(1),()=>{t.assign(Ve(n.x.negate(),n.z.negate()).div(Hn(n.y)))}).elseif(e.equal(2),()=>{t.assign(Ve(n.x.negate(),n.y).div(Hn(n.z)))}).elseif(e.equal(3),()=>{t.assign(Ve(n.z.negate(),n.y).div(Hn(n.x)))}).elseif(e.equal(4),()=>{t.assign(Ve(n.x.negate(),n.z).div(Hn(n.y)))}).else(()=>{t.assign(Ve(n.x,n.y).div(Hn(n.z)))}),Nt(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),BY=se(([n])=>{const e=L(0).toVar();return St(n.greaterThanEqual(im),()=>{e.assign($N.sub(n).mul(k_.sub(rS)).div($N.sub(im)).add(rS))}).elseif(n.greaterThanEqual(sm),()=>{e.assign(im.sub(n).mul(z_.sub(k_)).div(im.sub(sm)).add(k_))}).elseif(n.greaterThanEqual(rm),()=>{e.assign(sm.sub(n).mul(B_.sub(z_)).div(sm.sub(rm)).add(z_))}).elseif(n.greaterThanEqual(qN),()=>{e.assign(rm.sub(n).mul(FY.sub(B_)).div(rm.sub(qN)).add(B_))}).else(()=>{e.assign(L(-2).mul(V0(Nt(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]});se(([n,e])=>{const t=n.toVar();t.assign(Nt(2,t).sub(1));const i=B(t,1).toVar();return St(e.equal(0),()=>{i.assign(i.zyx)}).elseif(e.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).elseif(e.equal(2),()=>{i.x.mulAssign(-1)}).elseif(e.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).elseif(e.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).elseif(e.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]});const HY=se(([n,e,t,i,s,r])=>{const o=L(t),a=B(e),l=fh(BY(o),rS,r),c=k0(l),u=wh(l),h=B(oS(n,a,u,i,s,r)).toVar();return St(c.notEqual(0),()=>{const d=B(oS(n,a,u.add(1),i,s,r)).toVar();h.assign(ei(h,d,c))}),h}),oS=se(([n,e,t,i,s,r])=>{const o=L(t).toVar(),a=B(e),l=L(kY(a)).toVar(),c=L(gi(YN.sub(o),0)).toVar();o.assign(gi(o,YN));const u=L(eS(o)).toVar(),h=Ve(zY(a,l).mul(u.sub(2)).add(1)).toVar();return St(l.greaterThan(2),()=>{h.y.addAssign(u),l.subAssign(3)}),h.x.addAssign(l.mul(u)),h.x.addAssign(c.mul(Nt(3,VY))),h.y.addAssign(Nt(4,eS(r).sub(u))),h.x.mulAssign(i),h.y.mulAssign(s),n.uv(h).grad(Ve(),Ve())}),H_=se(({envMap:n,mipInt:e,outputDirection:t,theta:i,axis:s,CUBEUV_TEXEL_WIDTH:r,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=ha(i),c=t.mul(l).add(s.cross(t).mul(wo(i))).add(s.mul(s.dot(t).mul(l.oneMinus())));return oS(n,c,e,r,o,a)});se(({n,latitudinal:e,poleAxis:t,outputDirection:i,weights:s,samples:r,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})=>{const d=B(Is(e,t,i3(t,i))).toVar();St(QI(d.equals(B(0))),()=>{d.assign(B(i.z,0,i.x.negate()))}),d.assign(Sf(d));const f=B().toVar();return f.addAssign(s.element(O(0)).mul(H_({theta:0,axis:d,outputDirection:i,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),Kt({start:O(1),end:n},({i:g})=>{St(g.greaterThanEqual(r),()=>{N3()});const m=L(o.mul(L(g))).toVar();f.addAssign(s.element(g).mul(H_({theta:m.mul(-1),axis:d,outputDirection:i,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),f.addAssign(s.element(g).mul(H_({theta:m,axis:d,outputDirection:i,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})))}),Ue(f,1)});let jg=null;const KN=new WeakMap;function GY(n){const e=Math.log2(n)-2,t=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function WY(n){let e=KN.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){if(n.isCubeTexture){if(n.source.data.some(i=>i===void 0))throw new Error("PMREMNode: Undefined texture in CubeTexture. Use onLoad callback or async loader");e=jg.fromCubemap(n,e)}else{if(n.image===void 0)throw new Error("PMREMNode: Undefined image in Texture. Use onLoad callback or async loader");e=jg.fromEquirectangular(n,e)}e.pmremVersion=n.pmremVersion,KN.set(n,e)}return e.texture}class D3 extends Qt{constructor(e,t=null,i=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=i,this._generator=null,this._texture=Fs(null),this._width=Lt(0),this._height=Lt(0),this._maxMip=Lt(0),this.updateBeforeType=sn.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=GY(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(){let e=this._pmrem;const t=e?e.pmremVersion:-1,i=this._value;t!==i.pmremVersion&&(i.isPMREMTexture===!0?e=i:e=WY(i),this._pmrem=e,this.updateFromTexture(e))}setup(e){jg===null&&(jg=e.createPMREMGenerator()),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this));const i=this.value;e.renderer.coordinateSystem===Ar&&i.isPMREMTexture!==!0&&i.isRenderTargetTexture===!0&&(t=B(t.x.negate(),t.yz));let s=this.levelNode;return s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),HY(this._texture,t,s,this._width,this._height,this._maxMip)}}const jY=J(D3);ue("PMREMNode",D3);const ZN=new WeakMap;class O3 extends qf{constructor(e=null){super(),this.envNode=e}setup(e){let t=this.envNode;if(t.isTextureNode){let d=ZN.get(t.value);d===void 0&&(d=jY(t.value),ZN.set(t.value,d)),t=d}const{material:i}=e,r=i.envMap?Or("envMapIntensity","float",e.material):Or("environmentIntensity","float",e.scene),a=i.useAnisotropy===!0||i.anisotropy>0?UY:Un,l=zo(t,QN(Ea,a)).mul(r),c=zo(t,XY(m3)).mul(Math.PI).mul(r),u=Fg(l);e.context.radiance.addAssign(u),e.context.iblIrradiance.addAssign(c);const h=e.context.lightingModel.clearcoatRadiance;if(h){const d=zo(t,QN(zg,vu)).mul(r),f=Fg(d);h.addAssign(f)}}}const QN=(n,e)=>{let t=null;return{getUV:()=>(t===null&&(t=Tn.negate().reflect(e),t=n.mul(n).mix(t,e).normalize(),t=t.transformDirection(Nh)),t),getTextureLevel:()=>n}},XY=n=>({getUV:()=>n,getTextureLevel:()=>L(1)});ue("EnvironmentNode",O3);class U3 extends qf{constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}ue("IrradianceNode",U3);let G_,W_;class Ot extends tt{constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===Ot.VIEWPORT?"vec4":this.scope===Ot.COORDINATE?"vec3":"vec2"}getUpdateType(){let e=sn.NONE;return(this.scope===Ot.RESOLUTION||this.scope===Ot.VIEWPORT)&&(e=sn.RENDER),this.updateType=e,e}update({renderer:e}){this.scope===Ot.VIEWPORT?e.getViewport(W_):e.getDrawingBufferSize(G_)}setup(){const e=this.scope;let t=null;if(e===Ot.RESOLUTION)t=Lt(G_||(G_=new Ye));else if(e===Ot.VIEWPORT)t=Lt(W_||(W_=new Dt));else{t=$Y.div(aS);let i=t.x,s=t.y;/bottom/i.test(e)&&(s=s.oneMinus()),/right/i.test(e)&&(i=i.oneMinus()),t=Ve(i,s)}return t}generate(e){if(this.scope===Ot.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const i=e.getNodeProperties(aS).outputNode.build(e);t=`${e.getType("vec3")}( ${t}.x, ${i}.y - ${t}.y, ${t}.z )`}return t}return super.generate(e)}}Ot.COORDINATE="coordinate";Ot.RESOLUTION="resolution";Ot.VIEWPORT="viewport";Ot.TOP_LEFT="topLeft";Ot.BOTTOM_LEFT="bottomLeft";Ot.TOP_RIGHT="topRight";Ot.BOTTOM_RIGHT="bottomRight";const $Y=Se(Ot,Ot.COORDINATE),aS=Se(Ot,Ot.RESOLUTION),ku=Se(Ot,Ot.VIEWPORT),wf=Se(Ot,Ot.TOP_LEFT);Se(Ot,Ot.BOTTOM_LEFT);Se(Ot,Ot.TOP_RIGHT);Se(Ot,Ot.BOTTOM_RIGHT);ue("ViewportNode",Ot);const Zh=new Ye;class Yf extends wc{constructor(e=wf,t=null,i=null){i===null&&(i=new TI,i.minFilter=Ma),super(i,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=sn.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(Zh);const i=this.value;(i.image.width!==Zh.width||i.image.height!==Zh.height)&&(i.image.width=Zh.width,i.image.height=Zh.height,i.needsUpdate=!0);const s=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(i),i.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const qY=J(Yf),F3=J(Yf,null,null,{generateMipmaps:!0});X("viewportTexture",qY);X("viewportMipTexture",F3);ue("ViewportTextureNode",Yf);let j_=null;class V3 extends Yf{constructor(e=wf,t=null){j_===null&&(j_=new jf),super(e,t,j_)}}const k3=J(V3);X("viewportDepthTexture",k3);ue("ViewportDepthTextureNode",V3);class vi extends tt{constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===vi.DEPTH_PIXEL?e.getFragDepth():super.generate(e)}setup(){const{scope:e}=this;let t=null;if(e===vi.DEPTH)t=lS(Ls.z,O_,U_);else if(e===vi.DEPTH_TEXTURE){const i=this.valueNode||k3(),s=z3(i,O_,U_);t=lS(s,O_,U_)}else e===vi.DEPTH_PIXEL&&this.valueNode!==null&&(t=B3().assign(this.valueNode));return t}}const lS=(n,e,t)=>n.add(e).div(e.sub(t)),z3=(n,e,t)=>e.mul(t).div(t.sub(e).mul(n).sub(t));vi.DEPTH="depth";vi.DEPTH_TEXTURE="depthTexture";vi.DEPTH_PIXEL="depthPixel";const B3=J(vi,vi.DEPTH_PIXEL);Se(vi,vi.DEPTH);J(vi,vi.DEPTH_TEXTURE);const H3=Se(vi,vi.DEPTH_PIXEL);H3.assign=n=>B3(n);ue("ViewportDepthNode",vi);class tl extends tt{constructor(e=tl.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{localClipIntersection:i,localClippingCount:s,globalClippingCount:r}=t,o=r+s,a=i?o-s:o;return this.scope===tl.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(t.planes,o,a):this.setupDefault(t.planes,o,a)}setupAlphaToCoverage(e,t,i){return se(()=>{const s=tS(e),r=Sn("float","distanceToPlane"),o=Sn("float","distanceToGradient"),a=Sn("float","clipOpacity");a.assign(1);let l;if(Kt(i,({i:c})=>{l=s.element(c),r.assign(Ls.dot(l.xyz).negate().add(l.w)),o.assign(r.fwidth().div(2)),a.mulAssign(ao(o.negate(),o,r)),a.equal(0).discard()}),i<t){const c=Sn("float","unionclipOpacity");c.assign(1),Kt({start:i,end:t},({i:u})=>{l=s.element(u),r.assign(Ls.dot(l.xyz).negate().add(l.w)),o.assign(r.fwidth().div(2)),c.mulAssign(ao(o.negate(),o,r).oneMinus())}),a.mulAssign(c.oneMinus())}tn.a.mulAssign(a),tn.a.equal(0).discard()})()}setupDefault(e,t,i){return se(()=>{const s=tS(e);let r;if(Kt(i,({i:o})=>{r=s.element(o),Ls.dot(r.xyz).greaterThan(r.w).discard()}),i<t){const o=Sn("bool","clipped");o.assign(!0),Kt({start:i,end:t},({i:a})=>{r=s.element(a),o.assign(Ls.dot(r.xyz).greaterThan(r.w).and(o))}),o.discard()}})()}}tl.ALPHA_TO_COVERAGE="alphaToCoverage";tl.DEFAULT="default";const YY=()=>Ne(new tl),KY=()=>Ne(new tl(tl.ALPHA_TO_COVERAGE));class G3 extends tt{constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:i}=e;return t.coordinateSystem===Ar&&i.side===ts?"false":e.getFrontFacing()}}const ZY=Se(G3),Xg=L(ZY).mul(2).sub(1);ue("FrontFacingNode",G3);const cS=new Map;class Bi extends zi{constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.fog=!0,this.lights=!0,this.normals=!0,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.depthNode=null,this.shadowNode=null,this.shadowPositionNode=null,this.outputNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+AI(this)}build(e){this.setup(e)}setup(e){e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();let t;const i=this.setupClipping(e);if(this.depthWrite===!0&&this.setupDepth(e),this.fragmentNode===null){this.normals===!0&&this.setupNormal(e),this.setupDiffuseColor(e),this.setupVariants(e);const s=this.setupLighting(e);i!==null&&e.stack.add(i);const r=Ue(s,tn.a).max(0);t=this.setupOutput(e,r),k$.assign(t),this.outputNode!==null&&(t=this.outputNode)}else{let s=this.fragmentNode;s.isOutputStructNode!==!0&&(s=Ue(s)),t=this.setupOutput(e,s)}e.stack.outputNode=t,e.addFlow("fragment",e.removeStack())}setupClipping(e){if(e.clippingContext===null)return null;const{globalClippingCount:t,localClippingCount:i}=e.clippingContext;let s=null;return(t||i)&&(this.alphaToCoverage?s=KY():e.stack.add(YY())),s}setupDepth(e){const{renderer:t}=e;let i=this.depthNode;i===null&&t.logarithmicDepthBuffer===!0&&(i=GN().w.add(1).log2().mul($q).mul(.5)),i!==null&&H3.assign(i).append()}setupPosition(e){const{object:t}=e,i=t.geometry;if(e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&CY(t).append(),t.isSkinnedMesh===!0&&AY(t).append(),this.displacementMap){const r=Lo("displacementMap","texture"),o=Lo("displacementScale","float"),a=Lo("displacementBias","float");xi.addAssign(Ur.normalize().mul(r.x.mul(o).add(a)))}t.isBatchedMesh&&EY(t).append(),t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&e.isAvailable("instance")===!0&&wY(t).append(),this.positionNode!==null&&xi.assign(this.positionNode);const s=GN();return e.context.vertex=e.removeStack(),e.context.mvp=s,s}setupDiffuseColor({object:e,geometry:t}){let i=this.colorNode?Ue(this.colorNode):Mf;this.vertexColors===!0&&t.hasAttribute("color")&&(i=Ue(i.xyz.mul(pi("color","vec3")),i.a)),e.instanceColor&&(i=zr("vec3","vInstanceColor").mul(i)),tn.assign(i);const s=this.opacityNode?L(this.opacityNode):g3;if(tn.a.assign(tn.a.mul(s)),this.alphaTestNode!==null||this.alphaTest>0){const r=this.alphaTestNode!==null?L(this.alphaTestNode):Kq;tn.a.lessThanEqual(r).discard()}}setupVariants(){}setupNormal(){if(this.flatShading===!0){const e=Ls.dFdx().cross(Ls.dFdy()).normalize();Un.assign(e.mul(Xg))}else{const e=this.normalNode?B(this.normalNode):sY;Un.assign(e.mul(Xg))}}getEnvNode(e){let t=null;return this.envNode?t=this.envNode:this.envMap?t=this.envMap.isCubeTexture?R3(this.envMap):Fs(this.envMap):e.environmentNode&&(t=e.environmentNode),t}setupLights(e){const t=this.getEnvNode(e),i=[];if(t&&i.push(new O3(t)),e.material.lightMap&&i.push(new U3(Lo("lightMap","texture"))),this.aoNode!==null||e.material.aoMap){const r=this.aoNode!==null?this.aoNode:Fs(e.material.aoMap);i.push(new P3(r))}let s=this.lightsNode||e.lightsNode;return i.length>0&&(s=IY([...s.lightNodes,...i])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:i,backdropAlphaNode:s,emissiveNode:r}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=tn.rgb;if(a&&a.hasLight!==!1){const c=this.setupLightingModel(e);l=I3(a,c,i,s)}else i!==null&&(l=B(s!==null?ei(l,i,s):i));return(r&&r.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(l=l.add(B(r||Qq))),l}setupOutput(e,t){const i=e.fogNode;return i&&(t=Ue(i.mix(t.rgb,i.colorNode),t.a)),t}setDefaultValues(e){for(const i in e){const s=e[i];this[i]===void 0&&(this[i]=s,s&&s.clone&&(this[i]=s.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&t[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,t[i])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const i=zi.prototype.toJSON.call(this,e),s=Ug(this);i.inputNodes={};for(const{property:o,childNode:a}of s)i.inputNodes[o]=a.toJSON(e).uuid;function r(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(t){const o=r(e.textures),a=r(e.images),l=r(e.nodes);o.length>0&&(i.textures=o),a.length>0&&(i.images=a),l.length>0&&(i.nodes=l)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.depthNode=e.depthNode,this.shadowNode=e.shadowNode,this.shadowPositionNode=e.shadowPositionNode,this.outputNode=e.outputNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}static fromMaterial(e){if(e.isNodeMaterial===!0)return e;const t=e.type.replace("Material","NodeMaterial"),i=QY(t);if(i===void 0)throw new Error(`NodeMaterial: Material "${e.type}" is not compatible.`);for(const s in e)i[s]=e[s];return i}}function di(n,e){if(typeof e!="function"||!n)throw new Error(`Node material ${n} is not a class`);if(cS.has(n)){console.warn(`Redefinition of node material ${n}`);return}cS.set(n,e),e.type=n}function QY(n){const e=cS.get(n);if(e!==void 0)return new e}di("NodeMaterial",Bi);class W3 extends tt{constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}if(e,t){const i=new zd(t);return this._currentCond=Is(e,i),this.add(this._currentCond)}elseif(e,t){const i=new zd(t),s=Is(e,i);return this._currentCond.elseNode=s,this._currentCond=s,this}else(e){return this._currentCond.elseNode=new zd(e),this}build(e,...t){const i=f$();FN(this);for(const s of this.nodes)s.build(e,"void");return FN(i),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}}J(W3);ue("StackNode",W3);class j3 extends Qt{constructor(e=TY){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Ve(t,i)}}J(j3);ue("EquirectUVNode",j3);class X3 extends tt{constructor(e){super(),this.types=e,this.isStructTypeNode=!0}getMemberTypes(){return this.types}}ue("StructTypeNode",X3);class $3 extends tt{constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}setup(e){super.setup(e);const t=this.members,i=[];for(let s=0;s<t.length;s++)i.push(t[s].getNodeType(e));this.nodeType=e.getStructTypeFromNode(new X3(i)).name}generate(e,t){const i=e.getOutputStructName(),s=this.members,r=i!==""?i+".":"";for(let o=0;o<s.length;o++){const a=s[o].build(e,t);e.addLineFlowCode(`${r}m${o} = ${a}`)}return i}}J($3);ue("OutputStructNode",$3);class q3 extends tt{constructor(e){super(),this.seedNode=e}setup(){const e=this.seedNode.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}}const JY=J(q3);X("hash",JY);ue("HashNode",q3);const uS=(n,e)=>Jr(Nt(4,n.mul(Vn(1,n))),e),eK=(n,e)=>n.lessThan(.5)?uS(n.mul(2),e).div(2):Vn(1,uS(Nt(Vn(1,n),2),e).div(2)),tK=(n,e,t)=>Jr(Ja(Jr(n,e),Bs(Jr(n,e),Jr(Vn(1,n),t))),1/e),nK=(n,e)=>wo(VN.mul(e.mul(n).sub(1))).div(VN.mul(e.mul(n).sub(1)));X("parabola",uS);X("gain",eK);X("pcurve",tK);X("sinc",nK);const jr=se(([n])=>n.fract().sub(.5).abs()),Y3=se(([n])=>B(jr(n.z.add(jr(n.y.mul(1)))),jr(n.z.add(jr(n.x.mul(1)))),jr(n.y.add(jr(n.x.mul(1)))))),iK=se(([n,e,t])=>{const i=B(n).toVar(),s=L(1.4).toVar(),r=L(0).toVar(),o=B(i).toVar();return Kt({start:L(0),end:L(3),type:"float",condition:"<="},()=>{const a=B(Y3(o.mul(2))).toVar();i.addAssign(a.add(t.mul(L(.1).mul(e)))),o.mulAssign(1.8),s.mulAssign(1.5),i.mulAssign(1.2);const l=L(jr(i.z.add(jr(i.x.add(jr(i.y)))))).toVar();r.addAssign(l.div(s)),o.addAssign(.14)}),r});jr.setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]});Y3.setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]});iK.setLayout({name:"triNoise3D",type:"float",inputs:[{name:"p",type:"vec3"},{name:"spd",type:"float"},{name:"time",type:"float"}]});let X_;class K3 extends VT{constructor(e){X_=X_||z0("discard"),super(e,X_)}}const sK=J(K3),rK=n=>sK(n).append();X("discard",rK);ue("DiscardNode",K3);class Z3 extends tt{constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let i=this._candidateFnCall;if(i===null){let s=null,r=-1;for(const o of this.functionNodes){const l=o.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const c=l.inputs;if(t.length===c.length){let u=0;for(let h=0;h<t.length;h++){const d=t[h],f=c[h];d.getNodeType(e)===f.type?u++:u=0}u>r&&(s=o,r=u)}}this._candidateFnCall=i=s(...t)}return i}}const oK=J(Z3),hr=n=>(...e)=>oK(n,...e);ue("FunctionOverloadingNode",Z3);class Q3 extends Qt{constructor(){super("vec2")}setup(){const e=B(Tn.z,0,Tn.x.negate()).normalize(),t=Tn.cross(e);return Ve(e.dot(Un),t.dot(Un)).mul(.495).add(.5)}}const aK=Se(Q3);ue("MatcapUVNode",Q3);class cs extends Tc{constructor(e=cs.LOCAL,t=1,i=0){super(i),this.scope=e,this.scale=t,this.updateType=sn.FRAME}update(e){const t=this.scope,i=this.scale;t===cs.LOCAL?this.value+=e.deltaTime*i:t===cs.DELTA?this.value=e.deltaTime*i:t===cs.FRAME?this.value=e.frameId:this.value=e.time*i}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}cs.LOCAL="local";cs.GLOBAL="global";cs.DELTA="delta";cs.FRAME="frame";const lK=(n,e=0)=>Ne(new cs(cs.LOCAL,n,e));Se(cs,cs.FRAME).toUint();ue("TimerNode",cs);class Yn extends tt{constructor(e=Yn.SINE,t=lK()){super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Ne(this.timeNode);let i=null;return e===Yn.SINE?i=t.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):e===Yn.SQUARE?i=t.fract().round():e===Yn.TRIANGLE?i=t.add(.5).fract().mul(2).sub(1).abs():e===Yn.SAWTOOTH&&(i=t.fract()),i}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Yn.SINE="sine";Yn.SQUARE="square";Yn.TRIANGLE="triangle";Yn.SAWTOOTH="sawtooth";J(Yn,Yn.SINE);J(Yn,Yn.SQUARE);J(Yn,Yn.TRIANGLE);J(Yn,Yn.SAWTOOTH);ue("OscNode",Yn);class lo extends Qt{constructor(e,t){super(),this.scope=e,this.node=t}getNodeType(e){return this.node.getNodeType(e)}setup(){const{scope:e,node:t}=this;let i=null;return e===lo.DIRECTION_TO_COLOR?i=t.mul(.5).add(.5):e===lo.COLOR_TO_DIRECTION&&(i=t.mul(2).sub(1)),i}}lo.DIRECTION_TO_COLOR="directionToColor";lo.COLOR_TO_DIRECTION="colorToDirection";const J3=J(lo,lo.DIRECTION_TO_COLOR),cK=J(lo,lo.COLOR_TO_DIRECTION);X("directionToColor",J3);X("colorToDirection",cK);ue("PackingNode",lo);class kT extends tt{constructor(e,t,i,s=L(0),r=L(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=i,this.outLowNode=s,this.outHighNode=r,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:i,outLowNode:s,outHighNode:r,doClamp:o}=this;let a=e.sub(t).div(i.sub(t));return o===!0&&(a=a.clamp()),a.mul(r.sub(s)).add(s)}}const uK=J(kT,null,null,{doClamp:!1}),hK=J(kT);X("remap",uK);X("remapClamp",hK);ue("RemapNode",kT);class eD extends Qt{constructor(e,t,i=Ve(.5)){super("vec2"),this.uvNode=e,this.rotationNode=t,this.centerNode=i}setup(){const{uvNode:e,rotationNode:t,centerNode:i}=this;return e.sub(i).rotate(t).add(i)}}const dK=J(eD);X("rotateUV",dK);ue("RotateUVNode",eD);class tD extends Qt{constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:i}=this;if(this.getNodeType(e)==="vec2"){const r=t.cos(),o=t.sin();return NT(r,o,o.negate(),r).mul(i)}else{const r=t,o=Ou(Ue(1,0,0,0),Ue(0,ha(r.x),wo(r.x).negate(),0),Ue(0,wo(r.x),ha(r.x),0),Ue(0,0,0,1)),a=Ou(Ue(ha(r.y),0,wo(r.y),0),Ue(0,1,0,0),Ue(wo(r.y).negate(),0,ha(r.y),0),Ue(0,0,0,1)),l=Ou(Ue(ha(r.z),wo(r.z).negate(),0,0),Ue(wo(r.z),ha(r.z),0,0),Ue(0,0,1,0),Ue(0,0,0,1));return o.mul(a).mul(l).mul(Ue(i,1)).xyz}}}const fK=J(tD);X("rotate",fK);ue("RotateNode",tD);class nD extends tt{constructor(e,t=uo(),i=L(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=i}setup(){const{frameNode:e,uvNode:t,countNode:i}=this,{width:s,height:r}=i,o=e.mod(s.mul(r)).floor(),a=o.mod(s),l=r.sub(o.add(1).div(s).ceil()),c=i.reciprocal(),u=Ve(a,l);return t.add(u).mul(c)}}J(nD);ue("SpriteSheetUVNode",nD);class iD extends Mh{constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}setup(e){return e.isAvailable("storageBuffer")===!1&&!this.node.instanceIndex&&this.node.bufferObject===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let i;const s=e.context.assign;if(e.isAvailable("storageBuffer")===!1){const{node:r}=this;!r.instanceIndex&&this.node.bufferObject===!0&&s!==!0?i=e.generatePBO(this):i=r.build(e)}else i=super.generate(e);if(s!==!0){const r=this.getNodeType(e);i=e.format(i,r,t)}return i}}const sD=J(iD);X("storageElement",sD);ue("StorageArrayElementNode",iD);class rD extends tt{constructor(e,t=null,i=null,s=L(1),r=xi,o=Ur){super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=i,this.scaleNode=s,this.positionNode=r,this.normalNode=o}setup(){const{textureXNode:e,textureYNode:t,textureZNode:i,scaleNode:s,positionNode:r,normalNode:o}=this;let a=o.abs().normalize();a=a.div(a.dot(B(1)));const l=r.yz.mul(s),c=r.zx.mul(s),u=r.xy.mul(s),h=e.value,d=t!==null?t.value:h,f=i!==null?i.value:h,g=Fs(h,l).mul(a.x),m=Fs(d,c).mul(a.y),v=Fs(f,u).mul(a.z);return Bs(g,m,v)}}const pK=J(rD),mK=(...n)=>pK(...n);X("triplanarTexture",mK);ue("TriplanarTexturesNode",rD);new ua;new $;new $;new $;new un;new $(0,0,-1);new Dt;new $;new $;new Dt;new Ye;new Qa;Ve(wf.x.oneMinus(),wf.y);class gK extends CT{constructor(e=0){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),i=e.hasGeometryAttribute(t);let s;return i===!0?s=super.generate(e):s=e.generateConst(this.nodeType,new Dt(1,1,1,1)),s}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}ue("VertexColorNode",gK);class oD extends Ah{constructor(e,t,i=null){super(e,t,i),this.renderer=i}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const vK=(n,e,t)=>Ne(new oD(n,e,t));ue("RendererReferenceNode",oD);const G0=1/6,aD=n=>Nt(G0,Nt(n,Nt(n,n.negate().add(3)).sub(3)).add(1)),hS=n=>Nt(G0,Nt(n,Nt(n,Nt(3,n).sub(6))).add(4)),lD=n=>Nt(G0,Nt(n,Nt(n,Nt(-3,n).add(3)).add(3)).add(1)),dS=n=>Nt(G0,Jr(n,3)),JN=n=>aD(n).add(hS(n)),eC=n=>lD(n).add(dS(n)),tC=n=>Bs(-1,hS(n).div(aD(n).add(hS(n)))),nC=n=>Bs(1,dS(n).div(lD(n).add(dS(n)))),iC=(n,e,t)=>{const i=n.uvNode,s=Nt(i,e.zw).add(.5),r=wh(s),o=k0(s),a=JN(o.x),l=eC(o.x),c=tC(o.x),u=nC(o.x),h=tC(o.y),d=nC(o.y),f=Ve(r.x.add(c),r.y.add(h)).sub(.5).mul(e.xy),g=Ve(r.x.add(u),r.y.add(h)).sub(.5).mul(e.xy),m=Ve(r.x.add(c),r.y.add(d)).sub(.5).mul(e.xy),v=Ve(r.x.add(u),r.y.add(d)).sub(.5).mul(e.xy),p=JN(o.y).mul(Bs(a.mul(n.uv(f).level(t)),l.mul(n.uv(g).level(t)))),y=eC(o.y).mul(Bs(a.mul(n.uv(m).level(t)),l.mul(n.uv(v).level(t))));return p.add(y)},_K=(n,e)=>{const t=Ve(n.size(O(e))),i=Ve(n.size(O(e.add(1)))),s=Ja(1,t),r=Ja(1,i),o=iC(n,Ue(s,t),wh(e)),a=iC(n,Ue(r,i),t3(e));return k0(e).mix(o,a)};class cD extends Qt{constructor(e,t=L(3)){super("vec4"),this.textureNode=e,this.blurNode=t}setup(){return _K(this.textureNode,this.blurNode)}}const yK=J(cD);X("bicubic",yK);ue("TextureBicubicNode",cD);class uD extends tt{constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}Se(uD);ue("PointUVNode",uD);class Rr extends tt{constructor(e=Rr.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,i=this.scene!==null?this.scene:e.scene;let s;return t===Rr.BACKGROUND_BLURRINESS?s=Or("backgroundBlurriness","float",i):t===Rr.BACKGROUND_INTENSITY?s=Or("backgroundIntensity","float",i):console.error("THREE.SceneNode: Unknown scope:",t),s}}Rr.BACKGROUND_BLURRINESS="backgroundBlurriness";Rr.BACKGROUND_INTENSITY="backgroundIntensity";Se(Rr,Rr.BACKGROUND_BLURRINESS);Se(Rr,Rr.BACKGROUND_INTENSITY);ue("SceneNode",Rr);class xK extends B0{constructor(e,t,i=0){super(e,t,i),this.isStorageBufferNode=!0,this.bufferObject=!1,this._attribute=null,this._varying=null,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getInputType(){return"storageBuffer"}element(e){return sD(this,e)}setBufferObject(e){return this.bufferObject=e,this}generate(e){if(e.isAvailable("storageBuffer"))return super.generate(e);const t=this.getNodeType(e);this._attribute===null&&(this._attribute=H0(this.value),this._varying=Wn(this._attribute));const i=this._varying.build(e,t);return e.registerTransform(i,this._attribute),i}}ue("StorageBufferNode",xK);const SK={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"};class hD extends wc{constructor(e,t,i=null){super(e,t),this.storeNode=i,this.isStorageTextureNode=!0,this.access=SK.WriteOnly}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);t.storeNode=this.storeNode}setAccess(e){return this.access=e,this}generate(e,t){let i;return this.storeNode!==null?i=this.generateStore(e):i=super.generate(e,t),i}generateStore(e){const t=e.getNodeProperties(this),{uvNode:i,storeNode:s}=t,r=super.generate(e,"property"),o=i.build(e,"uvec2"),a=s.build(e,"vec4"),l=e.generateTextureStore(e,r,o,a);e.addLineFlowCode(l)}}J(hD);ue("StorageTextureNode",hD);const TK=se(({texture:n,uv:e})=>{const i=B().temp();return St(e.x.lessThan(1e-4),()=>{i.assign(B(1,0,0))}).elseif(e.y.lessThan(1e-4),()=>{i.assign(B(0,1,0))}).elseif(e.z.lessThan(1e-4),()=>{i.assign(B(0,0,1))}).elseif(e.x.greaterThan(1-1e-4),()=>{i.assign(B(-1,0,0))}).elseif(e.y.greaterThan(1-1e-4),()=>{i.assign(B(0,-1,0))}).elseif(e.z.greaterThan(1-1e-4),()=>{i.assign(B(0,0,-1))}).else(()=>{const r=n.uv(e.add(B(-.01,0,0))).r.sub(n.uv(e.add(B(.01,0,0))).r),o=n.uv(e.add(B(0,-.01,0))).r.sub(n.uv(e.add(B(0,.01,0))).r),a=n.uv(e.add(B(0,0,-.01))).r.sub(n.uv(e.add(B(0,0,.01))).r);i.assign(B(r,o,a))}),i.normalize()});class dD extends wc{constructor(e,t=null,i=null){super(e,t,i),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return B(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){return t}generateUV(e,t){return t.build(e,"vec3")}normal(e){return TK({texture:this,uv:e})}}const MK=J(dD);ue("Texture3DNode",dD);class wK extends Ah{constructor(e,t,i=null){super(e,t,i),this.userData=i}update(e){this.reference=this.userData!==null?this.userData:e.object.userData,super.update(e)}}ue("UserDataNode",wK);const EK=se(({base:n,blend:e})=>{const t=i=>e[i].lessThan(ZI).cond(e[i],n[i].oneMinus().div(e[i]).oneMinus().max(0));return B(t("x"),t("y"),t("z"))}).setLayout({name:"burnColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),AK=se(({base:n,blend:e})=>{const t=i=>e[i].equal(1).cond(e[i],n[i].div(e[i].oneMinus()).max(0));return B(t("x"),t("y"),t("z"))}).setLayout({name:"dodgeColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),NK=se(({base:n,blend:e})=>{const t=i=>n[i].oneMinus().mul(e[i].oneMinus()).oneMinus();return B(t("x"),t("y"),t("z"))}).setLayout({name:"screenColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),CK=se(({base:n,blend:e})=>{const t=i=>n[i].lessThan(.5).cond(n[i].mul(e[i],2),n[i].oneMinus().mul(e[i].oneMinus()).oneMinus());return B(t("x"),t("y"),t("z"))}).setLayout({name:"overlayColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]});class ci extends Qt{constructor(e,t,i){super(),this.blendMode=e,this.baseNode=t,this.blendNode=i}setup(){const{blendMode:e,baseNode:t,blendNode:i}=this,s={base:t,blend:i};let r=null;return e===ci.BURN?r=EK(s):e===ci.DODGE?r=AK(s):e===ci.SCREEN?r=NK(s):e===ci.OVERLAY&&(r=CK(s)),r}}ci.BURN="burn";ci.DODGE="dodge";ci.SCREEN="screen";ci.OVERLAY="overlay";const bK=J(ci,ci.BURN),RK=J(ci,ci.DODGE),PK=J(ci,ci.OVERLAY),LK=J(ci,ci.SCREEN);X("burn",bK);X("dodge",RK);X("overlay",PK);X("screen",LK);ue("BlendModeNode",ci);const IK=se(({textureNode:n,bumpScale:e})=>{const t=s=>n.cache().context({getUV:r=>s(r.uvNode||uo()),forceUVContext:!0}),i=L(t(s=>s));return Ve(L(t(s=>s.add(s.dFdx()))).sub(i),L(t(s=>s.add(s.dFdy()))).sub(i)).mul(e)}),DK=se(n=>{const{surf_pos:e,surf_norm:t,dHdxy:i}=n,s=e.dFdx().normalize(),r=e.dFdy().normalize(),o=t,a=r.cross(o),l=o.cross(s),c=s.dot(a).mul(Xg),u=c.sign().mul(i.x.mul(a).add(i.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class fD extends Qt{constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=IK({textureNode:this.textureNode,bumpScale:e});return DK({surf_pos:Ls,surf_norm:el,dHdxy:t})}}const OK=J(fD);X("bumpMap",OK);ue("BumpMapNode",fD);const UK=se(({color:n,adjustment:e})=>e.mix(pD(n.rgb),n.rgb)),FK=se(({color:n,adjustment:e})=>{const t=Bs(n.r,n.g,n.b).div(3),i=n.r.max(n.g.max(n.b)),s=i.sub(t).mul(e).mul(-3);return ei(n.rgb,i,s)}),VK=se(({color:n,adjustment:e})=>{const t=B(.57735,.57735,.57735),i=e.cos();return B(n.rgb.mul(i).add(t.cross(n.rgb).mul(e.sin()).add(t.mul(Eh(t,n.rgb).mul(i.oneMinus())))))});class _s extends Qt{constructor(e,t,i=L(1)){super("vec3"),this.method=e,this.colorNode=t,this.adjustmentNode=i}setup(){const{method:e,colorNode:t,adjustmentNode:i}=this,s={color:t,adjustment:i};let r=null;return e===_s.SATURATION?r=UK(s):e===_s.VIBRANCE?r=FK(s):e===_s.HUE?r=VK(s):console.error(`${this.type}: Method "${this.method}" not supported!`),r}}_s.SATURATION="saturation";_s.VIBRANCE="vibrance";_s.HUE="hue";const kK=J(_s,_s.SATURATION),zK=J(_s,_s.VIBRANCE),BK=J(_s,_s.HUE),HK=B(.2125,.7154,.0721),pD=(n,e=HK)=>Eh(n,e),mD=(n,e)=>ei(B(0),n,pD(n).sub(e).max(0));X("saturation",kK);X("vibrance",zK);X("hue",BK);X("threshold",mD);ue("ColorAdjustmentNode",_s);const GK=se(n=>{const{eye_pos:e,surf_norm:t,mapN:i,uv:s}=n,r=e.dFdx(),o=e.dFdy(),a=s.dFdx(),l=s.dFdy(),c=t,u=o.cross(c),h=c.cross(r),d=u.mul(a.x).add(h.mul(l.x)),f=u.mul(a.y).add(h.mul(l.y)),g=d.dot(d).max(f.dot(f)),m=Xg.mul(g.inverseSqrt());return Bs(d.mul(i.x,m),f.mul(i.y,m),c.mul(i.z)).normalize()});class gD extends Qt{constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=$o}setup(e){const{normalMapType:t,scaleNode:i}=this;let s=this.node.mul(2).sub(1);i!==null&&(s=B(s.xy.mul(i),s.z));let r=null;return t===eI?r=p3.mul(s).normalize():t===$o&&(e.hasGeometryAttribute("tangent")===!0?r=_u.mul(s).normalize():r=GK({eye_pos:Ls,surf_norm:el,mapN:s,uv:uo()})),r}}const WK=J(gD);X("normalMap",WK);ue("NormalMapNode",gD);class vD extends Qt{constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const jK=J(vD);X("posterize",jK);ue("PosterizeNode",vD);const XK=se(({color:n,exposure:e})=>n.mul(e).clamp()),$K=se(({color:n,exposure:e})=>(n=n.mul(e),n.div(n.add(1)).clamp())),qK=se(({color:n,exposure:e})=>{n=n.mul(e),n=n.sub(.004).max(0);const t=n.mul(n.mul(6.2).add(.5)),i=n.mul(n.mul(6.2).add(1.7)).add(.06);return t.div(i).pow(2.2)}),YK=se(({color:n})=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),t=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),KK=se(({color:n,exposure:e})=>{const t=Dr(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=Dr(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=t.mul(n),n=YK({color:n}),n=i.mul(n),n.clamp()}),ZK=Dr(B(1.6605,-.1246,-.0182),B(-.5876,1.1329,-.1006),B(-.0728,-.0083,1.1187)),QK=Dr(B(.6274,.0691,.0164),B(.3293,.9195,.088),B(.0433,.0113,.8956)),JK=se(([n])=>{const e=B(n).toVar(),t=B(e.mul(e)).toVar(),i=B(t.mul(t)).toVar();return L(15.5).mul(i.mul(t)).sub(Nt(40.14,i.mul(e))).add(Nt(31.96,i).sub(Nt(6.868,t.mul(e))).add(Nt(.4298,t).add(Nt(.1191,e).sub(.00232))))}),eZ=se(({color:n,exposure:e})=>{const t=B(n).toVar(),i=Dr(B(.856627153315983,.137318972929847,.11189821299995),B(.0951212405381588,.761241990602591,.0767994186031903),B(.0482516061458583,.101439036467562,.811302368396859)),s=Dr(B(1.1271005818144368,-.1413297634984383,-.14132976349843826),B(-.11060664309660323,1.157823702216272,-.11060664309660294),B(-.016493938717834573,-.016493938717834257,1.2519364065950405)),r=L(-12.47393),o=L(4.026069);return t.mulAssign(e),t.assign(QK.mul(t)),t.assign(i.mul(t)),t.assign(gi(t,1e-10)),t.assign(V0(t)),t.assign(t.sub(r).div(o.sub(r))),t.assign(fh(t,0,1)),t.assign(JK(t)),t.assign(s.mul(t)),t.assign(Jr(gi(B(0),t),B(2.2))),t.assign(ZK.mul(t)),t.assign(fh(t,0,1)),t}),tZ={[HL]:XK,[GL]:$K,[WL]:qK,[jL]:KK,[XL]:eZ};class _D extends Qt{constructor(e=Us,t=iZ,i=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=i}getCacheKey(){let e=super.getCacheKey();return e="{toneMapping:"+this.toneMapping+",nodes:"+e+"}",e}setup(e){const t=this.colorNode||e.context.color,i=this.toneMapping;if(i===Us)return t;const s={exposure:this.exposureNode,color:t},r=tZ[i];let o=null;return r?o=r(s):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),o=t),o}}const nZ=(n,e,t)=>Ne(new _D(n,Ne(e),Ne(t))),iZ=vK("toneMappingExposure","float");X("toneMapping",(n,e,t)=>nZ(e,t,n));ue("ToneMappingNode",_D);let $_=null;class yD extends Yf{constructor(e=wf,t=null){$_===null&&($_=new TI),super(e,t,$_)}updateReference(){return this}}const sZ=J(yD);X("viewportSharedTexture",sZ);ue("ViewportSharedTextureNode",yD);const rZ=new Ye;class fS extends wc{constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class Kf extends Qt{constructor(e,t,i){super("vec4"),this.scope=e,this.scene=t,this.camera=i,this._pixelRatio=1,this._width=1,this._height=1;const s=new jf;s.isRenderTargetTexture=!0,s.name="PostProcessingDepth";const r=new Qa(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:zf});r.texture.name="PostProcessing",r.depthTexture=s,this.renderTarget=r,this.updateBeforeType=sn.FRAME,this._textureNode=Ne(new fS(this,r.texture)),this._depthTextureNode=Ne(new fS(this,s)),this._depthNode=null,this._viewZNode=null,this._cameraNear=Lt(0),this._cameraFar=Lt(0),this.isPassNode=!0}isGlobal(){return!0}getTextureNode(){return this._textureNode}getTextureDepthNode(){return this._depthTextureNode}getViewZNode(){if(this._viewZNode===null){const e=this._cameraNear,t=this._cameraFar;this._viewZNode=z3(this._depthTextureNode,e,t)}return this._viewZNode}getDepthNode(){if(this._depthNode===null){const e=this._cameraNear,t=this._cameraFar;this._depthNode=lS(this.getViewZNode(),e,t)}return this._depthNode}setup(){return this.scope===Kf.COLOR?this.getTextureNode():this.getDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:i,camera:s}=this;this._pixelRatio=t.getPixelRatio();const r=t.getSize(rZ);this.setSize(r.width,r.height);const o=t.toneMapping,a=t.toneMappingNode,l=t.getRenderTarget();this._cameraNear.value=s.near,this._cameraFar.value=s.far,t.toneMapping=Us,t.toneMappingNode=null,t.setRenderTarget(this.renderTarget),t.render(i,s),t.toneMapping=o,t.toneMappingNode=a,t.setRenderTarget(l)}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget.setSize(i,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}Kf.COLOR="color";Kf.DEPTH="depth";const zT=(n,e)=>Ne(new fS(n,e));ue("PassNode",Kf);const q_=new _T(-1,1,1,-1,0,1);class oZ extends cl{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new ko([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ko(t,2))}}const aZ=new oZ;class W0 extends Nr{constructor(e=null){super(aZ,e),this.camera=q_}renderAsync(e){return e.renderAsync(this,q_)}render(e){e.render(this,q_)}}const sC=new W0,rC=new W0;class lZ extends Qt{constructor(e,t=2){super("vec4"),this.textureNode=e,this.sigma=t,this.directionNode=Ve(1),this._invSize=Lt(new Ye),this._passDirection=Lt(new Ye),this._horizontalRT=new Qa,this._horizontalRT.texture.name="GaussianBlurNode.horizontal",this._verticalRT=new Qa,this._verticalRT.texture.name="GaussianBlurNode.vertical",this._textureNode=zT(this,this._verticalRT.texture),this.updateBeforeType=sn.RENDER,this.resolution=new Ye(1,1)}setSize(e,t){e=Math.max(Math.round(e*this.resolution.x),1),t=Math.max(Math.round(t*this.resolution.y),1),this._invSize.value.set(1/e,1/t),this._horizontalRT.setSize(e,t),this._verticalRT.setSize(e,t)}updateBefore(e){const{renderer:t}=e,i=this.textureNode,s=i.value,r=t.getRenderTarget(),o=i.value;sC.material=this._material,rC.material=this._material,this.setSize(s.image.width,s.image.height);const a=s.type;this._horizontalRT.texture.type=a,this._verticalRT.texture.type=a,t.setRenderTarget(this._horizontalRT),this._passDirection.value.set(1,0),sC.render(t),i.value=this._horizontalRT.texture,t.setRenderTarget(this._verticalRT),this._passDirection.value.set(0,1),rC.render(t),t.setRenderTarget(r),i.value=o}getTextureNode(){return this._textureNode}setup(e){const t=this.textureNode;if(t.isTextureNode!==!0)return console.error("GaussianBlurNode requires a TextureNode."),Ue();const i=t.uvNode||uo(),s=l=>t.cache().context({getUV:()=>l,forceUVContext:!0}),r=se(()=>{const l=3+2*this.sigma,c=this._getCoefficients(l),u=this._invSize,h=Ve(this.directionNode).mul(this._passDirection),d=L(c[0]).toVar(),f=Ue(s(i).mul(d)).toVar();for(let g=1;g<l;g++){const m=L(g),v=L(c[g]),p=Ve(h.mul(u.mul(m))).toVar(),y=Ue(s(i.add(p))),_=Ue(s(i.sub(p)));f.addAssign(y.add(_).mul(v)),d.addAssign(Nt(2,v))}return f.div(d)}),o=this._material||(this._material=e.createNodeMaterial());o.fragmentNode=r();const a=e.getNodeProperties(this);return a.textureNode=t,this._textureNode}_getCoefficients(e){const t=[];for(let i=0;i<e;i++)t.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return t}}const cZ=(n,e)=>Ne(new lZ(Ne(n),e));X("gaussianBlur",cZ);const Y_=new Ye,oC=new W0;class uZ extends Qt{constructor(e,t=.96){super(e),this.textureNode=e,this.textureNodeOld=Fs(),this.damp=Lt(t),this._compRT=new Qa,this._compRT.texture.name="AfterImageNode.comp",this._oldRT=new Qa,this._oldRT.texture.name="AfterImageNode.old",this._textureNode=zT(this,this._compRT.texture),this.updateBeforeType=sn.RENDER}getTextureNode(){return this._textureNode}setSize(e,t){this._compRT.setSize(e,t),this._oldRT.setSize(e,t)}updateBefore(e){const{renderer:t}=e,i=this.textureNode,r=i.value.type;this._compRT.texture.type=r,this._oldRT.texture.type=r,t.getDrawingBufferSize(Y_),this.setSize(Y_.x,Y_.y);const o=t.toneMapping,a=t.toneMappingNode,l=t.getRenderTarget(),c=i.value;this.textureNodeOld.value=this._oldRT.texture,t.toneMapping=Us,t.toneMappingNode=null,t.setRenderTarget(this._compRT),oC.render(t);const u=this._oldRT;this._oldRT=this._compRT,this._compRT=u,t.toneMapping=o,t.toneMappingNode=a,t.setRenderTarget(l),i.value=c}setup(e){const t=this.textureNode,i=this.textureNodeOld;if(t.isTextureNode!==!0)return console.error("AfterImageNode requires a TextureNode."),Ue();const s=t.uvNode||uo();i.uvNode=s;const r=u=>t.cache().context({getUV:()=>u,forceUVContext:!0}),o=se(([u,h])=>{const d=L(h).toVar(),f=Ue(u).toVar();return gi(OT(f.sub(d)),0)}),a=se(()=>{const u=Ue(i),h=Ue(r(s));return u.mulAssign(this.damp.mul(o(u,.1))),gi(h,u)}),l=this._materialComposed||(this._materialComposed=e.createNodeMaterial());l.fragmentNode=a(),oC.material=l;const c=e.getNodeProperties(this);return c.textureNode=t,this._textureNode}}const hZ=(n,e)=>Ne(new uZ(Ne(n),e));X("afterImage",hZ);const aC=new W0;class dZ extends Qt{constructor(e,t,i,s){super("vec4"),this.textureNode=e,this.tresholdNode=t,this.scaleNode=i,this.colorNode=B(.1,0,1),this.samples=s,this.resolution=new Ye(1,1),this._renderTarget=new Qa,this._renderTarget.texture.name="anamorphic",this._invSize=Lt(new Ye),this._textureNode=zT(this,this._renderTarget.texture),this.updateBeforeType=sn.RENDER}getTextureNode(){return this._textureNode}setSize(e,t){this._invSize.value.set(1/e,1/t),e=Math.max(Math.round(e*this.resolution.x),1),t=Math.max(Math.round(t*this.resolution.y),1),this._renderTarget.setSize(e,t)}updateBefore(e){const{renderer:t}=e,i=this.textureNode,s=i.value;this._renderTarget.texture.type=s.type;const r=t.getRenderTarget(),o=i.value;aC.material=this._material,this.setSize(s.image.width,s.image.height),t.setRenderTarget(this._renderTarget),aC.render(t),t.setRenderTarget(r),i.value=o}setup(e){const t=this.textureNode;if(t.isTextureNode!==!0)return console.error("AnamorphNode requires a TextureNode."),Ue();const i=t.uvNode||uo(),s=l=>t.cache().context({getUV:()=>l,forceUVContext:!0}),r=se(()=>{const l=this.samples,c=Math.floor(l/2),u=B(0).toVar();return Kt({start:-c,end:c},({i:h})=>{const d=L(h).abs().div(c).oneMinus(),f=Ve(i.x.add(this._invSize.x.mul(h).mul(this.scaleNode)),i.y),g=s(f),m=mD(g,this.tresholdNode).mul(d);u.addAssign(m)}),u.mul(this.colorNode)}),o=this._material||(this._material=e.createNodeMaterial());o.fragmentNode=r();const a=e.getNodeProperties(this);return a.textureNode=t,this._textureNode}}const fZ=(n,e=.9,t=3,i=32)=>Ne(new dZ(Ne(n),Ne(e),Ne(t),i));X("anamorphic",fZ);class xD extends Qt{constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],i=this.functionNode,s=i.getInputs(e),r=this.parameters;if(Array.isArray(r))for(let a=0;a<r.length;a++){const l=s[a],c=r[a];t.push(c.build(e,l.type))}else for(const a of s){const l=r[a.name];if(l!==void 0)t.push(l.build(e,a.type));else throw new Error(`FunctionCallNode: Input '${a.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${t.join(", ")} )`}}const pZ=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Du(e):U0(e[0]),Ne(new xD(Ne(n),e)));X("call",pZ);ue("FunctionCallNode",xD);class SD extends tt{constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outpuType=null,this.events=new ll,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:L()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=CI(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=bI(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const Om=J(SD);X("scriptableValue",Om);ue("ScriptableValueNode",SD);class TD extends Map{get(e,t=null,...i){if(this.has(e))return super.get(e);if(t!==null){const s=t(...i);return this.set(e,s),s}}}class mZ{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const K_=new TD;class MD extends tt{constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new TD,this._output=Om(),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const i=this._outputs;return i[e]===void 0?i[e]=Om(t):i[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const i=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),i[e]=t,i[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),i[e]=t,i[e].events.addEventListener("refresh",this.onRefresh)):i[e]===void 0?(i[e]=Om(t),i[e].events.addEventListener("refresh",this.onRefresh)):i[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const s=this.getObject()[e];if(typeof s=="function")return s(...t)}async callAsync(e,...t){const s=this.getObject()[e];if(typeof s=="function")return s.constructor.name==="AsyncFunction"?await s(...t):s(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,u)=>this.setOutput(c,u),i=new mZ(this),s=K_.get("THREE"),r=K_.get("TSL"),o=this.getMethod(this.codeNode),a=[i,this._local,K_,e,t,s,r];this._object=o(...a);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const c of l.elements){const u=c.id||c.name;c.inputType&&(this.getParameter(u)===void 0&&this.setParameter(u,null),this.getParameter(u).inputType=c.inputType),c.outputType&&(this.getOutput(u)===void 0&&this.setOutput(u,null),this.getOutput(u).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let i=this.parameters[t];i.isScriptableNode&&(i=i.getDefaultOutput()),i.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:L()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],i=["layout","init","main","dispose"].join(", "),s="var "+i+`; var output = {};
`,r=`
return { ...output, `+i+" };",o=s+this.codeNode.code+r;return this._method=new Function(...e,o),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const gZ=J(MD);X("scriptable",gZ);ue("ScriptableNode",MD);class j0 extends tt{constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}getViewZNode(e){let t;const i=e.context.getViewZ;return i!==void 0&&(t=i(this)),(t||Ls.z).negate()}setup(){return this.factorNode}}const vZ=J(j0);X("fog",vZ);ue("FogNode",j0);class wD extends j0{constructor(e,t,i){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=i}setup(e){const t=this.getViewZNode(e);return ao(this.nearNode,this.farNode,t)}}const _Z=J(wD);X("rangeFog",_Z);ue("FogRangeNode",wD);class ED extends j0{constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(e){const t=this.getViewZNode(e),i=this.densityNode;return i.mul(i,t,t).negate().exp().oneMinus()}}const yZ=J(ED);X("densityFog",yZ);ue("FogExp2Node",ED);let xl=null,Sl=null;class AD extends tt{constructor(e=L(),t=L()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(wa(this.minNode.value)),i=e.getTypeLength(wa(this.maxNode.value));return t>i?t:i}getNodeType(e){return e.object.isInstancedMesh===!0?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let i=null;if(t.isInstancedMesh===!0){const s=this.minNode.value,r=this.maxNode.value,o=e.getTypeLength(wa(s)),a=e.getTypeLength(wa(r));xl=xl||new Dt,Sl=Sl||new Dt,xl.setScalar(0),Sl.setScalar(0),o===1?xl.setScalar(s):s.isColor?xl.set(s.r,s.g,s.b):xl.set(s.x,s.y,s.z||0,s.w||0),a===1?Sl.setScalar(r):r.isColor?Sl.set(r.r,r.g,r.b):Sl.set(r.x,r.y,r.z||0,r.w||0);const l=4,c=l*t.count,u=new Float32Array(c);for(let d=0;d<c;d++){const f=d%l,g=xl.getComponent(f),m=Sl.getComponent(f);u[d]=iI.lerp(g,m,Math.random())}const h=this.getNodeType(e);i=UT(u,"vec4",t.count).element(zI).convert(h)}else i=L(0);return i}}J(AD);ue("RangeNode",AD);class ND extends tt{constructor(e,t,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateBeforeType=sn.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let i=t[0];for(let s=1;s<t.length;s++)i*=t[s];this.dispatchCount=Math.ceil(e/i)}onInit(){}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i)}}}const xZ=(n,e,t)=>Ne(new ND(Ne(n),e,t));X("compute",xZ);ue("ComputeNode",ND);class pc extends tt{constructor(e=pc.TARGET_DIRECTION,t=null){super(),this.scope=e,this.light=t}setup(){const{scope:e,light:t}=this;let i=null;return e===pc.TARGET_DIRECTION&&(i=Nh.transformDirection(nS(t).sub(nS(t.target)))),i}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}pc.TARGET_DIRECTION="targetDirection";const CD=J(pc,pc.TARGET_DIRECTION);ue("LightNode",pc);const bD=se(n=>{const{lightDistance:e,cutoffDistance:t,decayExponent:i}=n,s=e.pow(i).max(.01).reciprocal();return t.greaterThan(0).cond(s.mul(e.div(t).pow4().oneMinus().clamp().pow2()),s)});class RD extends Ec{constructor(e=null){super(e),this.cutoffDistanceNode=Lt(0),this.decayExponentNode=Lt(0)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:i,decayExponentNode:s,light:r}=this,o=e.context.lightingModel,a=f3(r).sub(Ls),l=a.normalize(),c=a.length(),u=bD({lightDistance:c,cutoffDistance:i,decayExponent:s}),h=t.mul(u),d=e.context.reflectedLight;o.direct({lightDirection:l,lightColor:h,reflectedLight:d,shadowMask:this.shadowMaskNode},e.stack,e)}}ue("PointLightNode",RD);Ch(FX,RD);class PD extends Ec{constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,i=this.colorNode,s=CD(this.light),r=e.context.reflectedLight;t.direct({lightDirection:s,lightColor:i,reflectedLight:r,shadowMask:this.shadowMaskNode},e.stack,e)}}ue("DirectionalLightNode",PD);Ch(kX,PD);class BT extends Ec{constructor(e=null){super(e),this.coneCosNode=Lt(0),this.penumbraCosNode=Lt(0),this.cutoffDistanceNode=Lt(0),this.decayExponentNode=Lt(0)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:i}=this;return ao(t,i,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:s,decayExponentNode:r,light:o}=this,a=f3(o).sub(Ls),l=a.normalize(),c=l.dot(CD(o)),u=this.getSpotAttenuation(c),h=a.length(),d=bD({lightDistance:h,cutoffDistance:s,decayExponent:r}),f=i.mul(u).mul(d),g=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:f,reflectedLight:g,shadowMask:this.shadowMaskNode},e.stack,e)}}ue("SpotLightNode",BT);Ch(EI,BT);class SZ extends EI{constructor(e,t,i,s,r,o){super(e,t,i,s,r,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class LD extends BT{getSpotAttenuation(e){const t=this.light.iesMap;let i=null;if(t&&t.isTexture===!0){const s=e.acos().mul(1/Math.PI);i=Fs(t,Ve(s,0),0).r}else i=super.getSpotAttenuation(e);return i}}ue("IESSpotLightNode",LD);Ch(SZ,LD);class ID extends Ec{constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}ue("AmbientLightNode",ID);Ch(zX,ID);class DD extends Ec{constructor(e=null){super(e),this.lightPositionNode=nS(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Lt(new st)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:i,lightDirectionNode:s}=this,o=el.dot(s).mul(.5).add(.5),a=ei(i,t,o);e.context.irradiance.addAssign(a)}}ue("HemisphereLightNode",DD);Ch(DX,DD);const TZ=se(n=>{const e=n.uv.mul(2),t=e.x.floor(),i=e.y.floor();return t.add(i).mod(2).sign()});class OD extends Qt{constructor(e=uo()){super("float"),this.uvNode=e}setup(){return TZ({uv:this.uvNode})}}const MZ=J(OD);X("checker",MZ);ue("CheckerNode",OD);const wZ=new SI;class EZ extends Bi{constructor(e={}){super(),this.normals=!1,this.lights=!1,this.useAlphaToCoverage=!0,this.useColor=e.vertexColors,this.pointWidth=1,this.pointColorNode=null,this.setDefaultValues(wZ),this.setupShaders(),this.setValues(e)}setupShaders(){const e=this.alphaToCoverage,t=this.useColor;this.vertexNode=se(()=>{Wn(Ve(),"vUv").assign(uo());const i=pi("instancePosition"),s=Sn("vec4","mvPos");s.assign(fc.mul(Ue(i,1)));const r=ku.z.div(ku.w),o=Wr.mul(s),a=Sn("vec2","offset");return a.assign(Xi.xy),a.assign(a.mul(xY)),a.assign(a.div(ku.z)),a.y.assign(a.y.mul(r)),a.assign(a.mul(o.w)),o.assign(o.add(Ue(a,0,0))),o})(),this.fragmentNode=se(()=>{const i=Wn(Ve(),"vUv"),s=Sn("float","alpha");s.assign(1);const r=i.x,o=i.y,a=r.mul(r).add(o.mul(o));if(e){const c=Sn("float","dlen");c.assign(a.fwidth()),s.assign(ao(c.oneMinus(),c.add(1),a).oneMinus())}else a.greaterThan(1).discard();let l;return this.pointColorNode?l=this.pointColorNode:t?l=pi("instanceColor").mul(Mf):l=Mf,Ue(l,s)})(),this.needsUpdate=!0}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(e){this.useAlphaToCoverage!==e&&(this.useAlphaToCoverage=e,this.setupShaders())}}di("InstancedPointsNodeMaterial",EZ);const AZ=new xI;class NZ extends Bi{constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(AZ),this.setValues(e)}}di("LineBasicNodeMaterial",NZ);const CZ=new wI;class bZ extends Bi{constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(CZ),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode,t=this.dashScaleNode?L(this.dashScaleNode):iS,i=this.dashSizeNode?L(this.dashSizeNode):v3,s=this.dashSizeNode?L(this.dashGapNode):_3;Fu.assign(i),Hg.assign(s);const r=Wn(pi("lineDistance").mul(t));(e?r.add(e):r).mod(Fu.add(Hg)).greaterThan(Fu).discard()}}di("LineDashedNodeMaterial",bZ);const RZ=new wI;class PZ extends Bi{constructor(e={}){super(),this.normals=!1,this.lights=!1,this.setDefaultValues(RZ),this.useAlphaToCoverage=!0,this.useColor=e.vertexColors,this.useDash=e.dashed,this.useWorldUnits=!1,this.dashOffset=0,this.lineWidth=1,this.lineColorNode=null,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setup(e){this.setupShaders(),super.setup(e)}setupShaders(){const e=this.alphaToCoverage,t=this.useColor,i=this.dashed,s=this.worldUnits,r=se(({start:a,end:l})=>{const c=Wr.element(2).element(2),d=Wr.element(3).element(2).mul(-.5).div(c).sub(a.z).div(l.z.sub(a.z));return Ue(ei(a.xyz,l.xyz,d),l.w)});this.vertexNode=se(()=>{zr("vec2","vUv").assign(uo());const a=pi("instanceStart"),l=pi("instanceEnd"),c=Sn("vec4","start"),u=Sn("vec4","end");c.assign(fc.mul(Ue(a,1))),u.assign(fc.mul(Ue(l,1))),s&&(zr("vec3","worldStart").assign(c.xyz),zr("vec3","worldEnd").assign(u.xyz));const h=ku.z.div(ku.w),d=Wr.element(2).element(3).equal(-1);St(d,()=>{St(c.z.lessThan(0).and(u.z.greaterThan(0)),()=>{u.assign(r({start:c,end:u}))}).elseif(u.z.lessThan(0).and(c.z.greaterThanEqual(0)),()=>{c.assign(r({start:u,end:c}))})});const f=Wr.mul(c),g=Wr.mul(u),m=f.xyz.div(f.w),v=g.xyz.div(g.w),p=v.xy.sub(m.xy).temp();p.x.assign(p.x.mul(h)),p.assign(p.normalize());const y=Vg(Ue());if(s){const _=u.xyz.sub(c.xyz).normalize(),x=ei(c.xyz,u.xyz,.5).normalize(),E=_.cross(x).normalize(),w=_.cross(E),T=zr("vec4","worldPos");T.assign(Xi.y.lessThan(.5).cond(c,u));const A=F_.mul(.5);T.addAssign(Ue(Xi.x.lessThan(0).cond(E.mul(A),E.mul(A).negate()),0)),i||(T.addAssign(Ue(Xi.y.lessThan(.5).cond(_.mul(A).negate(),_.mul(A)),0)),T.addAssign(Ue(w.mul(A),0)),St(Xi.y.greaterThan(1).or(Xi.y.lessThan(0)),()=>{T.subAssign(Ue(w.mul(2).mul(A),0))})),y.assign(Wr.mul(T));const M=Vg(B());M.assign(Xi.y.lessThan(.5).cond(m,v)),y.z.assign(M.z.mul(y.w))}else{const _=Sn("vec2","offset");_.assign(Ve(p.y,p.x.negate())),p.x.assign(p.x.div(h)),_.x.assign(_.x.div(h)),_.assign(Xi.x.lessThan(0).cond(_.negate(),_)),St(Xi.y.lessThan(0),()=>{_.assign(_.sub(p))}).elseif(Xi.y.greaterThan(1),()=>{_.assign(_.add(p))}),_.assign(_.mul(F_)),_.assign(_.div(ku.w)),y.assign(Xi.y.lessThan(.5).cond(f,g)),_.assign(_.mul(y.w)),y.assign(y.add(Ue(_,0,0)))}return y})();const o=se(({p1:a,p2:l,p3:c,p4:u})=>{const h=a.sub(c),d=u.sub(c),f=l.sub(a),g=h.dot(d),m=d.dot(f),v=h.dot(f),p=d.dot(d),_=f.dot(f).mul(p).sub(m.mul(m)),E=g.mul(m).sub(v.mul(p)).div(_).clamp(),w=g.add(m.mul(E)).div(p).clamp();return Ve(E,w)});this.fragmentNode=se(()=>{const a=zr("vec2","vUv");if(i){const u=this.offsetNode?L(this.offsetNodeNode):HN,h=this.dashScaleNode?L(this.dashScaleNode):iS,d=this.dashSizeNode?L(this.dashSizeNode):v3,f=this.dashSizeNode?L(this.dashGapNode):_3;Fu.assign(d),Hg.assign(f);const g=pi("instanceDistanceStart"),m=pi("instanceDistanceEnd"),v=Xi.y.lessThan(.5).cond(h.mul(g),iS.mul(m)),p=Wn(v.add(HN)),y=u?p.add(u):p;a.y.lessThan(-1).or(a.y.greaterThan(1)).discard(),y.mod(Fu.add(Hg)).greaterThan(Fu).discard()}const l=Sn("float","alpha");if(l.assign(1),s){const u=zr("vec3","worldStart"),h=zr("vec3","worldEnd"),d=zr("vec4","worldPos").xyz.normalize().mul(1e5),f=h.sub(u),g=o({p1:u,p2:h,p3:B(0,0,0),p4:d}),m=u.add(f.mul(g.x)),v=d.mul(g.y),_=m.sub(v).length().div(F_);if(!i)if(e){const x=_.fwidth();l.assign(ao(x.negate().add(.5),x.add(.5),_).oneMinus())}else _.greaterThan(.5).discard()}else if(e){const u=a.x,h=a.y.greaterThan(0).cond(a.y.sub(1),a.y.add(1)),d=u.mul(u).add(h.mul(h)),f=Sn("float","dlen");f.assign(d.fwidth()),St(a.y.abs().greaterThan(1),()=>{l.assign(ao(f.oneMinus(),f.add(1),d).oneMinus())})}else St(a.y.abs().greaterThan(1),()=>{const u=a.x,h=a.y.greaterThan(0).cond(a.y.sub(1),a.y.add(1));u.mul(u).add(h.mul(h)).greaterThan(1).discard()});let c;if(this.lineColorNode)c=this.lineColorNode;else if(t){const u=pi("instanceColorStart"),h=pi("instanceColorEnd");c=Xi.y.lessThan(.5).cond(u,h).mul(Mf)}else c=Mf;return Ue(c,l)})()}get worldUnits(){return this.useWorldUnits}set worldUnits(e){this.useWorldUnits!==e&&(this.useWorldUnits=e,this.needsUpdate=!0)}get dashed(){return this.useDash}set dashed(e){this.useDash!==e&&(this.useDash=e,this.needsUpdate=!0)}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(e){this.useAlphaToCoverage!==e&&(this.useAlphaToCoverage=e,this.needsUpdate=!0)}}di("Line2NodeMaterial",PZ);const LZ=new NX;class IZ extends Bi{constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(LZ),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?L(this.opacityNode):g3;tn.assign(Ue(J3(Un),e))}}di("MeshNormalNodeMaterial",IZ);const DZ=new gT;class OZ extends Bi{constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(DZ),this.setValues(e)}}di("MeshBasicNodeMaterial",OZ);const Ef=se(({f0:n,f90:e,dotVH:t})=>{const i=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return n.mul(i.oneMinus()).add(e.mul(i))}),ph=se(n=>n.diffuseColor.mul(1/Math.PI)),UZ=()=>L(.25),FZ=se(({dotNH:n})=>Qx.mul(L(.5)).add(1).mul(L(1/Math.PI)).mul(n.pow(Qx))),VZ=se(({lightDirection:n})=>{const e=n.add(Tn).normalize(),t=Un.dot(e).clamp(),i=Tn.dot(e).clamp(),s=Ef({f0:xr,f90:1,dotVH:i}),r=UZ(),o=FZ({dotNH:t});return s.mul(r).mul(o)});class UD extends F0{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:i}){const r=Un.dot(e).clamp().mul(t);i.directDiffuse.addAssign(r.mul(ph({diffuseColor:tn.rgb}))),this.specular===!0&&i.directSpecular.addAssign(r.mul(VZ({lightDirection:e})).mul(tY))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(ph({diffuseColor:tn})))}}const kZ=new CX;class zZ extends Bi{constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(kZ),this.setValues(e)}setupLightingModel(){return new UD(!1)}}di("MeshLambertNodeMaterial",zZ);const BZ=new EX;class HZ extends Bi{constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(BZ),this.setValues(e)}setupLightingModel(){return new UD}setupVariants(){const e=(this.shininessNode?L(this.shininessNode):Zq).max(1e-4);Qx.assign(e);const t=this.specularNode||Jq;xr.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}di("MeshPhongNodeMaterial",HZ);const GZ=se(()=>{const n=Gg.dFdx().abs().max(Gg.dFdy().abs());return n.x.max(n.y).max(n.z)}),FD=se(n=>{const{roughness:e}=n,t=GZ();let i=e.max(.0525);return i=i.add(t),i=i.min(1),i}),WZ=se(({alpha:n,dotNL:e,dotNV:t})=>{const i=n.pow2(),s=e.mul(i.add(i.oneMinus().mul(t.pow2())).sqrt()),r=t.mul(i.add(i.oneMinus().mul(e.pow2())).sqrt());return Ja(.5,s.add(r).max(ZI))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),jZ=se(({alphaT:n,alphaB:e,dotTV:t,dotBV:i,dotTL:s,dotBL:r,dotNV:o,dotNL:a})=>{const l=a.mul(B(n.mul(t),e.mul(i),o).length()),c=o.mul(B(n.mul(s),e.mul(r),a).length());return Ja(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),XZ=se(({alpha:n,dotNH:e})=>{const t=n.pow2(),i=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),$Z=L(1/Math.PI),qZ=se(({alphaT:n,alphaB:e,dotNH:t,dotTH:i,dotBH:s})=>{const r=n.mul(e),o=B(e.mul(i),n.mul(s),r.mul(t)),a=o.dot(o),l=r.div(a);return $Z.mul(r.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),lC=se(n=>{const{lightDirection:e,f0:t,f90:i,roughness:s,f:r,USE_IRIDESCENCE:o,USE_ANISOTROPY:a}=n,l=n.normalView||Un,c=s.pow2(),u=e.add(Tn).normalize(),h=l.dot(e).clamp(),d=l.dot(Tn).clamp(),f=l.dot(u).clamp(),g=Tn.dot(u).clamp();let m=Ef({f0:t,f90:i,dotVH:g}),v,p;if(UN(o)&&(m=PT.mix(m,r)),UN(a)){const y=Im.dot(e),_=Im.dot(Tn),x=Im.dot(u),E=Uu.dot(e),w=Uu.dot(Tn),T=Uu.dot(u);v=jZ({alphaT:Zx,alphaB:c,dotTV:_,dotBV:w,dotTL:y,dotBL:E,dotNV:d,dotNL:h}),p=qZ({alphaT:Zx,alphaB:c,dotNH:f,dotTH:x,dotBH:T})}else v=WZ({alpha:c,dotNL:h,dotNV:d}),p=XZ({alpha:c,dotNH:f});return m.mul(v).mul(p)}),VD=se(({roughness:n,dotNV:e})=>{const t=Ue(-1,-.0275,-.572,.022),i=Ue(1,.0425,1.04,-.04),s=n.mul(t).add(i),r=s.x.mul(s.x).min(e.mul(-9.28).exp2()).mul(s.x).add(s.y);return Ve(-1.04,1.04).mul(r).add(s.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),kD=se(n=>{const{dotNV:e,specularColor:t,specularF90:i,roughness:s}=n,r=VD({dotNV:e,roughness:s});return t.mul(r.x).add(i.mul(r.y))}),YZ=se(({f:n,f90:e,dotVH:t})=>{const i=t.oneMinus().saturate(),s=i.mul(i),r=i.mul(s,s).clamp(0,.9999);return n.sub(B(e).mul(r)).div(r.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),KZ=se(({roughness:n,dotNH:e})=>{const t=n.pow2(),i=L(1).div(t),r=e.pow2().oneMinus().max(.0078125);return L(2).add(i).mul(r.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),ZZ=se(({dotNV:n,dotNL:e})=>L(1).div(L(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),QZ=se(({lightDirection:n})=>{const e=n.add(Tn).normalize(),t=Un.dot(n).clamp(),i=Un.dot(Tn).clamp(),s=Un.dot(e).clamp(),r=KZ({roughness:RT,dotNH:s}),o=ZZ({dotNV:i,dotNL:t});return gu.mul(r).mul(o)}),cC=se(([n,e,t,i,s])=>{const r=B(r3(e.negate(),Sf(n),Ja(1,i))),o=B(Vu(s[0].xyz),Vu(s[1].xyz),Vu(s[2].xyz));return Sf(r).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),JZ=se(([n,e])=>n.mul(fh(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),eQ=F3(),uC=se(([n,e,t])=>{const i=eQ.uv(n),s=V0(L(aS.x)).mul(JZ(e,t));return i.bicubic(s)}),hC=se(([n,e,t])=>(St(t.notEqual(0),()=>{const i=e3(e).negate().div(t);return JI(i.negate().mul(n))}),B(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),tQ=se(([n,e,t,i,s,r,o,a,l,c,u,h,d,f,g])=>{let m,v;if(g){m=Ue().toVar(),v=B().toVar();const E=u.sub(1).mul(g.mul(.025)),w=B(u.sub(E),u,u.add(E));Kt({start:0,end:3},({i:T})=>{const A=w.element(T),M=cC(n,e,h,A,a),S=o.add(M),P=c.mul(l.mul(Ue(S,1))),F=Ve(P.xy.div(P.w)).toVar();F.addAssign(1),F.divAssign(2),F.assign(Ve(F.x,F.y.oneMinus()));const H=uC(F,t,A);m.element(T).assign(H.element(T)),m.a.addAssign(H.a),v.element(T).assign(i.element(T).mul(hC(Vu(M),d,f).element(T)))}),m.a.divAssign(3)}else{const E=cC(n,e,h,u,a),w=o.add(E),T=c.mul(l.mul(Ue(w,1))),A=Ve(T.xy.div(T.w)).toVar();A.addAssign(1),A.divAssign(2),A.assign(Ve(A.x,A.y.oneMinus())),m=uC(A,t,u),v=i.mul(hC(Vu(E),d,f))}const p=v.rgb.mul(m.rgb),y=n.dot(e).clamp(),_=B(kD({dotNV:y,specularColor:s,specularF90:r,roughness:t})),x=v.r.add(v.g,v.b).div(3);return Ue(_.oneMinus().mul(p),m.a.oneMinus().mul(x).oneMinus())}),nQ=Dr(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),iQ=n=>{const e=n.sqrt();return B(1).add(e).div(B(1).sub(e))},dC=(n,e)=>n.sub(e).div(n.add(e)).pow2(),sQ=(n,e)=>{const t=n.mul(2*Math.PI*1e-9),i=B(54856e-17,44201e-17,52481e-17),s=B(1681e3,1795300,2208400),r=B(43278e5,93046e5,66121e5),o=L(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=i.mul(r.mul(2*Math.PI).sqrt()).mul(s.mul(t).add(e).cos()).mul(t.pow2().negate().mul(r).exp());return a=B(a.x.add(o),a.y,a.z).div(10685e-11),nQ.mul(a)},rQ=se(({outsideIOR:n,eta2:e,cosTheta1:t,thinFilmThickness:i,baseF0:s})=>{const r=ei(n,e,ao(0,.03,i)),o=n.div(r).pow2().mul(L(1).sub(t.pow2())),l=L(1).sub(o).sqrt(),c=dC(r,n),u=Ef({f0:c,f90:1,dotVH:t}),h=u.oneMinus(),d=r.lessThan(n).cond(Math.PI,0),f=L(Math.PI).sub(d),g=iQ(s.clamp(0,.9999)),m=dC(g,r.toVec3()),v=Ef({f0:m,f90:1,dotVH:l}),p=B(g.x.lessThan(r).cond(Math.PI,0),g.y.lessThan(r).cond(Math.PI,0),g.z.lessThan(r).cond(Math.PI,0)),y=r.mul(i,l,2),_=B(f).add(p),x=u.mul(v).clamp(1e-5,.9999),E=x.sqrt(),w=h.pow2().mul(v).div(B(1).sub(x));let A=u.add(w),M=w.sub(h);for(let S=1;S<=2;++S){M=M.mul(E);const P=sQ(L(S).mul(y),L(S).mul(_)).mul(2);A=A.add(M.mul(P))}return A.max(B(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),oQ=se(({normal:n,viewDir:e,roughness:t})=>{const i=n.dot(e).saturate(),s=t.pow2(),r=Is(t.lessThan(.25),L(-339.2).mul(s).add(L(161.4).mul(t)).sub(25.9),L(-8.48).mul(s).add(L(14.3).mul(t)).sub(9.95)),o=Is(t.lessThan(.25),L(44).mul(s).sub(L(23.7).mul(t)).add(3.26),L(1.97).mul(s).sub(L(3.27).mul(t)).add(.72));return Is(t.lessThan(.25),0,L(.1).mul(t).sub(.025)).add(r.mul(i).add(o).exp()).mul(1/Math.PI).saturate()}),Z_=B(.04),Q_=L(1);class HT extends F0{constructor(e=!1,t=!1,i=!1,s=!1,r=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=i,this.anisotropy=s,this.transmission=r,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=B().temp("clearcoatRadiance"),this.clearcoatSpecularDirect=B().temp("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=B().temp("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=B().temp("sheenSpecularDirect"),this.sheenSpecularIndirect=B().temp("sheenSpecularIndirect")),this.iridescence===!0){const t=Un.dot(Tn).clamp();this.iridescenceFresnel=rQ({outsideIOR:L(1),eta2:HI,cosTheta1:t,thinFilmThickness:GI,baseF0:xr}),this.iridescenceF0=YZ({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=sS,i=d3.sub(sS).normalize(),s=m3;e.backdrop=tQ(s,i,Ea,tn,xr,Bg,t,Tf,Nh,Wr,Dm,WI,XI,jI,this.dispersion?$I:null),e.backdropAlpha=Jx,tn.a.mulAssign(ei(1,e.backdrop.a,Jx))}}computeMultiscattering(e,t,i){const s=Un.dot(Tn).clamp(),r=VD({roughness:Ea,dotNV:s}),a=(this.iridescenceF0?PT.mix(xr,this.iridescenceF0):xr).mul(r.x).add(i.mul(r.y)),c=r.x.add(r.y).oneMinus(),u=xr.add(xr.oneMinus().mul(.047619)),h=a.mul(u).div(c.mul(u).oneMinus());e.addAssign(a),t.addAssign(h.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:i}){const r=Un.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(r.mul(QZ({lightDirection:e}))),this.clearcoat===!0){const a=vu.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(a.mul(lC({lightDirection:e,f0:Z_,f90:Q_,roughness:zg,normalView:vu})))}i.directDiffuse.addAssign(r.mul(ph({diffuseColor:tn.rgb}))),i.directSpecular.addAssign(r.mul(lC({lightDirection:e,f0:xr,f90:1,roughness:Ea,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(ph({diffuseColor:tn})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(t.mul(gu,oQ({normal:Un,viewDir:Tn,roughness:RT}))),this.clearcoat===!0){const c=vu.dot(Tn).clamp(),u=kD({dotNV:c,specularColor:Z_,specularF90:Q_,roughness:zg});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(u))}const s=B().temp("singleScattering"),r=B().temp("multiScattering"),o=t.mul(1/Math.PI);this.computeMultiscattering(s,r,Bg);const a=s.add(r),l=tn.mul(a.r.max(a.g).max(a.b).oneMinus());i.indirectSpecular.addAssign(e.mul(s)),i.indirectSpecular.addAssign(r.mul(o)),i.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const s=Un.dot(Tn).clamp().add(e),r=Ea.mul(-16).oneMinus().negate().exp2(),o=e.sub(s.pow(r).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(o)}finish(e){const{outgoingLight:t}=e;if(this.clearcoat===!0){const i=vu.dot(Tn).clamp(),s=Ef({dotVH:i,f0:Z_,f90:Q_}),r=t.mul(Kx.mul(s).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(Kx));t.assign(r)}if(this.sheen===!0){const i=gu.r.max(gu.g).max(gu.b).mul(.157).oneMinus(),s=t.mul(i).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(s)}}}const aQ=new MI;class zD extends Bi{constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(aQ),this.setValues(e)}setupLightingModel(){return new HT}setupSpecular(){const e=ei(B(.04),tn.rgb,kg);xr.assign(e),Bg.assign(1)}setupVariants(){const e=this.metalnessNode?L(this.metalnessNode):iY;kg.assign(e);let t=this.roughnessNode?L(this.roughnessNode):nY;t=FD({roughness:t}),Ea.assign(t),this.setupSpecular(),tn.assign(Ue(tn.rgb.mul(e.oneMinus()),tn.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}di("MeshStandardNodeMaterial",zD);const lQ=new wX;class BD extends zD{constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(lQ),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?L(this.iorNode):vY;Dm.assign(e),xr.assign(ei(Er(s3(Dm.sub(1).div(Dm.add(1))).mul(eY),B(1)).mul(BN),tn.rgb,kg)),Bg.assign(ei(BN,1,kg))}setupLightingModel(){return new HT(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?L(this.clearcoatNode):rY,i=this.clearcoatRoughnessNode?L(this.clearcoatRoughnessNode):oY;Kx.assign(t),zg.assign(FD({roughness:i}))}if(this.useSheen){const t=this.sheenNode?B(this.sheenNode):cY,i=this.sheenRoughnessNode?L(this.sheenRoughnessNode):uY;gu.assign(t),RT.assign(i)}if(this.useIridescence){const t=this.iridescenceNode?L(this.iridescenceNode):dY,i=this.iridescenceIORNode?L(this.iridescenceIORNode):fY,s=this.iridescenceThicknessNode?L(this.iridescenceThicknessNode):pY;PT.assign(t),HI.assign(i),GI.assign(s)}if(this.useAnisotropy){const t=(this.anisotropyNode?Ve(this.anisotropyNode):hY).toVar();Il.assign(t.length()),St(Il.equal(0),()=>{t.assign(Ve(1,0))}).else(()=>{t.divAssign(Il),Il.assign(Il.saturate())}),Zx.assign(Il.pow2().mix(Ea.pow2(),1)),Im.assign(_u[0].mul(t.x).add(_u[1].mul(t.y))),Uu.assign(_u[1].mul(t.x).sub(_u[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?L(this.transmissionNode):mY,i=this.thicknessNode?L(this.thicknessNode):gY,s=this.attenuationDistanceNode?L(this.attenuationDistanceNode):_Y,r=this.attenuationColorNode?B(this.attenuationColorNode):yY;if(Jx.assign(t),WI.assign(i),jI.assign(s),XI.assign(r),this.useDispersion){const o=this.dispersionNode?L(this.dispersionNode):SY;$I.assign(o)}}}setupNormal(e){super.setupNormal(e);const t=this.clearcoatNormalNode?B(this.clearcoatNormalNode):aY;vu.assign(t)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}di("MeshPhysicalNodeMaterial",BD);class cQ extends HT{constructor(e,t,i,s){super(e,t,i),this.useSSS=s}direct({lightDirection:e,lightColor:t,reflectedLight:i},s,r){if(this.useSSS===!0){const o=r.material,{thicknessColorNode:a,thicknessDistortionNode:l,thicknessAmbientNode:c,thicknessAttenuationNode:u,thicknessPowerNode:h,thicknessScaleNode:d}=o,f=e.add(Un.mul(l)).normalize(),g=L(Tn.dot(f.negate()).saturate().pow(h).mul(d)),m=B(g.add(c).mul(a));i.directDiffuse.addAssign(m.mul(u.mul(t)))}super.direct({lightDirection:e,lightColor:t,reflectedLight:i},s,r)}}class uQ extends BD{constructor(e){super(e),this.thicknessColorNode=null,this.thicknessDistortionNode=L(.1),this.thicknessAmbientNode=L(0),this.thicknessAttenuationNode=L(.1),this.thicknessPowerNode=L(2),this.thicknessScaleNode=L(10)}get useSSS(){return this.thicknessColorNode!==null}setupLightingModel(){return new cQ(this.useClearcoat,this.useSheen,this.useIridescence,this.useSSS)}copy(e){return this.thicknessColorNode=e.thicknessColorNode,this.thicknessDistortionNode=e.thicknessDistortionNode,this.thicknessAmbientNode=e.thicknessAmbientNode,this.thicknessAttenuationNode=e.thicknessAttenuationNode,this.thicknessPowerNode=e.thicknessPowerNode,this.thicknessScaleNode=e.thicknessScaleNode,super.copy(e)}}di("MeshSSSNodeMaterial",uQ);const hQ=se(({normal:n,lightDirection:e,builder:t})=>{const i=n.dot(e),s=Ve(i.mul(.5).add(.5),0);if(t.material.gradientMap){const r=Lo("gradientMap","texture").context({getUV:()=>s});return B(r.r)}else{const r=s.fwidth().mul(.5);return ei(B(.7),B(1),ao(L(.7).sub(r.x),L(.7).add(r.x),s.x))}});class dQ extends F0{direct({lightDirection:e,lightColor:t,reflectedLight:i},s,r){const o=hQ({normal:Gg,lightDirection:e,builder:r}).mul(t);i.directDiffuse.addAssign(o.mul(ph({diffuseColor:tn.rgb})))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(ph({diffuseColor:tn})))}}const fQ=new AX;class pQ extends Bi{constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(fQ),this.setValues(e)}setupLightingModel(){return new dQ}}di("MeshToonNodeMaterial",pQ);const mQ=new bX;class gQ extends Bi{constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.lights=!1,this.setDefaultValues(mQ),this.setValues(e)}setupVariants(e){const t=aK;let i;e.material.matcap?i=Lo("matcap","texture").context({getUV:()=>t}):i=B(ei(.2,.8,t.y)),tn.rgb.mulAssign(i.rgb)}}di("MeshMatcapNodeMaterial",gQ);const vQ=new SI;class _Q extends Bi{constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.normals=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(vQ),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}di("PointsNodeMaterial",_Q);const yQ=new SX;class xQ extends Bi{constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this.normals=!1,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(yQ),this.setValues(e)}setupPosition({object:e,context:t}){const{positionNode:i,rotationNode:s,scaleNode:r}=this,o=xi;let a=fc.mul(B(i||0)),l=Ve(Tf[0].xyz.length(),Tf[1].xyz.length());r!==null&&(l=l.mul(r));let c=o.xy;e.center&&e.center.isVector2===!0&&(c=c.sub(Lt(e.center).sub(.5))),c=c.mul(l);const u=L(s||lY),h=c.rotate(u);a=Ue(a.xy.add(h),a.zw);const d=Wr.mul(a);return t.vertex=o,d}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}}di("SpriteNodeMaterial",xQ);class SQ extends F0{constructor(){super(),this.shadowNode=L(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){tn.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(tn.rgb)}}const TQ=new MX;class MQ extends Bi{constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(TQ),this.setValues(e)}setupLightingModel(){return new SQ}}di("ShadowNodeMaterial",MQ);class wQ extends Bi{constructor(e={}){super(),this.normals=!1,this.lights=!1,this.isVolumeNodeMaterial=!0,this.testNode=null,this.setValues(e)}setup(e){const t=MK(this.map,null,0),i=se(({orig:s,dir:r})=>{const o=B(-.5),a=B(.5),l=r.reciprocal(),c=o.sub(s).mul(l),u=a.sub(s).mul(l),h=Er(c,u),d=gi(c,u),f=gi(h.x,gi(h.y,h.z)),g=Er(d.x,Er(d.y,d.z));return Ve(f,g)});this.fragmentNode=se(()=>{const s=Wn(B(qq.mul(Ue(d3,1)))),o=Wn(Xi.sub(s)).normalize(),a=Sn("vec2","bounds").assign(i({orig:s,dir:o}));a.x.greaterThan(a.y).discard(),a.assign(Ve(gi(a.x,0),a.y));const l=Sn("vec3","p").assign(s.add(a.x.mul(o))),c=Sn("vec3","inc").assign(B(o.abs().reciprocal())),u=Sn("float","delta").assign(Er(c.x,Er(c.y,c.z)));u.divAssign(Lo("steps","float"));const h=Sn("vec4","ac").assign(Ue(Lo("base","color"),0));return Kt({type:"float",start:a.x,end:a.y,update:"+= delta"},()=>{const d=Sn("float","d").assign(t.uv(l.add(.5)).r);this.testNode!==null?this.testNode({map:t,mapValue:d,probe:l,finalColor:h}).append():(h.a.assign(1),N3()),l.addAssign(o.mul(u))}),h.a.equal(0).discard(),Ue(h)})(),super.setup(e)}}di("VolumeNodeMaterial",wQ);const zu=se(([n,e,t])=>{const i=L(t).toVar(),s=L(e).toVar(),r=dc(n).toVar();return Is(r,s,i)}),Af=se(([n,e])=>{const t=dc(e).toVar(),i=L(n).toVar();return Is(t,i.negate(),i)}),bn=se(([n])=>{const e=L(n).toVar();return O(wh(e))}),hn=se(([n,e])=>{const t=L(n).toVar();return e.assign(bn(t)),t.sub(L(e))}),HD=se(([n,e,t,i,s,r])=>{const o=L(r).toVar(),a=L(s).toVar(),l=L(i).toVar(),c=L(t).toVar(),u=L(e).toVar(),h=L(n).toVar(),d=L(Vn(1,a)).toVar();return Vn(1,o).mul(h.mul(d).add(u.mul(a))).add(o.mul(c.mul(d).add(l.mul(a))))}),GD=se(([n,e,t,i,s,r])=>{const o=L(r).toVar(),a=L(s).toVar(),l=B(i).toVar(),c=B(t).toVar(),u=B(e).toVar(),h=B(n).toVar(),d=L(Vn(1,a)).toVar();return Vn(1,o).mul(h.mul(d).add(u.mul(a))).add(o.mul(c.mul(d).add(l.mul(a))))}),WD=hr([HD,GD]),jD=se(([n,e,t,i,s,r,o,a,l,c,u])=>{const h=L(u).toVar(),d=L(c).toVar(),f=L(l).toVar(),g=L(a).toVar(),m=L(o).toVar(),v=L(r).toVar(),p=L(s).toVar(),y=L(i).toVar(),_=L(t).toVar(),x=L(e).toVar(),E=L(n).toVar(),w=L(Vn(1,f)).toVar(),T=L(Vn(1,d)).toVar();return L(Vn(1,h)).toVar().mul(T.mul(E.mul(w).add(x.mul(f))).add(d.mul(_.mul(w).add(y.mul(f))))).add(h.mul(T.mul(p.mul(w).add(v.mul(f))).add(d.mul(m.mul(w).add(g.mul(f))))))}),XD=se(([n,e,t,i,s,r,o,a,l,c,u])=>{const h=L(u).toVar(),d=L(c).toVar(),f=L(l).toVar(),g=B(a).toVar(),m=B(o).toVar(),v=B(r).toVar(),p=B(s).toVar(),y=B(i).toVar(),_=B(t).toVar(),x=B(e).toVar(),E=B(n).toVar(),w=L(Vn(1,f)).toVar(),T=L(Vn(1,d)).toVar();return L(Vn(1,h)).toVar().mul(T.mul(E.mul(w).add(x.mul(f))).add(d.mul(_.mul(w).add(y.mul(f))))).add(h.mul(T.mul(p.mul(w).add(v.mul(f))).add(d.mul(m.mul(w).add(g.mul(f))))))}),$D=hr([jD,XD]),qD=se(([n,e,t])=>{const i=L(t).toVar(),s=L(e).toVar(),r=Ae(n).toVar(),o=Ae(r.bitAnd(Ae(7))).toVar(),a=L(zu(o.lessThan(Ae(4)),s,i)).toVar(),l=L(Nt(2,zu(o.lessThan(Ae(4)),i,s))).toVar();return Af(a,dc(o.bitAnd(Ae(1)))).add(Af(l,dc(o.bitAnd(Ae(2)))))}),YD=se(([n,e,t,i])=>{const s=L(i).toVar(),r=L(t).toVar(),o=L(e).toVar(),a=Ae(n).toVar(),l=Ae(a.bitAnd(Ae(15))).toVar(),c=L(zu(l.lessThan(Ae(8)),o,r)).toVar(),u=L(zu(l.lessThan(Ae(4)),r,zu(l.equal(Ae(12)).or(l.equal(Ae(14))),o,s))).toVar();return Af(c,dc(l.bitAnd(Ae(1)))).add(Af(u,dc(l.bitAnd(Ae(2)))))}),ai=hr([qD,YD]),KD=se(([n,e,t])=>{const i=L(t).toVar(),s=L(e).toVar(),r=$f(n).toVar();return B(ai(r.x,s,i),ai(r.y,s,i),ai(r.z,s,i))}),ZD=se(([n,e,t,i])=>{const s=L(i).toVar(),r=L(t).toVar(),o=L(e).toVar(),a=$f(n).toVar();return B(ai(a.x,o,r,s),ai(a.y,o,r,s),ai(a.z,o,r,s))}),Ys=hr([KD,ZD]),QD=se(([n])=>{const e=L(n).toVar();return Nt(.6616,e)}),JD=se(([n])=>{const e=L(n).toVar();return Nt(.982,e)}),eO=se(([n])=>{const e=B(n).toVar();return Nt(.6616,e)}),tO=hr([QD,eO]),nO=se(([n])=>{const e=B(n).toVar();return Nt(.982,e)}),iO=hr([JD,nO]),rs=se(([n,e])=>{const t=O(e).toVar(),i=Ae(n).toVar();return i.shiftLeft(t).bitOr(i.shiftRight(O(32).sub(t)))}),sO=se(([n,e,t])=>{n.subAssign(t),n.bitXorAssign(rs(t,O(4))),t.addAssign(e),e.subAssign(n),e.bitXorAssign(rs(n,O(6))),n.addAssign(t),t.subAssign(e),t.bitXorAssign(rs(e,O(8))),e.addAssign(n),n.subAssign(t),n.bitXorAssign(rs(t,O(16))),t.addAssign(e),e.subAssign(n),e.bitXorAssign(rs(n,O(19))),n.addAssign(t),t.subAssign(e),t.bitXorAssign(rs(e,O(4))),e.addAssign(n)}),bh=se(([n,e,t])=>{const i=Ae(t).toVar(),s=Ae(e).toVar(),r=Ae(n).toVar();return i.bitXorAssign(s),i.subAssign(rs(s,O(14))),r.bitXorAssign(i),r.subAssign(rs(i,O(11))),s.bitXorAssign(r),s.subAssign(rs(r,O(25))),i.bitXorAssign(s),i.subAssign(rs(s,O(16))),r.bitXorAssign(i),r.subAssign(rs(i,O(4))),s.bitXorAssign(r),s.subAssign(rs(r,O(14))),i.bitXorAssign(s),i.subAssign(rs(s,O(24))),i}),Si=se(([n])=>{const e=Ae(n).toVar();return L(e).div(L(Ae(O(4294967295))))}),Pr=se(([n])=>{const e=L(n).toVar();return e.mul(e.mul(e.mul(e.mul(e.mul(6).sub(15)).add(10))))}),rO=se(([n])=>{const e=O(n).toVar(),t=Ae(Ae(1)).toVar(),i=Ae(Ae(O(3735928559)).add(t.shiftLeft(Ae(2)).add(Ae(13)))).toVar();return bh(i.add(Ae(e)),i,i)}),oO=se(([n,e])=>{const t=O(e).toVar(),i=O(n).toVar(),s=Ae(Ae(2)).toVar(),r=Ae().toVar(),o=Ae().toVar(),a=Ae().toVar();return r.assign(o.assign(a.assign(Ae(O(3735928559)).add(s.shiftLeft(Ae(2)).add(Ae(13)))))),r.addAssign(Ae(i)),o.addAssign(Ae(t)),bh(r,o,a)}),aO=se(([n,e,t])=>{const i=O(t).toVar(),s=O(e).toVar(),r=O(n).toVar(),o=Ae(Ae(3)).toVar(),a=Ae().toVar(),l=Ae().toVar(),c=Ae().toVar();return a.assign(l.assign(c.assign(Ae(O(3735928559)).add(o.shiftLeft(Ae(2)).add(Ae(13)))))),a.addAssign(Ae(r)),l.addAssign(Ae(s)),c.addAssign(Ae(i)),bh(a,l,c)}),lO=se(([n,e,t,i])=>{const s=O(i).toVar(),r=O(t).toVar(),o=O(e).toVar(),a=O(n).toVar(),l=Ae(Ae(4)).toVar(),c=Ae().toVar(),u=Ae().toVar(),h=Ae().toVar();return c.assign(u.assign(h.assign(Ae(O(3735928559)).add(l.shiftLeft(Ae(2)).add(Ae(13)))))),c.addAssign(Ae(a)),u.addAssign(Ae(o)),h.addAssign(Ae(r)),sO(c,u,h),c.addAssign(Ae(s)),bh(c,u,h)}),cO=se(([n,e,t,i,s])=>{const r=O(s).toVar(),o=O(i).toVar(),a=O(t).toVar(),l=O(e).toVar(),c=O(n).toVar(),u=Ae(Ae(5)).toVar(),h=Ae().toVar(),d=Ae().toVar(),f=Ae().toVar();return h.assign(d.assign(f.assign(Ae(O(3735928559)).add(u.shiftLeft(Ae(2)).add(Ae(13)))))),h.addAssign(Ae(c)),d.addAssign(Ae(l)),f.addAssign(Ae(a)),sO(h,d,f),h.addAssign(Ae(o)),d.addAssign(Ae(r)),bh(h,d,f)}),kt=hr([rO,oO,aO,lO,cO]),uO=se(([n,e])=>{const t=O(e).toVar(),i=O(n).toVar(),s=Ae(kt(i,t)).toVar(),r=$f().toVar();return r.x.assign(s.bitAnd(O(255))),r.y.assign(s.shiftRight(O(8)).bitAnd(O(255))),r.z.assign(s.shiftRight(O(16)).bitAnd(O(255))),r}),hO=se(([n,e,t])=>{const i=O(t).toVar(),s=O(e).toVar(),r=O(n).toVar(),o=Ae(kt(r,s,i)).toVar(),a=$f().toVar();return a.x.assign(o.bitAnd(O(255))),a.y.assign(o.shiftRight(O(8)).bitAnd(O(255))),a.z.assign(o.shiftRight(O(16)).bitAnd(O(255))),a}),Ks=hr([uO,hO]),dO=se(([n])=>{const e=Ve(n).toVar(),t=O().toVar(),i=O().toVar(),s=L(hn(e.x,t)).toVar(),r=L(hn(e.y,i)).toVar(),o=L(Pr(s)).toVar(),a=L(Pr(r)).toVar(),l=L(WD(ai(kt(t,i),s,r),ai(kt(t.add(O(1)),i),s.sub(1),r),ai(kt(t,i.add(O(1))),s,r.sub(1)),ai(kt(t.add(O(1)),i.add(O(1))),s.sub(1),r.sub(1)),o,a)).toVar();return tO(l)}),fO=se(([n])=>{const e=B(n).toVar(),t=O().toVar(),i=O().toVar(),s=O().toVar(),r=L(hn(e.x,t)).toVar(),o=L(hn(e.y,i)).toVar(),a=L(hn(e.z,s)).toVar(),l=L(Pr(r)).toVar(),c=L(Pr(o)).toVar(),u=L(Pr(a)).toVar(),h=L($D(ai(kt(t,i,s),r,o,a),ai(kt(t.add(O(1)),i,s),r.sub(1),o,a),ai(kt(t,i.add(O(1)),s),r,o.sub(1),a),ai(kt(t.add(O(1)),i.add(O(1)),s),r.sub(1),o.sub(1),a),ai(kt(t,i,s.add(O(1))),r,o,a.sub(1)),ai(kt(t.add(O(1)),i,s.add(O(1))),r.sub(1),o,a.sub(1)),ai(kt(t,i.add(O(1)),s.add(O(1))),r,o.sub(1),a.sub(1)),ai(kt(t.add(O(1)),i.add(O(1)),s.add(O(1))),r.sub(1),o.sub(1),a.sub(1)),l,c,u)).toVar();return iO(h)}),EQ=hr([dO,fO]),pO=se(([n])=>{const e=Ve(n).toVar(),t=O().toVar(),i=O().toVar(),s=L(hn(e.x,t)).toVar(),r=L(hn(e.y,i)).toVar(),o=L(Pr(s)).toVar(),a=L(Pr(r)).toVar(),l=B(WD(Ys(Ks(t,i),s,r),Ys(Ks(t.add(O(1)),i),s.sub(1),r),Ys(Ks(t,i.add(O(1))),s,r.sub(1)),Ys(Ks(t.add(O(1)),i.add(O(1))),s.sub(1),r.sub(1)),o,a)).toVar();return tO(l)}),mO=se(([n])=>{const e=B(n).toVar(),t=O().toVar(),i=O().toVar(),s=O().toVar(),r=L(hn(e.x,t)).toVar(),o=L(hn(e.y,i)).toVar(),a=L(hn(e.z,s)).toVar(),l=L(Pr(r)).toVar(),c=L(Pr(o)).toVar(),u=L(Pr(a)).toVar(),h=B($D(Ys(Ks(t,i,s),r,o,a),Ys(Ks(t.add(O(1)),i,s),r.sub(1),o,a),Ys(Ks(t,i.add(O(1)),s),r,o.sub(1),a),Ys(Ks(t.add(O(1)),i.add(O(1)),s),r.sub(1),o.sub(1),a),Ys(Ks(t,i,s.add(O(1))),r,o,a.sub(1)),Ys(Ks(t.add(O(1)),i,s.add(O(1))),r.sub(1),o,a.sub(1)),Ys(Ks(t,i.add(O(1)),s.add(O(1))),r,o.sub(1),a.sub(1)),Ys(Ks(t.add(O(1)),i.add(O(1)),s.add(O(1))),r.sub(1),o.sub(1),a.sub(1)),l,c,u)).toVar();return iO(h)}),AQ=hr([pO,mO]),NQ=se(([n])=>{const e=L(n).toVar(),t=O(bn(e)).toVar();return Si(kt(t))}),CQ=se(([n])=>{const e=Ve(n).toVar(),t=O(bn(e.x)).toVar(),i=O(bn(e.y)).toVar();return Si(kt(t,i))}),bQ=se(([n])=>{const e=B(n).toVar(),t=O(bn(e.x)).toVar(),i=O(bn(e.y)).toVar(),s=O(bn(e.z)).toVar();return Si(kt(t,i,s))}),RQ=se(([n])=>{const e=Ue(n).toVar(),t=O(bn(e.x)).toVar(),i=O(bn(e.y)).toVar(),s=O(bn(e.z)).toVar(),r=O(bn(e.w)).toVar();return Si(kt(t,i,s,r))}),gO=se(([n])=>{const e=L(n).toVar(),t=O(bn(e)).toVar();return B(Si(kt(t,O(0))),Si(kt(t,O(1))),Si(kt(t,O(2))))}),vO=se(([n])=>{const e=Ve(n).toVar(),t=O(bn(e.x)).toVar(),i=O(bn(e.y)).toVar();return B(Si(kt(t,i,O(0))),Si(kt(t,i,O(1))),Si(kt(t,i,O(2))))}),_O=se(([n])=>{const e=B(n).toVar(),t=O(bn(e.x)).toVar(),i=O(bn(e.y)).toVar(),s=O(bn(e.z)).toVar();return B(Si(kt(t,i,s,O(0))),Si(kt(t,i,s,O(1))),Si(kt(t,i,s,O(2))))}),yO=se(([n])=>{const e=Ue(n).toVar(),t=O(bn(e.x)).toVar(),i=O(bn(e.y)).toVar(),s=O(bn(e.z)).toVar(),r=O(bn(e.w)).toVar();return B(Si(kt(t,i,s,r,O(0))),Si(kt(t,i,s,r,O(1))),Si(kt(t,i,s,r,O(2))))}),xO=hr([gO,vO,_O,yO]),$g=se(([n,e,t,i])=>{const s=L(i).toVar(),r=L(t).toVar(),o=O(e).toVar(),a=B(n).toVar(),l=L(0).toVar(),c=L(1).toVar();return Kt({start:O(0),end:o},({i:u})=>{l.addAssign(c.mul(EQ(a))),c.mulAssign(s),a.mulAssign(r)}),l}),SO=se(([n,e,t,i])=>{const s=L(i).toVar(),r=L(t).toVar(),o=O(e).toVar(),a=B(n).toVar(),l=B(0).toVar(),c=L(1).toVar();return Kt({start:O(0),end:o},({i:u})=>{l.addAssign(c.mul(AQ(a))),c.mulAssign(s),a.mulAssign(r)}),l}),PQ=se(([n,e,t,i])=>{const s=L(i).toVar(),r=L(t).toVar(),o=O(e).toVar(),a=B(n).toVar();return Ve($g(a,o,r,s),$g(a.add(B(O(19),O(193),O(17))),o,r,s))}),LQ=se(([n,e,t,i])=>{const s=L(i).toVar(),r=L(t).toVar(),o=O(e).toVar(),a=B(n).toVar(),l=B(SO(a,o,r,s)).toVar(),c=L($g(a.add(B(O(19),O(193),O(17))),o,r,s)).toVar();return Ue(l,c)}),TO=se(([n,e,t,i,s,r,o])=>{const a=O(o).toVar(),l=L(r).toVar(),c=O(s).toVar(),u=O(i).toVar(),h=O(t).toVar(),d=O(e).toVar(),f=Ve(n).toVar(),g=B(xO(Ve(d.add(u),h.add(c)))).toVar(),m=Ve(g.x,g.y).toVar();m.subAssign(.5),m.mulAssign(l),m.addAssign(.5);const v=Ve(Ve(L(d),L(h)).add(m)).toVar(),p=Ve(v.sub(f)).toVar();return St(a.equal(O(2)),()=>Hn(p.x).add(Hn(p.y))),St(a.equal(O(3)),()=>gi(Hn(p.x),Hn(p.y))),Eh(p,p)}),MO=se(([n,e,t,i,s,r,o,a,l])=>{const c=O(l).toVar(),u=L(a).toVar(),h=O(o).toVar(),d=O(r).toVar(),f=O(s).toVar(),g=O(i).toVar(),m=O(t).toVar(),v=O(e).toVar(),p=B(n).toVar(),y=B(xO(B(v.add(f),m.add(d),g.add(h)))).toVar();y.subAssign(.5),y.mulAssign(u),y.addAssign(.5);const _=B(B(L(v),L(m),L(g)).add(y)).toVar(),x=B(_.sub(p)).toVar();return St(c.equal(O(2)),()=>Hn(x.x).add(Hn(x.y).add(Hn(x.z)))),St(c.equal(O(3)),()=>gi(gi(Hn(x.x),Hn(x.y)),Hn(x.z))),Eh(x,x)}),Rh=hr([TO,MO]),IQ=se(([n,e,t])=>{const i=O(t).toVar(),s=L(e).toVar(),r=Ve(n).toVar(),o=O().toVar(),a=O().toVar(),l=Ve(hn(r.x,o),hn(r.y,a)).toVar(),c=L(1e6).toVar();return Kt({start:-1,end:O(1),name:"x",condition:"<="},({x:u})=>{Kt({start:-1,end:O(1),name:"y",condition:"<="},({y:h})=>{const d=L(Rh(l,u,h,o,a,s,i)).toVar();c.assign(Er(c,d))})}),St(i.equal(O(0)),()=>{c.assign(Mc(c))}),c}),DQ=se(([n,e,t])=>{const i=O(t).toVar(),s=L(e).toVar(),r=Ve(n).toVar(),o=O().toVar(),a=O().toVar(),l=Ve(hn(r.x,o),hn(r.y,a)).toVar(),c=Ve(1e6,1e6).toVar();return Kt({start:-1,end:O(1),name:"x",condition:"<="},({x:u})=>{Kt({start:-1,end:O(1),name:"y",condition:"<="},({y:h})=>{const d=L(Rh(l,u,h,o,a,s,i)).toVar();St(d.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(d)}).elseif(d.lessThan(c.y),()=>{c.y.assign(d)})})}),St(i.equal(O(0)),()=>{c.assign(Mc(c))}),c}),OQ=se(([n,e,t])=>{const i=O(t).toVar(),s=L(e).toVar(),r=Ve(n).toVar(),o=O().toVar(),a=O().toVar(),l=Ve(hn(r.x,o),hn(r.y,a)).toVar(),c=B(1e6,1e6,1e6).toVar();return Kt({start:-1,end:O(1),name:"x",condition:"<="},({x:u})=>{Kt({start:-1,end:O(1),name:"y",condition:"<="},({y:h})=>{const d=L(Rh(l,u,h,o,a,s,i)).toVar();St(d.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(d)}).elseif(d.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(d)}).elseif(d.lessThan(c.z),()=>{c.z.assign(d)})})}),St(i.equal(O(0)),()=>{c.assign(Mc(c))}),c}),UQ=se(([n,e,t])=>{const i=O(t).toVar(),s=L(e).toVar(),r=B(n).toVar(),o=O().toVar(),a=O().toVar(),l=O().toVar(),c=B(hn(r.x,o),hn(r.y,a),hn(r.z,l)).toVar(),u=L(1e6).toVar();return Kt({start:-1,end:O(1),name:"x",condition:"<="},({x:h})=>{Kt({start:-1,end:O(1),name:"y",condition:"<="},({y:d})=>{Kt({start:-1,end:O(1),name:"z",condition:"<="},({z:f})=>{const g=L(Rh(c,h,d,f,o,a,l,s,i)).toVar();u.assign(Er(u,g))})})}),St(i.equal(O(0)),()=>{u.assign(Mc(u))}),u}),FQ=se(([n,e,t])=>{const i=O(t).toVar(),s=L(e).toVar(),r=B(n).toVar(),o=O().toVar(),a=O().toVar(),l=O().toVar(),c=B(hn(r.x,o),hn(r.y,a),hn(r.z,l)).toVar(),u=Ve(1e6,1e6).toVar();return Kt({start:-1,end:O(1),name:"x",condition:"<="},({x:h})=>{Kt({start:-1,end:O(1),name:"y",condition:"<="},({y:d})=>{Kt({start:-1,end:O(1),name:"z",condition:"<="},({z:f})=>{const g=L(Rh(c,h,d,f,o,a,l,s,i)).toVar();St(g.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(g)}).elseif(g.lessThan(u.y),()=>{u.y.assign(g)})})})}),St(i.equal(O(0)),()=>{u.assign(Mc(u))}),u}),VQ=se(([n,e,t])=>{const i=O(t).toVar(),s=L(e).toVar(),r=B(n).toVar(),o=O().toVar(),a=O().toVar(),l=O().toVar(),c=B(hn(r.x,o),hn(r.y,a),hn(r.z,l)).toVar(),u=B(1e6,1e6,1e6).toVar();return Kt({start:-1,end:O(1),name:"x",condition:"<="},({x:h})=>{Kt({start:-1,end:O(1),name:"y",condition:"<="},({y:d})=>{Kt({start:-1,end:O(1),name:"z",condition:"<="},({z:f})=>{const g=L(Rh(c,h,d,f,o,a,l,s,i)).toVar();St(g.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(g)}).elseif(g.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(g)}).elseif(g.lessThan(u.z),()=>{u.z.assign(g)})})})}),St(i.equal(O(0)),()=>{u.assign(Mc(u))}),u});zu.setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]});Af.setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]});bn.setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]});HD.setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]});GD.setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]});jD.setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]});XD.setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]});qD.setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]});YD.setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]});KD.setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]});ZD.setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]});QD.setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]});JD.setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]});eO.setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]});nO.setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]});rs.setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]});bh.setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]});Si.setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]});Pr.setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]});rO.setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]});oO.setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]});aO.setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]});lO.setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]});cO.setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]});uO.setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]});hO.setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]});dO.setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]});fO.setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]});pO.setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]});mO.setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]});NQ.setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]});CQ.setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]});bQ.setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]});RQ.setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]});gO.setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]});vO.setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]});_O.setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]});yO.setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]});$g.setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});SO.setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});PQ.setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});LQ.setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});TO.setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});MO.setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});IQ.setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});DQ.setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});OQ.setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});UQ.setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});FQ.setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});VQ.setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});const kQ=se(([n])=>{const e=B(n).toVar(),t=L(e.x).toVar(),i=L(e.y).toVar(),s=L(e.z).toVar();St(i.lessThan(1e-4),()=>B(s,s,s)).else(()=>{t.assign(Nt(6,t.sub(wh(t))));const r=O(n3(t)).toVar(),o=L(t.sub(L(r))).toVar(),a=L(s.mul(Vn(1,i))).toVar(),l=L(s.mul(Vn(1,i.mul(o)))).toVar(),c=L(s.mul(Vn(1,i.mul(Vn(1,o))))).toVar();return St(r.equal(O(0)),()=>B(s,c,a)).elseif(r.equal(O(1)),()=>B(l,s,a)).elseif(r.equal(O(2)),()=>B(a,s,c)).elseif(r.equal(O(3)),()=>B(a,l,s)).elseif(r.equal(O(4)),()=>B(c,a,s)),B(s,a,l)})}),zQ=se(([n])=>{const e=B(n).toVar(),t=L(e.x).toVar(),i=L(e.y).toVar(),s=L(e.z).toVar(),r=L(Er(t,Er(i,s))).toVar(),o=L(gi(t,gi(i,s))).toVar(),a=L(o.sub(r)).toVar(),l=L().toVar(),c=L().toVar(),u=L().toVar();return u.assign(o),St(o.greaterThan(0),()=>{c.assign(a.div(o))}).else(()=>{c.assign(0)}),St(c.lessThanEqual(0),()=>{l.assign(0)}).else(()=>{St(t.greaterThanEqual(o),()=>{l.assign(i.sub(s).div(a))}).elseif(i.greaterThanEqual(o),()=>{l.assign(Bs(2,s.sub(t).div(a)))}).else(()=>{l.assign(Bs(4,t.sub(i).div(a)))}),l.mulAssign(1/6),St(l.lessThan(0),()=>{l.addAssign(1)})}),B(l,c,u)});kQ.setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]});zQ.setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]});const BQ=se(([n])=>{const e=B(n).toVar(),t=DI(KI(e,B(.04045))).toVar(),i=B(e.div(12.92)).toVar(),s=B(Jr(gi(e.add(B(.055)),B(0)).div(1.055),B(2.4))).toVar();return ei(i,s,t)});BQ.setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]});function HQ(){const n=z.useRef(null),e=z.useRef(null),t=z.useRef(null);let i=null,s=0,r=0;const o=.08,a=.01,l=d=>{const{movementX:f,movementY:g}=d;s+=f*a,r+=g*a,i===null&&(i=requestAnimationFrame(u))},c=(d,f,g)=>d*(1-g)+f*g,u=()=>{s=c(s,0,o),r=c(r,0,o),zt.set(n.current,{x:`+=${s}`,y:`+=${r}`}),zt.set(e.current,{x:`+=${s*.5}`,y:`+=${r*.5}`}),zt.set(t.current,{x:`+=${s*.25}`,y:`+=${r*.25}`}),Math.abs(s)<.01&&(s=0),Math.abs(r)<.01&&(r=0),s!==0||r!==0?requestAnimationFrame(u):(cancelAnimationFrame(i),i=null)},h=[[{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"left-[2%] top-[55%]"},{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"right-[5%] bottom-[10%]"}],[{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"left-[45%] bottom-[72%]"},{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"left-[25%] bottom-[10%]"}],[{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"top-[5%] left-[5%]"},{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"top-[55%] h-[30vh] left-[55%]"},{img:"https://images.ctfassets.net/8cd2csgvqd3m/6F2Z5OYOKYviWvTue3rKIX/be9ab3fc32661a9bd7619e651d164baf/britta_square.jpg?q=90&fm=webp&w=480&h=480&fit=fill",title:"Craft Stories",style:"top-[10%] right-[10%]"}]];return b.jsxs("div",{onMouseMove:d=>l(d),className:"main h-[110vh] w-screen bg-black overflow-hidden relative",children:[h.map((d,f)=>b.jsx("div",{ref:f===1?n:f===2?e:t,className:`plane w-full h-full absolute filter ${f===1?" brightness-[0.7]":f===2?"brightness-[0.6]":"brightness-[0.5]"}`,children:d.map((g,m)=>b.jsxs("div",{className:`w-[15vw] absolute h-[35vh] ${g.style}`,children:[b.jsx("img",{src:g.img,className:"h-full w-full object-cover ",alt:"img"},m),b.jsx("h3",{className:"text-white uppercase text-sm font-primary pt-1",children:g.title})]}))},f)),b.jsxs("div",{className:"title absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center text-white",children:[b.jsx(Ya,{text:"with bang & olufsen",className:"text-[1rem]  uppercase font-primary"}),b.jsx(Ya,{text:"Explore the World",className:"text-[3rem] pt-2 uppercase font-primary"})]})]})}const GQ=()=>{const n=[{images:"https://images.ctfassets.net/8cd2csgvqd3m/46fxbLXbZMYSMbtkrs0WX4/30606b77f33d1320dfecbffd9ec984ad/audi-logo.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[3vh] left-[2vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/3XD07s6EWXkzhkgXcdJWfN/b653732d2171647a8c67aa88ea4648bf/bentley-logo.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[3vh] left-[15vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/ToOivqV77f4doYGvG2aQV/c16bb92bb41cb0bcb4a7c4b05cc87c96/fordy.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[50vh] left-[2vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/6ZSDqxf74jrz600SNYzw0P/3793df61b065656eed37b1331bcb6e6f/lamborghini-logo.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[70vh] left-[15vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/1Amb7WnezX2sAgB6l2hETD/1f45b5f34cfe10f72f46ac11f92d6439/gennnnny.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[40vh] left-[27.5vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/NCvfsNwWUXzizCpydEhbX/0c664247c5b5b3db389448fee1dfa7da/Acura-logo.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[30vh] left-[50vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/s0Lmog6Sp7ou3FxT33Y2K/5b2a73af0c8fcb0bffd17b160f0c92c5/hp-logo-transparrent.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[15vh] left-[80vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/2trdAvlPeWxd5Rm5QjUVkh/d8f25dabdb32f47076684c80786451e8/xbox-logo.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[55vh] left-[80vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/3fodKrxviRd0kFVUruiqhi/a299dcac2a94641b9691c860b5599c42/Cisco_Logo_no_TM_Black_transparrent.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[55vh] left-[67vw]"},{images:"https://images.ctfassets.net/8cd2csgvqd3m/3SYrufaBisX57vBgJAvZjp/17cd273851bdc396eed22ccca716c8ec/Sagecome-Company-Logo.png6.png?fm=webp&q=85&w=340&h=340&fit=fill",style:"top-[70vh] left-[54vw]"}],e=z.useRef();return Sc(()=>{zt.from(".box",{height:"0vh",scrollTrigger:{trigger:e.current,start:"top 20%",end:"top center"}})}),b.jsxs("div",{className:"relative w-full ",children:[b.jsx(Ya,{text:"WE CALL THEM PARTNERS",textSize:"text-[6rem]",className:"font-Decorative text-white"}),b.jsx("div",{ref:e,className:"relative mt-[10vh]  flex  flex-wrap justify-center  h-screen w-full  gap-5 overflow-hidden pb-2",children:n.map((t,i)=>b.jsx("div",{className:`box   md:absolute md:h-[25vh] md:w-[25vh] h-[18vh] w-[40%]  bg-[#F0F0F0] ${t.style}  overflow-hidden`,children:b.jsx("img",{src:t.images,alt:t.title})},i))})]})},fC=({customindex:n})=>(Sc(()=>{zt.registerPlugin(ft),zt.to(`.border-line${n}`,{width:"50%",scrollTrigger:{trigger:`.border-line${n}`,start:"top 55%",end:"top 40%"}})}),b.jsx("div",{children:b.jsxs("div",{className:"h-[1px] w-[96%] mt-10 flex  mx-auto relative",children:[b.jsx("div",{className:`${`border-line${n}`} absolute left-1/2 top-0 w-[0] h-full bg-zinc-500`}),b.jsx("div",{className:`${`border-line${n}`} absolute right-1/2 top-0 w-[0] h-full bg-zinc-500`})]})}));us.memo(()=>{const n=z.useMemo(()=>({root:null,rootMargin:"0px",threshold:.1}),[]),e=z.useCallback((i,s)=>{i.forEach(r=>{if(r.isIntersecting){const o=r.target,a=o.querySelector(".img"),l=o.querySelector(".service-info h1");ft.create({trigger:o,start:"bottom bottom",end:"top top",scrub:5,onUpdate:c=>{const h=40+60*c.progress;zt.to(a,{width:`${h}%`,duration:.1,ease:"none"})}}),ft.create({trigger:o,start:"top bottom",end:"top top",scrub:5,onUpdate:c=>{const u=c.progress,h=150+310*u;zt.to(o,{height:`${h}px`,duration:.1,ease:"none"});const d=window.innerWidth;let f;d<640||d<1024?f=1+1*u:d<1280?f=1+1.5*u:d<1536?f=1+2*u:f=1.5+2*u,zt.to(l,{fontSize:`${f}rem`,duration:.1})}}),s.unobserve(o)}})},[]);z.useRef(),z.useEffect(()=>{zt.registerPlugin(ft);const i=document.querySelectorAll(".service"),s=new IntersectionObserver(e,n);return i.forEach(r=>s.observe(r)),()=>{s.disconnect(),ft.getAll().forEach(r=>r.kill())}},[e,n]);const t=z.useMemo(()=>[{category:"Art",title:"FINN NØRGAARD KLINT, POLISHING SPECIALIST",description:"The work has become more refined,” says polishing specialist Finn Nørgaard Klint. As one of our expert craftspeople, Finn’s expertise ensures the high level of finish that makes Bang & Olufsen products so tactile.",image:"https://images.ctfassets.net/8cd2csgvqd3m/3w6ZarDfWt7iWEpPctQK1i/72c9662844c69c9a8dc7f30212eb3297/Finn-2.jpg?q=90&fm=webp&w=1440&h=808&fit=fill"},{category:"Music",title:"LIVE FROM THE 10TH ARRONDISSEMENT",description:"Music in its wildest form. Crafted on the spot. Right in front of you Settle in with Bang & Olufsen and Jammcard to enjoy an exclusive improv concert at an intimate venue in Paris.",image:"https://images.ctfassets.net/8cd2csgvqd3m/44CfWwSWDTAzPQrIGSOngA/6c10371bfdae67f1f5067f50645ac44d/JJ_Hero.jpg?q=90&fm=webp&w=1440&h=808&fit=fill"},{category:"Culture",title:"THE SOUND OF UNSTOPPABLE",description:"Bang & Olufsen and running brand On have joined forces to create a limited edition of Beoplay E8 Sport wireless earphones, tapping into the powerful link between music and running.",image:"https://images.ctfassets.net/8cd2csgvqd3m/dQQRRyR2jKUb4QK1lqyrA/c0ea139ff0f0b4c147ca48bfed1565d8/On_story_landscape.jpg?q=90&fm=webp&w=1440&h=808&fit=fill"},{category:"Living",title:"Make Working from Home a Pleasure",description:"Working from home has moved from an occasional occurrence to an everyday expectation. Embrace the potential for flexibility and reduce challenges by creating a home office space that supports and nourishes you. ",image:"https://images.ctfassets.net/8cd2csgvqd3m/0S2AMQsUvECSym8Vxy5XZ/b82d4a1c0f6d5cc51f31836673e87f3d/Hero_Hero.jpg?q=90&fm=webp&w=1178&h=662&fit=fill"},{category:"Timelessness",title:"Crafting Memories",description:"Over the past 95 years, we have built products that embody the principles of iconic, classic and timeless design, craftsmanship and tech.",image:"https://images.ctfassets.net/8cd2csgvqd3m/491YJNhkZ60sVK96uDCrlS/1009defbb0bee787645fe9b0ccf609e2/Natale_1.jpg?q=90&fm=webp&w=1440&h=808&fit=fill"}],[]);return b.jsxs("div",{className:"bg-[#Fff] py-[5vh]",children:[b.jsx(Ya,{text:"World of b & o",textSize:"text-[10rem] max-sm:text-[3rem] max-md:tracking-tighter "}),b.jsx(fC,{customindex:1}),b.jsx("div",{className:"w-full h-full p-5 flex pt-[10vh] max-sm:pt-[5vh] flex-col max-sm:gap-[15vw] max-md:gap-[25vw] max-lg:gap-[30vw] gap-10 bg-[#fff]",children:t.map((i,s)=>b.jsxs("div",{className:"service sm:p-5 max-lg:flex-col gap-10 flex items-center justify-between w-full h-[50vh] max-sm:gap-5",children:[b.jsxs("div",{className:"service-info pt-3 max-sm:h-[50vh] md:max-w-[25%]",children:[b.jsx("h1",{className:"text-3xl max-sm:text-xl max-lg:text-3xl uppercase font-primary",children:i.category}),b.jsxs("div",{className:"py-5",children:[b.jsx("h1",{className:"text-lg py-2 opacity-60 font-primary uppercase max-sm:text-xs max-lg:text-xl",children:i.title}),b.jsx("p",{className:"text-md w-[90%] font-Secondary max-sm:leading-tight max-sm:text-sm max-lg:text-lg",children:i.description})]})]}),b.jsx("div",{className:"service-img",children:b.jsx("div",{className:"img w-[35%] max-sm:w-[50%] h-full",children:b.jsx("img",{className:"w-full h-full object-cover",src:i.image,alt:i.title,loading:"lazy"})})})]},s))}),b.jsx(fC,{customindex:2})]})});function wO(n,e,t){return Math.max(n,Math.min(e,t))}class WQ{advance(e){var i;if(!this.isRunning)return;let t=!1;if(this.duration&&this.easing){this.currentTime+=e;const s=wO(0,this.currentTime/this.duration,1);t=s>=1;const r=t?1:this.easing(s);this.value=this.from+(this.to-this.from)*r}else this.lerp?(this.value=function(r,o,a,l){return function(u,h,d){return(1-d)*u+d*h}(r,o,1-Math.exp(-a*l))}(this.value,this.to,60*this.lerp,e),Math.round(this.value)===this.to&&(this.value=this.to,t=!0)):(this.value=this.to,t=!0);t&&this.stop(),(i=this.onUpdate)==null||i.call(this,this.value,t)}stop(){this.isRunning=!1}fromTo(e,t,{lerp:i,duration:s,easing:r,onStart:o,onUpdate:a}){this.from=this.value=e,this.to=t,this.lerp=i,this.duration=s,this.easing=r,this.currentTime=0,this.isRunning=!0,o==null||o(),this.onUpdate=a}}class jQ{constructor({wrapper:e,content:t,autoResize:i=!0,debounce:s=250}={}){fo(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});fo(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});fo(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=e,this.content=t,i&&(this.debouncedResize=function(o,a){let l;return function(){let c=arguments,u=this;clearTimeout(l),l=setTimeout(function(){o.apply(u,c)},a)}}(this.resize,s),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var e,t;(e=this.wrapperResizeObserver)==null||e.disconnect(),(t=this.contentResizeObserver)==null||t.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class EO{constructor(){this.events={}}emit(e,...t){let i=this.events[e]||[];for(let s=0,r=i.length;s<r;s++)i[s](...t)}on(e,t){var i;return(i=this.events[e])!=null&&i.push(t)||(this.events[e]=[t]),()=>{var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(r=>t!==r)}}off(e,t){var i;this.events[e]=(i=this.events[e])==null?void 0:i.filter(s=>t!==s)}destroy(){this.events={}}}const pC=100/6;class XQ{constructor(e,{wheelMultiplier:t=1,touchMultiplier:i=1}){fo(this,"onTouchStart",e=>{const{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})});fo(this,"onTouchMove",e=>{const{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e,s=-(t-this.touchStart.x)*this.touchMultiplier,r=-(i-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:s,y:r},this.emitter.emit("scroll",{deltaX:s,deltaY:r,event:e})});fo(this,"onTouchEnd",e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})});fo(this,"onWheel",e=>{let{deltaX:t,deltaY:i,deltaMode:s}=e;t*=s===1?pC:s===2?this.windowWidth:1,i*=s===1?pC:s===2?this.windowHeight:1,t*=this.wheelMultiplier,i*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:i,event:e})});fo(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=e,this.wheelMultiplier=t,this.touchMultiplier=i,this.touchStart={x:null,y:null},this.emitter=new EO,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class $Q{constructor({wrapper:e=window,content:t=document.documentElement,wheelEventsTarget:i=e,eventsTarget:s=i,smoothWheel:r=!0,syncTouch:o=!1,syncTouchLerp:a=.075,touchInertiaMultiplier:l=35,duration:c,easing:u=x=>Math.min(1,1.001-Math.pow(2,-10*x)),lerp:h=.1,infinite:d=!1,orientation:f="vertical",gestureOrientation:g="vertical",touchMultiplier:m=1,wheelMultiplier:v=1,autoResize:p=!0,prevent:y=!1,__experimental__naiveDimensions:_=!1}={}){this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.direction=0,this.onPointerDown=x=>{x.button===1&&this.reset()},this.onVirtualScroll=({deltaX:x,deltaY:E,event:w})=>{if(w.ctrlKey)return;const T=w.type.includes("touch"),A=w.type.includes("wheel");if(this.isTouching=w.type==="touchstart"||w.type==="touchmove",this.options.syncTouch&&T&&w.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const M=x===0&&E===0,S=this.options.gestureOrientation==="vertical"&&E===0||this.options.gestureOrientation==="horizontal"&&x===0;if(M||S)return;let P=w.composedPath();P=P.slice(0,P.indexOf(this.rootElement));const F=this.options.prevent;if(P.find(j=>{var Z,D,ie,R,ce;return j instanceof Element&&((typeof F=="function"?F==null?void 0:F(j):F)||((Z=j.hasAttribute)===null||Z===void 0?void 0:Z.call(j,"data-lenis-prevent"))||T&&((D=j.hasAttribute)===null||D===void 0?void 0:D.call(j,"data-lenis-prevent-touch"))||A&&((ie=j.hasAttribute)===null||ie===void 0?void 0:ie.call(j,"data-lenis-prevent-wheel"))||((R=j.classList)===null||R===void 0?void 0:R.contains("lenis"))&&!(!((ce=j.classList)===null||ce===void 0)&&ce.contains("lenis-stopped")))}))return;if(this.isStopped||this.isLocked)return void w.preventDefault();if(!(this.options.syncTouch&&T||this.options.smoothWheel&&A))return this.isScrolling="native",void this.animate.stop();w.preventDefault();let H=E;this.options.gestureOrientation==="both"?H=Math.abs(E)>Math.abs(x)?E:x:this.options.gestureOrientation==="horizontal"&&(H=x);const ee=T&&this.options.syncTouch,K=T&&w.type==="touchend"&&Math.abs(H)>5;K&&(H=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+H,Object.assign({programmatic:!1},ee?{lerp:K?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(clearTimeout(this.__resetVelocityTimeout),delete this.__resetVelocityTimeout,this.__preventNextNativeScrollEvent)delete this.__preventNextNativeScrollEvent;else if(this.isScrolling===!1||this.isScrolling==="native"){const x=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-x,this.direction=Math.sign(this.animatedScroll-x),this.isScrolling="native",this.emit(),this.velocity!==0&&(this.__resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}},window.lenisVersion="1.1.4",e&&e!==document.documentElement&&e!==document.body||(e=window),this.options={wrapper:e,content:t,wheelEventsTarget:i,eventsTarget:s,smoothWheel:r,syncTouch:o,syncTouchLerp:a,touchInertiaMultiplier:l,duration:c,easing:u,lerp:h,infinite:d,gestureOrientation:g,orientation:f,touchMultiplier:m,wheelMultiplier:v,autoResize:p,prevent:y,__experimental__naiveDimensions:_},this.animate=new WQ,this.emitter=new EO,this.dimensions=new jQ({wrapper:e,content:t,autoResize:p}),this.updateClassName(),this.userData={},this.time=0,this.velocity=this.lastVelocity=0,this.isLocked=!1,this.isStopped=!1,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new XQ(s,{touchMultiplier:m,wheelMultiplier:v}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName()}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:i=!1,lock:s=!1,duration:r=this.options.duration,easing:o=this.options.easing,lerp:a=this.options.lerp,onStart:l,onComplete:c,force:u=!1,programmatic:h=!0,userData:d={}}={}){if(!this.isStopped&&!this.isLocked||u){if(typeof e=="string"&&["top","left","start"].includes(e))e=0;else if(typeof e=="string"&&["bottom","right","end"].includes(e))e=this.limit;else{let f;if(typeof e=="string"?f=document.querySelector(e):e instanceof HTMLElement&&(e!=null&&e.nodeType)&&(f=e),f){if(this.options.wrapper!==window){const m=this.rootElement.getBoundingClientRect();t-=this.isHorizontal?m.left:m.top}const g=f.getBoundingClientRect();e=(this.isHorizontal?g.left:g.top)+this.animatedScroll}}if(typeof e=="number"&&(e+=t,e=Math.round(e),this.options.infinite?h&&(this.targetScroll=this.animatedScroll=this.scroll):e=wO(0,e,this.limit),e!==this.targetScroll)){if(this.userData=d,i)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),c==null||c(this),void(this.userData={});h||(this.targetScroll=e),this.animate.fromTo(this.animatedScroll,e,{duration:r,easing:o,lerp:a,onStart:()=>{s&&(this.isLocked=!0),this.isScrolling="smooth",l==null||l(this)},onUpdate:(f,g)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=f-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=f,this.setScroll(this.scroll),h&&(this.targetScroll=f),g||this.emit(),g&&(this.reset(),this.emit(),c==null||c(this),this.userData={},this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this.__preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextNativeScrollEvent})}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(t,i){return(t%i+i)%i}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.updateClassName())}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.__isStopped=e,this.updateClassName())}get isLocked(){return this.__isLocked}set isLocked(e){this.__isLocked!==e&&(this.__isLocked=e,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isScrolling==="smooth"&&(e+=" lenis-smooth"),e}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}}const qQ=()=>{const n=z.useRef(null);return b.jsx("div",{ref:n,"data-scroll-container":!0,children:b.jsxs(Sh,{children:[b.jsx(GX,{}),b.jsx(ZX,{}),b.jsx(WX,{}),b.jsx(Z6,{}),b.jsx(QX,{}),b.jsx("div",{className:"w-full h-[150vh] bg-white flex flex-col items-center gap-20 ",children:b.jsx(Ya,{text:"THE HISTORY OF BANG & OLUFSEN",textSize:"text-[3rem]",className:"pt-10 font-Decorative"})}),b.jsx(HQ,{}),b.jsx(GQ,{}),b.jsx(A0,{})]})})},Zf=({ShopLandingdata:n})=>{const e=z.useRef(),{scrollYProgress:t}=T0({target:e,offset:["start start","end start"]}),i=S0(t,[0,1],["0vh","60vh"]),s=n.Title.split(" ");return b.jsxs("div",{ref:e,children:[b.jsx("div",{className:"h-[80vh] overflow-hidden",children:b.jsxs(Fa.div,{style:{y:i},className:"flex h-full w-full",children:[b.jsx("img",{className:"h-full w-full object-cover absolute",src:n.Img,alt:""}),b.jsx("div",{className:"h-full w-full max-sm:mt-[15vh] backdrop-blur-sm top-0 flex px-20 max-lg:px-10 max-sm:px-5",children:b.jsxs("div",{className:"text-white flex flex-col justify-center gap-8",children:[b.jsxs("h1",{className:"text-7xl font-primary font-[650] max-md:text-5xl",children:[s[0],b.jsx("br",{}),s.slice(1).join(" ")]}),b.jsx("h2",{className:"text-white font-Secondary w-[60%] tracking-tight leading-5 max-md:text-sm max-sm:w-full",children:n.Para}),b.jsx(vf,{text:"Explore",customclassName:"findoutmore",borderColor:"#fff"})]})})]})}),b.jsxs("div",{className:"h-[40vh] w-full bg-[#FFF9F1] flex flex-col justify-center items-center gap-5",children:[b.jsx("h1",{className:"px-10 text-5xl font-primary font-[650] max-lg:text-3xl text-center max-sm:text-xl",children:n.shopQue}),b.jsx("h2",{className:"font-Secondary text-xl w-[50%] max-lg:text-sm max-xl:text-lg max-sm:w-[80%] text-center max-md:px-10",children:n.shopCompare}),b.jsx(vf,{text:"Explore",customclassName:"explore"})]})]})},YQ=us.memo(({setopenProduct:n,openProduct:e,showproductdata:t})=>{const i=z.useCallback(()=>{n(!1)},[n]);return b.jsxs("div",{className:`fixed h-screen z-[99] ${e?" md:w-[35%]    w-full ":"w-0  "} top-0 transition-all overflow-hidden duration-1000 right-0 bg-[#fff]`,children:[b.jsx("div",{className:"w-full h-[15%] flex justify-end items-center px-10  ",children:b.jsx(m2,{onClick:i,className:"text-2xl max-md:text-lg"})}),b.jsxs("div",{className:`w-full h-[85%] max-md:h-[60%] px-[5%] ${e?" opacity-1 duration-1000  ":" opacity-0 duration-700 "} `,children:[b.jsx("div",{className:"w-full h-[75%] ",children:(t==null?void 0:t.productImage)&&b.jsx("img",{className:"w-full h-full object-cover",src:t.productImage,alt:t.title||"Product Image",loading:"lazy"})}),b.jsx("h2",{className:"font-primary pt-2 uppercase",children:t.title}),b.jsx("h4",{className:"text-2xl pt-1 font-Secondary",children:t.des}),b.jsx("h5",{className:"text-sm font-primary pb-3",children:t.price}),b.jsx(vf,{text:"Experience in Store"})]})]})}),X0=({Productsdata:n,isfirstactive:e})=>{const[t,i]=z.useState(!1),[s,r]=z.useState(""),o=z.useCallback(a=>{r(a),i(!0)},[]);return b.jsxs("div",{className:"flex flex-col justify-between px-2 relative bg-[#FFF9F1] items-center ",children:[b.jsx(YQ,{setopenProduct:i,showproductdata:s,openProduct:t}),n.length===2?b.jsx(Tl,{setshowproductdata:o,items:[n[0],n[1]]}):b.jsxs(b.Fragment,{children:[e==="true"?b.jsx(Tl,{setshowproductdata:o,items:[n[1],n[2]]}):b.jsx(KQ,{setshowproductdata:o,i1:n[0],i2:n[1],i3:n[2]}),b.jsx(Tl,{setshowproductdata:o,height:"h-[90vh]",items:[n[3]]}),b.jsx(Tl,{setshowproductdata:o,items:[n[4],n[5]]}),n.length<8?b.jsx(Tl,{setshowproductdata:o,items:[n[6],n[7]]}):b.jsx(Tl,{height:"h-[80vh]",setshowproductdata:o,items:[n[6],n[7],n[8]]}),n.length>9&&b.jsx(Tl,{height:"h-[80vh]",setshowproductdata:o,items:[n[9],n[10]]})]})]})},Tl=us.memo(({items:n,height:e,setshowproductdata:t})=>b.jsx("div",{className:`md:flex gap-2 w-full max-md:h-full relative ${e||"h-screen"}`,children:n.length>0&&n.map((i,s)=>b.jsxs("div",{onClick:()=>t(i),className:"pb-2 md:mb-0 cursor-pointer max-md:h-[40vh] overflow-hidden w-full relative md:h-full",children:[b.jsx("img",{className:"h-full w-full object-cover",src:i&&(i==null?void 0:i.productImage),alt:i==null?void 0:i.title}),b.jsxs("div",{className:`about text-white absolute bottom-4 max-sm:w-[95%] ${n.length>1?"left-[2%] w-[96%]":"left-[1%] w-[98%]"} max-sm:left-[3%] font-Secondary flex justify-between items-end`,children:[b.jsxs("div",{children:[b.jsx("h1",{className:"md:text-3xl text-xl max-sm:text-sm",children:i==null?void 0:i.title}),b.jsx("h2",{className:"md:text-xl text-sm max-sm:text-xs",children:i==null?void 0:i.des})]}),b.jsx(nh,{})]})]},s))})),KQ=us.memo(({i1:n,i2:e,i3:t,setshowproductdata:i})=>{const s=z.useCallback(r=>{i(r)},[i]);return b.jsxs("div",{className:"h-screen w-full flex max-md:flex-col gap-2 overflow-hidden",children:[b.jsxs("div",{className:"left h-full cursor-pointer pb-2 w-full md:w-[70%] relative",children:[b.jsx("img",{onClick:()=>s(n),className:"w-full h-full object-cover",src:n.productImage,alt:n.title}),b.jsxs("div",{className:"about absolute bottom-4 w-[95%] text-white left-4 font-Secondary flex justify-between items-end",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-3xl max-sm:text-sm",children:n.title}),b.jsx("h2",{className:"text-xl max-sm:text-xs",children:n.des})]}),b.jsx(nh,{})]})]}),b.jsx("div",{className:"right md:h-full h-[50vh] max-md:gap-2 w-full md:w-[30%] flex md:flex-col",children:[e,t].map((r,o)=>b.jsxs("div",{onClick:()=>s(r),className:"cursor-pointer relative overflow-hidden h-full pb-2 md:h-1/2 max-md:w-1/2",children:[b.jsx("img",{className:"w-full h-full object-cover",src:r.productImage,alt:r.title}),b.jsx("div",{className:"about absolute bottom-4 w-[95%] text-white left-4 font-Secondary flex justify-between items-end",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-3xl max-sm:text-sm",children:r.title}),b.jsx("h2",{className:"text-xl max-sm:text-xs",children:r.des})]})})]},o))})]})}),ZQ=()=>{const n=[{title:"BEOSOUND 2",des:"Elegant home speaker",productImage:"/src/assets/images/Speakers/Beosound 2.webp",price:"$3,199"},{title:"BEOSOUND EMERGE",des:"Compact WiFi home speaker",productImage:"/src/assets/images/Speakers/Beosound Emerge.webp",price:"$899"},{title:"BEOLAB 90",des:"Advanced floor standing speakers",productImage:"/src/assets/images/Speakers/Beolab_90.webp",price:"$150,000"},{title:"BEOSOUND A5",des:"Powerful portable speaker",productImage:"/src/assets/images/Speakers/Beosound_A5.webp",price:"$1,499"},{title:"BEOSOUND A1 2ND GEN",des:"Portable Bluetooth speaker",productImage:"/src/assets/images/Speakers/Beosound_A1.webp",price:"$299"},{title:"BEOSOUND A9",des:"Powerful, minimalist speaker",productImage:"/src/assets/images/Speakers/Beosound_A9.webp",price:"$3,399"},{title:"BEOSOUND EXPLORE",des:"Waterproof outdoor speaker",productImage:"/src/assets/images/Speakers/Beosound EXPLORE.webp",price:"$249"},{title:"BEOLAB 8",des:"Powerful compact speaker",productImage:"/src/assets/images/Speakers/BEOLAB 8.webp",price:"$6,598"},{title:"BEOSOUND BALANCE",des:"Outstanding living room speaker",productImage:"/src/assets/images/Speakers/Beosound BALANCE.webp",price:"$3,399"},{title:"BEOLIT 20",des:"Powerful Bluetooth speaker",productImage:"/src/assets/images/Speakers/BEOLIT 20.webp",price:"$599"},{title:"BEOSOUND LEVEL",des:"Portable WiFi Speaker",productImage:"/src/assets/images/Speakers/BEOSOUND LEVE.webp",price:"$1,999"}],e={Img:"/src/assets/images/Speakers/Beosound_A5.webp",Title:"Premium Audio Experience",Para:"Experience rich, authentic sound with Bang & Olufsen's premium speakers, crafted to perfection for stunning clarity and superior acoustics.",shopQue:"WHICH SPEAKER IS RIGHT FOR YOU?",shopCompare:"Compare our speakers and get help finding your perfect match."};return b.jsxs(Sh,{children:[b.jsx(Zf,{ShopLandingdata:e}),b.jsx(X0,{Productsdata:n}),b.jsx("div",{className:"h-[40vh] w-full bg-[#fff]"}),b.jsx(A0,{})]})},QQ=()=>{const n=[{},{title:"BEOVISION HARMONY",des:"Watch the magic unfold",productImage:"src/assets/images/Television/BEOVISION HARMONY.webp",price:"$3,199"},{title:"BEOVISION THEATRE",des:"Cinematic home theatre",productImage:"src/assets/images/Television/BEOVISION THEATRE.webp",price:"$3,199"},{title:"BEOVISION CONTOUR",des:"All-in-one OLED TV",productImage:"src/assets/images/Television/BEOVISION CONTOUR.webp",price:"$3,199"},{title:"BEOREMOTE HALO",des:"Easy access to Music and Smart Home",productImage:"src/assets/images/Television/BEOREMOTE HALO.webp",price:"$900"},{title:"BEOCONNECT CORE",des:"Elevate your legacy",productImage:"src/assets/images/Television/BEOCONNECT CORE.webp",price:"$1150"},{title:"BEOSOUND CORE",des:"The heart of your music",productImage:"src/assets/images/Television/BEOSOUND CORE.webp",price:"$1,100"},{title:"BEOREMOTE ONE",des:"Do more with less",productImage:"src/assets/images/Television/BEOREMOTE ONE.webp",price:"$450"},{title:"BEOSOUND STAGE",des:"Powerful Dolby Atmos soundbar",productImage:"src/assets/images/Television/BEOSOUND STAGE.webp",price:"$1,150"}],e={Img:"src/assets/images/Television/TelevisionLanding.webp",Title:"Ultimate Viewing Experience",Para:"Discover the perfect fusion of cutting-edge technology and sleek design with Bang & Olufsen televisions, delivering stunning visuals and exceptional sound for an immersive entertainment experience.",shopQue:"WHICH TELEVISION IS RIGHT FOR YOU?",shopCompare:"Compare our television and get help finding your perfect match."};return b.jsxs(Sh,{children:[b.jsx(Zf,{ShopLandingdata:e}),b.jsx(X0,{Productsdata:n,isfirstactive:"true"}),b.jsx("div",{className:"h-screen w-full bg-zinc-800"})]})},JQ=()=>{const n=[{title:"BEOSOUND THEATRE",des:"Rule-defying, heart-racing soundbar",productImage:"src/assets/images/Soundbar/BEOSOUND THEATRE.webp",price:"$2,499"},{title:"BEOSOUND STAGE",des:"Powerful Dolby Atmos soundbar",productImage:"src/assets/images/Soundbar/BEOSOUND STAGE.webp",price:"$2,999"}],e={Img:"src/assets/images/Soundbar/SoundbarLanding1.webp",Title:"Powerful Audio Enhancement",Para:"Enhance your home entertainment with Bang & Olufsen soundbars, offering powerful, crystal-clear sound and elegant design to elevate your audio experience to new heights",shopQue:"WHICH SOUNDBAR IS RIGHT FOR YOU?",shopCompare:"Compare our soundbar and get help finding your perfect match."};return b.jsxs(Sh,{children:[b.jsx(Zf,{ShopLandingdata:e}),b.jsx(X0,{Productsdata:n}),b.jsx("div",{className:"h-screen w-full bg-zinc-800"})]})},eJ=()=>{const n=[{title:"BEOPLAY EX",des:"Next-gen wireless earbuds",productImage:"src/assets/images/Headphone/BEOPLAY EX.webp",price:"$399"},{title:"BEOPLAY EX FERRARI EDITION",des:"Next-gen wireless earbuds",productImage:"src/assets/images/Headphone/BEOPLAY EX FERRARI EDITION.webp",price:"$399"},{title:"BEOPLAY E8 2.0",des:"Cutting-edge true wireless earbuds",productImage:"https://i.pinimg.com/564x/98/31/0a/98310a7120988ff284700d9ff6f9010e.jpg",price:"$399"},{title:"BEOPLAY H8i",des:"Comfortable, do-it-all headphones",productImage:"src/assets/images/Headphone/BEOPLAY H8i.webp",price:"$399"},{title:"BEOPLAY H95",des:"Revitalizing a modern classic",productImage:"src/assets/images/Headphone/BEOPLAY H95.webp",price:"$999"},{title:"BEOPLAY H95 FERRARI EDITION",des:"Comfortable, do-it-all headphones",productImage:"/src/assets/images/HomepageImage/hp11.webp",price:"$1,299"},{title:"BEOPLAY H9i",des:"Elite gaming headset",productImage:"src/assets/images/Headphone/BEOPLAY H9i.webp",price:"$499​"},{title:"CASE FOR BEOPLAY H95",des:"Powerful compact speaker",productImage:"src/assets/images/Headphone/CASE FOR BEOPLAY H95.webp"},{title:"BEOPLAY H6",des:"ANC headphones with long battery life",productImage:"src/assets/images/Headphone/BEOPLAY H6.webp",price:"$500"}],e={Img:"/src/assets/images/HomepageImage/hp12.webp",Title:"Superior Sound On-the-Go",Para:"Experience unparalleled audio quality with Bang & Olufsen headphones, designed for comfort and precision to elevate your listening pleasure wherever you are.",shopQue:"WHICH HEADPHONE IS RIGHT FOR YOU?",shopCompare:"Compare our headphone and get help finding your perfect match."};return b.jsxs(Sh,{children:[b.jsx(Zf,{ShopLandingdata:e}),b.jsx(X0,{Productsdata:n}),b.jsx("div",{className:"h-screen w-full bg-zinc-800"}),b.jsx(A0,{})]})},tJ=()=>{const n={Img:"https://images.ctfassets.net/8cd2csgvqd3m/hiqrVzIG3yrNETv6VusUc/07ac1ccbb2356d450128fe405e7479cc/Lifestyle-Beosound-A5-Spaced-Aluminium-PR-2023-Covers-BO4A5332-W3840x2160px.jpg?q=90&fm=webp&w=1440&h=810&fit=fill",Title:"Superior Sound On-the-Go",Para:"Experience unparalleled audio quality with Bang & Olufsen headphones, designed for comfort and precision to elevate your listening pleasure wherever you are."};return b.jsxs(Sh,{children:[b.jsx(Zf,{ShopLandingdata:n}),b.jsx(nJ,{}),b.jsx(A0,{})]})},nJ=()=>{const n=z.useMemo(()=>[{Image:"src/assets/images/WorldOFBnO/WoB1.webp",Title:"RECREATED CLASSICS",Description:"Bringing the past into the future",para:"We have always created products that can stand the test of time. Our Recreated Classics Programme takes our commitment to longevity even further. Join us in celebrating the revival of physical media, where cherished classics meet modern innovation"},{Image:"src/assets/images/WorldOFBnO/WoB2.webp",Title:"KRESTEN BJORN KRAB_BJERRE, CREATIVE DIRECTOR",Description:"Design Stories",para:"“We don't work from technology. We always work from the idea.”Creative Director of Design, Kresten Bjørn Krab-Bjerre, tells us how human experience always guides the development of new Bang & Olufsen products."},{Image:"src/assets/images/WorldOFBnO/WoB3.webp",Description:"Craft Stories",para:"The work has become more refined,” says polishing specialist Finn Nørgaard Klint. As one of our expert craftspeople, Finn’s expertise ensures the high level of finish that makes Bang & Olufsen products so tactile."},{Image:"src/assets/images/WorldOFBnO/WoB4.webp",Title:"BEOLAB 90",Description:"A Vision of Sound",para:"Listen to our head Tonmeister, Geoff Martin, and product designer, André Poulheim, talk about reimagining the way that speakers work. We’ve pushed the boundaries further than ever before, allowing us to create the ultimate speaker. Introducing the Beolab 90, a vision of sound."},{Image:"src/assets/images/WorldOFBnO/WoB5.webp",Title:"LIVE FROM THE 10TH ARRONDISSEMENT",Description:"Sounds of Paris",para:"Music in its wildest form. Crafted on the spot. Right in front of you. Settle in with Bang & Olufsen and Jammcard to enjoy an exclusive improv concert at an intimate venue in Paris. Four groundbreaking artists. 60 minutes of yet-to-be-heard music. "},{Image:"src/assets/images/WorldOFBnO/WoB6.webp",Title:"BANG & OLUFSEN AND AS MONACO",Description:'Bringing the "Sound of Monaco" to life',para:"After this first year of fruitful collaboration, it was natural to continue the adventure together. As we celebrate the centenary of the club in a few months, we are delighted to share this occasion with the support of a partner with whom we share the same quest for excellence in our respective fields."},{Image:"src/assets/images/WorldOFBnO/WoB7.webp",Title:"AT MILIAN FERRARI FLAGSHIP STORE",Description:"Celebrating the launch of the ferrari Collection",para:"Bang & Olufsen hosted a celebration event on Thursday, the 14th of December on the opening day for the new Flagship store on London’s prestigious New Bond Street. Offering an exclusive first look at the space which has been designed to cater to the needs of individual customers by offering an immersive and tailored shopping experience.  "},{Image:"src/assets/images/WorldOFBnO/WoB8.webp",Title:"AT THE MAYFAIR FLAGSHIP STORE",Description:"Celebrating the launch of Mayfair Flagship",para:"Bang & Olufsen hosted a celebration event on Thursday, the 14th of December on the opening day for the new Flagship store on London’s prestigious New Bond Street. Offering an exclusive first look at the space which has been designed to cater to the needs of individual customers by offering an immersive and tailored shopping experience."},{Image:"src/assets/images/WorldOFBnO/WoB9.webp",Title:"INTERVIEW WITH CAROLINE WOZNIACKI",Description:"From her new home in Miami",para:"We caught up with our brand ambassador Caroline about upcoming projects, her brand new home in the exclusive Fisher Island neighbourhood in Miami, and how she balances family and professional life following her successful tennis career."},{Image:"src/assets/images/WorldOFBnO/WoB10.webp",Title:"SINCE 1925",Description:"Crafting Memories",para:"Over the past 95 years, we have built products that embody the principles of iconic, classic and timeless design, craftsmanship and tech. It’s what defined us back when we started, and it’s what drives us towards the future."},{Image:"src/assets/images/WorldOFBnO/WoB11.webp",Title:"THE BEOSYSTEMS",Description:"Timeless, for 50 years and counting",para:"Bang & Olufsen is expanding its Recreated Classics Program with the launch of Beosystems – a limited edition music system that transcends time by bridging the gap between one of our iconic designs from 1972 and today’s cutting-edge digital technology. "},{Image:"src/assets/images/WorldOFBnO/WoB12.webp",Title:"BEOSOUND HISTORY",Description:"What is Beosound?",para:"Beosound was introduced in Bang & Olufsen products in 1992. The first was Beosound Ouverture, a name underlining the end of an era of black boxes and technical products, numbers and technical terms. The conceptual idea behind the product itself was to combine all sources and elements in an all-in-one system. It should stand out in your home environment and invite you in."},{Image:"src/assets/images/WorldOFBnO/WoB17.webp",Title:"THE DESIGNERS OF BEOSOUND A5",Description:"GamFratesi Studio",para:"We visited the Danish-Italian design duo GamFratesi in their studio in Copenhagen to discuss the process, inspiration and work methods that has been used to create our new portable speaker Beosound A5."}],[]);return z.useEffect(()=>{zt.registerPlugin(ft);const e=()=>{const s=zt.utils.toArray(".col1 img");zt.utils.toArray(".col2").forEach(o=>{const a=o.querySelector(".paragraph span"),l=o.querySelector(".title span");zt.timeline({scrollTrigger:{trigger:o,start:"top 60%",end:"top 40%",scrub:1.5}}).from(l,{y:50,opacity:0,duration:1.5}).from(a,{y:50,opacity:0,duration:1.5},"-=1")}),s.forEach(o=>{zt.set(o,{clipPath:"polygon(0 0, .1% 0, .1% .1%, 0 .1%)",opacity:1}),zt.to(o,{clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",duration:1.2,ease:"power2.out",scrollTrigger:{trigger:o,start:"0% 80%",end:"0 40%",scrub:3}})})},t=document.querySelectorAll(".col1 img");let i=0;return t.forEach(s=>{s.addEventListener("load",()=>{i++,i===t.length&&e()})}),()=>{ft.getAll().forEach(s=>s.kill())}},[]),b.jsx("div",{className:"wofbando-container w-full bg-[#ffffff] p-[5%] flex flex-col max-sm:gap-14 gap-20",children:n.map((e,t)=>b.jsxs("div",{className:`row flex w-full h-full ${t%2===1?"flex-row-reverse":""}`,children:[b.jsxs("div",{className:"col1 w-[50%] max-sm:w-[100%] h-fit",children:[b.jsx("img",{className:"w-[80%] max-sm:h-[45vh] max-h-[65vh] max-sm:w-full object-cover",src:e.Image,alt:e.Title}),b.jsx("h1",{className:"font-primary pt-2 opacity-75 max-sm:text-sm",children:e.Title})]}),b.jsx("div",{className:"col2 w-[50%] max-sm:w-[0%]",children:b.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center max-sm:hidden gap-10 max-lg:gap-5",children:[b.jsx("p",{className:"title font-primary py-1 h-fit overflow-hidden max-lg:text-lg text-3xl",children:b.jsx("span",{className:"inline-block w-full h-full",children:e.Description})}),b.jsx("p",{className:"paragraph text-lg font-secondary h-fit overflow-hidden w-[80%] max-lg:text-sm leading-tight",children:b.jsx("span",{className:"inline-block w-full h-full",children:e.para})})]})})]},t))})};function pS(){return pS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pS.apply(this,arguments)}class mC{constructor({scrollElements:e,rootMargin:t="-1px -1px -1px -1px",IORaf:i}){this.scrollElements=void 0,this.rootMargin=void 0,this.IORaf=void 0,this.observer=void 0,this.scrollElements=e,this.rootMargin=t,this.IORaf=i,this._init()}_init(){this.observer=new IntersectionObserver(e=>{e.forEach(t=>{const i=this.scrollElements.find(s=>s.$el===t.target);t.isIntersecting?(i&&(i.isAlreadyIntersected=!0),this._setInview(t)):i&&i.isAlreadyIntersected&&this._setOutOfView(t)})},{rootMargin:this.rootMargin});for(const e of this.scrollElements)this.observe(e.$el)}destroy(){this.observer.disconnect()}observe(e){e&&this.observer.observe(e)}unobserve(e){e&&this.observer.unobserve(e)}_setInview(e){const t=this.scrollElements.find(i=>i.$el===e.target);this.IORaf&&(t==null||t.setInteractivityOn()),!this.IORaf&&(t==null||t.setInview())}_setOutOfView(e){const t=this.scrollElements.find(i=>i.$el===e.target);this.IORaf&&(t==null||t.setInteractivityOff()),!this.IORaf&&(t==null||t.setOutOfView()),t!=null&&t.attributes.scrollRepeat||this.IORaf||this.unobserve(e.target)}}function gC(n,e,t,i,s){return t+((s-n)/(e-n)*(i-t)||0)}function vC(n,e){return n.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t)}class iJ{constructor({$el:e,id:t,modularInstance:i,subscribeElementUpdateFn:s,unsubscribeElementUpdateFn:r,needRaf:o,scrollOrientation:a}){var l,c,u,h,d;this.$el=void 0,this.id=void 0,this.needRaf=void 0,this.attributes=void 0,this.scrollOrientation=void 0,this.isAlreadyIntersected=void 0,this.intersection=void 0,this.metrics=void 0,this.currentScroll=void 0,this.translateValue=void 0,this.progress=void 0,this.lastProgress=void 0,this.modularInstance=void 0,this.progressModularModules=void 0,this.isInview=void 0,this.isInteractive=void 0,this.isInFold=void 0,this.isFirstResize=void 0,this.subscribeElementUpdateFn=void 0,this.unsubscribeElementUpdateFn=void 0,this.$el=e,this.id=t,this.needRaf=o,this.scrollOrientation=a,this.modularInstance=i,this.subscribeElementUpdateFn=s,this.unsubscribeElementUpdateFn=r,this.attributes={scrollClass:(l=this.$el.dataset.scrollClass)!=null?l:"is-inview",scrollOffset:(c=this.$el.dataset.scrollOffset)!=null?c:"0,0",scrollPosition:(u=this.$el.dataset.scrollPosition)!=null?u:"start,end",scrollModuleProgress:this.$el.dataset.scrollModuleProgress!=null,scrollCssProgress:this.$el.dataset.scrollCssProgress!=null,scrollEventProgress:(h=this.$el.dataset.scrollEventProgress)!=null?h:null,scrollSpeed:this.$el.dataset.scrollSpeed!=null?parseFloat(this.$el.dataset.scrollSpeed):null,scrollRepeat:this.$el.dataset.scrollRepeat!=null,scrollCall:(d=this.$el.dataset.scrollCall)!=null?d:null,scrollCallSelf:this.$el.dataset.scrollCallSelf!=null,scrollIgnoreFold:this.$el.dataset.scrollIgnoreFold!=null,scrollEnableTouchSpeed:this.$el.dataset.scrollEnableTouchSpeed!=null},this.intersection={start:0,end:0},this.metrics={offsetStart:0,offsetEnd:0,bcr:{}},this.currentScroll=this.scrollOrientation==="vertical"?window.scrollY:window.scrollX,this.translateValue=0,this.progress=0,this.lastProgress=null,this.progressModularModules=[],this.isInview=!1,this.isInteractive=!1,this.isAlreadyIntersected=!1,this.isInFold=!1,this.isFirstResize=!0,this._init()}_init(){this.needRaf&&(this.modularInstance&&this.attributes.scrollModuleProgress&&this._getProgressModularModules(),this._resize())}onResize({currentScroll:e}){this.currentScroll=e,this._resize()}onRender({currentScroll:e,smooth:t}){const i=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth;if(this.currentScroll=e,this._computeProgress(),this.attributes.scrollSpeed&&!isNaN(this.attributes.scrollSpeed))if(this.attributes.scrollEnableTouchSpeed||t){if(this.isInFold){const s=Math.max(0,this.progress);this.translateValue=s*i*this.attributes.scrollSpeed*-1}else{const s=gC(0,1,-1,1,this.progress);this.translateValue=s*i*this.attributes.scrollSpeed*-1}this.$el.style.transform=this.scrollOrientation==="vertical"?`translate3d(0, ${this.translateValue}px, 0)`:`translate3d(${this.translateValue}px, 0, 0)`}else this.translateValue&&(this.$el.style.transform="translate3d(0, 0, 0)"),this.translateValue=0}setInview(){if(this.isInview)return;this.isInview=!0,this.$el.classList.add(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("enter",e)}setOutOfView(){if(!this.isInview||!this.attributes.scrollRepeat)return;this.isInview=!1,this.$el.classList.remove(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("leave",e)}setInteractivityOn(){this.isInteractive||(this.isInteractive=!0,this.subscribeElementUpdateFn(this))}setInteractivityOff(){this.isInteractive&&(this.isInteractive=!1,this.unsubscribeElementUpdateFn(this),this.lastProgress!=null&&this._computeProgress(vC([0,1],this.lastProgress)))}_resize(){this.metrics.bcr=this.$el.getBoundingClientRect(),this._computeMetrics(),this._computeIntersection(),this.isFirstResize&&(this.isFirstResize=!1,this.isInFold&&this.setInview())}_computeMetrics(){const{top:e,left:t,height:i,width:s}=this.metrics.bcr,r=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,o=this.scrollOrientation==="vertical"?i:s;this.metrics.offsetStart=this.currentScroll+(this.scrollOrientation==="vertical"?e:t)-this.translateValue,this.metrics.offsetEnd=this.metrics.offsetStart+o,this.isInFold=this.metrics.offsetStart<r&&!this.attributes.scrollIgnoreFold}_computeIntersection(){const e=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,t=this.scrollOrientation==="vertical"?this.metrics.bcr.height:this.metrics.bcr.width,i=this.attributes.scrollOffset.split(","),s=i[0]!=null?i[0].trim():"0",r=i[1]!=null?i[1].trim():"0",o=this.attributes.scrollPosition.split(",");let a=o[0]!=null?o[0].trim():"start";const l=o[1]!=null?o[1].trim():"end",c=s.includes("%")?e*parseInt(s.replace("%","").trim())*.01:parseInt(s),u=r.includes("%")?e*parseInt(r.replace("%","").trim())*.01:parseInt(r);switch(this.isInFold&&(a="fold"),a){case"start":default:this.intersection.start=this.metrics.offsetStart-e+c;break;case"middle":this.intersection.start=this.metrics.offsetStart-e+c+.5*t;break;case"end":this.intersection.start=this.metrics.offsetStart-e+c+t;break;case"fold":this.intersection.start=0}switch(l){case"start":this.intersection.end=this.metrics.offsetStart-u;break;case"middle":this.intersection.end=this.metrics.offsetStart-u+.5*t;break;default:this.intersection.end=this.metrics.offsetStart-u+t}if(this.intersection.end<=this.intersection.start)switch(l){case"start":default:this.intersection.end=this.intersection.start+1;break;case"middle":this.intersection.end=this.intersection.start+.5*t;break;case"end":this.intersection.end=this.intersection.start+t}}_computeProgress(e){const t=e??((i=gC(this.intersection.start,this.intersection.end,0,1,this.currentScroll))<0?0:i>1?1:i);var i;if(this.progress=t,t!=this.lastProgress){if(this.lastProgress=t,this.attributes.scrollCssProgress&&this._setCssProgress(t),this.attributes.scrollEventProgress&&this._setCustomEventProgress(t),this.attributes.scrollModuleProgress)for(const s of this.progressModularModules)this.modularInstance&&this.modularInstance.call("onScrollProgress",t,s.moduleName,s.moduleId);t>0&&t<1&&this.setInview(),t===0&&this.setOutOfView(),t===1&&this.setOutOfView()}}_setCssProgress(e=0){this.$el.style.setProperty("--progress",e.toString())}_setCustomEventProgress(e=0){const t=this.attributes.scrollEventProgress;if(!t)return;const i=new CustomEvent(t,{detail:{target:this.$el,progress:e}});window.dispatchEvent(i)}_getProgressModularModules(){if(!this.modularInstance)return;const e=Object.keys(this.$el.dataset).filter(i=>i.includes("module")),t=Object.entries(this.modularInstance.modules);if(e.length)for(const i of e){const s=this.$el.dataset[i];if(!s)return;for(const r of t){const[o,a]=r;s in a&&this.progressModularModules.push({moduleName:o,moduleId:s})}}}_getScrollCallFrom(){const e=vC([this.intersection.start,this.intersection.end],this.currentScroll);return this.intersection.start===e?"start":"end"}_dispatchCall(e,t){var i,s;const r=(i=this.attributes.scrollCall)==null?void 0:i.split(","),o=(s=this.attributes)==null?void 0:s.scrollCallSelf;if(r&&r.length>1){var a;const[l,c,u]=r;let h;h=o?this.$el.dataset[`module${c.trim()}`]:u,this.modularInstance&&this.modularInstance.call(l.trim(),{target:this.$el,way:e,from:t},c.trim(),(a=h)==null?void 0:a.trim())}else if(r){const[l]=r,c=new CustomEvent(l,{detail:{target:this.$el,way:e,from:t}});window.dispatchEvent(c)}}}const sJ=["scrollOffset","scrollPosition","scrollModuleProgress","scrollCssProgress","scrollEventProgress","scrollSpeed"];class rJ{constructor({$el:e,modularInstance:t,triggerRootMargin:i,rafRootMargin:s,scrollOrientation:r}){this.$scrollContainer=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.scrollElements=void 0,this.triggeredScrollElements=void 0,this.RAFScrollElements=void 0,this.scrollElementsToUpdate=void 0,this.IOTriggerInstance=void 0,this.IORafInstance=void 0,this.scrollOrientation=void 0,e?(this.$scrollContainer=e,this.modularInstance=t,this.scrollOrientation=r,this.triggerRootMargin=i??"-1px -1px -1px -1px",this.rafRootMargin=s??"100% 100% 100% 100%",this.scrollElements=[],this.triggeredScrollElements=[],this.RAFScrollElements=[],this.scrollElementsToUpdate=[],this._init()):console.error("Please provide a DOM Element as scrollContainer")}_init(){const e=this.$scrollContainer.querySelectorAll("[data-scroll]"),t=Array.from(e);this._subscribeScrollElements(t),this.IOTriggerInstance=new mC({scrollElements:[...this.triggeredScrollElements],rootMargin:this.triggerRootMargin,IORaf:!1}),this.IORafInstance=new mC({scrollElements:[...this.RAFScrollElements],rootMargin:this.rafRootMargin,IORaf:!0})}destroy(){this.IOTriggerInstance.destroy(),this.IORafInstance.destroy(),this._unsubscribeAllScrollElements()}onResize({currentScroll:e}){for(const t of this.RAFScrollElements)t.onResize({currentScroll:e})}onRender({currentScroll:e,smooth:t}){for(const i of this.scrollElementsToUpdate)i.onRender({currentScroll:e,smooth:t})}removeScrollElements(e){const t=e.querySelectorAll("[data-scroll]");if(t.length){for(let i=0;i<this.triggeredScrollElements.length;i++){const s=this.triggeredScrollElements[i];Array.from(t).indexOf(s.$el)>-1&&(this.IOTriggerInstance.unobserve(s.$el),this.triggeredScrollElements.splice(i,1))}for(let i=0;i<this.RAFScrollElements.length;i++){const s=this.RAFScrollElements[i];Array.from(t).indexOf(s.$el)>-1&&(this.IORafInstance.unobserve(s.$el),this.RAFScrollElements.splice(i,1))}t.forEach(i=>{const s=this.scrollElementsToUpdate.find(o=>o.$el===i),r=this.scrollElements.find(o=>o.$el===i);s&&this._unsubscribeElementUpdate(s),r&&(this.scrollElements=this.scrollElements.filter(o=>o.id!=r.id))})}}addScrollElements(e){const t=e.querySelectorAll("[data-scroll]"),i=[];this.scrollElements.forEach(o=>{i.push(o.id)});const s=Math.max(...i)+1,r=Array.from(t);this._subscribeScrollElements(r,s,!0)}_subscribeScrollElements(e,t=0,i=!1){for(let s=0;s<e.length;s++){const r=e[s],o=this._checkRafNeeded(r),a=new iJ({$el:r,id:t+s,scrollOrientation:this.scrollOrientation,modularInstance:this.modularInstance,subscribeElementUpdateFn:this._subscribeElementUpdate.bind(this),unsubscribeElementUpdateFn:this._unsubscribeElementUpdate.bind(this),needRaf:o});this.scrollElements.push(a),o?(this.RAFScrollElements.push(a),i&&(this.IORafInstance.scrollElements.push(a),this.IORafInstance.observe(a.$el))):(this.triggeredScrollElements.push(a),i&&(this.IOTriggerInstance.scrollElements.push(a),this.IOTriggerInstance.observe(a.$el)))}}_unsubscribeAllScrollElements(){this.scrollElements=[],this.RAFScrollElements=[],this.triggeredScrollElements=[],this.scrollElementsToUpdate=[]}_subscribeElementUpdate(e){this.scrollElementsToUpdate.push(e)}_unsubscribeElementUpdate(e){this.scrollElementsToUpdate=this.scrollElementsToUpdate.filter(t=>t.id!=e.id)}_checkRafNeeded(e){let t=[...sJ];const i=s=>{t=t.filter(r=>r!=s)};if(e.dataset.scrollOffset){if(e.dataset.scrollOffset.split(",").map(s=>s.replace("%","").trim()).join(",")!="0,0")return!0;i("scrollOffset")}else i("scrollOffset");if(e.dataset.scrollPosition){if(e.dataset.scrollPosition.trim()!="top,bottom")return!0;i("scrollPosition")}else i("scrollPosition");if(e.dataset.scrollSpeed&&!isNaN(parseFloat(e.dataset.scrollSpeed)))return!0;i("scrollSpeed");for(const s of t)if(s in e.dataset)return!0;return!1}}class oJ{constructor({resizeElements:e,resizeCallback:t=()=>{}}){this.$resizeElements=void 0,this.isFirstObserve=void 0,this.observer=void 0,this.resizeCallback=void 0,this.$resizeElements=e,this.resizeCallback=t,this.isFirstObserve=!0,this._init()}_init(){this.observer=new ResizeObserver(e=>{var t;!this.isFirstObserve&&((t=this.resizeCallback)==null||t.call(this)),this.isFirstObserve=!1});for(const e of this.$resizeElements)this.observer.observe(e)}destroy(){this.observer.disconnect()}}const _C={wrapper:window,content:document.documentElement,wheelEventsTarget:window,eventsTarget:window,smoothWheel:!0,syncTouch:!1,syncTouchLerp:.075,touchInertiaMultiplier:35,duration:.75,easing:n=>Math.min(1,1.001-Math.pow(2,-10*n)),lerp:.1,infinite:!1,orientation:"vertical",gestureOrientation:"vertical",touchMultiplier:1,wheelMultiplier:1,autoResize:!0};class aJ{constructor({lenisOptions:e={},modularInstance:t,triggerRootMargin:i,rafRootMargin:s,autoResize:r=!0,autoStart:o=!0,scrollCallback:a=()=>{},initCustomTicker:l,destroyCustomTicker:c}={}){this.rafPlaying=void 0,this.lenisInstance=void 0,this.coreInstance=void 0,this.lenisOptions=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.rafInstance=void 0,this.autoResize=void 0,this.autoStart=void 0,this.ROInstance=void 0,this.initCustomTicker=void 0,this.destroyCustomTicker=void 0,this._onRenderBind=void 0,this._onResizeBind=void 0,this._onScrollToBind=void 0,this.lenisOptions=pS({},_C,e),Object.assign(this,{lenisOptions:e,modularInstance:t,triggerRootMargin:i,rafRootMargin:s,autoResize:r,autoStart:o,scrollCallback:a,initCustomTicker:l,destroyCustomTicker:c}),this._onRenderBind=this._onRender.bind(this),this._onScrollToBind=this._onScrollTo.bind(this),this._onResizeBind=this._onResize.bind(this),this.rafPlaying=!1,this._init()}_init(){var e;this.lenisInstance=new $Q({wrapper:this.lenisOptions.wrapper,content:this.lenisOptions.content,eventsTarget:this.lenisOptions.eventsTarget,lerp:this.lenisOptions.lerp,duration:this.lenisOptions.duration,orientation:this.lenisOptions.orientation,gestureOrientation:this.lenisOptions.gestureOrientation,smoothWheel:this.lenisOptions.smoothWheel,syncTouch:this.lenisOptions.syncTouch,syncTouchLerp:this.lenisOptions.syncTouchLerp,touchInertiaMultiplier:this.lenisOptions.touchInertiaMultiplier,wheelMultiplier:this.lenisOptions.wheelMultiplier,touchMultiplier:this.lenisOptions.touchMultiplier,easing:this.lenisOptions.easing}),(e=this.lenisInstance)==null||e.on("scroll",this.scrollCallback),document.documentElement.setAttribute("data-scroll-orientation",this.lenisInstance.options.orientation),requestAnimationFrame(()=>{this.coreInstance=new rJ({$el:this.lenisInstance.rootElement,modularInstance:this.modularInstance,triggerRootMargin:this.triggerRootMargin,rafRootMargin:this.rafRootMargin,scrollOrientation:this.lenisInstance.options.orientation}),this._bindEvents(),this.initCustomTicker&&!this.destroyCustomTicker?console.warn("initCustomTicker callback is declared, but destroyCustomTicker is not. Please pay attention. It could cause trouble."):!this.initCustomTicker&&this.destroyCustomTicker&&console.warn("destroyCustomTicker callback is declared, but initCustomTicker is not. Please pay attention. It could cause trouble."),this.autoStart&&this.start()})}destroy(){var e;this.stop(),this._unbindEvents(),this.lenisInstance.destroy(),(e=this.coreInstance)==null||e.destroy(),requestAnimationFrame(()=>{var t;(t=this.coreInstance)==null||t.destroy()})}_bindEvents(){this._bindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance=new oJ({resizeElements:[document.body],resizeCallback:this._onResizeBind}):window.addEventListener("resize",this._onResizeBind))}_unbindEvents(){this._unbindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance&&this.ROInstance.destroy():window.removeEventListener("resize",this._onResizeBind))}_bindScrollToEvents(e){const t=e||this.lenisInstance.rootElement,i=t==null?void 0:t.querySelectorAll("[data-scroll-to]");i!=null&&i.length&&i.forEach(s=>{s.addEventListener("click",this._onScrollToBind,!1)})}_unbindScrollToEvents(e){const t=e||this.lenisInstance.rootElement,i=t==null?void 0:t.querySelectorAll("[data-scroll-to]");i!=null&&i.length&&i.forEach(s=>{s.removeEventListener("click",this._onScrollToBind,!1)})}_onResize(){requestAnimationFrame(()=>{var e;(e=this.coreInstance)==null||e.onResize({currentScroll:this.lenisInstance.scroll})})}_onRender(){var e,t;(e=this.lenisInstance)==null||e.raf(Date.now()),(t=this.coreInstance)==null||t.onRender({currentScroll:this.lenisInstance.scroll,smooth:this.lenisInstance.isSmooth})}_onScrollTo(e){var t;e.preventDefault();const i=(t=e.currentTarget)!=null?t:null;if(!i)return;const s=i.getAttribute("data-scroll-to-href")||i.getAttribute("href"),r=i.getAttribute("data-scroll-to-offset")||0,o=i.getAttribute("data-scroll-to-duration")||this.lenisOptions.duration||_C.duration;s&&this.scrollTo(s,{offset:typeof r=="string"?parseInt(r):r,duration:typeof o=="string"?parseInt(o):o})}start(){var e;this.rafPlaying||((e=this.lenisInstance)==null||e.start(),this.rafPlaying=!0,this.initCustomTicker?this.initCustomTicker(this._onRenderBind):this._raf())}stop(){var e;this.rafPlaying&&((e=this.lenisInstance)==null||e.stop(),this.rafPlaying=!1,this.destroyCustomTicker?this.destroyCustomTicker(this._onRenderBind):this.rafInstance&&cancelAnimationFrame(this.rafInstance))}removeScrollElements(e){var t;e?(this._unbindScrollToEvents(e),(t=this.coreInstance)==null||t.removeScrollElements(e)):console.error("Please provide a DOM Element as $oldContainer")}addScrollElements(e){var t;e?((t=this.coreInstance)==null||t.addScrollElements(e),requestAnimationFrame(()=>{this._bindScrollToEvents(e)})):console.error("Please provide a DOM Element as $newContainer")}resize(){this._onResizeBind()}scrollTo(e,t){var i;(i=this.lenisInstance)==null||i.scrollTo(e,{offset:t==null?void 0:t.offset,lerp:t==null?void 0:t.lerp,duration:t==null?void 0:t.duration,immediate:t==null?void 0:t.immediate,lock:t==null?void 0:t.lock,force:t==null?void 0:t.force,easing:t==null?void 0:t.easing,onComplete:t==null?void 0:t.onComplete})}_raf(){this._onRenderBind(),this.rafInstance=requestAnimationFrame(()=>this._raf())}}const lJ=()=>{const n=yh();return z.useEffect(()=>{const e=new aJ({el:document.querySelector("[data-scroll-container]"),smooth:!0,lerp:.2});return()=>{e.destroy()}},[]),b.jsxs("div",{className:"relative bg-white","data-scroll-container":!0,children:[b.jsx(M6,{location:n},n.pathname),b.jsx(S5,{mode:"wait",children:b.jsxs(GV,{location:n,children:[b.jsx(El,{path:"/",element:b.jsx(qQ,{})}),b.jsx(El,{path:"/speakers",element:b.jsx(ZQ,{})}),b.jsx(El,{path:"/headphones",element:b.jsx(eJ,{})}),b.jsx(El,{path:"/soundbars",element:b.jsx(JQ,{})}),b.jsx(El,{path:"/television",element:b.jsx(QQ,{})}),b.jsx(El,{path:"/worldb&o",element:b.jsx(tJ,{})})]},n.pathname)})]})};J_.createRoot(document.getElementById("root")).render(b.jsx(ZV,{children:b.jsx(lJ,{})}));
